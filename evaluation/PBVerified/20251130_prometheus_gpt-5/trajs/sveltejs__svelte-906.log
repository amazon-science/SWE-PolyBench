2025-11-10 23:47:32,911 - thread-133013312636608.prometheus.docker.base_container - INFO - Created temporary project directory: /tmp/tmpcyhcg72m/svelte
2025-11-10 23:47:32,911 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Using workdir: /testbed
2025-11-10 23:47:33,349 - thread-133013312636608.prometheus.lang_graph.nodes.noop_node - DEBUG - State run_build: False
2025-11-10 23:47:33,350 - thread-133013312636608.prometheus.lang_graph.nodes.noop_node - DEBUG - State run_existing_test: False
2025-11-10 23:47:33,350 - thread-133013312636608.prometheus.lang_graph.nodes.noop_node - DEBUG - State run_regression_test: True
2025-11-10 23:47:33,350 - thread-133013312636608.prometheus.lang_graph.nodes.noop_node - DEBUG - State run_reproduce_test: True
2025-11-10 23:47:33,350 - thread-133013312636608.prometheus.lang_graph.nodes.noop_node - DEBUG - State number_of_candidate_patch: 5
2025-11-10 23:47:33,350 - thread-133013312636608.prometheus.lang_graph.nodes.issue_classification_subgraph_node - INFO - Enter IssueClassificationSubgraphNode
2025-11-10 23:47:33,351 - thread-133013312636608.prometheus.lang_graph.nodes.issue_classification_context_message_node - DEBUG - Sending query to context provider:
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find ALL self-contained context needed to accurately classify this issue as a bug, feature request, documentation update, or question.

<reasoning>
1. Analyze issue characteristics:
   - Error patterns suggesting bugs
   - New functionality requests
   - Documentation gaps
   - Knowledge-seeking patterns

2. Search strategy:
   - Implementation files matching descriptions
   - Similar existing features
   - Documentation coverage
   - Related Q&A patterns

3. Required context categories:
   - Core implementations
   - Feature interfaces
   - Documentation files
   - Test coverage
   - Configuration settings
   - Issue history
</reasoning>

REQUIREMENTS:
- Context MUST be fully self-contained
- MUST include complete file paths
- MUST include full function/class implementations
- MUST preserve all code structure and formatting
- MUST include line numbers

<examples>
<example id="error-classification">
<issue>
Database queries timing out randomly
Error: Connection pool exhausted
</issue>

<search_targets>
1. Connection pool implementation
2. Database configuration
3. Error handling code
4. Related timeout settings
</search_targets>

<expected_context>
- Complete connection pool class
- Full database configuration
- Error handling implementations
- Timeout management code
</expected_context>
</example>
</examples>

Search priority:
1. Implementation patterns matching issue
2. Feature definitions and interfaces
3. Documentation coverage
4. Configuration schemas
5. Test implementations
6. Integration patterns

2025-11-10 23:47:33,351 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-11-10 23:47:33,352 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find ALL self-contained context needed to accurately classify this issue as a bug, feature request, documentation update, or question.

<reasoning>
1. Analyze issue characteristics:
   - Error patterns suggesting bugs
   - New functionality requests
   - Documentation gaps
   - Knowledge-seeking patterns

2. Search strategy:
   - Implementation files matching descriptions
   - Similar existing features
   - Documentation coverage
   - Related Q&A patterns

3. Required context categories:
   - Core implementations
   - Feature interfaces
   - Documentation files
   - Test coverage
   - Configuration settings
   - Issue history
</reasoning>

REQUIREMENTS:
- Context MUST be fully self-contained
- MUST include complete file paths
- MUST include full function/class implementations
- MUST preserve all code structure and formatting
- MUST include line numbers

<examples>
<example id="error-classification">
<issue>
Database queries timing out randomly
Error: Connection pool exhausted
</issue>

<search_targets>
1. Connection pool implementation
2. Database configuration
3. Error handling code
4. Related timeout settings
</search_targets>

<expected_context>
- Complete connection pool class
- Full database configuration
- Error handling implementations
- Timeout management code
</expected_context>
</example>
</examples>

Search priority:
1. Implementation patterns matching issue
2. Feature definitions and interfaces
3. Documentation coverage
4. Configuration schemas
5. Test implementations
6. Integration patterns

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:47:58,354 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The issue references specific functions and line numbers in src/css/Selector.ts and src/css/Stylesheet.ts, but their implementations are not provided. To classify whether the error is a bug, we need to inspect the attribute selector handling code and any related tests or documentation. The test sample for attribute selectors and the DOM preprocess pipeline are also relevant to understand expected behavior.' query='Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.' extra_requirements='If sending full files is too large, include at minimum the implementations of Selector.apply, applySelector, attributeMatches, any operators mapping in Selector.ts, the Rule/Stylesheet apply logic in Stylesheet.ts (around lines 23 and 343), and the import statements used by these functions.' purpose='This context will let me verify how attribute presence selectors are implemented and confirm whether the error is a bug versus intended behavior.'
2025-11-10 23:47:58,355 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.
2025-11-10 23:47:58,909 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: []
2025-11-10 23:47:58,909 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 memories from memory
2025-11-10 23:47:58,909 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 contexts from memory
2025-11-10 23:47:58,909 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 0 contexts from memory
2025-11-10 23:47:58,910 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-11-10 23:47:58,911 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-11-10 23:47:58,911 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.
Extra requirements: If sending full files is too large, include at minimum the implementations of Selector.apply, applySelector, attributeMatches, any operators mapping in Selector.ts, the Rule/Stylesheet apply logic in Stylesheet.ts (around lines 23 and 343), and the import statements used by these functions.
Purpose: This context will let me verify how attribute presence selectors are implemented and confirm whether the error is a bug versus intended behavior.
2025-11-10 23:48:03,074 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_pHOcbCsmTWfgRMob7mJW7BkQ', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 354, 'prompt_tokens': 2236, 'total_tokens': 2590, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d2bf2a65-a659-43ee-a7e8-b08f2e9a19f9-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_pHOcbCsmTWfgRMob7mJW7BkQ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2236, 'output_tokens': 354, 'total_tokens': 2590, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-11-10 23:48:05,915 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_MFQkp8WUNVQy9pStqzPe7a3J', 'function': {'arguments': '{"relative_path":"src/css/Stylesheet.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 163, 'prompt_tokens': 6075, 'total_tokens': 6238, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--2cd29a13-e7a0-4d6d-b67b-ba8572bcd5dd-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Stylesheet.ts'}, 'id': 'call_MFQkp8WUNVQy9pStqzPe7a3J', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6075, 'output_tokens': 163, 'total_tokens': 6238, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-10 23:48:09,940 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_w57G7hfjEBHAviGOwQBFA5jT', 'function': {'arguments': '{"relative_path":"generators/dom/preprocess.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 291, 'prompt_tokens': 11254, 'total_tokens': 11545, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c2084003-f0a8-4287-a0f2-ab513dd9c7e2-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'generators/dom/preprocess.ts'}, 'id': 'call_w57G7hfjEBHAviGOwQBFA5jT', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11254, 'output_tokens': 291, 'total_tokens': 11545, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-10 23:48:18,248 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_RTApMbdBLkkrOksJC7x7T7Gf', 'function': {'arguments': '{"relative_path":"src/generators/dom/preprocess.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 805, 'prompt_tokens': 11309, 'total_tokens': 12114, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--82a99b36-2274-4448-85a4-74e945bb44be-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/generators/dom/preprocess.ts'}, 'id': 'call_RTApMbdBLkkrOksJC7x7T7Gf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11309, 'output_tokens': 805, 'total_tokens': 12114, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-10 23:48:21,182 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_tKgtZv3TXocU55e3besVF7wS', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-unquoted/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 34, 'prompt_tokens': 17647, 'total_tokens': 17681, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--81a580e7-7a6a-4ac2-8eb6-10406bbe465d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/attribute-selector-unquoted/input.html'}, 'id': 'call_tKgtZv3TXocU55e3besVF7wS', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17647, 'output_tokens': 34, 'total_tokens': 17681, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:48:22,365 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Jct035iaUNzPrjJM5TpsIedN', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-unquoted/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 35, 'prompt_tokens': 17809, 'total_tokens': 17844, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 11264}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1f811f59-df8b-4549-94d4-8dbf7d5fd784-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/attribute-selector-unquoted/expected.css'}, 'id': 'call_Jct035iaUNzPrjJM5TpsIedN', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17809, 'output_tokens': 35, 'total_tokens': 17844, 'input_token_details': {'audio': 0, 'cache_read': 11264}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:48:32,614 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_DWRIls7szY5zssNtuLzgwFOt', 'function': {'arguments': '{"relative_path":"src/generators/dom/preprocess.ts","start_line":501,"end_line":1200}', 'name': 'read_code_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1006, 'prompt_tokens': 17935, 'total_tokens': 18941, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 960, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ddb755d3-ac99-4555-8137-cf93cfa5e659-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'src/generators/dom/preprocess.ts', 'start_line': 501, 'end_line': 1200}, 'id': 'call_DWRIls7szY5zssNtuLzgwFOt', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17935, 'output_tokens': 1006, 'total_tokens': 18941, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 960}}
2025-11-10 23:48:42,550 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='I retrieved the full contents with line numbers for src/css/Selector.ts, src/css/Stylesheet.ts, src/generators/dom/preprocess.ts (note: under src/generators/dom), and the test files test/css/samples/attribute-selector-unquoted/input.html and expected.css. The Selector.ts file includes Selector.apply, applySelector, attributeMatches, and the operators mapping, along with their import statements. The Stylesheet.ts file includes the Rule.apply logic and the Stylesheet.apply logic (around lines 23 and 343), plus relevant imports. This should give you the exact implementation details to verify attribute presence/value selector behavior.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 907, 'prompt_tokens': 18481, 'total_tokens': 19388, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--7924bc9a-8724-45b4-9590-02d67114a0e5-0' usage_metadata={'input_tokens': 18481, 'output_tokens': 907, 'total_tokens': 19388, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-10 23:48:42,554 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If sending full files is too large, include at minimum the implementations of Selector.apply, applySelector, attributeMatches, any operators mapping in Selector.ts, the Rule/Stylesheet apply logic in Stylesheet.ts (around lines 23 and 343), and the import statements used by these functions.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This context will let me verify how attribute presence selectors are implemented and confirm whether the error is a bug versus intended behavior.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: src/css/Selector.ts
Line number range: 1 - 302
Content:
1. import MagicString from 'magic-string';
2. import { gatherPossibleValues, UNKNOWN } from './gatherPossibleValues';
3. import { Validator } from '../validate/index';
4. import { Node } from '../interfaces';
5. 
6. export default class Selector {
7. 	node: Node;
8. 	blocks: Block[];
9. 	localBlocks: Block[];
10. 	used: boolean;
11. 
12. 	constructor(node: Node) {
13. 		this.node = node;
14. 
15. 		this.blocks = groupSelectors(node);
16. 
17. 		// take trailing :global(...) selectors out of consideration
18. 		let i = this.blocks.length;
19. 		while (i > 0) {
20. 			if (!this.blocks[i - 1].global) break;
21. 			i -= 1;
22. 		}
23. 
24. 		this.localBlocks = this.blocks.slice(0, i);
25. 		this.used = this.blocks[0].global;
26. 	}
27. 
28. 	apply(node: Node, stack: Node[]) {
29. 		const toEncapsulate: Node[] = [];
30. 		applySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);
31. 
32. 		if (toEncapsulate.length > 0) {
33. 			toEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {
34. 				node._needsCssAttribute = true;
35. 				block.shouldEncapsulate = true;
36. 			});
37. 
38. 			this.used = true;
39. 		}
40. 	}
41. 
42. 	minify(code: MagicString) {
43. 		let c: number = null;
44. 		this.blocks.forEach((block, i) => {
45. 			if (i > 0) {
46. 				if (block.start - c > 1) {
47. 					code.overwrite(c, block.start, block.combinator.name || ' ');
48. 				}
49. 			}
50. 
51. 			c = block.end;
52. 		});
53. 	}
54. 
55. 	transform(code: MagicString, attr: string) {
56. 		function encapsulateBlock(block: Block) {
57. 			let i = block.selectors.length;
58. 			while (i--) {
59. 				const selector = block.selectors[i];
60. 				if (selector.type === 'PseudoElementSelector' || selector.type === 'PseudoClassSelector') continue;
61. 
62. 				if (selector.type === 'TypeSelector' && selector.name === '*') {
63. 					code.overwrite(selector.start, selector.end, attr);
64. 				} else {
65. 					code.appendLeft(selector.end, attr);
66. 				}
67. 
68. 				break;
69. 			}
70. 
71. 			i = block.selectors.length;
72. 			while (i--) {
73. 				const selector = block.selectors[i];
74. 
75. 				if (selector.type === 'RefSelector') {
76. 					code.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {
77. 						contentOnly: true,
78. 						storeName: false
79. 					});
80. 				}
81. 			}
82. 		}
83. 
84. 		this.blocks.forEach((block, i) => {
85. 			if (block.global) {
86. 				const selector = block.selectors[0];
87. 				const first = selector.children[0];
88. 				const last = selector.children[selector.children.length - 1];
89. 				code.remove(selector.start, first.start).remove(last.end, selector.end);
90. 			}
91. 
92. 			if (block.shouldEncapsulate) encapsulateBlock(block);
93. 		});
94. 	}
95. 
96. 	validate(validator: Validator) {
97. 		this.blocks.forEach((block) => {
98. 			let i = block.selectors.length;
99. 			while (i-- > 1) {
100. 				const selector = block.selectors[i];
101. 				if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
102. 					validator.error(`:global(...) must be the first element in a compound selector`, selector.start);
103. 				}
104. 			}
105. 		});
106. 
107. 		let start = 0;
108. 		let end = this.blocks.length;
109. 
110. 		for (; start < end; start += 1) {
111. 			if (!this.blocks[start].global) break;
112. 		}
113. 
114. 		for (; end > start; end -= 1) {
115. 			if (!this.blocks[end - 1].global) break;
116. 		}
117. 
118. 		for (let i = start; i < end; i += 1) {
119. 			if (this.blocks[i].global) {
120. 				validator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);
121. 			}
122. 		}
123. 	}
124. }
125. 
126. function isDescendantSelector(selector: Node) {
127. 	return selector.type === 'WhiteSpace' || selector.type === 'Combinator';
128. }
129. 
130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {
131. 	const block = blocks.pop();
132. 	if (!block) return false;
133. 
134. 	if (!node) {
135. 		return blocks.every(block => block.global);
136. 	}
137. 
138. 	let i = block.selectors.length;
139. 	let j = stack.length;
140. 
141. 	while (i--) {
142. 		const selector = block.selectors[i];
143. 
144. 		if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
145. 			// TODO shouldn't see this here... maybe we should enforce that :global(...)
146. 			// cannot be sandwiched between non-global selectors?
147. 			return false;
148. 		}
149. 
150. 		if (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {
151. 			continue;
152. 		}
153. 
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}
169. 
170. 		else if (selector.type === 'RefSelector') {
171. 			if (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {
172. 				node._cssRefAttribute = selector.name;
173. 				toEncapsulate.push({ node, block });
174. 				return true;
175. 			}
176. 			return;
177. 		}
178. 
179. 		else {
180. 			// bail. TODO figure out what these could be
181. 			toEncapsulate.push({ node, block });
182. 			return true;
183. 		}
184. 	}
185. 
186. 	if (block.combinator) {
187. 		if (block.combinator.type === 'WhiteSpace') {
188. 			while (stack.length) {
189. 				if (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {
190. 					toEncapsulate.push({ node, block });
191. 					return true;
192. 				}
193. 			}
194. 
195. 			return false;
196. 		} else if (block.combinator.name === '>') {
197. 			if (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {
198. 				toEncapsulate.push({ node, block });
199. 				return true;
200. 			}
201. 			return false;
202. 		}
203. 
204. 		// TODO other combinators
205. 		toEncapsulate.push({ node, block });
206. 		return true;
207. 	}
208. 
209. 	toEncapsulate.push({ node, block });
210. 	return true;
211. }
212. 
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };
221. 
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }
243. 
244. function isDynamic(value: Node) {
245. 	return value.length > 1 || value[0].type !== 'Text';
246. }
247. 
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }
256. 
257. class Block {
258. 	global: boolean;
259. 	combinator: Node;
260. 	selectors: Node[]
261. 	start: number;
262. 	end: number;
263. 	shouldEncapsulate: boolean;
264. 
265. 	constructor(combinator: Node) {
266. 		this.combinator = combinator;
267. 		this.global = false;
268. 		this.selectors = [];
269. 
270. 		this.start = null;
271. 		this.end = null;
272. 
273. 		this.shouldEncapsulate = false;
274. 	}
275. 
276. 	add(selector: Node) {
277. 		if (this.selectors.length === 0) {
278. 			this.start = selector.start;
279. 			this.global = selector.type === 'PseudoClassSelector' && selector.name === 'global';
280. 		}
281. 
282. 		this.selectors.push(selector);
283. 		this.end = selector.end;
284. 	}
285. }
286. 
287. function groupSelectors(selector: Node) {
288. 	let block: Block = new Block(null);
289. 
290. 	const blocks = [block];
291. 
292. 	selector.children.forEach((child: Node, i: number) => {
293. 		if (child.type === 'WhiteSpace' || child.type === 'Combinator') {
294. 			block = new Block(child);
295. 			blocks.push(block);
296. 		} else {
297. 			block.add(child);
298. 		}
299. 	});
300. 
301. 	return blocks;
302. }


File: src/css/Stylesheet.ts
Line number range: 1 - 422
Content:
1. import MagicString from 'magic-string';
2. import { walk } from 'estree-walker';
3. import { getLocator } from 'locate-character';
4. import Selector from './Selector';
5. import getCodeFrame from '../utils/getCodeFrame';
6. import { Validator } from '../validate/index';
7. import { Node, Parsed, Warning } from '../interfaces';
8. 
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }
114. 
115. class Declaration {
116. 	node: Node;
117. 
118. 	constructor(node: Node) {
119. 		this.node = node;
120. 	}
121. 
122. 	transform(code: MagicString, keyframes: Map<string, string>) {
123. 		const property = this.node.property && this.node.property.toLowerCase();
124. 		if (property === 'animation' || property === 'animation-name') {
125. 			this.node.value.children.forEach((block: Node) => {
126. 				if (block.type === 'Identifier') {
127. 					const name = block.name;
128. 					if (keyframes.has(name)) {
129. 						code.overwrite(block.start, block.end, keyframes.get(name));
130. 					}
131. 				}
132. 			});
133. 		}
134. 	}
135. 
136. 	minify(code: MagicString) {
137. 		if (!this.node.property) return; // @apply, and possibly other weird cases?
138. 
139. 		const c = this.node.start + this.node.property.length;
140. 		const first = this.node.value.children  ?
141. 			this.node.value.children[0] :
142. 			this.node.value;
143. 
144. 		let start = first.start;
145. 		while (/\s/.test(code.original[start])) start += 1;
146. 
147. 		if (start - c > 1) {
148. 			code.overwrite(c, start, ':');
149. 		}
150. 	}
151. }
152. 
153. class Atrule {
154. 	node: Node;
155. 	children: (Atrule|Rule)[];
156. 
157. 	constructor(node: Node) {
158. 		this.node = node;
159. 		this.children = [];
160. 	}
161. 
162. 	apply(node: Node, stack: Node[]) {
163. 		if (this.node.name === 'media') {
164. 			this.children.forEach(child => {
165. 				child.apply(node, stack);
166. 			});
167. 		}
168. 
169. 		else if (this.node.name === 'keyframes') {
170. 			this.children.forEach((rule: Rule) => {
171. 				rule.selectors.forEach(selector => {
172. 					selector.used = true;
173. 				});
174. 			});
175. 		}
176. 	}
177. 
178. 	isUsed() {
179. 		return true; // TODO
180. 	}
181. 
182. 	minify(code: MagicString, cascade: boolean) {
183. 		if (this.node.name === 'media') {
184. 			const expressionChar = code.original[this.node.expression.start];
185. 			let c = this.node.start + (expressionChar === '(' ? 6 : 7);
186. 			if (this.node.expression.start > c) code.remove(c, this.node.expression.start);
187. 
188. 			this.node.expression.children.forEach((query: Node) => {
189. 				// TODO minify queries
190. 				c = query.end;
191. 			});
192. 
193. 			code.remove(c, this.node.block.start);
194. 		} else if (this.node.name === 'keyframes') {
195. 			let c = this.node.start + 10;
196. 			if (this.node.expression.start - c > 1) code.overwrite(c, this.node.expression.start, ' ');
197. 			c = this.node.expression.end;
198. 			if (this.node.block.start - c > 0) code.remove(c, this.node.block.start);
199. 		}
200. 
201. 		// TODO other atrules
202. 
203. 		if (this.node.block) {
204. 			let c = this.node.block.start + 1;
205. 
206. 			this.children.forEach(child => {
207. 				if (cascade || child.isUsed()) {
208. 					code.remove(c, child.node.start);
209. 					child.minify(code, cascade);
210. 					c = child.node.end;
211. 				}
212. 			});
213. 
214. 			code.remove(c, this.node.block.end - 1);
215. 		}
216. 	}
217. 
218. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
219. 		if (this.node.name === 'keyframes') {
220. 			this.node.expression.children.forEach(({ type, name, start, end }: Node) => {
221. 				if (type === 'Identifier') {
222. 					if (name.startsWith('-global-')) {
223. 						code.remove(start, start + 8);
224. 					} else {
225. 						code.overwrite(start, end, keyframes.get(name));
226. 					}
227. 				}
228. 			});
229. 		}
230. 
231. 		this.children.forEach(child => {
232. 			child.transform(code, id, keyframes, cascade);
233. 		})
234. 	}
235. 
236. 	validate(validator: Validator) {
237. 		this.children.forEach(child => {
238. 			child.validate(validator);
239. 		});
240. 	}
241. 
242. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
243. 		if (this.node.name !== 'media') return;
244. 
245. 		this.children.forEach(child => {
246. 			child.warnOnUnusedSelector(handler);
247. 		});
248. 	}
249. }
250. 
251. const keys = {};
252. 
253. export default class Stylesheet {
254. 	source: string;
255. 	parsed: Parsed;
256. 	cascade: boolean;
257. 	filename: string;
258. 
259. 	hasStyles: boolean;
260. 	id: string;
261. 
262. 	children: (Rule|Atrule)[];
263. 	keyframes: Map<string, string>;
264. 
265. 	constructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {
266. 		this.source = source;
267. 		this.parsed = parsed;
268. 		this.cascade = cascade;
269. 		this.filename = filename;
270. 
271. 		this.id = `svelte-${parsed.hash}`;
272. 
273. 		this.children = [];
274. 		this.keyframes = new Map();
275. 
276. 		if (parsed.css && parsed.css.children.length) {
277. 			this.hasStyles = true;
278. 
279. 			const stack: (Rule | Atrule)[] = [];
280. 			let currentAtrule: Atrule = null;
281. 
282. 			walk(this.parsed.css, {
283. 				enter: (node: Node) => {
284. 					if (node.type === 'Atrule') {
285. 						const last = stack[stack.length - 1];
286. 
287. 						const atrule = new Atrule(node);
288. 						stack.push(atrule);
289. 
290. 						// this is an awkward special case — @apply (and
291. 						// possibly other future constructs)
292. 						if (last && !(last instanceof Atrule)) return;
293. 
294. 						if (currentAtrule) {
295. 							currentAtrule.children.push(atrule);
296. 						} else {
297. 							this.children.push(atrule);
298. 						}
299. 
300. 						if (node.name === 'keyframes') {
301. 							node.expression.children.forEach((expression: Node) => {
302. 								if (expression.type === 'Identifier' && !expression.name.startsWith('-global-')) {
303. 									this.keyframes.set(expression.name, `${this.id}-${expression.name}`);
304. 								}
305. 							});
306. 						}
307. 
308. 						currentAtrule = atrule;
309. 					}
310. 
311. 					if (node.type === 'Rule') {
312. 						const rule = new Rule(node, currentAtrule);
313. 						stack.push(rule);
314. 
315. 						if (currentAtrule) {
316. 							currentAtrule.children.push(rule);
317. 						} else {
318. 							this.children.push(rule);
319. 						}
320. 					}
321. 				},
322. 
323. 				leave: (node: Node) => {
324. 					if (node.type === 'Rule' || node.type === 'Atrule') stack.pop();
325. 					if (node.type === 'Atrule') currentAtrule = stack[stack.length - 1];
326. 				}
327. 			});
328. 		} else {
329. 			this.hasStyles = false;
330. 		}
331. 	}
332. 
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}
346. 
347. 	render(cssOutputFilename: string, shouldTransformSelectors: boolean) {
348. 		if (!this.hasStyles) {
349. 			return { css: null, cssMap: null };
350. 		}
351. 
352. 		const code = new MagicString(this.source);
353. 
354. 		walk(this.parsed.css, {
355. 			enter: (node: Node) => {
356. 				code.addSourcemapLocation(node.start);
357. 				code.addSourcemapLocation(node.end);
358. 			}
359. 		});
360. 
361. 		if (shouldTransformSelectors) {
362. 			this.children.forEach((child: (Atrule|Rule)) => {
363. 				child.transform(code, this.id, this.keyframes, this.cascade);
364. 			});
365. 		}
366. 
367. 		let c = 0;
368. 		this.children.forEach(child => {
369. 			if (this.cascade || child.isUsed()) {
370. 				code.remove(c, child.node.start);
371. 				child.minify(code, this.cascade);
372. 				c = child.node.end;
373. 			}
374. 		});
375. 
376. 		code.remove(c, this.source.length);
377. 
378. 		return {
379. 			css: code.toString(),
380. 			cssMap: code.generateMap({
381. 				includeContent: true,
382. 				source: this.filename,
383. 				file: cssOutputFilename
384. 			})
385. 		};
386. 	}
387. 
388. 	validate(validator: Validator) {
389. 		this.children.forEach(child => {
390. 			child.validate(validator);
391. 		});
392. 	}
393. 
394. 	warnOnUnusedSelectors(onwarn: (warning: Warning) => void) {
395. 		if (this.cascade) return;
396. 
397. 		let locator;
398. 
399. 		const handler = (selector: Selector) => {
400. 			const pos = selector.node.start;
401. 
402. 			if (!locator) locator = getLocator(this.source);
403. 			const { line, column } = locator(pos);
404. 
405. 			const frame = getCodeFrame(this.source, line, column);
406. 			const message = `Unused CSS selector`;
407. 
408. 			onwarn({
409. 				message,
410. 				frame,
411. 				loc: { line: line + 1, column },
412. 				pos,
413. 				filename: this.filename,
414. 				toString: () => `${message} (${line + 1}:${column})\n${frame}`,
415. 			});
416. 		};
417. 
418. 		this.children.forEach(child => {
419. 			child.warnOnUnusedSelector(handler);
420. 		});
421. 	}
422. }


File: src/generators/dom/preprocess.ts
Line number range: 1 - 500
Content:
1. import Block from './Block';
2. import { trimStart, trimEnd } from '../../utils/trim';
3. import { assign } from '../../shared/index.js';
4. import getStaticAttributeValue from '../../utils/getStaticAttributeValue';
5. import isChildOfComponent from '../shared/utils/isChildOfComponent';
6. import { DomGenerator } from './index';
7. import { Node } from '../../interfaces';
8. import { State } from './interfaces';
9. 
10. function isElseIf(node: Node) {
11. 	return (
12. 		node && node.children.length === 1 && node.children[0].type === 'IfBlock'
13. 	);
14. }
15. 
16. function getChildState(parent: State, child = {}) {
17. 	return assign(
18. 		{},
19. 		parent,
20. 		{ parentNode: null, parentNodes: 'nodes' },
21. 		child || {}
22. 	);
23. }
24. 
25. function createDebuggingComment(node: Node, generator: DomGenerator) {
26. 	const { locate, source } = generator;
27. 
28. 	let c = node.start;
29. 	if (node.type === 'ElseBlock') {
30. 		while (source[c] !== '{') c -= 1;
31. 		c -= 1;
32. 	}
33. 
34. 	let d = node.expression ? node.expression.end : c;
35. 	while (source[d] !== '}') d += 1;
36. 	d += 2;
37. 
38. 	const start = locate(c);
39. 	const loc = `(${start.line + 1}:${start.column})`;
40. 
41. 	return `${loc} ${source.slice(c, d)}`.replace(/\n/g, ' ');
42. }
43. 
44. function cannotUseInnerHTML(node: Node) {
45. 	while (node && node.canUseInnerHTML) {
46. 		node.canUseInnerHTML = false;
47. 		node = node.parent;
48. 	}
49. }
50. 
51. // Whitespace inside one of these elements will not result in
52. // a whitespace node being created in any circumstances. (This
53. // list is almost certainly very incomplete)
54. const elementsWithoutText = new Set([
55. 	'audio',
56. 	'datalist',
57. 	'dl',
58. 	'ol',
59. 	'optgroup',
60. 	'select',
61. 	'ul',
62. 	'video',
63. ]);
64. 
65. const preprocessors = {
66. 	MustacheTag: (
67. 		generator: DomGenerator,
68. 		block: Block,
69. 		state: State,
70. 		node: Node,
71. 		elementStack: Node[],
72. 		componentStack: Node[],
73. 		stripWhitespace: boolean
74. 	) => {
75. 		cannotUseInnerHTML(node);
76. 		node.var = block.getUniqueName('text');
77. 
78. 		const dependencies = block.findDependencies(node.expression);
79. 		block.addDependencies(dependencies);
80. 	},
81. 
82. 	RawMustacheTag: (
83. 		generator: DomGenerator,
84. 		block: Block,
85. 		state: State,
86. 		node: Node,
87. 		elementStack: Node[],
88. 		componentStack: Node[],
89. 		stripWhitespace: boolean
90. 	) => {
91. 		cannotUseInnerHTML(node);
92. 		node.var = block.getUniqueName('raw');
93. 
94. 		const dependencies = block.findDependencies(node.expression);
95. 		block.addDependencies(dependencies);
96. 	},
97. 
98. 	Text: (
99. 		generator: DomGenerator,
100. 		block: Block,
101. 		state: State,
102. 		node: Node,
103. 		elementStack: Node[],
104. 		componentStack: Node[],
105. 		stripWhitespace: boolean
106. 	) => {
107. 		if (!/\S/.test(node.data) && (state.namespace || elementsWithoutText.has(state.parentNodeName))) {
108. 			node.shouldSkip = true;
109. 			return;
110. 		}
111. 
112. 		node.var = block.getUniqueName(`text`);
113. 	},
114. 
115. 	IfBlock: (
116. 		generator: DomGenerator,
117. 		block: Block,
118. 		state: State,
119. 		node: Node,
120. 		inEachBlock: boolean,
121. 		elementStack: Node[],
122. 		componentStack: Node[],
123. 		stripWhitespace: boolean,
124. 		nextSibling: Node
125. 	) => {
126. 		cannotUseInnerHTML(node);
127. 
128. 		const blocks: Block[] = [];
129. 		let dynamic = false;
130. 		let hasIntros = false;
131. 		let hasOutros = false;
132. 
133. 		function attachBlocks(node: Node) {
134. 			node.var = block.getUniqueName(`if_block`);
135. 
136. 			const dependencies = block.findDependencies(node.expression);
137. 			block.addDependencies(dependencies);
138. 
139. 			node._block = block.child({
140. 				comment: createDebuggingComment(node, generator),
141. 				name: generator.getUniqueName(`create_if_block`),
142. 			});
143. 
144. 			node._state = getChildState(state);
145. 
146. 			blocks.push(node._block);
147. 			preprocessChildren(generator, node._block, node._state, node, inEachBlock, elementStack, componentStack, stripWhitespace, nextSibling);
148. 
149. 			if (node._block.dependencies.size > 0) {
150. 				dynamic = true;
151. 				block.addDependencies(node._block.dependencies);
152. 			}
153. 
154. 			if (node._block.hasIntroMethod) hasIntros = true;
155. 			if (node._block.hasOutroMethod) hasOutros = true;
156. 
157. 			if (isElseIf(node.else)) {
158. 				attachBlocks(node.else.children[0]);
159. 			} else if (node.else) {
160. 				node.else._block = block.child({
161. 					comment: createDebuggingComment(node.else, generator),
162. 					name: generator.getUniqueName(`create_if_block`),
163. 				});
164. 
165. 				node.else._state = getChildState(state);
166. 
167. 				blocks.push(node.else._block);
168. 				preprocessChildren(
169. 					generator,
170. 					node.else._block,
171. 					node.else._state,
172. 					node.else,
173. 					inEachBlock,
174. 					elementStack,
175. 					componentStack,
176. 					stripWhitespace,
177. 					nextSibling
178. 				);
179. 
180. 				if (node.else._block.dependencies.size > 0) {
181. 					dynamic = true;
182. 					block.addDependencies(node.else._block.dependencies);
183. 				}
184. 			}
185. 		}
186. 
187. 		attachBlocks(node);
188. 
189. 		blocks.forEach(block => {
190. 			block.hasUpdateMethod = dynamic;
191. 			block.hasIntroMethod = hasIntros;
192. 			block.hasOutroMethod = hasOutros;
193. 		});
194. 
195. 		generator.blocks.push(...blocks);
196. 	},
197. 
198. 	EachBlock: (
199. 		generator: DomGenerator,
200. 		block: Block,
201. 		state: State,
202. 		node: Node,
203. 		inEachBlock: boolean,
204. 		elementStack: Node[],
205. 		componentStack: Node[],
206. 		stripWhitespace: boolean,
207. 		nextSibling: Node
208. 	) => {
209. 		cannotUseInnerHTML(node);
210. 		node.var = block.getUniqueName(`each`);
211. 
212. 		const dependencies = block.findDependencies(node.expression);
213. 		block.addDependencies(dependencies);
214. 
215. 		const indexNames = new Map(block.indexNames);
216. 		const indexName =
217. 			node.index || block.getUniqueName(`${node.context}_index`);
218. 		indexNames.set(node.context, indexName);
219. 
220. 		const listNames = new Map(block.listNames);
221. 		const listName = block.getUniqueName(
222. 			(node.expression.type === 'MemberExpression' && !node.expression.computed) ? node.expression.property.name :
223. 			node.expression.type === 'Identifier' ? node.expression.name :
224. 			`each_value`
225. 		);
226. 		listNames.set(node.context, listName);
227. 
228. 		const context = generator.getUniqueName(node.context);
229. 		const contexts = new Map(block.contexts);
230. 		contexts.set(node.context, context);
231. 
232. 		const indexes = new Map(block.indexes);
233. 		if (node.index) indexes.set(node.index, node.context);
234. 
235. 		const changeableIndexes = new Map(block.changeableIndexes);
236. 		if (node.index) changeableIndexes.set(node.index, node.key);
237. 
238. 		const contextDependencies = new Map(block.contextDependencies);
239. 		contextDependencies.set(node.context, dependencies);
240. 
241. 		if (node.destructuredContexts) {
242. 			for (const i = 0; i < node.destructuredContexts.length; i++) {
243. 				contexts.set(node.destructuredContexts[i], `${context}[${i}]`);
244. 				contextDependencies.set(node.destructuredContexts[i], dependencies);
245. 			}
246. 		}
247. 
248. 		node._block = block.child({
249. 			comment: createDebuggingComment(node, generator),
250. 			name: generator.getUniqueName('create_each_block'),
251. 			expression: node.expression,
252. 			context: node.context,
253. 			key: node.key,
254. 
255. 			contextDependencies,
256. 			contexts,
257. 			indexes,
258. 			changeableIndexes,
259. 
260. 			listName,
261. 			indexName,
262. 
263. 			indexNames,
264. 			listNames,
265. 			params: block.params.concat(listName, context, indexName),
266. 		});
267. 
268. 		node._state = getChildState(state, {
269. 			inEachBlock: true,
270. 		});
271. 
272. 		generator.blocks.push(node._block);
273. 		preprocessChildren(generator, node._block, node._state, node, true, elementStack, componentStack, stripWhitespace, nextSibling);
274. 		block.addDependencies(node._block.dependencies);
275. 		node._block.hasUpdateMethod = node._block.dependencies.size > 0;
276. 
277. 		if (node.else) {
278. 			node.else._block = block.child({
279. 				comment: createDebuggingComment(node.else, generator),
280. 				name: generator.getUniqueName(`${node._block.name}_else`),
281. 			});
282. 
283. 			node.else._state = getChildState(state);
284. 
285. 			generator.blocks.push(node.else._block);
286. 			preprocessChildren(
287. 				generator,
288. 				node.else._block,
289. 				node.else._state,
290. 				node.else,
291. 				inEachBlock,
292. 				elementStack,
293. 				componentStack,
294. 				stripWhitespace,
295. 				nextSibling
296. 			);
297. 			node.else._block.hasUpdateMethod = node.else._block.dependencies.size > 0;
298. 		}
299. 	},
300. 
301. 	Element: (
302. 		generator: DomGenerator,
303. 		block: Block,
304. 		state: State,
305. 		node: Node,
306. 		inEachBlock: boolean,
307. 		elementStack: Node[],
308. 		componentStack: Node[],
309. 		stripWhitespace: boolean,
310. 		nextSibling: Node
311. 	) => {
312. 		if (node.name === 'slot') {
313. 			cannotUseInnerHTML(node);
314. 		}
315. 
316. 		node.attributes.forEach((attribute: Node) => {
317. 			if (attribute.type === 'Attribute' && attribute.value !== true) {
318. 				attribute.value.forEach((chunk: Node) => {
319. 					if (chunk.type !== 'Text') {
320. 						if (node.parent) cannotUseInnerHTML(node.parent);
321. 
322. 						const dependencies = block.findDependencies(chunk.expression);
323. 						block.addDependencies(dependencies);
324. 
325. 						// special case — <option value='{{foo}}'> — see below
326. 						if (
327. 							node.name === 'option' &&
328. 							attribute.name === 'value' &&
329. 							state.selectBindingDependencies
330. 						) {
331. 							state.selectBindingDependencies.forEach(prop => {
332. 								dependencies.forEach((dependency: string) => {
333. 									generator.indirectDependencies.get(prop).add(dependency);
334. 								});
335. 							});
336. 						}
337. 					}
338. 				});
339. 			} else {
340. 				if (node.parent) cannotUseInnerHTML(node.parent);
341. 
342. 				if (attribute.type === 'EventHandler' && attribute.expression) {
343. 					attribute.expression.arguments.forEach((arg: Node) => {
344. 						const dependencies = block.findDependencies(arg);
345. 						block.addDependencies(dependencies);
346. 					});
347. 				} else if (attribute.type === 'Binding') {
348. 					const dependencies = block.findDependencies(attribute.value);
349. 					block.addDependencies(dependencies);
350. 				} else if (attribute.type === 'Transition') {
351. 					if (attribute.intro)
352. 						generator.hasIntroTransitions = block.hasIntroMethod = true;
353. 					if (attribute.outro) {
354. 						generator.hasOutroTransitions = block.hasOutroMethod = true;
355. 						block.outros += 1;
356. 					}
357. 				}
358. 			}
359. 		});
360. 
361. 		// special case — in a case like this...
362. 		//
363. 		//   <select bind:value='foo'>
364. 		//     <option value='{{bar}}'>bar</option>
365. 		//     <option value='{{baz}}'>baz</option>
366. 		//   </option>
367. 		//
368. 		// ...we need to know that `foo` depends on `bar` and `baz`,
369. 		// so that if `foo.qux` changes, we know that we need to
370. 		// mark `bar` and `baz` as dirty too
371. 		if (node.name === 'select') {
372. 			cannotUseInnerHTML(node);
373. 
374. 			const value = node.attributes.find(
375. 				(attribute: Node) => attribute.name === 'value'
376. 			);
377. 			if (value) {
378. 				// TODO does this also apply to e.g. `<input type='checkbox' bind:group='foo'>`?
379. 				const dependencies = block.findDependencies(value.value);
380. 				state.selectBindingDependencies = dependencies;
381. 				dependencies.forEach((prop: string) => {
382. 					generator.indirectDependencies.set(prop, new Set());
383. 				});
384. 			} else {
385. 				state.selectBindingDependencies = null;
386. 			}
387. 		}
388. 
389. 		const isComponent =
390. 			generator.components.has(node.name) || node.name === ':Self';
391. 
392. 		if (isComponent) {
393. 			cannotUseInnerHTML(node);
394. 
395. 			node.var = block.getUniqueName(
396. 				(node.name === ':Self' ? generator.name : node.name).toLowerCase()
397. 			);
398. 
399. 			node._state = getChildState(state, {
400. 				parentNode: `${node.var}._slotted.default`
401. 			});
402. 		} else {
403. 			const slot = getStaticAttributeValue(node, 'slot');
404. 			if (slot && isChildOfComponent(node, generator)) {
405. 				cannotUseInnerHTML(node);
406. 				node.slotted = true;
407. 				// TODO validate slots — no nesting, no dynamic names...
408. 				const component = componentStack[componentStack.length - 1];
409. 				component._slots.add(slot);
410. 			}
411. 
412. 			node.var = block.getUniqueName(
413. 				node.name.replace(/[^a-zA-Z0-9_$]/g, '_')
414. 			);
415. 
416. 			node._state = getChildState(state, {
417. 				isTopLevel: false,
418. 				parentNode: node.var,
419. 				parentNodes: block.getUniqueName(`${node.var}_nodes`),
420. 				parentNodeName: node.name,
421. 				namespace: node.name === 'svg'
422. 					? 'http://www.w3.org/2000/svg'
423. 					: state.namespace,
424. 				allUsedContexts: [],
425. 			});
426. 
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}
439. 	},
440. };
441. 
442. function preprocessChildren(
443. 	generator: DomGenerator,
444. 	block: Block,
445. 	state: State,
446. 	node: Node,
447. 	inEachBlock: boolean,
448. 	elementStack: Node[],
449. 	componentStack: Node[],
450. 	stripWhitespace: boolean,
451. 	nextSibling: Node
452. ) {
453. 	// glue text nodes together
454. 	const cleaned: Node[] = [];
455. 	let lastChild: Node;
456. 
457. 	node.children.forEach((child: Node) => {
458. 		if (child.type === 'Comment') return;
459. 
460. 		if (child.type === 'Text' && lastChild && lastChild.type === 'Text') {
461. 			lastChild.data += child.data;
462. 			lastChild.end = child.end;
463. 		} else {
464. 			if (child.type === 'Text' && stripWhitespace && cleaned.length === 0) {
465. 				child.data = trimStart(child.data);
466. 				if (child.data) cleaned.push(child);
467. 			} else {
468. 				cleaned.push(child);
469. 			}
470. 		}
471. 
472. 		lastChild = child;
473. 	});
474. 
475. 	lastChild = null;
476. 
477. 	cleaned.forEach((child: Node, i: number) => {
478. 		child.parent = node;
479. 		child.canUseInnerHTML = !generator.hydratable;
480. 
481. 		const preprocessor = preprocessors[child.type];
482. 		if (preprocessor) preprocessor(generator, block, state, child, inEachBlock, elementStack, componentStack, stripWhitespace, cleaned[i + 1] || nextSibling);
483. 
484. 		if (child.shouldSkip) return;
485. 
486. 		if (lastChild) lastChild.next = child;
487. 		child.prev = lastChild;
488. 
489. 		lastChild = child;
490. 	});
491. 
492. 	// We want to remove trailing whitespace inside an element/component/block,
493. 	// *unless* there is no whitespace between this node and its next sibling
494. 	if (stripWhitespace && lastChild && lastChild.type === 'Text') {
495. 		const shouldTrim = (
496. 			nextSibling ?  (nextSibling.type === 'Text' && /^\s/.test(nextSibling.data)) : !inEachBlock
497. 		);
498. 
499. 		if (shouldTrim) {
500. 			lastChild.data = trimEnd(lastChild.data);


File: src/generators/dom/preprocess.ts
Line number range: 501 - 1200
Content:
501. 			if (!lastChild.data) {
502. 				cleaned.pop();
503. 				lastChild = cleaned[cleaned.length - 1];
504. 				lastChild.next = null;
505. 			}
506. 		}
507. 	}
508. 
509. 	node.children = cleaned;
510. }
511. 
512. export default function preprocess(
513. 	generator: DomGenerator,
514. 	namespace: string,
515. 	node: Node
516. ) {
517. 	const block = new Block({
518. 		generator,
519. 		name: '@create_main_fragment',
520. 		key: null,
521. 
522. 		contexts: new Map(),
523. 		indexes: new Map(),
524. 		changeableIndexes: new Map(),
525. 		contextDependencies: new Map(),
526. 
527. 		params: ['state'],
528. 		indexNames: new Map(),
529. 		listNames: new Map(),
530. 
531. 		dependencies: new Set(),
532. 	});
533. 
534. 	const state: State = {
535. 		namespace,
536. 		parentNode: null,
537. 		parentNodes: 'nodes'
538. 	};
539. 
540. 	generator.blocks.push(block);
541. 	preprocessChildren(generator, block, state, node, false, [], [], true, null);
542. 	block.hasUpdateMethod = true;
543. 
544. 	return { block, state };
545. }


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-11-10 23:49:12,085 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requests implementations of Selector.apply, applySelector, attributeMatches, and operators mapping in Selector.ts.\n   - This context contains the Selector.apply method which triggers applySelector and sets encapsulation flags, directly addressing how selectors are applied.\n2. Extended relevance:\n   - It shows how toEncapsulate is populated and how blocks are marked used, essential for understanding selector application lifecycle.', relative_path='src/css/Selector.ts', start_line=28, end_line=40), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requests applySelector implementation.\n   - This context provides the full applySelector function, including logic for class, id, attribute, and type selectors, combinators, and how encapsulation is decided.\n2. Extended relevance:\n   - It includes the branch handling AttributeSelector, calling attributeMatches with matcher and unquoted value, crucial for attribute selector behavior including presence and unquoted values.', relative_path='src/css/Selector.ts', start_line=130, end_line=211), ContextOutput(reasoning="1. Query requirement analysis:\n   - The user requests the operators mapping used by attribute selector logic.\n   - This context defines the operators regex builders for '=', '~=', '|=', '^=', '$=', '*='.\n2. Extended relevance:\n   - It is critical for understanding how attributeMatchers perform the regex checks for different operators.", relative_path='src/css/Selector.ts', start_line=213, end_line=220), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requests attributeMatches implementation.\n   - This context contains the complete attributeMatches function, including handling of presence selectors (operator === null), boolean attributes, dynamic values, and regex testing.\n2. Extended relevance:\n   - It shows dependency on gatherPossibleValues/UNKNOWN to treat dynamic expressions, essential for correctness when attributes are not statically known.', relative_path='src/css/Selector.ts', start_line=222, end_line=242), ContextOutput(reasoning='1. Query requirement analysis:\n   - Unquoted attribute values are part of the test case ([foo=bar]).\n   - This context shows unquote behavior: if value is Identifier, use its name; if quoted string, strip quotes.\n2. Extended relevance:\n   - applySelector passes selector.value through unquote before matching; understanding unquote is essential to verify unquoted attribute selector behavior.', relative_path='src/css/Selector.ts', start_line=248, end_line=255), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user asked for import statements used by these functions.\n   - This context includes imports for MagicString, gatherPossibleValues/UNKNOWN, Validator, and Node, which are referenced in the included functions.\n2. Extended relevance:\n   - These imports indicate dependencies required for Selector.ts functionality.', relative_path='src/css/Selector.ts', start_line=1, end_line=4), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requests Rule.apply logic around line 23.\n   - This context shows Rule.apply delegating to Selector.apply for each selector.\n2. Extended relevance:\n   - It ties stylesheet rules to selector application, necessary to understand cascade of apply from stylesheet to selectors.', relative_path='src/css/Stylesheet.ts', start_line=22, end_line=24), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requests Stylesheet.apply logic around line 343.\n   - This context includes Stylesheet.apply method, showing early returns for cascade and iteration over children to call child.apply.\n2. Extended relevance:\n   - It is essential to see how the generator triggers selector application across the stylesheet.', relative_path='src/css/Stylesheet.ts', start_line=333, end_line=345), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user asked for import statements used by these functions.\n   - This context includes imports at the top of Stylesheet.ts for MagicString, walk, getLocator, Selector, getCodeFrame, Validator, Node/Parsed/Warning.\n2. Extended relevance:\n   - These imports are dependencies for apply and other methods in Stylesheet.', relative_path='src/css/Stylesheet.ts', start_line=1, end_line=8), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requested content of generators/dom/preprocess.ts; at minimum we should include where stylesheet.apply is invoked.\n   - This context shows the exact call generator.stylesheet.apply(node, elementStack) inside the Element preprocessor.\n2. Extended relevance:\n   - It demonstrates when and how the DOM generator triggers CSS selector application on each element node.', relative_path='src/generators/dom/preprocess.ts', start_line=427, end_line=429), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user asked for import statements of preprocess.ts.\n   - This context includes the top-level imports for Block, trim utilities, assign, getStaticAttributeValue, isChildOfComponent, DomGenerator, Node, and State.\n2. Extended relevance:\n   - These provide dependencies and types used in the preprocessor where stylesheet.apply is called.', relative_path='src/generators/dom/preprocess.ts', start_line=1, end_line=9), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requested full content of test/css/samples/attribute-selector-unquoted/input.html.\n   - This context includes the entire file content with line numbers, showing an unquoted attribute selector [foo=bar].\n2. Extended relevance:\n   - It supplies the test setup to validate selector behavior.', relative_path='test/css/samples/attribute-selector-unquoted/input.html', start_line=1, end_line=7), ContextOutput(reasoning='1. Query requirement analysis:\n   - The user requested full content of test/css/samples/attribute-selector-unquoted/expected.css.\n   - This context includes the entire expected output: the selector [foo=bar] transformed with the svelte attribute.\n2. Extended relevance:\n   - It shows the expected transformation result for verification of attribute presence/unquoted matching.', relative_path='test/css/samples/attribute-selector-unquoted/expected.css', start_line=1, end_line=1)]
2025-11-10 23:49:12,090 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Storing 13 contexts to memory for query: Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.
2025-11-10 23:49:12,412 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-11-10 23:49:12,413 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 13 new contexts to 0 existing contexts
2025-11-10 23:49:12,413 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 13 total contexts (removed 0 duplicates)
2025-11-10 23:49:12,415 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find ALL self-contained context needed to accurately classify this issue as a bug, feature request, documentation update, or question.

<reasoning>
1. Analyze issue characteristics:
   - Error patterns suggesting bugs
   - New functionality requests
   - Documentation gaps
   - Knowledge-seeking patterns

2. Search strategy:
   - Implementation files matching descriptions
   - Similar existing features
   - Documentation coverage
   - Related Q&A patterns

3. Required context categories:
   - Core implementations
   - Feature interfaces
   - Documentation files
   - Test coverage
   - Configuration settings
   - Issue history
</reasoning>

REQUIREMENTS:
- Context MUST be fully self-contained
- MUST include complete file paths
- MUST include full function/class implementations
- MUST preserve all code structure and formatting
- MUST include line numbers

<examples>
<example id="error-classification">
<issue>
Database queries timing out randomly
Error: Connection pool exhausted
</issue>

<search_targets>
1. Connection pool implementation
2. Database configuration
3. Error handling code
4. Related timeout settings
</search_targets>

<expected_context>
- Complete connection pool class
- Full database configuration
- Error handling implementations
- Timeout management code
</expected_context>
</example>
</examples>

Search priority:
1. Implementation patterns matching issue
2. Feature definitions and interfaces
3. Documentation coverage
4. Configuration schemas
5. Test implementations
6. Integration patterns

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content (with line numbers) of src/css/Selector.ts, src/css/Stylesheet.ts, generators/dom/preprocess.ts, and test/css/samples/attribute-selector-unquoted/input.html and expected.css.
Extra Requirements: If sending full files is too large, include at minimum the implementations of Selector.apply, applySelector, attributeMatches, any operators mapping in Selector.ts, the Rule/Stylesheet apply logic in Stylesheet.ts (around lines 23 and 343), and the import statements used by these functions.
Purpose: This context will let me verify how attribute presence selectors are implemented and confirm whether the error is a bug versus intended behavior.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: src/css/Selector.ts
Line number range: 1 - 4
Content:
1. import MagicString from 'magic-string';
2. import { gatherPossibleValues, UNKNOWN } from './gatherPossibleValues';
3. import { Validator } from '../validate/index';
4. import { Node } from '../interfaces';


File: src/css/Selector.ts
Line number range: 28 - 40
Content:
28. 	apply(node: Node, stack: Node[]) {
29. 		const toEncapsulate: Node[] = [];
30. 		applySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);
31. 
32. 		if (toEncapsulate.length > 0) {
33. 			toEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {
34. 				node._needsCssAttribute = true;
35. 				block.shouldEncapsulate = true;
36. 			});
37. 
38. 			this.used = true;
39. 		}
40. 	}


File: src/css/Selector.ts
Line number range: 130 - 211
Content:
130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {
131. 	const block = blocks.pop();
132. 	if (!block) return false;
133. 
134. 	if (!node) {
135. 		return blocks.every(block => block.global);
136. 	}
137. 
138. 	let i = block.selectors.length;
139. 	let j = stack.length;
140. 
141. 	while (i--) {
142. 		const selector = block.selectors[i];
143. 
144. 		if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
145. 			// TODO shouldn't see this here... maybe we should enforce that :global(...)
146. 			// cannot be sandwiched between non-global selectors?
147. 			return false;
148. 		}
149. 
150. 		if (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {
151. 			continue;
152. 		}
153. 
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}
169. 
170. 		else if (selector.type === 'RefSelector') {
171. 			if (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {
172. 				node._cssRefAttribute = selector.name;
173. 				toEncapsulate.push({ node, block });
174. 				return true;
175. 			}
176. 			return;
177. 		}
178. 
179. 		else {
180. 			// bail. TODO figure out what these could be
181. 			toEncapsulate.push({ node, block });
182. 			return true;
183. 		}
184. 	}
185. 
186. 	if (block.combinator) {
187. 		if (block.combinator.type === 'WhiteSpace') {
188. 			while (stack.length) {
189. 				if (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {
190. 					toEncapsulate.push({ node, block });
191. 					return true;
192. 				}
193. 			}
194. 
195. 			return false;
196. 		} else if (block.combinator.name === '>') {
197. 			if (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {
198. 				toEncapsulate.push({ node, block });
199. 				return true;
200. 			}
201. 			return false;
202. 		}
203. 
204. 		// TODO other combinators
205. 		toEncapsulate.push({ node, block });
206. 		return true;
207. 	}
208. 
209. 	toEncapsulate.push({ node, block });
210. 	return true;
211. }


File: src/css/Selector.ts
Line number range: 213 - 220
Content:
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };


File: src/css/Selector.ts
Line number range: 222 - 242
Content:
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }


File: src/css/Selector.ts
Line number range: 248 - 255
Content:
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }


File: src/css/Stylesheet.ts
Line number range: 1 - 8
Content:
1. import MagicString from 'magic-string';
2. import { walk } from 'estree-walker';
3. import { getLocator } from 'locate-character';
4. import Selector from './Selector';
5. import getCodeFrame from '../utils/getCodeFrame';
6. import { Validator } from '../validate/index';
7. import { Node, Parsed, Warning } from '../interfaces';
8. 


File: src/css/Stylesheet.ts
Line number range: 22 - 24
Content:
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}


File: src/css/Stylesheet.ts
Line number range: 333 - 345
Content:
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}


File: src/generators/dom/preprocess.ts
Line number range: 1 - 9
Content:
1. import Block from './Block';
2. import { trimStart, trimEnd } from '../../utils/trim';
3. import { assign } from '../../shared/index.js';
4. import getStaticAttributeValue from '../../utils/getStaticAttributeValue';
5. import isChildOfComponent from '../shared/utils/isChildOfComponent';
6. import { DomGenerator } from './index';
7. import { Node } from '../../interfaces';
8. import { State } from './interfaces';
9. 


File: src/generators/dom/preprocess.ts
Line number range: 427 - 429
Content:
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:49:23,560 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The context includes the exact implementation of attributeMatches and the operators map in src/css/Selector.ts, along with the calling site in applySelector and the stylesheet application path. The failing line (operators[operator] when operator is null) is visible, explaining the TypeError. Tests show behavior for [foo=bar], and the issue concerns presence selector [foo] with an attribute value, which the current code mishandles. This is sufficient to classify the issue as a bug without additional files or docs.' query='' extra_requirements='' purpose='No further context is needed to classify this as a bug caused by handling of presence attribute selectors when the HTML attribute has a value.'
2025-11-10 23:49:23,561 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='src/css/Selector.ts', content="1. import MagicString from 'magic-string';\n2. import { gatherPossibleValues, UNKNOWN } from './gatherPossibleValues';\n3. import { Validator } from '../validate/index';\n4. import { Node } from '../interfaces';", start_line_number=1, end_line_number=4), Context(relative_path='src/css/Selector.ts', content='28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}', start_line_number=28, end_line_number=40), Context(relative_path='src/css/Selector.ts', content="130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === 'PseudoClassSelector' && selector.name === 'global') {\n145. \t\t\t// TODO shouldn't see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === 'ClassSelector') {\n155. \t\t\tif (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === 'IdSelector') {\n159. \t\t\tif (!attributeMatches(node, 'id', selector.name, '=', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === 'AttributeSelector') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === 'TypeSelector') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== '*') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === 'RefSelector') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === 'WhiteSpace') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === '>') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }", start_line_number=130, end_line_number=211), Context(relative_path='src/css/Selector.ts', content="213. const operators = {\n214. \t'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t'~=': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n220. };", start_line_number=213, end_line_number=220), Context(relative_path='src/css/Selector.ts', content="222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === 'Text') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }", start_line_number=222, end_line_number=242), Context(relative_path='src/css/Selector.ts', content='248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }', start_line_number=248, end_line_number=255), Context(relative_path='src/css/Stylesheet.ts', content="1. import MagicString from 'magic-string';\n2. import { walk } from 'estree-walker';\n3. import { getLocator } from 'locate-character';\n4. import Selector from './Selector';\n5. import getCodeFrame from '../utils/getCodeFrame';\n6. import { Validator } from '../validate/index';\n7. import { Node, Parsed, Warning } from '../interfaces';\n8. ", start_line_number=1, end_line_number=8), Context(relative_path='src/css/Stylesheet.ts', content='22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}', start_line_number=22, end_line_number=24), Context(relative_path='src/css/Stylesheet.ts', content='333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}', start_line_number=333, end_line_number=345), Context(relative_path='src/generators/dom/preprocess.ts', content="1. import Block from './Block';\n2. import { trimStart, trimEnd } from '../../utils/trim';\n3. import { assign } from '../../shared/index.js';\n4. import getStaticAttributeValue from '../../utils/getStaticAttributeValue';\n5. import isChildOfComponent from '../shared/utils/isChildOfComponent';\n6. import { DomGenerator } from './index';\n7. import { Node } from '../../interfaces';\n8. import { State } from './interfaces';\n9. ", start_line_number=1, end_line_number=9), Context(relative_path='src/generators/dom/preprocess.ts', content='427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. ', start_line_number=427, end_line_number=429), Context(relative_path='test/css/samples/attribute-selector-unquoted/expected.css', content='1. [foo=bar][svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/attribute-selector-unquoted/input.html', content="1. <div foo='bar'></div>\n2. \n3. <style>\n4. \t[foo=bar] {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", start_line_number=1, end_line_number=7)]
2025-11-10 23:49:30,402 - thread-133013312636608.prometheus.lang_graph.nodes.issue_classifier_node - INFO - IssueClassifierNode classified the issue as: bug
2025-11-10 23:49:30,403 - thread-133013312636608.prometheus.lang_graph.nodes.issue_classification_subgraph_node - INFO - issue_type: bug
2025-11-10 23:49:30,405 - thread-133013312636608.prometheus.docker.base_container - INFO - Pulling docker image: ghcr.io/timesler/swe-polybench.eval.x86_64.sveltejs__svelte-906:latest
2025-11-10 23:50:10,112 - thread-133013312636608.prometheus.docker.base_container - INFO - Tagging pulled image as: prometheus_user_defined_container_6e85b742e2
2025-11-10 23:50:10,120 - thread-133013312636608.prometheus.docker.base_container - INFO - Starting container from image prometheus_user_defined_container_6e85b742e2
2025-11-10 23:50:10,546 - thread-133013312636608.prometheus.docker.base_container - INFO - Starting persistent shell for interactive mode...
2025-11-10 23:50:10,933 - thread-133013312636608.prometheus.docker.base_container - INFO - Persistent shell is ready
2025-11-10 23:50:10,933 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - Enter IssueBugSubgraphNode
2025-11-10 23:50:10,937 - thread-133013312636608.prometheus.lang_graph.nodes.bug_get_regression_tests_subgraph_node - INFO - Enter bug_get_regression_tests_subgraph_node
2025-11-10 23:50:10,939 - thread-133013312636608.prometheus.lang_graph.nodes.bug_get_regression_context_message_node - DEBUG - Sending query to context provider subgraph:
We are currently solving the following issue within our repository. Here is the issue text:

--- BEGIN ISSUE ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:

--- END ISSUE ---

And we need to find relevant existing tests that can be used as regression tests for this issue.

OBJECTIVE: Find 8 relevant existing test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 8 complete, self-contained test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
- Must include the identification of the test case (e.g., class name and method name)
- Must preserve exact file paths and line numbers

<examples>
--- BEGIN ISSUE ---
Title: parse_iso8601 drops timezone information for 'Z' suffix
Body: The helper `parse_iso8601` in `utils/datetime.py` incorrectly returns a naive datetime when the input ends with 'Z' (UTC). For example, "2024-10-12T09:15:00Z" becomes a naive dt instead of timezone-aware UTC. This breaks downstream scheduling.
Expected: Return timezone-aware datetime in UTC for 'Z' inputs and preserve offsets like "+09:00".
--- END ISSUE ---
--- BEGIN TEST CASES ---
File: tests/test_datetime.py
Line Number: 118-156
Content:
import datetime
import pytest

from utils.datetime import parse_iso8601  # target under test

def test_z_suffix_returns_utc_aware(self):
    # Input ending with 'Z' should be interpreted as UTC and be timezone-aware
    s = "2024-10-12T09:15:00Z"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    # Use UTC comparison that works across pytz/zoneinfo
    assert dt.utcoffset() == datetime.timedelta(0)

def test_offset_preserved(self):
    # Offset like +09:00 should be preserved (e.g., Asia/Tokyo offset)
    s = "2024-10-12T18:00:00+09:00"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    assert dt.utcoffset() == datetime.timedelta(hours=9)
--- END TEST CASES ---
</example>

2025-11-10 23:50:10,939 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-11-10 23:50:10,941 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
We are currently solving the following issue within our repository. Here is the issue text:

--- BEGIN ISSUE ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:

--- END ISSUE ---

And we need to find relevant existing tests that can be used as regression tests for this issue.

OBJECTIVE: Find 8 relevant existing test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 8 complete, self-contained test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
- Must include the identification of the test case (e.g., class name and method name)
- Must preserve exact file paths and line numbers

<examples>
--- BEGIN ISSUE ---
Title: parse_iso8601 drops timezone information for 'Z' suffix
Body: The helper `parse_iso8601` in `utils/datetime.py` incorrectly returns a naive datetime when the input ends with 'Z' (UTC). For example, "2024-10-12T09:15:00Z" becomes a naive dt instead of timezone-aware UTC. This breaks downstream scheduling.
Expected: Return timezone-aware datetime in UTC for 'Z' inputs and preserve offsets like "+09:00".
--- END ISSUE ---
--- BEGIN TEST CASES ---
File: tests/test_datetime.py
Line Number: 118-156
Content:
import datetime
import pytest

from utils.datetime import parse_iso8601  # target under test

def test_z_suffix_returns_utc_aware(self):
    # Input ending with 'Z' should be interpreted as UTC and be timezone-aware
    s = "2024-10-12T09:15:00Z"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    # Use UTC comparison that works across pytz/zoneinfo
    assert dt.utcoffset() == datetime.timedelta(0)

def test_offset_preserved(self):
    # Offset like +09:00 should be preserved (e.g., Asia/Tokyo offset)
    s = "2024-10-12T18:00:00+09:00"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    assert dt.utcoffset() == datetime.timedelta(hours=9)
--- END TEST CASES ---
</example>

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:50:32,842 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The repository tree is available, but the actual test file contents are missing. The task requires returning 8 complete, self-contained test cases with exact imports, setup, assertions, and precise line numbers. Without the contents of the test harness and the specific sample files, it's impossible to extract test cases or determine line numbers. The most relevant area appears to be test/css, which likely exercises attribute selectors and scoping, but we need the code in test/css/index.js and the sample assets to select and quote the tests accurately." query='Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.' extra_requirements='If sending full folders is too large, include at minimum the import section and test definitions in test/css/index.js plus input.html and expected.css (and expected.html where present) for each listed sample, with line numbers.' purpose='I need these contents to extract 8 relevant existing tests with exact code and line numbers to use as regression tests for the attribute selector issue.'
2025-11-10 23:50:32,844 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.
2025-11-10 23:50:33,385 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: []
2025-11-10 23:50:33,386 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 memories from memory
2025-11-10 23:50:33,386 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 contexts from memory
2025-11-10 23:50:33,386 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 0 contexts from memory
2025-11-10 23:50:33,387 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-11-10 23:50:33,388 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-11-10 23:50:33,388 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.
Extra requirements: If sending full folders is too large, include at minimum the import section and test definitions in test/css/index.js plus input.html and expected.css (and expected.html where present) for each listed sample, with line numbers.
Purpose: I need these contents to extract 8 relevant existing tests with exact code and line numbers to use as regression tests for the attribute selector issue.
2025-11-10 23:50:47,353 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_qIUzdaAevIsRExhefglTtWas', 'function': {'arguments': '{"relative_path":"svelte/test/css/index.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1635, 'prompt_tokens': 2277, 'total_tokens': 3912, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1600, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--bbbb6af3-bdc1-4956-86f1-9a7afa9f999c-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'svelte/test/css/index.js'}, 'id': 'call_qIUzdaAevIsRExhefglTtWas', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2277, 'output_tokens': 1635, 'total_tokens': 3912, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1600}}
2025-11-10 23:50:50,491 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_i8hNzVvqHV6RUz86AwbPp9a3', 'function': {'arguments': '{"basename":"index.js"}', 'name': 'find_file_node_with_basename'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 157, 'prompt_tokens': 2333, 'total_tokens': 2490, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--8a07fb93-fe54-479d-a058-305217a992b3-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'index.js'}, 'id': 'call_i8hNzVvqHV6RUz86AwbPp9a3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2333, 'output_tokens': 157, 'total_tokens': 2490, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-10 23:50:53,430 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_9wckHzYswafMfJGZkSRvE1qx', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 96, 'prompt_tokens': 2545, 'total_tokens': 2641, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f64cb040-0ab3-4fe9-8933-3bf766feedda-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_9wckHzYswafMfJGZkSRvE1qx', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2545, 'output_tokens': 96, 'total_tokens': 2641, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-10 23:50:55,604 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2OTQcD4Mh7tCvF81QvvNuLui', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 27, 'prompt_tokens': 2618, 'total_tokens': 2645, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1ab1127e-893d-4c49-87ac-aa7aa64233bd-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_2OTQcD4Mh7tCvF81QvvNuLui', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2618, 'output_tokens': 27, 'total_tokens': 2645, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:05,165 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_RmdqIYk02zKPyz9a3SlfFAao', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-unquoted/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1192, 'prompt_tokens': 4604, 'total_tokens': 5796, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2560}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a2cf725e-4e2d-4e35-8eb1-d64806e6d4da-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/attribute-selector-unquoted/input.html'}, 'id': 'call_RmdqIYk02zKPyz9a3SlfFAao', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4604, 'output_tokens': 1192, 'total_tokens': 5796, 'input_token_details': {'audio': 0, 'cache_read': 2560}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-10 23:51:06,561 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_GSiqUBXxb3aAgUKt1HANmBCx', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-unquoted/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 35, 'prompt_tokens': 4766, 'total_tokens': 4801, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ad2fda96-fff8-46d7-8ee8-e6fd3bcd46b1-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/attribute-selector-unquoted/expected.css'}, 'id': 'call_GSiqUBXxb3aAgUKt1HANmBCx', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4766, 'output_tokens': 35, 'total_tokens': 4801, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:07,748 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_zTZ8ukzfQOiGTmF6EfdaFhIt', 'function': {'arguments': '{"relative_path":"test/css/samples/universal-selector/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 32, 'prompt_tokens': 4892, 'total_tokens': 4924, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c524cadc-f18e-47ff-969a-cc9c59c9ffb4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/universal-selector/input.html'}, 'id': 'call_zTZ8ukzfQOiGTmF6EfdaFhIt', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4892, 'output_tokens': 32, 'total_tokens': 4924, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:08,838 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Cu67cihUGa3soEimPO5XSPM9', 'function': {'arguments': '{"relative_path":"test/css/samples/universal-selector/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 5043, 'total_tokens': 5076, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f9d9d150-d60f-494e-9630-2c6371e00dbb-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/universal-selector/expected.css'}, 'id': 'call_Cu67cihUGa3soEimPO5XSPM9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5043, 'output_tokens': 33, 'total_tokens': 5076, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:10,778 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_OYHTuI3ihxOQW27L74QMQ4i5', 'function': {'arguments': '{"relative_path":"test/css/samples/unused-selector/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 32, 'prompt_tokens': 5168, 'total_tokens': 5200, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4864}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5012fedf-ea4a-4228-84b5-91922c3a9ecf-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/unused-selector/input.html'}, 'id': 'call_OYHTuI3ihxOQW27L74QMQ4i5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5168, 'output_tokens': 32, 'total_tokens': 5200, 'input_token_details': {'audio': 0, 'cache_read': 4864}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:11,988 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_PSeiN5mjencUQuy93RyPfNAN', 'function': {'arguments': '{"relative_path":"test/css/samples/unused-selector/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 5349, 'total_tokens': 5382, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2432}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f6b44af6-59ef-4c3a-b75d-fff6d314c082-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/unused-selector/expected.css'}, 'id': 'call_PSeiN5mjencUQuy93RyPfNAN', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5349, 'output_tokens': 33, 'total_tokens': 5382, 'input_token_details': {'audio': 0, 'cache_read': 2432}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:13,451 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_xI7e5zELTenWQ7aTrfMk8GiG', 'function': {'arguments': '{"relative_path":"test/css/samples/unused-selector-leading/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 33, 'prompt_tokens': 5468, 'total_tokens': 5501, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--33a04f37-5cf2-43ca-9914-6d850380c597-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/unused-selector-leading/input.html'}, 'id': 'call_xI7e5zELTenWQ7aTrfMk8GiG', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5468, 'output_tokens': 33, 'total_tokens': 5501, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:15,255 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hQ0aOm3HXL1GBPmpLmbEWs37', 'function': {'arguments': '{"relative_path":"test/css/samples/unused-selector-leading/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 34, 'prompt_tokens': 5630, 'total_tokens': 5664, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6d26f702-35ed-4b8c-bf0a-f41100caa8d9-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/unused-selector-leading/expected.css'}, 'id': 'call_hQ0aOm3HXL1GBPmpLmbEWs37', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5630, 'output_tokens': 34, 'total_tokens': 5664, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:16,519 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_t98rWlIxcTzGXoJ9IUTZhr1x', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 5751, 'total_tokens': 5791, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5632}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--53dfc89d-41ce-46a5-84be-16b7dedc46e8-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html'}, 'id': 'call_t98rWlIxcTzGXoJ9IUTZhr1x', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5751, 'output_tokens': 40, 'total_tokens': 5791, 'input_token_details': {'audio': 0, 'cache_read': 5632}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:17,890 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2768AWogJTW5FhUZKqVApMyu', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 5964, 'total_tokens': 6005, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2304}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c52c666b-b5bb-4299-8718-04255921c216-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css'}, 'id': 'call_2768AWogJTW5FhUZKqVApMyu', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5964, 'output_tokens': 41, 'total_tokens': 6005, 'input_token_details': {'audio': 0, 'cache_read': 2304}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:19,841 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Uj9tg0al9dTUwJwaVyzoI7YD', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 6104, 'total_tokens': 6145, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5376}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--aa8fb7f0-b2d6-42d4-b927-2e9de813b87c-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html'}, 'id': 'call_Uj9tg0al9dTUwJwaVyzoI7YD', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6104, 'output_tokens': 41, 'total_tokens': 6145, 'input_token_details': {'audio': 0, 'cache_read': 5376}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:23,463 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_aBOqmx2LORQpNOiQ51XaZupW', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 6271, 'total_tokens': 6311, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3c716f80-a0e8-422f-a9b3-d625a589578d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html'}, 'id': 'call_aBOqmx2LORQpNOiQ51XaZupW', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6271, 'output_tokens': 40, 'total_tokens': 6311, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:25,045 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_aklIBY0KpnnsIgLq1kcKxD87', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 6490, 'total_tokens': 6531, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--87660e12-4999-4654-966f-bf64f7e4b0d3-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css'}, 'id': 'call_aklIBY0KpnnsIgLq1kcKxD87', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6490, 'output_tokens': 41, 'total_tokens': 6531, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:27,637 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_VDyR3GYbADdCSaq8QKRzWlml', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 6631, 'total_tokens': 6672, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3fa424ec-a4e4-491d-82ca-8beff28555f2-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html'}, 'id': 'call_VDyR3GYbADdCSaq8QKRzWlml', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6631, 'output_tokens': 41, 'total_tokens': 6672, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:30,017 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_TNS7PueFWThMz1lhROebuxwu', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 39, 'prompt_tokens': 6803, 'total_tokens': 6842, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5dc452a0-6d90-4077-82a8-3e964c43b487-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html'}, 'id': 'call_TNS7PueFWThMz1lhROebuxwu', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6803, 'output_tokens': 39, 'total_tokens': 6842, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:31,311 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_gVjkfD74YAcqYCpfeMzNJ2DH', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 7017, 'total_tokens': 7057, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5888}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--47294fd5-674f-4260-a0a1-d8c95c6a2b1b-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css'}, 'id': 'call_gVjkfD74YAcqYCpfeMzNJ2DH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7017, 'output_tokens': 40, 'total_tokens': 7057, 'input_token_details': {'audio': 0, 'cache_read': 5888}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:33,671 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_DpEuTKvRsQpaLhFNswvWX7qf', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 7156, 'total_tokens': 7196, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6272}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--afa8c3e2-336b-4267-96fc-abc8211fa5f4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html'}, 'id': 'call_DpEuTKvRsQpaLhFNswvWX7qf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7156, 'output_tokens': 40, 'total_tokens': 7196, 'input_token_details': {'audio': 0, 'cache_read': 6272}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:34,950 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_xk5TkBCDZfOzYnfNfHg9R41E', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 7323, 'total_tokens': 7363, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5760}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f20a33c5-e7c6-457d-aacd-b37f393dedd9-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html'}, 'id': 'call_xk5TkBCDZfOzYnfNfHg9R41E', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7323, 'output_tokens': 40, 'total_tokens': 7363, 'input_token_details': {'audio': 0, 'cache_read': 5760}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:36,844 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_X1xdoKx7zCbm5IAff2UE83YF', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 7539, 'total_tokens': 7580, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6784}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5b5ed682-86e1-4310-98c2-f0d5533ee2b8-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css'}, 'id': 'call_X1xdoKx7zCbm5IAff2UE83YF', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7539, 'output_tokens': 41, 'total_tokens': 7580, 'input_token_details': {'audio': 0, 'cache_read': 6784}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:38,074 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_V3JnLF84PFRjJKuqqJj7gqgE', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 7680, 'total_tokens': 7721, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4992}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5cba3c90-87fc-4c2a-accf-f24aed8dab03-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html'}, 'id': 'call_V3JnLF84PFRjJKuqqJj7gqgE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7680, 'output_tokens': 41, 'total_tokens': 7721, 'input_token_details': {'audio': 0, 'cache_read': 4992}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:39,281 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_fhBPlZGeaJ2XPQBDvlZirMtI', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 7849, 'total_tokens': 7890, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6016}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--9c1eb52b-0af7-435d-bff1-e11a20cb20b0-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html'}, 'id': 'call_fhBPlZGeaJ2XPQBDvlZirMtI', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7849, 'output_tokens': 41, 'total_tokens': 7890, 'input_token_details': {'audio': 0, 'cache_read': 6016}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:40,643 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_wWnhm96u1NngCazaFtujlWp9', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 42, 'prompt_tokens': 8069, 'total_tokens': 8111, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7296}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--19c0668c-df06-47c9-a377-e7c12a7232ee-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css'}, 'id': 'call_wWnhm96u1NngCazaFtujlWp9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8069, 'output_tokens': 42, 'total_tokens': 8111, 'input_token_details': {'audio': 0, 'cache_read': 7296}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:42,096 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_L3OHKljspqx3ivjm3XdSMZCO', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 42, 'prompt_tokens': 8212, 'total_tokens': 8254, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6400}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1dfdbe29-72f7-45c3-aa59-40d86eccc971-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html'}, 'id': 'call_L3OHKljspqx3ivjm3XdSMZCO', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8212, 'output_tokens': 42, 'total_tokens': 8254, 'input_token_details': {'audio': 0, 'cache_read': 6400}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:51:55,495 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='I located the tests at test/css/index.js (svelte/test/css/index.js does not exist in this codebase) and retrieved its full contents with line numbers. I then gathered input.html and expected.css for each of the requested sample folders, and included expected.html where present (for the omit-scoping attribute selector variations), all with line numbers. This covers attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, and the five omit-scoping-attribute selector cases. You can use these exact snippets with line references as regression tests for the attribute selector issue.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1406, 'prompt_tokens': 8385, 'total_tokens': 9791, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8192}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--2c28f92b-b9f3-4f80-a842-143461cc21d1-0' usage_metadata={'input_tokens': 8385, 'output_tokens': 1406, 'total_tokens': 9791, 'input_token_details': {'audio': 0, 'cache_read': 8192}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-10 23:51:55,499 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If sending full folders is too large, include at minimum the import section and test definitions in test/css/index.js plus input.html and expected.css (and expected.html where present) for each listed sample, with line numbers.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
I need these contents to extract 8 relevant existing tests with exact code and line numbers to use as regression tests for the attribute selector issue.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: test/css/index.js
Line number range: 1 - 153
Content:
1. import assert from 'assert';
2. import * as fs from 'fs';
3. import { parse } from 'acorn';
4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';
5. 
6. function tryRequire(file) {
7. 	try {
8. 		const mod = require(file);
9. 		return mod.default || mod;
10. 	} catch (err) {
11. 		if (err.code !== 'MODULE_NOT_FOUND') throw err;
12. 		return null;
13. 	}
14. }
15. 
16. function normalizeWarning(warning) {
17. 	warning.frame = warning.frame
18. 		.replace(/^\n/, '')
19. 		.replace(/^\t+/gm, '')
20. 		.replace(/\s+$/gm, '');
21. 	delete warning.filename;
22. 	delete warning.toString;
23. 	return warning;
24. }
25. 
26. function checkCodeIsValid(code) {
27. 	try {
28. 		parse(code);
29. 	} catch (err) {
30. 		console.error(addLineNumbers(code));
31. 		throw new Error(err.message);
32. 	}
33. }
34. 
35. describe('css', () => {
36. 	fs.readdirSync('test/css/samples').forEach(dir => {
37. 		if (dir[0] === '.') return;
38. 
39. 		// add .solo to a sample directory name to only run that test
40. 		const solo = /\.solo/.test(dir);
41. 		const skip = /\.skip/.test(dir);
42. 
43. 		if (solo && process.env.CI) {
44. 			throw new Error('Forgot to remove `solo: true` from test');
45. 		}
46. 
47. 		(solo ? it.only : skip ? it.skip : it)(dir, () => {
48. 			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
49. 			const input = fs
50. 				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
51. 				.replace(/\s+$/, '');
52. 
53. 			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
54. 			const domWarnings = [];
55. 			const ssrWarnings = [];
56. 
57. 			const dom = svelte.compile(
58. 				input,
59. 				Object.assign(config, {
60. 					format: 'iife',
61. 					name: 'SvelteComponent',
62. 					onwarn: warning => {
63. 						domWarnings.push(warning);
64. 					}
65. 				})
66. 			);
67. 
68. 			const ssr = svelte.compile(
69. 				input,
70. 				Object.assign(config, {
71. 					format: 'iife',
72. 					generate: 'ssr',
73. 					name: 'SvelteComponent',
74. 					onwarn: warning => {
75. 						ssrWarnings.push(warning);
76. 					}
77. 				})
78. 			);
79. 
80. 			// check the code is valid
81. 			checkCodeIsValid(dom.code);
82. 			checkCodeIsValid(ssr.code);
83. 
84. 			assert.equal(dom.css, ssr.css);
85. 
86. 			assert.deepEqual(
87. 				domWarnings.map(normalizeWarning),
88. 				ssrWarnings.map(normalizeWarning)
89. 			);
90. 			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);
91. 
92. 			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
93. 			const expected = {
94. 				html: read(`test/css/samples/${dir}/expected.html`),
95. 				css: read(`test/css/samples/${dir}/expected.css`)
96. 			};
97. 
98. 			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);
99. 
100. 			// verify that the right elements have scoping selectors
101. 			if (expected.html !== null) {
102. 				const window = env();
103. 
104. 				// dom
105. 				try {
106. 					const Component = eval(
107. 						`(function () { ${dom.code}; return SvelteComponent; }())`
108. 					);
109. 					const target = window.document.querySelector('main');
110. 
111. 					new Component({ target, data: config.data });
112. 					const html = target.innerHTML;
113. 
114. 					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);
115. 
116. 					assert.equal(
117. 						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
118. 						normalizeHtml(window, expected.html)
119. 					);
120. 				} catch (err) {
121. 					console.log(dom.code);
122. 					throw err;
123. 				}
124. 
125. 				// ssr
126. 				try {
127. 					const component = eval(
128. 						`(function () { ${ssr.code}; return SvelteComponent; }())`
129. 					);
130. 
131. 					assert.equal(
132. 						normalizeHtml(
133. 							window,
134. 							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
135. 						),
136. 						normalizeHtml(window, expected.html)
137. 					);
138. 				} catch (err) {
139. 					console.log(ssr.code);
140. 					throw err;
141. 				}
142. 			}
143. 		});
144. 	});
145. });
146. 
147. function read(file) {
148. 	try {
149. 		return fs.readFileSync(file, 'utf-8');
150. 	} catch (err) {
151. 		return null;
152. 	}
153. }


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css
Line number range: 1 - 1
Content:
1. [data-foo*='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>
2. 	<p data-foo="fooBARbaz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='foobarbaz'>this is styled</p>
3. 	<p data-foo='fooBARbaz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo*='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>
2. 	<p data-foo="baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='bar'>this is styled</p>
3. 	<p data-foo='baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo^='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>
2. 	<p data-foo="bazbar">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is styled</p>
3. 	<p data-foo='bazbar'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo^='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo$='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html
Line number range: 1 - 2
Content:
1. <div><p data-foo="barbaz">this is unstyled</p>
2. 	<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is unstyled</p>
3. 	<p data-foo='bazbar'>this is styled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo$='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo~='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>
2. 	<p data-foo="qux baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='qux bar'>this is styled</p>
3. 	<p data-foo='qux baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo~='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/universal-selector/expected.css
Line number range: 1 - 1
Content:
1. [svelte-xyz],[svelte-xyz] *{color:red}


File: test/css/samples/universal-selector/input.html
Line number range: 1 - 7
Content:
1. <div></div>
2. 
3. <style>
4. 	* {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector-leading/expected.css
Line number range: 1 - 1
Content:
1. .bar[svelte-xyz]{color:red}


File: test/css/samples/unused-selector-leading/input.html
Line number range: 1 - 7
Content:
1. <div class='bar'></div>
2. 
3. <style>
4. 	.foo, .bar, .baz {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector/expected.css
Line number range: 1 - 1
Content:
1. .foo[svelte-xyz]{color:red}


File: test/css/samples/unused-selector/input.html
Line number range: 1 - 11
Content:
1. <div class='foo'></div>
2. 
3. <style>
4. 	.foo {
5. 		color: red;
6. 	}
7. 
8. 	.bar {
9. 		color: blue;
10. 	}
11. </style>

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-11-10 23:52:20,378 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='The query requests the full contents of the css test runner including imports and test definitions. This file orchestrates compilation, CSS/HTML normalization, and comparisons essential to the listed samples and the attribute selector behavior under test.', relative_path='test/css/index.js', start_line=1, end_line=153), ContextOutput(reasoning='The query asks for sample files for attribute-selector-unquoted. This input establishes the attribute selector without quotes to test scoping.', relative_path='test/css/samples/attribute-selector-unquoted/input.html', start_line=1, end_line=7), ContextOutput(reasoning='Companion expected CSS for attribute-selector-unquoted demonstrating resulting scoping with svelte-xyz placeholder.', relative_path='test/css/samples/attribute-selector-unquoted/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='The query asks for sample files for universal-selector. This input defines the universal selector test.', relative_path='test/css/samples/universal-selector/input.html', start_line=1, end_line=7), ContextOutput(reasoning='Expected CSS for universal-selector showing scoping on root and descendants.', relative_path='test/css/samples/universal-selector/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='The query asks for sample files for unused-selector. This input defines classes where only .foo is used.', relative_path='test/css/samples/unused-selector/input.html', start_line=1, end_line=11), ContextOutput(reasoning='Expected CSS for unused-selector showing only the used selector is scoped.', relative_path='test/css/samples/unused-selector/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='The query asks for sample files for unused-selector-leading. This input defines a selector list where .bar applies.', relative_path='test/css/samples/unused-selector-leading/input.html', start_line=1, end_line=7), ContextOutput(reasoning='Expected CSS for unused-selector-leading, demonstrating pruning of unused selectors with scoping applied to .bar.', relative_path='test/css/samples/unused-selector-leading/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='The query asks for sample files for omit-scoping-attribute-attribute-selector-equals. Input defines data-foo exact match case.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html', start_line=1, end_line=10), ContextOutput(reasoning='Expected CSS for equals variant shows attribute selector retains scoping.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='Expected HTML for equals variant demonstrates which element receives svelte attribute.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html', start_line=1, end_line=2), ContextOutput(reasoning='The query asks for sample files for omit-scoping-attribute-attribute-selector-contains. Input sets up substring match.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html', start_line=1, end_line=10), ContextOutput(reasoning='Expected CSS for contains variant showing correct scoping with *= selector.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='Expected HTML for contains variant verifying styled vs unstyled elements.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html', start_line=1, end_line=2), ContextOutput(reasoning='The query asks for sample files for omit-scoping-attribute-attribute-selector-prefix. Input sets up ^= selector.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html', start_line=1, end_line=10), ContextOutput(reasoning='Expected CSS for prefix variant shows correct scoping.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='Expected HTML for prefix variant indicates which element is styled.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html', start_line=1, end_line=2), ContextOutput(reasoning='The query asks for sample files for omit-scoping-attribute-attribute-selector-suffix. Input sets up $= selector.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html', start_line=1, end_line=10), ContextOutput(reasoning='Expected CSS for suffix variant shows correct scoping.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='Expected HTML for suffix variant indicates which element is styled.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html', start_line=1, end_line=2), ContextOutput(reasoning='The query asks for sample files for omit-scoping-attribute-attribute-selector-word-equals. Input sets up ~= selector.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html', start_line=1, end_line=10), ContextOutput(reasoning='Expected CSS for word-equals variant shows correct scoping.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css', start_line=1, end_line=1), ContextOutput(reasoning='Expected HTML for word-equals variant indicates which element is styled.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html', start_line=1, end_line=2)]
2025-11-10 23:52:20,384 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Storing 24 contexts to memory for query: Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.
2025-11-10 23:52:20,724 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-11-10 23:52:20,726 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 24 new contexts to 0 existing contexts
2025-11-10 23:52:20,726 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 24 total contexts (removed 0 duplicates)
2025-11-10 23:52:20,727 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
We are currently solving the following issue within our repository. Here is the issue text:

--- BEGIN ISSUE ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:

--- END ISSUE ---

And we need to find relevant existing tests that can be used as regression tests for this issue.

OBJECTIVE: Find 8 relevant existing test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 8 complete, self-contained test cases that most likely to break existing functionality if this issue is fixed or new changes apply.
- Must include the identification of the test case (e.g., class name and method name)
- Must preserve exact file paths and line numbers

<examples>
--- BEGIN ISSUE ---
Title: parse_iso8601 drops timezone information for 'Z' suffix
Body: The helper `parse_iso8601` in `utils/datetime.py` incorrectly returns a naive datetime when the input ends with 'Z' (UTC). For example, "2024-10-12T09:15:00Z" becomes a naive dt instead of timezone-aware UTC. This breaks downstream scheduling.
Expected: Return timezone-aware datetime in UTC for 'Z' inputs and preserve offsets like "+09:00".
--- END ISSUE ---
--- BEGIN TEST CASES ---
File: tests/test_datetime.py
Line Number: 118-156
Content:
import datetime
import pytest

from utils.datetime import parse_iso8601  # target under test

def test_z_suffix_returns_utc_aware(self):
    # Input ending with 'Z' should be interpreted as UTC and be timezone-aware
    s = "2024-10-12T09:15:00Z"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    # Use UTC comparison that works across pytz/zoneinfo
    assert dt.utcoffset() == datetime.timedelta(0)

def test_offset_preserved(self):
    # Offset like +09:00 should be preserved (e.g., Asia/Tokyo offset)
    s = "2024-10-12T18:00:00+09:00"
    dt = parse_iso8601(s)

    assert isinstance(dt, datetime.datetime)
    assert dt.tzinfo is not None
    assert dt.utcoffset() == datetime.timedelta(hours=9)
--- END TEST CASES ---
</example>

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.
Extra Requirements: If sending full folders is too large, include at minimum the import section and test definitions in test/css/index.js plus input.html and expected.css (and expected.html where present) for each listed sample, with line numbers.
Purpose: I need these contents to extract 8 relevant existing tests with exact code and line numbers to use as regression tests for the attribute selector issue.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: test/css/index.js
Line number range: 1 - 153
Content:
1. import assert from 'assert';
2. import * as fs from 'fs';
3. import { parse } from 'acorn';
4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';
5. 
6. function tryRequire(file) {
7. 	try {
8. 		const mod = require(file);
9. 		return mod.default || mod;
10. 	} catch (err) {
11. 		if (err.code !== 'MODULE_NOT_FOUND') throw err;
12. 		return null;
13. 	}
14. }
15. 
16. function normalizeWarning(warning) {
17. 	warning.frame = warning.frame
18. 		.replace(/^\n/, '')
19. 		.replace(/^\t+/gm, '')
20. 		.replace(/\s+$/gm, '');
21. 	delete warning.filename;
22. 	delete warning.toString;
23. 	return warning;
24. }
25. 
26. function checkCodeIsValid(code) {
27. 	try {
28. 		parse(code);
29. 	} catch (err) {
30. 		console.error(addLineNumbers(code));
31. 		throw new Error(err.message);
32. 	}
33. }
34. 
35. describe('css', () => {
36. 	fs.readdirSync('test/css/samples').forEach(dir => {
37. 		if (dir[0] === '.') return;
38. 
39. 		// add .solo to a sample directory name to only run that test
40. 		const solo = /\.solo/.test(dir);
41. 		const skip = /\.skip/.test(dir);
42. 
43. 		if (solo && process.env.CI) {
44. 			throw new Error('Forgot to remove `solo: true` from test');
45. 		}
46. 
47. 		(solo ? it.only : skip ? it.skip : it)(dir, () => {
48. 			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
49. 			const input = fs
50. 				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
51. 				.replace(/\s+$/, '');
52. 
53. 			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
54. 			const domWarnings = [];
55. 			const ssrWarnings = [];
56. 
57. 			const dom = svelte.compile(
58. 				input,
59. 				Object.assign(config, {
60. 					format: 'iife',
61. 					name: 'SvelteComponent',
62. 					onwarn: warning => {
63. 						domWarnings.push(warning);
64. 					}
65. 				})
66. 			);
67. 
68. 			const ssr = svelte.compile(
69. 				input,
70. 				Object.assign(config, {
71. 					format: 'iife',
72. 					generate: 'ssr',
73. 					name: 'SvelteComponent',
74. 					onwarn: warning => {
75. 						ssrWarnings.push(warning);
76. 					}
77. 				})
78. 			);
79. 
80. 			// check the code is valid
81. 			checkCodeIsValid(dom.code);
82. 			checkCodeIsValid(ssr.code);
83. 
84. 			assert.equal(dom.css, ssr.css);
85. 
86. 			assert.deepEqual(
87. 				domWarnings.map(normalizeWarning),
88. 				ssrWarnings.map(normalizeWarning)
89. 			);
90. 			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);
91. 
92. 			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
93. 			const expected = {
94. 				html: read(`test/css/samples/${dir}/expected.html`),
95. 				css: read(`test/css/samples/${dir}/expected.css`)
96. 			};
97. 
98. 			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);
99. 
100. 			// verify that the right elements have scoping selectors
101. 			if (expected.html !== null) {
102. 				const window = env();
103. 
104. 				// dom
105. 				try {
106. 					const Component = eval(
107. 						`(function () { ${dom.code}; return SvelteComponent; }())`
108. 					);
109. 					const target = window.document.querySelector('main');
110. 
111. 					new Component({ target, data: config.data });
112. 					const html = target.innerHTML;
113. 
114. 					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);
115. 
116. 					assert.equal(
117. 						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
118. 						normalizeHtml(window, expected.html)
119. 					);
120. 				} catch (err) {
121. 					console.log(dom.code);
122. 					throw err;
123. 				}
124. 
125. 				// ssr
126. 				try {
127. 					const component = eval(
128. 						`(function () { ${ssr.code}; return SvelteComponent; }())`
129. 					);
130. 
131. 					assert.equal(
132. 						normalizeHtml(
133. 							window,
134. 							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
135. 						),
136. 						normalizeHtml(window, expected.html)
137. 					);
138. 				} catch (err) {
139. 					console.log(ssr.code);
140. 					throw err;
141. 				}
142. 			}
143. 		});
144. 	});
145. });
146. 
147. function read(file) {
148. 	try {
149. 		return fs.readFileSync(file, 'utf-8');
150. 	} catch (err) {
151. 		return null;
152. 	}
153. }


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css
Line number range: 1 - 1
Content:
1. [data-foo*='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>
2. 	<p data-foo="fooBARbaz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='foobarbaz'>this is styled</p>
3. 	<p data-foo='fooBARbaz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo*='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>
2. 	<p data-foo="baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='bar'>this is styled</p>
3. 	<p data-foo='baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo^='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>
2. 	<p data-foo="bazbar">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is styled</p>
3. 	<p data-foo='bazbar'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo^='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo$='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html
Line number range: 1 - 2
Content:
1. <div><p data-foo="barbaz">this is unstyled</p>
2. 	<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is unstyled</p>
3. 	<p data-foo='bazbar'>this is styled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo$='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo~='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>
2. 	<p data-foo="qux baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='qux bar'>this is styled</p>
3. 	<p data-foo='qux baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo~='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/universal-selector/expected.css
Line number range: 1 - 1
Content:
1. [svelte-xyz],[svelte-xyz] *{color:red}


File: test/css/samples/universal-selector/input.html
Line number range: 1 - 7
Content:
1. <div></div>
2. 
3. <style>
4. 	* {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector-leading/expected.css
Line number range: 1 - 1
Content:
1. .bar[svelte-xyz]{color:red}


File: test/css/samples/unused-selector-leading/input.html
Line number range: 1 - 7
Content:
1. <div class='bar'></div>
2. 
3. <style>
4. 	.foo, .bar, .baz {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector/expected.css
Line number range: 1 - 1
Content:
1. .foo[svelte-xyz]{color:red}


File: test/css/samples/unused-selector/input.html
Line number range: 1 - 11
Content:
1. <div class='foo'></div>
2. 
3. <style>
4. 	.foo {
5. 		color: red;
6. 	}
7. 
8. 	.bar {
9. 		color: blue;
10. 	}
11. </style>

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:52:54,772 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The aggregated context already includes the full css test harness (test/css/index.js with line numbers) and multiple sample directories with attribute selector usage and expected outputs. These are sufficient to compile 8 relevant, self-contained test cases with exact file paths and line numbers. No additional files are essential to meet the objective, so I will construct the 8 cases using the available samples and the shared harness.' query='' extra_requirements='' purpose=''
2025-11-10 23:52:54,774 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='test/css/index.js', content="1. import assert from 'assert';\n2. import * as fs from 'fs';\n3. import { parse } from 'acorn';\n4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';\n5. \n6. function tryRequire(file) {\n7. \ttry {\n8. \t\tconst mod = require(file);\n9. \t\treturn mod.default || mod;\n10. \t} catch (err) {\n11. \t\tif (err.code !== 'MODULE_NOT_FOUND') throw err;\n12. \t\treturn null;\n13. \t}\n14. }\n15. \n16. function normalizeWarning(warning) {\n17. \twarning.frame = warning.frame\n18. \t\t.replace(/^\\n/, '')\n19. \t\t.replace(/^\\t+/gm, '')\n20. \t\t.replace(/\\s+$/gm, '');\n21. \tdelete warning.filename;\n22. \tdelete warning.toString;\n23. \treturn warning;\n24. }\n25. \n26. function checkCodeIsValid(code) {\n27. \ttry {\n28. \t\tparse(code);\n29. \t} catch (err) {\n30. \t\tconsole.error(addLineNumbers(code));\n31. \t\tthrow new Error(err.message);\n32. \t}\n33. }\n34. \n35. describe('css', () => {\n36. \tfs.readdirSync('test/css/samples').forEach(dir => {\n37. \t\tif (dir[0] === '.') return;\n38. \n39. \t\t// add .solo to a sample directory name to only run that test\n40. \t\tconst solo = /\\.solo/.test(dir);\n41. \t\tconst skip = /\\.skip/.test(dir);\n42. \n43. \t\tif (solo && process.env.CI) {\n44. \t\t\tthrow new Error('Forgot to remove `solo: true` from test');\n45. \t\t}\n46. \n47. \t\t(solo ? it.only : skip ? it.skip : it)(dir, () => {\n48. \t\t\tconst config = tryRequire(`./samples/${dir}/_config.js`) || {};\n49. \t\t\tconst input = fs\n50. \t\t\t\t.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')\n51. \t\t\t\t.replace(/\\s+$/, '');\n52. \n53. \t\t\tconst expectedWarnings = (config.warnings || []).map(normalizeWarning);\n54. \t\t\tconst domWarnings = [];\n55. \t\t\tconst ssrWarnings = [];\n56. \n57. \t\t\tconst dom = svelte.compile(\n58. \t\t\t\tinput,\n59. \t\t\t\tObject.assign(config, {\n60. \t\t\t\t\tformat: 'iife',\n61. \t\t\t\t\tname: 'SvelteComponent',\n62. \t\t\t\t\tonwarn: warning => {\n63. \t\t\t\t\t\tdomWarnings.push(warning);\n64. \t\t\t\t\t}\n65. \t\t\t\t})\n66. \t\t\t);\n67. \n68. \t\t\tconst ssr = svelte.compile(\n69. \t\t\t\tinput,\n70. \t\t\t\tObject.assign(config, {\n71. \t\t\t\t\tformat: 'iife',\n72. \t\t\t\t\tgenerate: 'ssr',\n73. \t\t\t\t\tname: 'SvelteComponent',\n74. \t\t\t\t\tonwarn: warning => {\n75. \t\t\t\t\t\tssrWarnings.push(warning);\n76. \t\t\t\t\t}\n77. \t\t\t\t})\n78. \t\t\t);\n79. \n80. \t\t\t// check the code is valid\n81. \t\t\tcheckCodeIsValid(dom.code);\n82. \t\t\tcheckCodeIsValid(ssr.code);\n83. \n84. \t\t\tassert.equal(dom.css, ssr.css);\n85. \n86. \t\t\tassert.deepEqual(\n87. \t\t\t\tdomWarnings.map(normalizeWarning),\n88. \t\t\t\tssrWarnings.map(normalizeWarning)\n89. \t\t\t);\n90. \t\t\tassert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);\n91. \n92. \t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);\n93. \t\t\tconst expected = {\n94. \t\t\t\thtml: read(`test/css/samples/${dir}/expected.html`),\n95. \t\t\t\tcss: read(`test/css/samples/${dir}/expected.css`)\n96. \t\t\t};\n97. \n98. \t\t\tassert.equal(dom.css.replace(/svelte-\\d+/g, 'svelte-xyz'), expected.css);\n99. \n100. \t\t\t// verify that the right elements have scoping selectors\n101. \t\t\tif (expected.html !== null) {\n102. \t\t\t\tconst window = env();\n103. \n104. \t\t\t\t// dom\n105. \t\t\t\ttry {\n106. \t\t\t\t\tconst Component = eval(\n107. \t\t\t\t\t\t`(function () { ${dom.code}; return SvelteComponent; }())`\n108. \t\t\t\t\t);\n109. \t\t\t\t\tconst target = window.document.querySelector('main');\n110. \n111. \t\t\t\t\tnew Component({ target, data: config.data });\n112. \t\t\t\t\tconst html = target.innerHTML;\n113. \n114. \t\t\t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);\n115. \n116. \t\t\t\t\tassert.equal(\n117. \t\t\t\t\t\tnormalizeHtml(window, html.replace(/svelte-\\d+/g, 'svelte-xyz')),\n118. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n119. \t\t\t\t\t);\n120. \t\t\t\t} catch (err) {\n121. \t\t\t\t\tconsole.log(dom.code);\n122. \t\t\t\t\tthrow err;\n123. \t\t\t\t}\n124. \n125. \t\t\t\t// ssr\n126. \t\t\t\ttry {\n127. \t\t\t\t\tconst component = eval(\n128. \t\t\t\t\t\t`(function () { ${ssr.code}; return SvelteComponent; }())`\n129. \t\t\t\t\t);\n130. \n131. \t\t\t\t\tassert.equal(\n132. \t\t\t\t\t\tnormalizeHtml(\n133. \t\t\t\t\t\t\twindow,\n134. \t\t\t\t\t\t\tcomponent.render(config.data).replace(/svelte-\\d+/g, 'svelte-xyz')\n135. \t\t\t\t\t\t),\n136. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n137. \t\t\t\t\t);\n138. \t\t\t\t} catch (err) {\n139. \t\t\t\t\tconsole.log(ssr.code);\n140. \t\t\t\t\tthrow err;\n141. \t\t\t\t}\n142. \t\t\t}\n143. \t\t});\n144. \t});\n145. });\n146. \n147. function read(file) {\n148. \ttry {\n149. \t\treturn fs.readFileSync(file, 'utf-8');\n150. \t} catch (err) {\n151. \t\treturn null;\n152. \t}\n153. }", start_line_number=1, end_line_number=153), Context(relative_path='test/css/samples/attribute-selector-unquoted/expected.css', content='1. [foo=bar][svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/attribute-selector-unquoted/input.html', content="1. <div foo='bar'></div>\n2. \n3. <style>\n4. \t[foo=bar] {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css', content="1. [data-foo*='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html', content='1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>\n2. \t<p data-foo="fooBARbaz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html', content="1. <div>\n2. \t<p data-foo='foobarbaz'>this is styled</p>\n3. \t<p data-foo='fooBARbaz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo*='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css', content="1. [data-foo='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html', content='1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>\n2. \t<p data-foo="baz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html', content="1. <div>\n2. \t<p data-foo='bar'>this is styled</p>\n3. \t<p data-foo='baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css', content="1. [data-foo^='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html', content='1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>\n2. \t<p data-foo="bazbar">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html', content="1. <div>\n2. \t<p data-foo='barbaz'>this is styled</p>\n3. \t<p data-foo='bazbar'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo^='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css', content="1. [data-foo$='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html', content='1. <div><p data-foo="barbaz">this is unstyled</p>\n2. \t<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html', content="1. <div>\n2. \t<p data-foo='barbaz'>this is unstyled</p>\n3. \t<p data-foo='bazbar'>this is styled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo$='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css', content="1. [data-foo~='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html', content='1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>\n2. \t<p data-foo="qux baz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html', content="1. <div>\n2. \t<p data-foo='qux bar'>this is styled</p>\n3. \t<p data-foo='qux baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo~='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/universal-selector/expected.css', content='1. [svelte-xyz],[svelte-xyz] *{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/universal-selector/input.html', content='1. <div></div>\n2. \n3. <style>\n4. \t* {\n5. \t\tcolor: red;\n6. \t}\n7. </style>', start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/unused-selector-leading/expected.css', content='1. .bar[svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/unused-selector-leading/input.html', content="1. <div class='bar'></div>\n2. \n3. <style>\n4. \t.foo, .bar, .baz {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/unused-selector/expected.css', content='1. .foo[svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/unused-selector/input.html', content="1. <div class='foo'></div>\n2. \n3. <style>\n4. \t.foo {\n5. \t\tcolor: red;\n6. \t}\n7. \n8. \t.bar {\n9. \t\tcolor: blue;\n10. \t}\n11. </style>", start_line_number=1, end_line_number=11)]
2025-11-10 23:53:20,254 - thread-133013312636608.prometheus.lang_graph.nodes.bug_get_regression_tests_selection_node - DEBUG - Model response: selected_tests=[RegressionTestStructuredOutPut(reasoning="1. Relevance to issue: This test exercises attribute selector equality with an unquoted value ([foo=bar]), directly touching the attribute matching logic where the bug occurs (operators[operator]). 2. Impact likelihood: Fixing handling of no-operator selectors ([foo]) will modify the same matching code path; this test guards against regressions in parsing/matching '=' operator and serialization of CSS. 3. Normal run: The sample directory name has no .skip or .solo suffix, so it runs in normal test runs.", test_identifier='test/css/index.js::attribute-selector-unquoted'), RegressionTestStructuredOutPut(reasoning="1. Relevance to issue: Validates attribute selector with '=' operator and ensures scoping attribute insertion based on matches; this relies on the same Selector.attributeMatches logic implicated by the bug. 2. Impact likelihood: Changes to handle [foo] existence selectors could affect how attributes are matched generally; this test will fail if '=' handling regresses or scoping application changes. 3. Normal run: No .skip/.solo, so it is executed normally.", test_identifier='test/css/index.js::omit-scoping-attribute-attribute-selector-equals'), RegressionTestStructuredOutPut(reasoning="1. Relevance to issue: Exercises the '*=' (contains) attribute operator, ensuring the selector engine correctly evaluates attribute matches and applies Svelte scoping; it's part of the attribute operator matrix potentially affected by refactoring to fix [foo]. 2. Impact likelihood: If operator dispatch or matching is altered, contains behavior is commonly impacted; this test will detect such regressions in both CSS output and DOM/SSR matching. 3. Normal run: Not marked skip/solo.", test_identifier='test/css/index.js::omit-scoping-attribute-attribute-selector-contains'), RegressionTestStructuredOutPut(reasoning="1. Relevance to issue: Tests '^=' (prefix) operator behavior in attribute selectors and scoping; relies on the same operators table used by attributeMatches where the bug arises. 2. Impact likelihood: Adjustments to operator handling for existence selectors could inadvertently impact prefix logic; this test catches any mismatches in matching or scoping. 3. Normal run: Runs by default (no .skip/.solo).", test_identifier='test/css/index.js::omit-scoping-attribute-attribute-selector-prefix'), RegressionTestStructuredOutPut(reasoning="1. Relevance to issue: Covers '$=' (suffix) attribute selector behavior and scoping; ensures the operator dispatch remains intact after changes to support [foo]. 2. Impact likelihood: Suffix matching is sensitive to correct operator function mapping; if operators[operator] handling changes, this test will surface regressions in CSS generation and DOM/SSR matching. 3. Normal run: Executes normally, not skipped.", test_identifier='test/css/index.js::omit-scoping-attribute-attribute-selector-suffix')]
2025-11-10 23:53:20,254 - thread-133013312636608.prometheus.lang_graph.nodes.bug_get_regression_tests_selection_node - DEBUG - 5 tests selected as regression tests
2025-11-10 23:53:20,255 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-10 23:53:20,256 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-10 23:53:29,078 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_79fkEtkYhW2R5I2iJW74amMG', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 474, 'prompt_tokens': 617, 'total_tokens': 1091, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1ce306a4-5563-4e38-9df6-1fe27cf8926f-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_79fkEtkYhW2R5I2iJW74amMG', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 474, 'total_tokens': 1091, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-10 23:53:29,082 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-10 23:53:29,184 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:29,185 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x   1 root root   4096 Aug 28 02:24 [0m[01;34m.[0m
drwxr-xr-x   1 root root   4096 Nov 10 23:50 [01;34m..[0m
-rw-rw-r--   1 root root    227 Aug 28 02:24 .editorconfig
-rw-rw-r--   1 root root     76 Aug 28 02:24 .eslintignore
-rw-rw-r--   1 root root   1239 Aug 28 02:24 .eslintrc.json
-rw-rw-r--   1 root root     78 Aug 28 02:24 .flowconfig
drwxrwxr-x   7 root root   4096 Aug 28 02:24 [01;34m.git[0m
drwxrwxr-x   2 root root   4096 Aug 28 02:24 [01;34m.github[0m
-rw-rw-r--   1 root root    263 Aug 28 02:24 .gitignore
-rw-rw-r--   1 root root     51 Aug 28 02:24 .prettierrc
-rw-rw-r--   1 root root    270 Aug 28 02:24 .travis.yml
-rw-rw-r--   1 root root  37604 Aug 28 02:24 CHANGELOG.md
-rw-rw-r--   1 root root    251 Aug 28 02:24 Dockerfile
-rw-rw-r--   1 root root   1114 Aug 28 02:24 LICENSE
-rw-rw-r--   1 root root   6462 Aug 28 02:24 README.md
-rw-rw-r--   1 root root    556 Aug 28 02:24 appveyor.yml
-rw-rw-r--   1 root root     70 Aug 28 02:24 mocha.coverage.opts
-rw-rw-r--   1 root root     12 Aug 28 02:24 mocha.opts
drwxr-xr-x 385 root root  16384 Aug 28 02:24 [01;34mnode_modules[0m
-rw-r--r--   1 root root 470834 Aug 28 02:24 package-lock.json
-rw-rw-r--   1 root root   2284 Aug 28 02:24 package.json
-rw-rw-r--   1 root root   1668 Aug 28 02:24 rollup.config.js
drwxrwxr-x   9 root root   4096 Aug 28 02:24 [01;34msrc[0m
drwxrwxr-x  13 root root   4096 Aug 28 02:24 [01;34mtest[0m
-rw-rw-r--   1 root root    326 Aug 28 02:24 tsconfig.json
-rw-rw-r--   1 root root 138152 Aug 28 02:24 yarn.lock
[?2004l
2025-11-10 23:53:31,344 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_QyD9wgqTiXtoLmw21qCHMCkW', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 1395, 'total_tokens': 1485, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--79a7d813-e6bb-4baa-b0aa-463b4d9b3c82-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_QyD9wgqTiXtoLmw21qCHMCkW', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1395, 'output_tokens': 90, 'total_tokens': 1485, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-10 23:53:31,349 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-10 23:53:31,451 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:31,451 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "echo noop",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-10 23:53:37,419 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LbBGAuSZdYTAKZaZ6Ia5LnwH', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 420, 'prompt_tokens': 2247, 'total_tokens': 2667, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--fab7224f-e099-4492-885f-c1c3d16ff99f-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/css/index.js"}, 'id': 'call_LbBGAuSZdYTAKZaZ6Ia5LnwH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2247, 'output_tokens': 420, 'total_tokens': 2667, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-10 23:53:37,422 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/css/index.js
2025-11-10 23:53:37,524 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:37,524 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-10 23:53:43,391 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_R1ucGyeENWZxYkdeAWpmt2tg', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 410, 'prompt_tokens': 3290, 'total_tokens': 3700, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f2262160-b27a-469c-84de-3b1ff7f988c4-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_R1ucGyeENWZxYkdeAWpmt2tg', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3290, 'output_tokens': 410, 'total_tokens': 3700, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-10 23:53:43,395 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-10 23:53:43,496 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:43,497 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-10 23:53:44,443 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_beFPMBLkxRIgtnzGI07M0RFH', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 3333, 'total_tokens': 3362, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--021856d9-44a9-4861-a0d9-6637c260510c-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_beFPMBLkxRIgtnzGI07M0RFH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3333, 'output_tokens': 29, 'total_tokens': 3362, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:53:44,446 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-10 23:53:44,547 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:44,548 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-10 23:53:46,108 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_uM2XZUzRzykQhCtQ7ykUfkin', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 4630, 'total_tokens': 4659, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ca8d0ba2-869c-4aaa-9309-eb78ea5ec64b-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/helpers.js"}, 'id': 'call_uM2XZUzRzykQhCtQ7ykUfkin', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4630, 'output_tokens': 29, 'total_tokens': 4659, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:53:46,111 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/helpers.js
2025-11-10 23:53:46,213 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:46,213 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-10 23:53:49,535 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Tq55DZOIHlBcgEoBmCg6WT1b', 'function': {'arguments': '{"command":"ls -la test/css/samples"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 222, 'prompt_tokens': 4949, 'total_tokens': 5171, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--9d28998d-c476-4830-a93c-65fe21a898f6-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test/css/samples'}, 'id': 'call_Tq55DZOIHlBcgEoBmCg6WT1b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4949, 'output_tokens': 222, 'total_tokens': 5171, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-10 23:53:49,538 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test/css/samples
2025-11-10 23:53:49,640 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:53:49,640 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 184
drwxrwxr-x 46 root root 4096 Aug 28 02:24 [0m[01;34m.[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34m..[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mattribute-selector-unquoted[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mbasic[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-global[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-global-keyframes[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-keyframes[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-keyframes-from-to[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-pseudo-element[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcascade-false-universal-selector[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcombinator-child[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcss-vars[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mdescendant-selector-non-top-level-outer[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mkeyframes[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mmedia-query[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mmedia-query-word[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-contains[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-equals[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-equals-case-insensitive[0m[K
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-equals-dynamic[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-pipe-equals[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-prefix[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-suffix[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-attribute-selector-word-equals[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-class-dynamic[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-class-static[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant-global-inner[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant-global-inner-class[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant-global-inner-multiple[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant-global-outer[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-descendant-global-outer-multiple[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-global[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-id[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-whitespace[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34momit-scoping-attribute-whitespace-multiple[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mrefs[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mrefs-qualified[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34muniversal-selector[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34munknown-at-rule[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34munused-selector[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34munused-selector-leading[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34munused-selector-ternary[0m
[?2004l
2025-11-10 23:54:07,316 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ZOk3BFEFjh4xGqJWUcA1aorR', 'function': {'arguments': '{"command":"cat mocha.coverage.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1629, 'prompt_tokens': 6810, 'total_tokens': 8439, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1600, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6ece8f53-2d92-4b61-ba54-b348138b5159-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.coverage.opts'}, 'id': 'call_ZOk3BFEFjh4xGqJWUcA1aorR', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6810, 'output_tokens': 1629, 'total_tokens': 8439, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1600}}
2025-11-10 23:54:07,319 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.coverage.opts
2025-11-10 23:54:07,421 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:07,421 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
--require babel-register
--recursive
./**/__test__.js
test/*/index.js
[?2004l
2025-11-10 23:54:17,623 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_6XE2dAJcGLdF5rQeJXf0ymcX', 'function': {'arguments': '{"command":"npm run build --silent"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 860, 'prompt_tokens': 6876, 'total_tokens': 7736, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 832, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6784}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--57190600-f501-4e1b-b9f6-c64eacb0c3c5-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm run build --silent'}, 'id': 'call_6XE2dAJcGLdF5rQeJXf0ymcX', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6876, 'output_tokens': 860, 'total_tokens': 7736, 'input_token_details': {'audio': 0, 'cache_read': 6784}, 'output_token_details': {'audio': 0, 'reasoning': 832}}
2025-11-10 23:54:17,627 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm run build --silent
2025-11-10 23:54:22,870 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:22,871 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m27ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m39ms[22m[39m
[37;40mnpm[0m [0m[36;40mnotice[0m[35m[0m 
[0m[37;40mnpm[0m [0m[36;40mnotice[0m[35m[0m New [31mmajor[39m version of npm available! [31m8.19.4[39m -> [32m11.6.2[39m
[0m[37;40mnpm[0m [0m[36;40mnotice[0m[35m[0m Changelog: [36mhttps://github.com/npm/cli/releases/tag/v11.6.2[39m
[0m[37;40mnpm[0m [0m[36;40mnotice[0m[35m[0m Run [32mnpm install -g npm@11.6.2[39m to update!
[0m[37;40mnpm[0m [0m[36;40mnotice[0m[35m[0m 
[?2004l
2025-11-10 23:54:35,390 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_5QB8OeLVxh48H62ciuueNUGw', 'function': {'arguments': '{"command":"ls -la test"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 923, 'prompt_tokens': 7452, 'total_tokens': 8375, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 896, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4608}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e5d44550-f984-406a-a2f5-518a6f554171-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test'}, 'id': 'call_5QB8OeLVxh48H62ciuueNUGw', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7452, 'output_tokens': 923, 'total_tokens': 8375, 'input_token_details': {'audio': 0, 'cache_read': 4608}, 'output_token_details': {'audio': 0, 'reasoning': 896}}
2025-11-10 23:54:35,394 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test
2025-11-10 23:54:35,495 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:35,495 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 72
drwxrwxr-x 13 root root 4096 Aug 28 02:24 [0m[01;34m.[0m
drwxr-xr-x  1 root root 4096 Nov 10 23:54 [01;34m..[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mcreate[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mcss[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mcustom-elements[0m
drwxrwxr-x  2 root root 4096 Aug 28 02:24 [01;34mformats[0m
-rw-rw-r--  1 root root 5474 Aug 28 02:24 helpers.js
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mhydration[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mjs[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mparser[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mruntime[0m
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mserver-side-rendering[0m
-rw-rw-r--  1 root root 1077 Aug 28 02:24 setup.js
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34msourcemaps[0m
-rw-rw-r--  1 root root  247 Aug 28 02:24 test.js
drwxrwxr-x  3 root root 4096 Aug 28 02:24 [01;34mvalidator[0m
[?2004l
2025-11-10 23:54:36,682 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_pBu9mGk6hsteTZLPzlyCbUkc', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 30, 'prompt_tokens': 8023, 'total_tokens': 8053, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 3328}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--530d98ea-1bc6-42e6-9077-9150d073505b-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/css/index.js"}, 'id': 'call_pBu9mGk6hsteTZLPzlyCbUkc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8023, 'output_tokens': 30, 'total_tokens': 8053, 'input_token_details': {'audio': 0, 'cache_read': 3328}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:54:36,685 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/css/index.js
2025-11-10 23:54:36,786 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:36,786 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-10 23:54:48,421 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_fB13FKfceL5RItgWBrPPHU0L', 'function': {'arguments': '{"command":"sed -n \'1,60p\' test/js/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 932, 'prompt_tokens': 9066, 'total_tokens': 9998, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 896, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4864}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--33dd5de3-c0a8-45c1-a60e-bf399f7c5eb2-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,60p' test/js/index.js"}, 'id': 'call_fB13FKfceL5RItgWBrPPHU0L', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9066, 'output_tokens': 932, 'total_tokens': 9998, 'input_token_details': {'audio': 0, 'cache_read': 4864}, 'output_token_details': {'audio': 0, 'reasoning': 896}}
2025-11-10 23:54:48,424 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,60p' test/js/index.js
2025-11-10 23:54:48,526 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:48,526 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from "assert";
import * as fs from "fs";
import * as path from "path";
import { rollup } from "rollup";
import { loadConfig, svelte } from "../helpers.js";

describe("js", () => {
	fs.readdirSync("test/js/samples").forEach(dir => {
		if (dir[0] === ".") return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);

		if (solo && process.env.CI) {
			throw new Error("Forgot to remove `solo: true` from test");
		}

		(solo ? it.only : it)(dir, () => {
			dir = path.resolve("test/js/samples", dir);
			const config = loadConfig(`${dir}/_config.js`);

			const input = fs
				.readFileSync(`${dir}/input.html`, "utf-8")
				.replace(/\s+$/, "");

			let actual;

			try {
				const options = Object.assign(config.options || {}, {
					shared: true
				});

				actual = svelte.compile(input, options).code.replace(/generated by Svelte v\d+\.\d+\.\d+/, 'generated by Svelte vX.Y.Z');
			} catch (err) {
				console.log(err.frame);
				throw err;
			}

			fs.writeFileSync(`${dir}/_actual.js`, actual);

			return rollup({
				input: `${dir}/_actual.js`,
				plugins: [
					{
						resolveId(importee, importer) {
							if (!importer) return importee;
							if (importee === "svelte/shared.js")
								return path.resolve("shared.js");
							return null;
						}
					}
				]
			}).then(bundle => {
				return bundle.generate({ format: "es" });
			}).then(({ code }) => {
				fs.writeFileSync(`${dir}/_actual-bundle.js`, code);

				const expected = fs.readFileSync(`${dir}/expected.js`, "utf-8");
				const expectedBundle = fs.readFileSync(
					`${dir}/expected-bundle.js`,
[?2004l
2025-11-10 23:54:49,946 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_fuNfVk8WL70bPIx6IqVa6zPq', 'function': {'arguments': '{"command":"sed -n \'60,160p\' test/js/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 30, 'prompt_tokens': 9582, 'total_tokens': 9612, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--459c9c3b-1da9-4864-811e-62cd66bf5b81-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '60,160p' test/js/index.js"}, 'id': 'call_fuNfVk8WL70bPIx6IqVa6zPq', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9582, 'output_tokens': 30, 'total_tokens': 9612, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:54:49,949 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '60,160p' test/js/index.js
2025-11-10 23:54:50,051 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:54:50,051 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
					`${dir}/expected-bundle.js`,
					"utf-8"
				);

				assert.equal(
					actual.trim().replace(/^[ \t]+$/gm, ""),
					expected.trim().replace(/^[ \t]+$/gm, "")
				);

				assert.equal(
					code.trim().replace(/^[ \t]+$/gm, ""),
					expectedBundle.trim().replace(/^[ \t]+$/gm, "")
				);
			}).catch(err => {
				if (err.loc) console.error(err.loc);
				throw err;
			});
		});
	});
});
[?2004l
2025-11-10 23:55:04,410 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_DDmD4IjJdUtf8oBcN3XQy3gv', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/setup.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1123, 'prompt_tokens': 9757, 'total_tokens': 10880, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--7734399d-5ea3-4be4-b4e8-a00d4dc050ca-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/setup.js"}, 'id': 'call_DDmD4IjJdUtf8oBcN3XQy3gv', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9757, 'output_tokens': 1123, 'total_tokens': 10880, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-11-10 23:55:04,414 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/setup.js
2025-11-10 23:55:04,515 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:55:04,515 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const fs = require('fs');
const path = require('path');

require('console-group').install();
require('source-map-support').install();

require.extensions['.js'] = function(module, filename) {
	const exports = [];

	var code = fs.readFileSync(filename, 'utf-8')
		.replace(/^import (?:\* as )?(\w+) from ['"]([^'"]+)['"];?/gm, 'var $1 = require("$2");')
		.replace(/^import {([^}]+)} from ['"](.+)['"];?/gm, 'var {$1} = require("$2");')
		.replace(/^export default /gm, 'module.exports = ')
		.replace(/^export (const|let|var|class|function) (\w+)/gm, (match, type, name) => {
			exports.push(name);
			return `${type} ${name}`;
		})
		.replace(/^export \{([^}]+)\}/gm, (match, names) => {
			names.split(',').filter(Boolean).forEach(name => {
				exports.push(name);
			});

			return '';
		})
		.replace(/^export function (\w+)/gm, 'exports.$1 = function $1');

	exports.forEach(name => {
		code += `\nexports.${name} = ${name};`;
	});

	try {
		return module._compile(code, filename);
	} catch (err) {
		console.log(code); // eslint-disable-line no-console
		throw err;
	}
[?2004l
2025-11-10 23:55:07,250 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_J3973WQDGIxcKdwsoD5WV42g', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 163, 'prompt_tokens': 10127, 'total_tokens': 10290, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--039ce7bd-dceb-4cd4-9029-7691f9541e39-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/test.js"}, 'id': 'call_J3973WQDGIxcKdwsoD5WV42g', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10127, 'output_tokens': 163, 'total_tokens': 10290, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-10 23:55:07,254 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/test.js
2025-11-10 23:55:07,355 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:55:07,356 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-10 23:55:17,161 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_WDreRSgFnwNiBsQKW8C26Tw2', 'function': {'arguments': '{"command":"npx mocha --grep \\"attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix\\" test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1168, 'prompt_tokens': 10247, 'total_tokens': 11415, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--83cf4dab-cdf2-40b9-a9e1-b98e683ec71e-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix" test/test.js'}, 'id': 'call_WDreRSgFnwNiBsQKW8C26Tw2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10247, 'output_tokens': 1168, 'total_tokens': 11415, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-11-10 23:55:17,164 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix" test/test.js
2025-11-10 23:55:18,710 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:55:18,710 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npx mocha --grep "attribute-selector-unquoted|omit-sc
coping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selec
ctor-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attri
ibute-attribute-selector-suffix" test/test.js
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (189ms)[0m

[?2004l
2025-11-10 23:55:26,958 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_A3nuXjoTgUCagfJ4FXm4Ypzm', 'function': {'arguments': '{"command":"npx mocha --grep \\"^attribute-selector-unquoted$\\" test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 615, 'prompt_tokens': 10691, 'total_tokens': 11306, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ef0eee3e-0643-415c-baf1-6b8f0b582769-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --grep "^attribute-selector-unquoted$" test/test.js'}, 'id': 'call_A3nuXjoTgUCagfJ4FXm4Ypzm', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10691, 'output_tokens': 615, 'total_tokens': 11306, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-10 23:55:26,961 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --grep "^attribute-selector-unquoted$" test/test.js
2025-11-10 23:55:28,302 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:55:28,303 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npx mocha --grep "^attribute-selector-unquoted$" test
t/test.js
[?2004l


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-10 23:55:43,453 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_wIQKrYe417NUVP7fWhY0d7KL', 'function': {'arguments': '{"command":"npx mocha --grep \\"(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\" test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1426, 'prompt_tokens': 10798, 'total_tokens': 12224, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1344, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b065b495-694f-4a66-9bf5-be4779e455df-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --grep "(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$" test/test.js'}, 'id': 'call_wIQKrYe417NUVP7fWhY0d7KL', 'type': 'tool_call'}] usage_metadata={'input_tokens': 10798, 'output_tokens': 1426, 'total_tokens': 12224, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1344}}
2025-11-10 23:55:43,457 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --grep "(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$" test/test.js
2025-11-10 23:55:44,951 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:55:44,951 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npx mocha --grep "(attribute-selector-unquoted|omit-s
scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-sele
ector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attr
ribute-attribute-selector-suffix)$" test/test.js
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (47ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (146ms)[0m

[?2004l
2025-11-10 23:56:01,825 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='```\nResult:\n npx mocha --grep "(attribute-selector-unquoted|omit-s\nscoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-sele\nector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attr\nribute-attribute-selector-suffix)$" test/test.js\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m attribute-selector-unquoted\x1b[0m\x1b[33m (47ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-contains\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-equals\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-prefix\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-suffix\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 5 passing\x1b[0m\x1b[90m (146ms)\x1b[0m\n```' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1639, 'prompt_tokens': 11177, 'total_tokens': 12816, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1344, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8960}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--9510a6ec-f9b0-4b34-a1b6-e8c17cff44b8-0' usage_metadata={'input_tokens': 11177, 'output_tokens': 1639, 'total_tokens': 12816, 'input_token_details': {'audio': 0, 'cache_read': 8960}, 'output_token_details': {'audio': 0, 'reasoning': 1344}}
2025-11-10 23:56:01,828 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
```
Result:
 npx mocha --grep "(attribute-selector-unquoted|omit-s
scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-sele
ector-contains|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attr
ribute-attribute-selector-suffix)$" test/test.js

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (47ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (146ms)[0m
```
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-10 23:56:15,542 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-10 23:56:15,543 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-10 23:56:15,543 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-10 23:56:15,543 - thread-133013312636608.prometheus.lang_graph.nodes.bug_get_regression_tests_subgraph_node - DEBUG - Selected 5 regression tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-10 23:56:15,544 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproduction_subgraph_node - INFO - Enter bug_reproduction_subgraph
2025-11-10 23:56:15,546 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_reproduction_context_message_node - DEBUG - Sending query to context provider subgraph:
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

2025-11-10 23:56:15,547 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-11-10 23:56:15,549 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:56:33,573 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The file tree is available but not the file contents. The user requires 5 complete, self-contained test cases with all imports, setup, assertions, helper functions, and exact line numbers. Without the actual test file content, we cannot extract or verify these details. The most relevant tests are under test/css, driven by test/css/index.js and test/helpers.js, and specific sample directories for attribute selectors.' query='Please provide the full contents of test/css/index.js and test/helpers.js, and the full contents (input.html, expected.css, expected.html, _config.js) of test/css/samples/attribute-selector-unquoted, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-equals-case-insensitive, omit-scoping-attribute-attribute-selector-pipe-equals, and omit-scoping-attribute-attribute-selector-word-equals.' extra_requirements='If sending full files is too large, include at minimum: the import and test registration lines in test/css/index.js referencing these samples, and the helper functions used from test/helpers.js, all with line numbers.' purpose='To extract 5 relevant test cases with exact code, imports, helper functions, and line numbers demonstrating attribute selector behavior matching the reported bug.'
2025-11-10 23:56:33,575 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full contents of test/css/index.js and test/helpers.js, and the full contents (input.html, expected.css, expected.html, _config.js) of test/css/samples/attribute-selector-unquoted, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-equals-case-insensitive, omit-scoping-attribute-attribute-selector-pipe-equals, and omit-scoping-attribute-attribute-selector-word-equals.
2025-11-10 23:56:34,228 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: [{'query_essential_query': 'Please provide the full contents of svelte/test/css/index.js and the sample files for these folders: svelte/test/css/samples/attribute-selector-unquoted, universal-selector, unused-selector, unused-selector-leading, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-contains, omit-scoping-attribute-attribute-selector-prefix, omit-scoping-attribute-attribute-selector-suffix, and omit-scoping-attribute-attribute-selector-word-equals.', 'query_extra_requirements': 'If sending full folders is too large, include at minimum the import section and test definitions in test/css/index.js plus input.html and expected.css (and expected.html where present) for each listed sample, with line numbers.', 'query_purpose': 'I need these contents to extract 8 relevant existing tests with exact code and line numbers to use as regression tests for the attribute selector issue.', 'memory_context_contexts': [{'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html', 'content': "1. <div>\n2. \t<p data-foo='bar'>this is styled</p>\n3. \t<p data-foo='baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", 'start_line_number': 1, 'end_line_number': 10}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css', 'content': "1. [data-foo='bar'][svelte-xyz]{color:red}", 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html', 'content': '1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>\n2. \t<p data-foo="baz">this is unstyled</p></div>', 'start_line_number': 1, 'end_line_number': 2}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html', 'content': "1. <div>\n2. \t<p data-foo='foobarbaz'>this is styled</p>\n3. \t<p data-foo='fooBARbaz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo*='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", 'start_line_number': 1, 'end_line_number': 10}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css', 'content': "1. [data-foo*='bar'][svelte-xyz]{color:red}", 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html', 'content': '1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>\n2. \t<p data-foo="fooBARbaz">this is unstyled</p></div>', 'start_line_number': 1, 'end_line_number': 2}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html', 'content': "1. <div>\n2. \t<p data-foo='barbaz'>this is styled</p>\n3. \t<p data-foo='bazbar'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo^='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", 'start_line_number': 1, 'end_line_number': 10}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css', 'content': "1. [data-foo^='bar'][svelte-xyz]{color:red}", 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html', 'content': '1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>\n2. \t<p data-foo="bazbar">this is unstyled</p></div>', 'start_line_number': 1, 'end_line_number': 2}, {'relative_path': 'test/css/index.js', 'content': "1. import assert from 'assert';\n2. import * as fs from 'fs';\n3. import { parse } from 'acorn';\n4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';\n5. \n6. function tryRequire(file) {\n7. \ttry {\n8. \t\tconst mod = require(file);\n9. \t\treturn mod.default || mod;\n10. \t} catch (err) {\n11. \t\tif (err.code !== 'MODULE_NOT_FOUND') throw err;\n12. \t\treturn null;\n13. \t}\n14. }\n15. \n16. function normalizeWarning(warning) {\n17. \twarning.frame = warning.frame\n18. \t\t.replace(/^\\n/, '')\n19. \t\t.replace(/^\\t+/gm, '')\n20. \t\t.replace(/\\s+$/gm, '');\n21. \tdelete warning.filename;\n22. \tdelete warning.toString;\n23. \treturn warning;\n24. }\n25. \n26. function checkCodeIsValid(code) {\n27. \ttry {\n28. \t\tparse(code);\n29. \t} catch (err) {\n30. \t\tconsole.error(addLineNumbers(code));\n31. \t\tthrow new Error(err.message);\n32. \t}\n33. }\n34. \n35. describe('css', () => {\n36. \tfs.readdirSync('test/css/samples').forEach(dir => {\n37. \t\tif (dir[0] === '.') return;\n38. \n39. \t\t// add .solo to a sample directory name to only run that test\n40. \t\tconst solo = /\\.solo/.test(dir);\n41. \t\tconst skip = /\\.skip/.test(dir);\n42. \n43. \t\tif (solo && process.env.CI) {\n44. \t\t\tthrow new Error('Forgot to remove `solo: true` from test');\n45. \t\t}\n46. \n47. \t\t(solo ? it.only : skip ? it.skip : it)(dir, () => {\n48. \t\t\tconst config = tryRequire(`./samples/${dir}/_config.js`) || {};\n49. \t\t\tconst input = fs\n50. \t\t\t\t.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')\n51. \t\t\t\t.replace(/\\s+$/, '');\n52. \n53. \t\t\tconst expectedWarnings = (config.warnings || []).map(normalizeWarning);\n54. \t\t\tconst domWarnings = [];\n55. \t\t\tconst ssrWarnings = [];\n56. \n57. \t\t\tconst dom = svelte.compile(\n58. \t\t\t\tinput,\n59. \t\t\t\tObject.assign(config, {\n60. \t\t\t\t\tformat: 'iife',\n61. \t\t\t\t\tname: 'SvelteComponent',\n62. \t\t\t\t\tonwarn: warning => {\n63. \t\t\t\t\t\tdomWarnings.push(warning);\n64. \t\t\t\t\t}\n65. \t\t\t\t})\n66. \t\t\t);\n67. \n68. \t\t\tconst ssr = svelte.compile(\n69. \t\t\t\tinput,\n70. \t\t\t\tObject.assign(config, {\n71. \t\t\t\t\tformat: 'iife',\n72. \t\t\t\t\tgenerate: 'ssr',\n73. \t\t\t\t\tname: 'SvelteComponent',\n74. \t\t\t\t\tonwarn: warning => {\n75. \t\t\t\t\t\tssrWarnings.push(warning);\n76. \t\t\t\t\t}\n77. \t\t\t\t})\n78. \t\t\t);\n79. \n80. \t\t\t// check the code is valid\n81. \t\t\tcheckCodeIsValid(dom.code);\n82. \t\t\tcheckCodeIsValid(ssr.code);\n83. \n84. \t\t\tassert.equal(dom.css, ssr.css);\n85. \n86. \t\t\tassert.deepEqual(\n87. \t\t\t\tdomWarnings.map(normalizeWarning),\n88. \t\t\t\tssrWarnings.map(normalizeWarning)\n89. \t\t\t);\n90. \t\t\tassert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);\n91. \n92. \t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);\n93. \t\t\tconst expected = {\n94. \t\t\t\thtml: read(`test/css/samples/${dir}/expected.html`),\n95. \t\t\t\tcss: read(`test/css/samples/${dir}/expected.css`)\n96. \t\t\t};\n97. \n98. \t\t\tassert.equal(dom.css.replace(/svelte-\\d+/g, 'svelte-xyz'), expected.css);\n99. \n100. \t\t\t// verify that the right elements have scoping selectors\n101. \t\t\tif (expected.html !== null) {\n102. \t\t\t\tconst window = env();\n103. \n104. \t\t\t\t// dom\n105. \t\t\t\ttry {\n106. \t\t\t\t\tconst Component = eval(\n107. \t\t\t\t\t\t`(function () { ${dom.code}; return SvelteComponent; }())`\n108. \t\t\t\t\t);\n109. \t\t\t\t\tconst target = window.document.querySelector('main');\n110. \n111. \t\t\t\t\tnew Component({ target, data: config.data });\n112. \t\t\t\t\tconst html = target.innerHTML;\n113. \n114. \t\t\t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);\n115. \n116. \t\t\t\t\tassert.equal(\n117. \t\t\t\t\t\tnormalizeHtml(window, html.replace(/svelte-\\d+/g, 'svelte-xyz')),\n118. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n119. \t\t\t\t\t);\n120. \t\t\t\t} catch (err) {\n121. \t\t\t\t\tconsole.log(dom.code);\n122. \t\t\t\t\tthrow err;\n123. \t\t\t\t}\n124. \n125. \t\t\t\t// ssr\n126. \t\t\t\ttry {\n127. \t\t\t\t\tconst component = eval(\n128. \t\t\t\t\t\t`(function () { ${ssr.code}; return SvelteComponent; }())`\n129. \t\t\t\t\t);\n130. \n131. \t\t\t\t\tassert.equal(\n132. \t\t\t\t\t\tnormalizeHtml(\n133. \t\t\t\t\t\t\twindow,\n134. \t\t\t\t\t\t\tcomponent.render(config.data).replace(/svelte-\\d+/g, 'svelte-xyz')\n135. \t\t\t\t\t\t),\n136. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n137. \t\t\t\t\t);\n138. \t\t\t\t} catch (err) {\n139. \t\t\t\t\tconsole.log(ssr.code);\n140. \t\t\t\t\tthrow err;\n141. \t\t\t\t}\n142. \t\t\t}\n143. \t\t});\n144. \t});\n145. });\n146. \n147. function read(file) {\n148. \ttry {\n149. \t\treturn fs.readFileSync(file, 'utf-8');\n150. \t} catch (err) {\n151. \t\treturn null;\n152. \t}\n153. }", 'start_line_number': 1, 'end_line_number': 153}, {'relative_path': 'test/css/samples/attribute-selector-unquoted/input.html', 'content': "1. <div foo='bar'></div>\n2. \n3. <style>\n4. \t[foo=bar] {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", 'start_line_number': 1, 'end_line_number': 7}, {'relative_path': 'test/css/samples/attribute-selector-unquoted/expected.css', 'content': '1. [foo=bar][svelte-xyz]{color:red}', 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/universal-selector/input.html', 'content': '1. <div></div>\n2. \n3. <style>\n4. \t* {\n5. \t\tcolor: red;\n6. \t}\n7. </style>', 'start_line_number': 1, 'end_line_number': 7}, {'relative_path': 'test/css/samples/universal-selector/expected.css', 'content': '1. [svelte-xyz],[svelte-xyz] *{color:red}', 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/unused-selector/input.html', 'content': "1. <div class='foo'></div>\n2. \n3. <style>\n4. \t.foo {\n5. \t\tcolor: red;\n6. \t}\n7. \n8. \t.bar {\n9. \t\tcolor: blue;\n10. \t}\n11. </style>", 'start_line_number': 1, 'end_line_number': 11}, {'relative_path': 'test/css/samples/unused-selector/expected.css', 'content': '1. .foo[svelte-xyz]{color:red}', 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/unused-selector-leading/input.html', 'content': "1. <div class='bar'></div>\n2. \n3. <style>\n4. \t.foo, .bar, .baz {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", 'start_line_number': 1, 'end_line_number': 7}, {'relative_path': 'test/css/samples/unused-selector-leading/expected.css', 'content': '1. .bar[svelte-xyz]{color:red}', 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html', 'content': "1. <div>\n2. \t<p data-foo='barbaz'>this is unstyled</p>\n3. \t<p data-foo='bazbar'>this is styled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo$='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", 'start_line_number': 1, 'end_line_number': 10}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css', 'content': "1. [data-foo$='bar'][svelte-xyz]{color:red}", 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html', 'content': '1. <div><p data-foo="barbaz">this is unstyled</p>\n2. \t<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>', 'start_line_number': 1, 'end_line_number': 2}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html', 'content': "1. <div>\n2. \t<p data-foo='qux bar'>this is styled</p>\n3. \t<p data-foo='qux baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo~='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", 'start_line_number': 1, 'end_line_number': 10}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css', 'content': "1. [data-foo~='bar'][svelte-xyz]{color:red}", 'start_line_number': 1, 'end_line_number': 1}, {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html', 'content': '1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>\n2. \t<p data-foo="qux baz">this is unstyled</p></div>', 'start_line_number': 1, 'end_line_number': 2}]}]
2025-11-10 23:56:34,229 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 1 memories from memory
2025-11-10 23:56:34,229 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 24 contexts from memory
2025-11-10 23:56:34,229 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 24 contexts from memory
2025-11-10 23:56:34,231 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 24 new contexts to 0 existing contexts
2025-11-10 23:56:34,231 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 24 total contexts (removed 0 duplicates)
2025-11-10 23:56:34,232 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full contents of test/css/index.js and test/helpers.js, and the full contents (input.html, expected.css, expected.html, _config.js) of test/css/samples/attribute-selector-unquoted, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-equals-case-insensitive, omit-scoping-attribute-attribute-selector-pipe-equals, and omit-scoping-attribute-attribute-selector-word-equals.
Extra Requirements: If sending full files is too large, include at minimum: the import and test registration lines in test/css/index.js referencing these samples, and the helper functions used from test/helpers.js, all with line numbers.
Purpose: To extract 5 relevant test cases with exact code, imports, helper functions, and line numbers demonstrating attribute selector behavior matching the reported bug.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: test/css/index.js
Line number range: 1 - 153
Content:
1. import assert from 'assert';
2. import * as fs from 'fs';
3. import { parse } from 'acorn';
4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';
5. 
6. function tryRequire(file) {
7. 	try {
8. 		const mod = require(file);
9. 		return mod.default || mod;
10. 	} catch (err) {
11. 		if (err.code !== 'MODULE_NOT_FOUND') throw err;
12. 		return null;
13. 	}
14. }
15. 
16. function normalizeWarning(warning) {
17. 	warning.frame = warning.frame
18. 		.replace(/^\n/, '')
19. 		.replace(/^\t+/gm, '')
20. 		.replace(/\s+$/gm, '');
21. 	delete warning.filename;
22. 	delete warning.toString;
23. 	return warning;
24. }
25. 
26. function checkCodeIsValid(code) {
27. 	try {
28. 		parse(code);
29. 	} catch (err) {
30. 		console.error(addLineNumbers(code));
31. 		throw new Error(err.message);
32. 	}
33. }
34. 
35. describe('css', () => {
36. 	fs.readdirSync('test/css/samples').forEach(dir => {
37. 		if (dir[0] === '.') return;
38. 
39. 		// add .solo to a sample directory name to only run that test
40. 		const solo = /\.solo/.test(dir);
41. 		const skip = /\.skip/.test(dir);
42. 
43. 		if (solo && process.env.CI) {
44. 			throw new Error('Forgot to remove `solo: true` from test');
45. 		}
46. 
47. 		(solo ? it.only : skip ? it.skip : it)(dir, () => {
48. 			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
49. 			const input = fs
50. 				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
51. 				.replace(/\s+$/, '');
52. 
53. 			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
54. 			const domWarnings = [];
55. 			const ssrWarnings = [];
56. 
57. 			const dom = svelte.compile(
58. 				input,
59. 				Object.assign(config, {
60. 					format: 'iife',
61. 					name: 'SvelteComponent',
62. 					onwarn: warning => {
63. 						domWarnings.push(warning);
64. 					}
65. 				})
66. 			);
67. 
68. 			const ssr = svelte.compile(
69. 				input,
70. 				Object.assign(config, {
71. 					format: 'iife',
72. 					generate: 'ssr',
73. 					name: 'SvelteComponent',
74. 					onwarn: warning => {
75. 						ssrWarnings.push(warning);
76. 					}
77. 				})
78. 			);
79. 
80. 			// check the code is valid
81. 			checkCodeIsValid(dom.code);
82. 			checkCodeIsValid(ssr.code);
83. 
84. 			assert.equal(dom.css, ssr.css);
85. 
86. 			assert.deepEqual(
87. 				domWarnings.map(normalizeWarning),
88. 				ssrWarnings.map(normalizeWarning)
89. 			);
90. 			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);
91. 
92. 			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
93. 			const expected = {
94. 				html: read(`test/css/samples/${dir}/expected.html`),
95. 				css: read(`test/css/samples/${dir}/expected.css`)
96. 			};
97. 
98. 			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);
99. 
100. 			// verify that the right elements have scoping selectors
101. 			if (expected.html !== null) {
102. 				const window = env();
103. 
104. 				// dom
105. 				try {
106. 					const Component = eval(
107. 						`(function () { ${dom.code}; return SvelteComponent; }())`
108. 					);
109. 					const target = window.document.querySelector('main');
110. 
111. 					new Component({ target, data: config.data });
112. 					const html = target.innerHTML;
113. 
114. 					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);
115. 
116. 					assert.equal(
117. 						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
118. 						normalizeHtml(window, expected.html)
119. 					);
120. 				} catch (err) {
121. 					console.log(dom.code);
122. 					throw err;
123. 				}
124. 
125. 				// ssr
126. 				try {
127. 					const component = eval(
128. 						`(function () { ${ssr.code}; return SvelteComponent; }())`
129. 					);
130. 
131. 					assert.equal(
132. 						normalizeHtml(
133. 							window,
134. 							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
135. 						),
136. 						normalizeHtml(window, expected.html)
137. 					);
138. 				} catch (err) {
139. 					console.log(ssr.code);
140. 					throw err;
141. 				}
142. 			}
143. 		});
144. 	});
145. });
146. 
147. function read(file) {
148. 	try {
149. 		return fs.readFileSync(file, 'utf-8');
150. 	} catch (err) {
151. 		return null;
152. 	}
153. }


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css
Line number range: 1 - 1
Content:
1. [data-foo*='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>
2. 	<p data-foo="fooBARbaz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='foobarbaz'>this is styled</p>
3. 	<p data-foo='fooBARbaz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo*='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>
2. 	<p data-foo="baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='bar'>this is styled</p>
3. 	<p data-foo='baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo^='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>
2. 	<p data-foo="bazbar">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is styled</p>
3. 	<p data-foo='bazbar'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo^='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo$='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html
Line number range: 1 - 2
Content:
1. <div><p data-foo="barbaz">this is unstyled</p>
2. 	<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is unstyled</p>
3. 	<p data-foo='bazbar'>this is styled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo$='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo~='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>
2. 	<p data-foo="qux baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='qux bar'>this is styled</p>
3. 	<p data-foo='qux baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo~='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/universal-selector/expected.css
Line number range: 1 - 1
Content:
1. [svelte-xyz],[svelte-xyz] *{color:red}


File: test/css/samples/universal-selector/input.html
Line number range: 1 - 7
Content:
1. <div></div>
2. 
3. <style>
4. 	* {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector-leading/expected.css
Line number range: 1 - 1
Content:
1. .bar[svelte-xyz]{color:red}


File: test/css/samples/unused-selector-leading/input.html
Line number range: 1 - 7
Content:
1. <div class='bar'></div>
2. 
3. <style>
4. 	.foo, .bar, .baz {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector/expected.css
Line number range: 1 - 1
Content:
1. .foo[svelte-xyz]{color:red}


File: test/css/samples/unused-selector/input.html
Line number range: 1 - 11
Content:
1. <div class='foo'></div>
2. 
3. <style>
4. 	.foo {
5. 		color: red;
6. 	}
7. 
8. 	.bar {
9. 		color: blue;
10. 	}
11. </style>

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:57:04,679 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning="The task requires presenting 5 complete, self-contained test cases with all imports, setup, and assertions. We have test/css/index.js and several attribute selector sample inputs/expectations, but we are missing critical dependencies: test/helpers.js (exports env, addLineNumbers, normalizeHtml, svelte) used by the test harness, and the _config.js files for the selected sample directories, which are part of the test setup. Without these, we cannot include all necessary imports or fully reproduce each test case's configuration and environment, nor provide accurate line numbers for those files." query='Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.' extra_requirements='If full files are too large, include at least the definitions and exports of addLineNumbers, env, normalizeHtml, svelte from helpers.js with line numbers, and the contents of each requested _config.js with line numbers.' purpose='To assemble 5 complete, self-contained test cases with all imports, environment setup, configuration, and assertions, preserving file paths and line numbers.'
2025-11-10 23:57:04,681 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.
2025-11-10 23:57:05,759 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: []
2025-11-10 23:57:05,759 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 memories from memory
2025-11-10 23:57:05,759 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 contexts from memory
2025-11-10 23:57:05,759 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 0 contexts from memory
2025-11-10 23:57:05,760 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-11-10 23:57:05,761 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-11-10 23:57:05,761 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.
Extra requirements: If full files are too large, include at least the definitions and exports of addLineNumbers, env, normalizeHtml, svelte from helpers.js with line numbers, and the contents of each requested _config.js with line numbers.
Purpose: To assemble 5 complete, self-contained test cases with all imports, environment setup, configuration, and assertions, preserving file paths and line numbers.
2025-11-10 23:57:12,755 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_GXppmD2Fb4AO63o8IGxTzBnA', 'function': {'arguments': '{"relative_path":"test/helpers.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 736, 'prompt_tokens': 2234, 'total_tokens': 2970, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--02e210fe-eb87-4bc6-9c5f-90b50ea78a9b-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/helpers.js'}, 'id': 'call_GXppmD2Fb4AO63o8IGxTzBnA', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2234, 'output_tokens': 736, 'total_tokens': 2970, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-10 23:57:16,593 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_C59ee6CSQgPrITqSmZsLRE33', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-unquoted/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 297, 'prompt_tokens': 4988, 'total_tokens': 5285, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6edc6aa2-20ca-4d27-ba07-11433bdc91f2-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/attribute-selector-unquoted/_config.js'}, 'id': 'call_C59ee6CSQgPrITqSmZsLRE33', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4988, 'output_tokens': 297, 'total_tokens': 5285, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-10 23:57:17,781 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_1kMBRzV5j8RpOoT0ihyRJXBH', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 5117, 'total_tokens': 5157, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--03dbb9b1-fadb-4cf0-9ec2-f313991f59a3-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js'}, 'id': 'call_1kMBRzV5j8RpOoT0ihyRJXBH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5117, 'output_tokens': 40, 'total_tokens': 5157, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:19,027 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_uvjuKE5p6E9nFbzzNaocCEfS', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 5218, 'total_tokens': 5259, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b15437db-d70c-4849-8900-a96632c856b4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js'}, 'id': 'call_uvjuKE5p6E9nFbzzNaocCEfS', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5218, 'output_tokens': 41, 'total_tokens': 5259, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:20,374 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_XYJ7WLGAcjJdJ4r2XETBBmGd', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 5359, 'total_tokens': 5399, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--877fb0ef-6486-4971-8f3f-c5306abec09f-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js'}, 'id': 'call_XYJ7WLGAcjJdJ4r2XETBBmGd', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5359, 'output_tokens': 40, 'total_tokens': 5399, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:21,890 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_oYS2p9XkIeGoIDENI6cOryEp', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 5460, 'total_tokens': 5501, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5aa884b5-1ddc-4c8d-9906-a43016f89fc4-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js'}, 'id': 'call_oYS2p9XkIeGoIDENI6cOryEp', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5460, 'output_tokens': 41, 'total_tokens': 5501, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:22,948 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_feOQBSAVGVMwYoygwMN85fLO', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 39, 'prompt_tokens': 5601, 'total_tokens': 5640, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--2a5398f3-4539-4b35-bebb-91357d814871-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js'}, 'id': 'call_feOQBSAVGVMwYoygwMN85fLO', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5601, 'output_tokens': 39, 'total_tokens': 5640, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:24,402 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_GaYkDp0xnplKt3AFzYJvRbB9', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 5700, 'total_tokens': 5740, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--9add1411-98bc-493c-b245-2abc5202d228-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js'}, 'id': 'call_GaYkDp0xnplKt3AFzYJvRbB9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5700, 'output_tokens': 40, 'total_tokens': 5740, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:25,820 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_CDrGD5vNNt7KoUut3iI5smif', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 5839, 'total_tokens': 5879, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5632}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c018d80d-7bc9-45b0-b309-7e6471bbee32-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js'}, 'id': 'call_CDrGD5vNNt7KoUut3iI5smif', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5839, 'output_tokens': 40, 'total_tokens': 5879, 'input_token_details': {'audio': 0, 'cache_read': 5632}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:27,936 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_M51aidlhtKrl6gpmo0cBVR4f', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 5940, 'total_tokens': 5981, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5760}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1b2a2233-990d-49fe-acae-11d9133c85cf-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js'}, 'id': 'call_M51aidlhtKrl6gpmo0cBVR4f', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5940, 'output_tokens': 41, 'total_tokens': 5981, 'input_token_details': {'audio': 0, 'cache_read': 5760}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:29,516 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_TmE3FgKwuthyb5KLYdo5rBme', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 41, 'prompt_tokens': 6081, 'total_tokens': 6122, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5888}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--26e08a50-7d03-4e37-8d92-5ad6ed5da462-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js'}, 'id': 'call_TmE3FgKwuthyb5KLYdo5rBme', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6081, 'output_tokens': 41, 'total_tokens': 6122, 'input_token_details': {'audio': 0, 'cache_read': 5888}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:30,759 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_1L7zRl41Quxr4GayhIegbDko', 'function': {'arguments': '{"relative_path":"test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 42, 'prompt_tokens': 6184, 'total_tokens': 6226, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4864}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--549c3f9d-7893-43d4-8101-b24b29653a6c-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js'}, 'id': 'call_1L7zRl41Quxr4GayhIegbDko', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6184, 'output_tokens': 42, 'total_tokens': 6226, 'input_token_details': {'audio': 0, 'cache_read': 4864}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:57:40,973 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='I retrieved the full content of test/helpers.js (239 lines), which includes the exports and definitions for svelte, env, normalizeHtml, and addLineNumbers with line numbers. I also fetched the _config.js files for test/css/samples/attribute-selector-unquoted and for each of the omit-scoping-attribute-selector variants (equals, contains, prefix, suffix, word-equals), each showing their complete contents with line numbers. All file paths were preserved exactly as requested. Since helpers.js is under the size limit, I provided the full file rather than just the minimum required sections.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1089, 'prompt_tokens': 6327, 'total_tokens': 7416, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 960, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5376}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--77b5a514-740c-420d-8274-fd93744cd700-0' usage_metadata={'input_tokens': 6327, 'output_tokens': 1089, 'total_tokens': 7416, 'input_token_details': {'audio': 0, 'cache_read': 5376}, 'output_token_details': {'audio': 0, 'reasoning': 960}}
2025-11-10 23:57:40,977 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If full files are too large, include at least the definitions and exports of addLineNumbers, env, normalizeHtml, svelte from helpers.js with line numbers, and the contents of each requested _config.js with line numbers.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
To assemble 5 complete, self-contained test cases with all imports, environment setup, configuration, and assertions, preserving file paths and line numbers.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: test/css/samples/attribute-selector-unquoted/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/helpers.js
Line number range: 1 - 239
Content:
1. import { JSDOM } from 'jsdom';
2. import assert from 'assert';
3. import glob from 'glob';
4. import fs from 'fs';
5. import path from 'path';
6. import chalk from 'chalk';
7. 
8. // for coverage purposes, we need to test source files,
9. // but for sanity purposes, we need to test dist files
10. export function loadSvelte(test) {
11. 	if (test) global.__svelte_test = true;
12. 
13. 	const resolved = process.env.COVERAGE
14. 		? require.resolve('../src/index.js')
15. 		: require.resolve('../compiler/svelte.js');
16. 
17. 	delete require.cache[resolved];
18. 	return require(resolved);
19. }
20. 
21. export const svelte = loadSvelte();
22. 
23. export function exists(path) {
24. 	try {
25. 		fs.statSync(path);
26. 		return true;
27. 	} catch (err) {
28. 		return false;
29. 	}
30. }
31. 
32. export function tryToLoadJson(file) {
33. 	try {
34. 		return JSON.parse(fs.readFileSync(file));
35. 	} catch (err) {
36. 		if (err.code !== 'ENOENT') throw err;
37. 		return null;
38. 	}
39. }
40. 
41. export function tryToReadFile(file) {
42. 	try {
43. 		return fs.readFileSync(file, 'utf-8');
44. 	} catch (err) {
45. 		if (err.code !== 'ENOENT') throw err;
46. 		return null;
47. 	}
48. }
49. 
50. const { window } = new JSDOM('<main></main>');
51. global.document = window.document;
52. 
53. export function env() {
54. 	window._svelteTransitionManager = null;
55. 	window.document.body.innerHTML = '<main></main>';
56. 
57. 	return window;
58. }
59. 
60. function cleanChildren(node) {
61. 	let previous = null;
62. 
63. 	// sort attributes
64. 	const attributes = Array.from(node.attributes).sort((a, b) => {
65. 		return a.name < b.name ? -1 : 1;
66. 	});
67. 
68. 	attributes.forEach(attr => {
69. 		node.removeAttribute(attr.name);
70. 	});
71. 
72. 	attributes.forEach(attr => {
73. 		node.setAttribute(attr.name, attr.value);
74. 	});
75. 
76. 	// recurse
77. 	[...node.childNodes].forEach(child => {
78. 		if (child.nodeType === 3) {
79. 			// text
80. 			if (
81. 				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
82. 				node.tagName !== 'text' &&
83. 				node.tagName !== 'tspan'
84. 			) {
85. 				node.removeChild(child);
86. 			}
87. 
88. 			child.data = child.data.replace(/\s{2,}/g, '\n');
89. 
90. 			if (previous && previous.nodeType === 3) {
91. 				previous.data += child.data;
92. 				previous.data = previous.data.replace(/\s{2,}/g, '\n');
93. 
94. 				node.removeChild(child);
95. 				child = previous;
96. 			}
97. 		} else {
98. 			cleanChildren(child);
99. 		}
100. 
101. 		previous = child;
102. 	});
103. 
104. 	// collapse whitespace
105. 	if (node.firstChild && node.firstChild.nodeType === 3) {
106. 		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
107. 		if (!node.firstChild.data) node.removeChild(node.firstChild);
108. 	}
109. 
110. 	if (node.lastChild && node.lastChild.nodeType === 3) {
111. 		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
112. 		if (!node.lastChild.data) node.removeChild(node.lastChild);
113. 	}
114. }
115. 
116. export function normalizeHtml(window, html) {
117. 	try {
118. 		const node = window.document.createElement('div');
119. 		node.innerHTML = html
120. 			.replace(/<!--.*?-->/g, '')
121. 			.replace(/>[\s\r\n]+</g, '><')
122. 			.trim();
123. 		cleanChildren(node, '');
124. 		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
125. 	} catch (err) {
126. 		throw new Error(`Failed to normalize HTML:\n${html}`);
127. 	}
128. }
129. 
130. export function setupHtmlEqual() {
131. 	const window = env();
132. 
133. 	assert.htmlEqual = (actual, expected, message) => {
134. 		assert.deepEqual(
135. 			normalizeHtml(window, actual),
136. 			normalizeHtml(window, expected),
137. 			message
138. 		);
139. 	};
140. }
141. 
142. export function loadConfig(file) {
143. 	try {
144. 		const resolved = require.resolve(file);
145. 		delete require.cache[resolved];
146. 
147. 		const config = require(resolved);
148. 		return config.default || config;
149. 	} catch (err) {
150. 		if (err.code === 'MODULE_NOT_FOUND') {
151. 			return {};
152. 		}
153. 
154. 		throw err;
155. 	}
156. }
157. 
158. export function addLineNumbers(code) {
159. 	return code
160. 		.split('\n')
161. 		.map((line, i) => {
162. 			i = String(i + 1);
163. 			while (i.length < 3) i = ` ${i}`;
164. 
165. 			return (
166. 				chalk.grey(`  ${i}: `) +
167. 				line.replace(/^\t+/, match => match.split('\t').join('    '))
168. 			);
169. 		})
170. 		.join('\n');
171. }
172. 
173. function capitalise(str) {
174. 	return str[0].toUpperCase() + str.slice(1);
175. }
176. 
177. export function showOutput(cwd, options = {}, s = svelte) {
178. 	glob.sync('**/*.html', { cwd }).forEach(file => {
179. 		if (file[0] === '_') return;
180. 		const { code } = s.compile(
181. 			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
182. 			Object.assign(options, {
183. 				filename: file,
184. 				name: capitalise(path.basename(file).replace(/\.html$/, ''))
185. 			})
186. 		);
187. 
188. 		console.log( // eslint-disable-line no-console
189. 			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
190. 		);
191. 	});
192. }
193. 
194. const start = /\n(\t+)/;
195. export function deindent(strings, ...values) {
196. 	const indentation = start.exec(strings[0])[1];
197. 	const pattern = new RegExp(`^${indentation}`, 'gm');
198. 
199. 	let result = strings[0].replace(start, '').replace(pattern, '');
200. 
201. 	let trailingIndentation = getTrailingIndentation(result);
202. 
203. 	for (let i = 1; i < strings.length; i += 1) {
204. 		let expression = values[i - 1];
205. 		const string = strings[i].replace(pattern, '');
206. 
207. 		if (Array.isArray(expression)) {
208. 			expression = expression.length ? expression.join('\n') : null;
209. 		}
210. 
211. 		if (expression || expression === '') {
212. 			const value = String(expression).replace(
213. 				/\n/g,
214. 				`\n${trailingIndentation}`
215. 			);
216. 			result += value + string;
217. 		} else {
218. 			let c = result.length;
219. 			while (/\s/.test(result[c - 1])) c -= 1;
220. 			result = result.slice(0, c) + string;
221. 		}
222. 
223. 		trailingIndentation = getTrailingIndentation(result);
224. 	}
225. 
226. 	return result.trim().replace(/\t+$/gm, '');
227. }
228. 
229. function getTrailingIndentation(str) {
230. 	let i = str.length;
231. 	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
232. 	return str.slice(i, str.length);
233. }
234. 
235. export function spaces(i) {
236. 	let result = '';
237. 	while (i--) result += ' ';
238. 	return result;
239. }

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-11-10 23:57:54,167 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement: Provide the full content of test/helpers.js. Including the whole file satisfies the request and ensures all imports, environment setup, configuration, and utilities are present for assembling test cases.\n2. Extended relevance: Contains the definitions/exports specifically requested if full file is large (svelte export, env, normalizeHtml, addLineNumbers), plus supporting functions and imports that tests depend on.', relative_path='test/helpers.js', start_line=1, end_line=239), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for attribute-selector-unquoted.\n2. Extended relevance: This file configures cascade behavior for the CSS sample test, necessary for a complete test case.', relative_path='test/css/samples/attribute-selector-unquoted/_config.js', start_line=1, end_line=3), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for omit-scoping-attribute-attribute-selector-equals.\n2. Extended relevance: Configuration details needed to run the test correctly.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js', start_line=1, end_line=3), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for omit-scoping-attribute-attribute-selector-contains.\n2. Extended relevance: Ensures correct cascade configuration for the test.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js', start_line=1, end_line=3), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for omit-scoping-attribute-attribute-selector-prefix.\n2. Extended relevance: Required to assemble the corresponding test case.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js', start_line=1, end_line=3), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for omit-scoping-attribute-attribute-selector-suffix.\n2. Extended relevance: Critical configuration for the test sample.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js', start_line=1, end_line=3), ContextOutput(reasoning='1. Query requirement: Provide the _config.js content for omit-scoping-attribute-attribute-selector-word-equals.\n2. Extended relevance: Necessary configuration for the test to be complete.', relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js', start_line=1, end_line=3)]
2025-11-10 23:57:54,173 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Storing 7 contexts to memory for query: Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.
2025-11-10 23:57:54,533 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-11-10 23:57:54,535 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 7 new contexts to 24 existing contexts
2025-11-10 23:57:54,535 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 31 total contexts (removed 0 duplicates)
2025-11-10 23:57:54,537 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


OBJECTIVE: Find 5 relevant existing test cases that demonstrates similar functionality to the reported bug,
including ALL necessary imports, test setup, mocking, assertions, and any test method used in the test case.

<reasoning>
1. Analyze bug characteristics:
   - Core functionality being tested
   - Input parameters and configurations
   - Expected error conditions
   - Environmental dependencies

2. Search requirements:
   - Required imports and dependencies
   - Test files exercising similar functionality
   - Mock/fixture setup patterns
   - Assertion styles
   - Error handling tests

3. Focus areas:
   - All necessary imports (standard library, testing frameworks, mocking utilities)
   - Dependencies and third-party packages
   - Test setup and teardown
   - Mock object configuration
   - Network/external service simulation
   - Error condition verification
</reasoning>

REQUIREMENTS:
- Return 5 complete, self-contained test cases most similar to bug scenario
- Must include ALL necessary imports at the start of each test file
- Must include full test method implementation
- Must include ALL mock/fixture setup
- Must include helper functions used by test
- Must preserve exact file paths and line numbers

<examples>
<example id="database-timeout">
<bug>
db.execute("SELECT * FROM users").fetchall() 
raises ConnectionTimeout when load is high
</bug>

<ideal_test_match>
# File: tests/test_database.py
import pytest
from unittest.mock import Mock, patch
from database.exceptions import ConnectionTimeout
from database.models import QueryResult
from database.client import DatabaseClient

class TestDatabaseTimeout:
    @pytest.fixture
    def mock_db_connection(self):
        conn = Mock()
        conn.execute.side_effect = [
            ConnectionTimeout("Connection timed out"),
            QueryResult(["user1", "user2"])  # Second try succeeds
        ]
        return conn
        
    def test_handle_timeout_during_query(self, mock_db_connection):
        # Complete test showing timeout scenario
        # Including retry logic verification
        # With all necessary assertions
</ideal_test_match>
</example>

<example id="file-permission">
<bug>
FileProcessor('/root/data.txt').process() 
fails with PermissionError
</bug>

<ideal_test_match>
# File: tests/test_file_processor.py
import os
import pytest
from unittest.mock import patch, mock_open
from file_processor import FileProcessor
from file_processor.exceptions import ProcessingError

class TestFilePermissions:
    @patch('os.access')
    @patch('builtins.open')
    def test_file_permission_denied(self, mock_open, mock_access):
        # Full test setup with mocked file system
        # Permission denial simulation
        # Error handling verification
</ideal_test_match>
</example>

Search priority:
1. Tests of exact same functionality (including import patterns)
2. Tests with similar error conditions
3. Tests with comparable mocking patterns
4. Tests demonstrating similar assertions

Find the 5 most relevant test cases with complete context, ensuring ALL necessary imports are included at the start of each test file.

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full contents of test/css/index.js and test/helpers.js, and the full contents (input.html, expected.css, expected.html, _config.js) of test/css/samples/attribute-selector-unquoted, omit-scoping-attribute-attribute-selector-equals, omit-scoping-attribute-attribute-selector-equals-case-insensitive, omit-scoping-attribute-attribute-selector-pipe-equals, and omit-scoping-attribute-attribute-selector-word-equals.
Extra Requirements: If sending full files is too large, include at minimum: the import and test registration lines in test/css/index.js referencing these samples, and the helper functions used from test/helpers.js, all with line numbers.
Purpose: To extract 5 relevant test cases with exact code, imports, helper functions, and line numbers demonstrating attribute selector behavior matching the reported bug.

Previous refined query 2:
Essential Query: Please provide the full content of test/helpers.js and the _config.js files for test/css/samples/attribute-selector-unquoted and test/css/samples/omit-scoping-attribute-attribute-selector-{equals,contains,prefix,suffix,word-equals}.
Extra Requirements: If full files are too large, include at least the definitions and exports of addLineNumbers, env, normalizeHtml, svelte from helpers.js with line numbers, and the contents of each requested _config.js with line numbers.
Purpose: To assemble 5 complete, self-contained test cases with all imports, environment setup, configuration, and assertions, preserving file paths and line numbers.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: test/css/index.js
Line number range: 1 - 153
Content:
1. import assert from 'assert';
2. import * as fs from 'fs';
3. import { parse } from 'acorn';
4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';
5. 
6. function tryRequire(file) {
7. 	try {
8. 		const mod = require(file);
9. 		return mod.default || mod;
10. 	} catch (err) {
11. 		if (err.code !== 'MODULE_NOT_FOUND') throw err;
12. 		return null;
13. 	}
14. }
15. 
16. function normalizeWarning(warning) {
17. 	warning.frame = warning.frame
18. 		.replace(/^\n/, '')
19. 		.replace(/^\t+/gm, '')
20. 		.replace(/\s+$/gm, '');
21. 	delete warning.filename;
22. 	delete warning.toString;
23. 	return warning;
24. }
25. 
26. function checkCodeIsValid(code) {
27. 	try {
28. 		parse(code);
29. 	} catch (err) {
30. 		console.error(addLineNumbers(code));
31. 		throw new Error(err.message);
32. 	}
33. }
34. 
35. describe('css', () => {
36. 	fs.readdirSync('test/css/samples').forEach(dir => {
37. 		if (dir[0] === '.') return;
38. 
39. 		// add .solo to a sample directory name to only run that test
40. 		const solo = /\.solo/.test(dir);
41. 		const skip = /\.skip/.test(dir);
42. 
43. 		if (solo && process.env.CI) {
44. 			throw new Error('Forgot to remove `solo: true` from test');
45. 		}
46. 
47. 		(solo ? it.only : skip ? it.skip : it)(dir, () => {
48. 			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
49. 			const input = fs
50. 				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
51. 				.replace(/\s+$/, '');
52. 
53. 			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
54. 			const domWarnings = [];
55. 			const ssrWarnings = [];
56. 
57. 			const dom = svelte.compile(
58. 				input,
59. 				Object.assign(config, {
60. 					format: 'iife',
61. 					name: 'SvelteComponent',
62. 					onwarn: warning => {
63. 						domWarnings.push(warning);
64. 					}
65. 				})
66. 			);
67. 
68. 			const ssr = svelte.compile(
69. 				input,
70. 				Object.assign(config, {
71. 					format: 'iife',
72. 					generate: 'ssr',
73. 					name: 'SvelteComponent',
74. 					onwarn: warning => {
75. 						ssrWarnings.push(warning);
76. 					}
77. 				})
78. 			);
79. 
80. 			// check the code is valid
81. 			checkCodeIsValid(dom.code);
82. 			checkCodeIsValid(ssr.code);
83. 
84. 			assert.equal(dom.css, ssr.css);
85. 
86. 			assert.deepEqual(
87. 				domWarnings.map(normalizeWarning),
88. 				ssrWarnings.map(normalizeWarning)
89. 			);
90. 			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);
91. 
92. 			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
93. 			const expected = {
94. 				html: read(`test/css/samples/${dir}/expected.html`),
95. 				css: read(`test/css/samples/${dir}/expected.css`)
96. 			};
97. 
98. 			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);
99. 
100. 			// verify that the right elements have scoping selectors
101. 			if (expected.html !== null) {
102. 				const window = env();
103. 
104. 				// dom
105. 				try {
106. 					const Component = eval(
107. 						`(function () { ${dom.code}; return SvelteComponent; }())`
108. 					);
109. 					const target = window.document.querySelector('main');
110. 
111. 					new Component({ target, data: config.data });
112. 					const html = target.innerHTML;
113. 
114. 					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);
115. 
116. 					assert.equal(
117. 						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
118. 						normalizeHtml(window, expected.html)
119. 					);
120. 				} catch (err) {
121. 					console.log(dom.code);
122. 					throw err;
123. 				}
124. 
125. 				// ssr
126. 				try {
127. 					const component = eval(
128. 						`(function () { ${ssr.code}; return SvelteComponent; }())`
129. 					);
130. 
131. 					assert.equal(
132. 						normalizeHtml(
133. 							window,
134. 							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
135. 						),
136. 						normalizeHtml(window, expected.html)
137. 					);
138. 				} catch (err) {
139. 					console.log(ssr.code);
140. 					throw err;
141. 				}
142. 			}
143. 		});
144. 	});
145. });
146. 
147. function read(file) {
148. 	try {
149. 		return fs.readFileSync(file, 'utf-8');
150. 	} catch (err) {
151. 		return null;
152. 	}
153. }


File: test/css/samples/attribute-selector-unquoted/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/attribute-selector-unquoted/expected.css
Line number range: 1 - 1
Content:
1. [foo=bar][svelte-xyz]{color:red}


File: test/css/samples/attribute-selector-unquoted/input.html
Line number range: 1 - 7
Content:
1. <div foo='bar'></div>
2. 
3. <style>
4. 	[foo=bar] {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css
Line number range: 1 - 1
Content:
1. [data-foo*='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>
2. 	<p data-foo="fooBARbaz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='foobarbaz'>this is styled</p>
3. 	<p data-foo='fooBARbaz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo*='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>
2. 	<p data-foo="baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='bar'>this is styled</p>
3. 	<p data-foo='baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo^='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>
2. 	<p data-foo="bazbar">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is styled</p>
3. 	<p data-foo='bazbar'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo^='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css
Line number range: 1 - 1
Content:
1. [data-foo$='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html
Line number range: 1 - 2
Content:
1. <div><p data-foo="barbaz">this is unstyled</p>
2. 	<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='barbaz'>this is unstyled</p>
3. 	<p data-foo='bazbar'>this is styled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo$='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js
Line number range: 1 - 3
Content:
1. export default {
2. 	cascade: false
3. };


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css
Line number range: 1 - 1
Content:
1. [data-foo~='bar'][svelte-xyz]{color:red}


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html
Line number range: 1 - 2
Content:
1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>
2. 	<p data-foo="qux baz">this is unstyled</p></div>


File: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html
Line number range: 1 - 10
Content:
1. <div>
2. 	<p data-foo='qux bar'>this is styled</p>
3. 	<p data-foo='qux baz'>this is unstyled</p>
4. </div>
5. 
6. <style>
7. 	[data-foo~='bar'] {
8. 		color: red;
9. 	}
10. </style>


File: test/css/samples/universal-selector/expected.css
Line number range: 1 - 1
Content:
1. [svelte-xyz],[svelte-xyz] *{color:red}


File: test/css/samples/universal-selector/input.html
Line number range: 1 - 7
Content:
1. <div></div>
2. 
3. <style>
4. 	* {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector-leading/expected.css
Line number range: 1 - 1
Content:
1. .bar[svelte-xyz]{color:red}


File: test/css/samples/unused-selector-leading/input.html
Line number range: 1 - 7
Content:
1. <div class='bar'></div>
2. 
3. <style>
4. 	.foo, .bar, .baz {
5. 		color: red;
6. 	}
7. </style>


File: test/css/samples/unused-selector/expected.css
Line number range: 1 - 1
Content:
1. .foo[svelte-xyz]{color:red}


File: test/css/samples/unused-selector/input.html
Line number range: 1 - 11
Content:
1. <div class='foo'></div>
2. 
3. <style>
4. 	.foo {
5. 		color: red;
6. 	}
7. 
8. 	.bar {
9. 		color: blue;
10. 	}
11. </style>


File: test/helpers.js
Line number range: 1 - 239
Content:
1. import { JSDOM } from 'jsdom';
2. import assert from 'assert';
3. import glob from 'glob';
4. import fs from 'fs';
5. import path from 'path';
6. import chalk from 'chalk';
7. 
8. // for coverage purposes, we need to test source files,
9. // but for sanity purposes, we need to test dist files
10. export function loadSvelte(test) {
11. 	if (test) global.__svelte_test = true;
12. 
13. 	const resolved = process.env.COVERAGE
14. 		? require.resolve('../src/index.js')
15. 		: require.resolve('../compiler/svelte.js');
16. 
17. 	delete require.cache[resolved];
18. 	return require(resolved);
19. }
20. 
21. export const svelte = loadSvelte();
22. 
23. export function exists(path) {
24. 	try {
25. 		fs.statSync(path);
26. 		return true;
27. 	} catch (err) {
28. 		return false;
29. 	}
30. }
31. 
32. export function tryToLoadJson(file) {
33. 	try {
34. 		return JSON.parse(fs.readFileSync(file));
35. 	} catch (err) {
36. 		if (err.code !== 'ENOENT') throw err;
37. 		return null;
38. 	}
39. }
40. 
41. export function tryToReadFile(file) {
42. 	try {
43. 		return fs.readFileSync(file, 'utf-8');
44. 	} catch (err) {
45. 		if (err.code !== 'ENOENT') throw err;
46. 		return null;
47. 	}
48. }
49. 
50. const { window } = new JSDOM('<main></main>');
51. global.document = window.document;
52. 
53. export function env() {
54. 	window._svelteTransitionManager = null;
55. 	window.document.body.innerHTML = '<main></main>';
56. 
57. 	return window;
58. }
59. 
60. function cleanChildren(node) {
61. 	let previous = null;
62. 
63. 	// sort attributes
64. 	const attributes = Array.from(node.attributes).sort((a, b) => {
65. 		return a.name < b.name ? -1 : 1;
66. 	});
67. 
68. 	attributes.forEach(attr => {
69. 		node.removeAttribute(attr.name);
70. 	});
71. 
72. 	attributes.forEach(attr => {
73. 		node.setAttribute(attr.name, attr.value);
74. 	});
75. 
76. 	// recurse
77. 	[...node.childNodes].forEach(child => {
78. 		if (child.nodeType === 3) {
79. 			// text
80. 			if (
81. 				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
82. 				node.tagName !== 'text' &&
83. 				node.tagName !== 'tspan'
84. 			) {
85. 				node.removeChild(child);
86. 			}
87. 
88. 			child.data = child.data.replace(/\s{2,}/g, '\n');
89. 
90. 			if (previous && previous.nodeType === 3) {
91. 				previous.data += child.data;
92. 				previous.data = previous.data.replace(/\s{2,}/g, '\n');
93. 
94. 				node.removeChild(child);
95. 				child = previous;
96. 			}
97. 		} else {
98. 			cleanChildren(child);
99. 		}
100. 
101. 		previous = child;
102. 	});
103. 
104. 	// collapse whitespace
105. 	if (node.firstChild && node.firstChild.nodeType === 3) {
106. 		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
107. 		if (!node.firstChild.data) node.removeChild(node.firstChild);
108. 	}
109. 
110. 	if (node.lastChild && node.lastChild.nodeType === 3) {
111. 		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
112. 		if (!node.lastChild.data) node.removeChild(node.lastChild);
113. 	}
114. }
115. 
116. export function normalizeHtml(window, html) {
117. 	try {
118. 		const node = window.document.createElement('div');
119. 		node.innerHTML = html
120. 			.replace(/<!--.*?-->/g, '')
121. 			.replace(/>[\s\r\n]+</g, '><')
122. 			.trim();
123. 		cleanChildren(node, '');
124. 		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
125. 	} catch (err) {
126. 		throw new Error(`Failed to normalize HTML:\n${html}`);
127. 	}
128. }
129. 
130. export function setupHtmlEqual() {
131. 	const window = env();
132. 
133. 	assert.htmlEqual = (actual, expected, message) => {
134. 		assert.deepEqual(
135. 			normalizeHtml(window, actual),
136. 			normalizeHtml(window, expected),
137. 			message
138. 		);
139. 	};
140. }
141. 
142. export function loadConfig(file) {
143. 	try {
144. 		const resolved = require.resolve(file);
145. 		delete require.cache[resolved];
146. 
147. 		const config = require(resolved);
148. 		return config.default || config;
149. 	} catch (err) {
150. 		if (err.code === 'MODULE_NOT_FOUND') {
151. 			return {};
152. 		}
153. 
154. 		throw err;
155. 	}
156. }
157. 
158. export function addLineNumbers(code) {
159. 	return code
160. 		.split('\n')
161. 		.map((line, i) => {
162. 			i = String(i + 1);
163. 			while (i.length < 3) i = ` ${i}`;
164. 
165. 			return (
166. 				chalk.grey(`  ${i}: `) +
167. 				line.replace(/^\t+/, match => match.split('\t').join('    '))
168. 			);
169. 		})
170. 		.join('\n');
171. }
172. 
173. function capitalise(str) {
174. 	return str[0].toUpperCase() + str.slice(1);
175. }
176. 
177. export function showOutput(cwd, options = {}, s = svelte) {
178. 	glob.sync('**/*.html', { cwd }).forEach(file => {
179. 		if (file[0] === '_') return;
180. 		const { code } = s.compile(
181. 			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
182. 			Object.assign(options, {
183. 				filename: file,
184. 				name: capitalise(path.basename(file).replace(/\.html$/, ''))
185. 			})
186. 		);
187. 
188. 		console.log( // eslint-disable-line no-console
189. 			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
190. 		);
191. 	});
192. }
193. 
194. const start = /\n(\t+)/;
195. export function deindent(strings, ...values) {
196. 	const indentation = start.exec(strings[0])[1];
197. 	const pattern = new RegExp(`^${indentation}`, 'gm');
198. 
199. 	let result = strings[0].replace(start, '').replace(pattern, '');
200. 
201. 	let trailingIndentation = getTrailingIndentation(result);
202. 
203. 	for (let i = 1; i < strings.length; i += 1) {
204. 		let expression = values[i - 1];
205. 		const string = strings[i].replace(pattern, '');
206. 
207. 		if (Array.isArray(expression)) {
208. 			expression = expression.length ? expression.join('\n') : null;
209. 		}
210. 
211. 		if (expression || expression === '') {
212. 			const value = String(expression).replace(
213. 				/\n/g,
214. 				`\n${trailingIndentation}`
215. 			);
216. 			result += value + string;
217. 		} else {
218. 			let c = result.length;
219. 			while (/\s/.test(result[c - 1])) c -= 1;
220. 			result = result.slice(0, c) + string;
221. 		}
222. 
223. 		trailingIndentation = getTrailingIndentation(result);
224. 	}
225. 
226. 	return result.trim().replace(/\t+$/gm, '');
227. }
228. 
229. function getTrailingIndentation(str) {
230. 	let i = str.length;
231. 	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
232. 	return str.slice(i, str.length);
233. }
234. 
235. export function spaces(i) {
236. 	let result = '';
237. 	while (i--) result += ' ';
238. 	return result;
239. }

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-10 23:58:17,971 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='We have the full test harness (test/css/index.js), the helper utilities (test/helpers.js), and multiple CSS selector sample tests (input.html, expected.css/html, _config.js) with line numbers. These cover attribute selector behavior similar to the reported bug. No additional code or documentation is required to assemble five complete, self-contained test cases with imports, setup, assertions, and paths/line numbers.' query='' extra_requirements='' purpose='Proceed to compile five relevant tests demonstrating attribute selector behavior and include all required test harness code, helper functions, and sample files with exact paths and line numbers.'
2025-11-10 23:58:17,974 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='test/css/index.js', content="1. import assert from 'assert';\n2. import * as fs from 'fs';\n3. import { parse } from 'acorn';\n4. import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';\n5. \n6. function tryRequire(file) {\n7. \ttry {\n8. \t\tconst mod = require(file);\n9. \t\treturn mod.default || mod;\n10. \t} catch (err) {\n11. \t\tif (err.code !== 'MODULE_NOT_FOUND') throw err;\n12. \t\treturn null;\n13. \t}\n14. }\n15. \n16. function normalizeWarning(warning) {\n17. \twarning.frame = warning.frame\n18. \t\t.replace(/^\\n/, '')\n19. \t\t.replace(/^\\t+/gm, '')\n20. \t\t.replace(/\\s+$/gm, '');\n21. \tdelete warning.filename;\n22. \tdelete warning.toString;\n23. \treturn warning;\n24. }\n25. \n26. function checkCodeIsValid(code) {\n27. \ttry {\n28. \t\tparse(code);\n29. \t} catch (err) {\n30. \t\tconsole.error(addLineNumbers(code));\n31. \t\tthrow new Error(err.message);\n32. \t}\n33. }\n34. \n35. describe('css', () => {\n36. \tfs.readdirSync('test/css/samples').forEach(dir => {\n37. \t\tif (dir[0] === '.') return;\n38. \n39. \t\t// add .solo to a sample directory name to only run that test\n40. \t\tconst solo = /\\.solo/.test(dir);\n41. \t\tconst skip = /\\.skip/.test(dir);\n42. \n43. \t\tif (solo && process.env.CI) {\n44. \t\t\tthrow new Error('Forgot to remove `solo: true` from test');\n45. \t\t}\n46. \n47. \t\t(solo ? it.only : skip ? it.skip : it)(dir, () => {\n48. \t\t\tconst config = tryRequire(`./samples/${dir}/_config.js`) || {};\n49. \t\t\tconst input = fs\n50. \t\t\t\t.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')\n51. \t\t\t\t.replace(/\\s+$/, '');\n52. \n53. \t\t\tconst expectedWarnings = (config.warnings || []).map(normalizeWarning);\n54. \t\t\tconst domWarnings = [];\n55. \t\t\tconst ssrWarnings = [];\n56. \n57. \t\t\tconst dom = svelte.compile(\n58. \t\t\t\tinput,\n59. \t\t\t\tObject.assign(config, {\n60. \t\t\t\t\tformat: 'iife',\n61. \t\t\t\t\tname: 'SvelteComponent',\n62. \t\t\t\t\tonwarn: warning => {\n63. \t\t\t\t\t\tdomWarnings.push(warning);\n64. \t\t\t\t\t}\n65. \t\t\t\t})\n66. \t\t\t);\n67. \n68. \t\t\tconst ssr = svelte.compile(\n69. \t\t\t\tinput,\n70. \t\t\t\tObject.assign(config, {\n71. \t\t\t\t\tformat: 'iife',\n72. \t\t\t\t\tgenerate: 'ssr',\n73. \t\t\t\t\tname: 'SvelteComponent',\n74. \t\t\t\t\tonwarn: warning => {\n75. \t\t\t\t\t\tssrWarnings.push(warning);\n76. \t\t\t\t\t}\n77. \t\t\t\t})\n78. \t\t\t);\n79. \n80. \t\t\t// check the code is valid\n81. \t\t\tcheckCodeIsValid(dom.code);\n82. \t\t\tcheckCodeIsValid(ssr.code);\n83. \n84. \t\t\tassert.equal(dom.css, ssr.css);\n85. \n86. \t\t\tassert.deepEqual(\n87. \t\t\t\tdomWarnings.map(normalizeWarning),\n88. \t\t\t\tssrWarnings.map(normalizeWarning)\n89. \t\t\t);\n90. \t\t\tassert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);\n91. \n92. \t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);\n93. \t\t\tconst expected = {\n94. \t\t\t\thtml: read(`test/css/samples/${dir}/expected.html`),\n95. \t\t\t\tcss: read(`test/css/samples/${dir}/expected.css`)\n96. \t\t\t};\n97. \n98. \t\t\tassert.equal(dom.css.replace(/svelte-\\d+/g, 'svelte-xyz'), expected.css);\n99. \n100. \t\t\t// verify that the right elements have scoping selectors\n101. \t\t\tif (expected.html !== null) {\n102. \t\t\t\tconst window = env();\n103. \n104. \t\t\t\t// dom\n105. \t\t\t\ttry {\n106. \t\t\t\t\tconst Component = eval(\n107. \t\t\t\t\t\t`(function () { ${dom.code}; return SvelteComponent; }())`\n108. \t\t\t\t\t);\n109. \t\t\t\t\tconst target = window.document.querySelector('main');\n110. \n111. \t\t\t\t\tnew Component({ target, data: config.data });\n112. \t\t\t\t\tconst html = target.innerHTML;\n113. \n114. \t\t\t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);\n115. \n116. \t\t\t\t\tassert.equal(\n117. \t\t\t\t\t\tnormalizeHtml(window, html.replace(/svelte-\\d+/g, 'svelte-xyz')),\n118. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n119. \t\t\t\t\t);\n120. \t\t\t\t} catch (err) {\n121. \t\t\t\t\tconsole.log(dom.code);\n122. \t\t\t\t\tthrow err;\n123. \t\t\t\t}\n124. \n125. \t\t\t\t// ssr\n126. \t\t\t\ttry {\n127. \t\t\t\t\tconst component = eval(\n128. \t\t\t\t\t\t`(function () { ${ssr.code}; return SvelteComponent; }())`\n129. \t\t\t\t\t);\n130. \n131. \t\t\t\t\tassert.equal(\n132. \t\t\t\t\t\tnormalizeHtml(\n133. \t\t\t\t\t\t\twindow,\n134. \t\t\t\t\t\t\tcomponent.render(config.data).replace(/svelte-\\d+/g, 'svelte-xyz')\n135. \t\t\t\t\t\t),\n136. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n137. \t\t\t\t\t);\n138. \t\t\t\t} catch (err) {\n139. \t\t\t\t\tconsole.log(ssr.code);\n140. \t\t\t\t\tthrow err;\n141. \t\t\t\t}\n142. \t\t\t}\n143. \t\t});\n144. \t});\n145. });\n146. \n147. function read(file) {\n148. \ttry {\n149. \t\treturn fs.readFileSync(file, 'utf-8');\n150. \t} catch (err) {\n151. \t\treturn null;\n152. \t}\n153. }", start_line_number=1, end_line_number=153), Context(relative_path='test/css/samples/attribute-selector-unquoted/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/attribute-selector-unquoted/expected.css', content='1. [foo=bar][svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/attribute-selector-unquoted/input.html', content="1. <div foo='bar'></div>\n2. \n3. <style>\n4. \t[foo=bar] {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css', content="1. [data-foo*='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html', content='1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>\n2. \t<p data-foo="fooBARbaz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html', content="1. <div>\n2. \t<p data-foo='foobarbaz'>this is styled</p>\n3. \t<p data-foo='fooBARbaz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo*='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css', content="1. [data-foo='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html', content='1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>\n2. \t<p data-foo="baz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html', content="1. <div>\n2. \t<p data-foo='bar'>this is styled</p>\n3. \t<p data-foo='baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css', content="1. [data-foo^='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html', content='1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>\n2. \t<p data-foo="bazbar">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html', content="1. <div>\n2. \t<p data-foo='barbaz'>this is styled</p>\n3. \t<p data-foo='bazbar'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo^='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css', content="1. [data-foo$='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html', content='1. <div><p data-foo="barbaz">this is unstyled</p>\n2. \t<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html', content="1. <div>\n2. \t<p data-foo='barbaz'>this is unstyled</p>\n3. \t<p data-foo='bazbar'>this is styled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo$='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js', content='1. export default {\n2. \tcascade: false\n3. };', start_line_number=1, end_line_number=3), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css', content="1. [data-foo~='bar'][svelte-xyz]{color:red}", start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html', content='1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>\n2. \t<p data-foo="qux baz">this is unstyled</p></div>', start_line_number=1, end_line_number=2), Context(relative_path='test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html', content="1. <div>\n2. \t<p data-foo='qux bar'>this is styled</p>\n3. \t<p data-foo='qux baz'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo~='bar'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>", start_line_number=1, end_line_number=10), Context(relative_path='test/css/samples/universal-selector/expected.css', content='1. [svelte-xyz],[svelte-xyz] *{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/universal-selector/input.html', content='1. <div></div>\n2. \n3. <style>\n4. \t* {\n5. \t\tcolor: red;\n6. \t}\n7. </style>', start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/unused-selector-leading/expected.css', content='1. .bar[svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/unused-selector-leading/input.html', content="1. <div class='bar'></div>\n2. \n3. <style>\n4. \t.foo, .bar, .baz {\n5. \t\tcolor: red;\n6. \t}\n7. </style>", start_line_number=1, end_line_number=7), Context(relative_path='test/css/samples/unused-selector/expected.css', content='1. .foo[svelte-xyz]{color:red}', start_line_number=1, end_line_number=1), Context(relative_path='test/css/samples/unused-selector/input.html', content="1. <div class='foo'></div>\n2. \n3. <style>\n4. \t.foo {\n5. \t\tcolor: red;\n6. \t}\n7. \n8. \t.bar {\n9. \t\tcolor: blue;\n10. \t}\n11. </style>", start_line_number=1, end_line_number=11), Context(relative_path='test/helpers.js', content="1. import { JSDOM } from 'jsdom';\n2. import assert from 'assert';\n3. import glob from 'glob';\n4. import fs from 'fs';\n5. import path from 'path';\n6. import chalk from 'chalk';\n7. \n8. // for coverage purposes, we need to test source files,\n9. // but for sanity purposes, we need to test dist files\n10. export function loadSvelte(test) {\n11. \tif (test) global.__svelte_test = true;\n12. \n13. \tconst resolved = process.env.COVERAGE\n14. \t\t? require.resolve('../src/index.js')\n15. \t\t: require.resolve('../compiler/svelte.js');\n16. \n17. \tdelete require.cache[resolved];\n18. \treturn require(resolved);\n19. }\n20. \n21. export const svelte = loadSvelte();\n22. \n23. export function exists(path) {\n24. \ttry {\n25. \t\tfs.statSync(path);\n26. \t\treturn true;\n27. \t} catch (err) {\n28. \t\treturn false;\n29. \t}\n30. }\n31. \n32. export function tryToLoadJson(file) {\n33. \ttry {\n34. \t\treturn JSON.parse(fs.readFileSync(file));\n35. \t} catch (err) {\n36. \t\tif (err.code !== 'ENOENT') throw err;\n37. \t\treturn null;\n38. \t}\n39. }\n40. \n41. export function tryToReadFile(file) {\n42. \ttry {\n43. \t\treturn fs.readFileSync(file, 'utf-8');\n44. \t} catch (err) {\n45. \t\tif (err.code !== 'ENOENT') throw err;\n46. \t\treturn null;\n47. \t}\n48. }\n49. \n50. const { window } = new JSDOM('<main></main>');\n51. global.document = window.document;\n52. \n53. export function env() {\n54. \twindow._svelteTransitionManager = null;\n55. \twindow.document.body.innerHTML = '<main></main>';\n56. \n57. \treturn window;\n58. }\n59. \n60. function cleanChildren(node) {\n61. \tlet previous = null;\n62. \n63. \t// sort attributes\n64. \tconst attributes = Array.from(node.attributes).sort((a, b) => {\n65. \t\treturn a.name < b.name ? -1 : 1;\n66. \t});\n67. \n68. \tattributes.forEach(attr => {\n69. \t\tnode.removeAttribute(attr.name);\n70. \t});\n71. \n72. \tattributes.forEach(attr => {\n73. \t\tnode.setAttribute(attr.name, attr.value);\n74. \t});\n75. \n76. \t// recurse\n77. \t[...node.childNodes].forEach(child => {\n78. \t\tif (child.nodeType === 3) {\n79. \t\t\t// text\n80. \t\t\tif (\n81. \t\t\t\tnode.namespaceURI === 'http://www.w3.org/2000/svg' &&\n82. \t\t\t\tnode.tagName !== 'text' &&\n83. \t\t\t\tnode.tagName !== 'tspan'\n84. \t\t\t) {\n85. \t\t\t\tnode.removeChild(child);\n86. \t\t\t}\n87. \n88. \t\t\tchild.data = child.data.replace(/\\s{2,}/g, '\\n');\n89. \n90. \t\t\tif (previous && previous.nodeType === 3) {\n91. \t\t\t\tprevious.data += child.data;\n92. \t\t\t\tprevious.data = previous.data.replace(/\\s{2,}/g, '\\n');\n93. \n94. \t\t\t\tnode.removeChild(child);\n95. \t\t\t\tchild = previous;\n96. \t\t\t}\n97. \t\t} else {\n98. \t\t\tcleanChildren(child);\n99. \t\t}\n100. \n101. \t\tprevious = child;\n102. \t});\n103. \n104. \t// collapse whitespace\n105. \tif (node.firstChild && node.firstChild.nodeType === 3) {\n106. \t\tnode.firstChild.data = node.firstChild.data.replace(/^\\s+/, '');\n107. \t\tif (!node.firstChild.data) node.removeChild(node.firstChild);\n108. \t}\n109. \n110. \tif (node.lastChild && node.lastChild.nodeType === 3) {\n111. \t\tnode.lastChild.data = node.lastChild.data.replace(/\\s+$/, '');\n112. \t\tif (!node.lastChild.data) node.removeChild(node.lastChild);\n113. \t}\n114. }\n115. \n116. export function normalizeHtml(window, html) {\n117. \ttry {\n118. \t\tconst node = window.document.createElement('div');\n119. \t\tnode.innerHTML = html\n120. \t\t\t.replace(/<!--.*?-->/g, '')\n121. \t\t\t.replace(/>[\\s\\r\\n]+</g, '><')\n122. \t\t\t.trim();\n123. \t\tcleanChildren(node, '');\n124. \t\treturn node.innerHTML.replace(/<\\/?noscript\\/?>/g, '');\n125. \t} catch (err) {\n126. \t\tthrow new Error(`Failed to normalize HTML:\\n${html}`);\n127. \t}\n128. }\n129. \n130. export function setupHtmlEqual() {\n131. \tconst window = env();\n132. \n133. \tassert.htmlEqual = (actual, expected, message) => {\n134. \t\tassert.deepEqual(\n135. \t\t\tnormalizeHtml(window, actual),\n136. \t\t\tnormalizeHtml(window, expected),\n137. \t\t\tmessage\n138. \t\t);\n139. \t};\n140. }\n141. \n142. export function loadConfig(file) {\n143. \ttry {\n144. \t\tconst resolved = require.resolve(file);\n145. \t\tdelete require.cache[resolved];\n146. \n147. \t\tconst config = require(resolved);\n148. \t\treturn config.default || config;\n149. \t} catch (err) {\n150. \t\tif (err.code === 'MODULE_NOT_FOUND') {\n151. \t\t\treturn {};\n152. \t\t}\n153. \n154. \t\tthrow err;\n155. \t}\n156. }\n157. \n158. export function addLineNumbers(code) {\n159. \treturn code\n160. \t\t.split('\\n')\n161. \t\t.map((line, i) => {\n162. \t\t\ti = String(i + 1);\n163. \t\t\twhile (i.length < 3) i = ` ${i}`;\n164. \n165. \t\t\treturn (\n166. \t\t\t\tchalk.grey(`  ${i}: `) +\n167. \t\t\t\tline.replace(/^\\t+/, match => match.split('\\t').join('    '))\n168. \t\t\t);\n169. \t\t})\n170. \t\t.join('\\n');\n171. }\n172. \n173. function capitalise(str) {\n174. \treturn str[0].toUpperCase() + str.slice(1);\n175. }\n176. \n177. export function showOutput(cwd, options = {}, s = svelte) {\n178. \tglob.sync('**/*.html', { cwd }).forEach(file => {\n179. \t\tif (file[0] === '_') return;\n180. \t\tconst { code } = s.compile(\n181. \t\t\tfs.readFileSync(`${cwd}/${file}`, 'utf-8'),\n182. \t\t\tObject.assign(options, {\n183. \t\t\t\tfilename: file,\n184. \t\t\t\tname: capitalise(path.basename(file).replace(/\\.html$/, ''))\n185. \t\t\t})\n186. \t\t);\n187. \n188. \t\tconsole.log( // eslint-disable-line no-console\n189. \t\t\t`\\n>> ${chalk.cyan.bold(file)}\\n${addLineNumbers(code)}\\n<< ${chalk.cyan.bold(file)}`\n190. \t\t);\n191. \t});\n192. }\n193. \n194. const start = /\\n(\\t+)/;\n195. export function deindent(strings, ...values) {\n196. \tconst indentation = start.exec(strings[0])[1];\n197. \tconst pattern = new RegExp(`^${indentation}`, 'gm');\n198. \n199. \tlet result = strings[0].replace(start, '').replace(pattern, '');\n200. \n201. \tlet trailingIndentation = getTrailingIndentation(result);\n202. \n203. \tfor (let i = 1; i < strings.length; i += 1) {\n204. \t\tlet expression = values[i - 1];\n205. \t\tconst string = strings[i].replace(pattern, '');\n206. \n207. \t\tif (Array.isArray(expression)) {\n208. \t\t\texpression = expression.length ? expression.join('\\n') : null;\n209. \t\t}\n210. \n211. \t\tif (expression || expression === '') {\n212. \t\t\tconst value = String(expression).replace(\n213. \t\t\t\t/\\n/g,\n214. \t\t\t\t`\\n${trailingIndentation}`\n215. \t\t\t);\n216. \t\t\tresult += value + string;\n217. \t\t} else {\n218. \t\t\tlet c = result.length;\n219. \t\t\twhile (/\\s/.test(result[c - 1])) c -= 1;\n220. \t\t\tresult = result.slice(0, c) + string;\n221. \t\t}\n222. \n223. \t\ttrailingIndentation = getTrailingIndentation(result);\n224. \t}\n225. \n226. \treturn result.trim().replace(/\\t+$/gm, '');\n227. }\n228. \n229. function getTrailingIndentation(str) {\n230. \tlet i = str.length;\n231. \twhile (str[i - 1] === ' ' || str[i - 1] === '\\t') i -= 1;\n232. \treturn str.slice(i, str.length);\n233. }\n234. \n235. export function spaces(i) {\n236. \tlet result = '';\n237. \twhile (i--) result += ' ';\n238. \treturn result;\n239. }", start_line_number=1, end_line_number=239)]
2025-11-10 23:58:17,976 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Issue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug reproducing context:\nFile: test/css/index.js\nLine number range: 1 - 153\nContent:\n1. import assert from \'assert\';\n2. import * as fs from \'fs\';\n3. import { parse } from \'acorn\';\n4. import { addLineNumbers, env, normalizeHtml, svelte } from \'../helpers.js\';\n5. \n6. function tryRequire(file) {\n7. \ttry {\n8. \t\tconst mod = require(file);\n9. \t\treturn mod.default || mod;\n10. \t} catch (err) {\n11. \t\tif (err.code !== \'MODULE_NOT_FOUND\') throw err;\n12. \t\treturn null;\n13. \t}\n14. }\n15. \n16. function normalizeWarning(warning) {\n17. \twarning.frame = warning.frame\n18. \t\t.replace(/^\\n/, \'\')\n19. \t\t.replace(/^\\t+/gm, \'\')\n20. \t\t.replace(/\\s+$/gm, \'\');\n21. \tdelete warning.filename;\n22. \tdelete warning.toString;\n23. \treturn warning;\n24. }\n25. \n26. function checkCodeIsValid(code) {\n27. \ttry {\n28. \t\tparse(code);\n29. \t} catch (err) {\n30. \t\tconsole.error(addLineNumbers(code));\n31. \t\tthrow new Error(err.message);\n32. \t}\n33. }\n34. \n35. describe(\'css\', () => {\n36. \tfs.readdirSync(\'test/css/samples\').forEach(dir => {\n37. \t\tif (dir[0] === \'.\') return;\n38. \n39. \t\t// add .solo to a sample directory name to only run that test\n40. \t\tconst solo = /\\.solo/.test(dir);\n41. \t\tconst skip = /\\.skip/.test(dir);\n42. \n43. \t\tif (solo && process.env.CI) {\n44. \t\t\tthrow new Error(\'Forgot to remove `solo: true` from test\');\n45. \t\t}\n46. \n47. \t\t(solo ? it.only : skip ? it.skip : it)(dir, () => {\n48. \t\t\tconst config = tryRequire(`./samples/${dir}/_config.js`) || {};\n49. \t\t\tconst input = fs\n50. \t\t\t\t.readFileSync(`test/css/samples/${dir}/input.html`, \'utf-8\')\n51. \t\t\t\t.replace(/\\s+$/, \'\');\n52. \n53. \t\t\tconst expectedWarnings = (config.warnings || []).map(normalizeWarning);\n54. \t\t\tconst domWarnings = [];\n55. \t\t\tconst ssrWarnings = [];\n56. \n57. \t\t\tconst dom = svelte.compile(\n58. \t\t\t\tinput,\n59. \t\t\t\tObject.assign(config, {\n60. \t\t\t\t\tformat: \'iife\',\n61. \t\t\t\t\tname: \'SvelteComponent\',\n62. \t\t\t\t\tonwarn: warning => {\n63. \t\t\t\t\t\tdomWarnings.push(warning);\n64. \t\t\t\t\t}\n65. \t\t\t\t})\n66. \t\t\t);\n67. \n68. \t\t\tconst ssr = svelte.compile(\n69. \t\t\t\tinput,\n70. \t\t\t\tObject.assign(config, {\n71. \t\t\t\t\tformat: \'iife\',\n72. \t\t\t\t\tgenerate: \'ssr\',\n73. \t\t\t\t\tname: \'SvelteComponent\',\n74. \t\t\t\t\tonwarn: warning => {\n75. \t\t\t\t\t\tssrWarnings.push(warning);\n76. \t\t\t\t\t}\n77. \t\t\t\t})\n78. \t\t\t);\n79. \n80. \t\t\t// check the code is valid\n81. \t\t\tcheckCodeIsValid(dom.code);\n82. \t\t\tcheckCodeIsValid(ssr.code);\n83. \n84. \t\t\tassert.equal(dom.css, ssr.css);\n85. \n86. \t\t\tassert.deepEqual(\n87. \t\t\t\tdomWarnings.map(normalizeWarning),\n88. \t\t\t\tssrWarnings.map(normalizeWarning)\n89. \t\t\t);\n90. \t\t\tassert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);\n91. \n92. \t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);\n93. \t\t\tconst expected = {\n94. \t\t\t\thtml: read(`test/css/samples/${dir}/expected.html`),\n95. \t\t\t\tcss: read(`test/css/samples/${dir}/expected.css`)\n96. \t\t\t};\n97. \n98. \t\t\tassert.equal(dom.css.replace(/svelte-\\d+/g, \'svelte-xyz\'), expected.css);\n99. \n100. \t\t\t// verify that the right elements have scoping selectors\n101. \t\t\tif (expected.html !== null) {\n102. \t\t\t\tconst window = env();\n103. \n104. \t\t\t\t// dom\n105. \t\t\t\ttry {\n106. \t\t\t\t\tconst Component = eval(\n107. \t\t\t\t\t\t`(function () { ${dom.code}; return SvelteComponent; }())`\n108. \t\t\t\t\t);\n109. \t\t\t\t\tconst target = window.document.querySelector(\'main\');\n110. \n111. \t\t\t\t\tnew Component({ target, data: config.data });\n112. \t\t\t\t\tconst html = target.innerHTML;\n113. \n114. \t\t\t\t\tfs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);\n115. \n116. \t\t\t\t\tassert.equal(\n117. \t\t\t\t\t\tnormalizeHtml(window, html.replace(/svelte-\\d+/g, \'svelte-xyz\')),\n118. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n119. \t\t\t\t\t);\n120. \t\t\t\t} catch (err) {\n121. \t\t\t\t\tconsole.log(dom.code);\n122. \t\t\t\t\tthrow err;\n123. \t\t\t\t}\n124. \n125. \t\t\t\t// ssr\n126. \t\t\t\ttry {\n127. \t\t\t\t\tconst component = eval(\n128. \t\t\t\t\t\t`(function () { ${ssr.code}; return SvelteComponent; }())`\n129. \t\t\t\t\t);\n130. \n131. \t\t\t\t\tassert.equal(\n132. \t\t\t\t\t\tnormalizeHtml(\n133. \t\t\t\t\t\t\twindow,\n134. \t\t\t\t\t\t\tcomponent.render(config.data).replace(/svelte-\\d+/g, \'svelte-xyz\')\n135. \t\t\t\t\t\t),\n136. \t\t\t\t\t\tnormalizeHtml(window, expected.html)\n137. \t\t\t\t\t);\n138. \t\t\t\t} catch (err) {\n139. \t\t\t\t\tconsole.log(ssr.code);\n140. \t\t\t\t\tthrow err;\n141. \t\t\t\t}\n142. \t\t\t}\n143. \t\t});\n144. \t});\n145. });\n146. \n147. function read(file) {\n148. \ttry {\n149. \t\treturn fs.readFileSync(file, \'utf-8\');\n150. \t} catch (err) {\n151. \t\treturn null;\n152. \t}\n153. }\n\n\nFile: test/css/samples/attribute-selector-unquoted/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/attribute-selector-unquoted/expected.css\nLine number range: 1 - 1\nContent:\n1. [foo=bar][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/attribute-selector-unquoted/input.html\nLine number range: 1 - 7\nContent:\n1. <div foo=\'bar\'></div>\n2. \n3. <style>\n4. \t[foo=bar] {\n5. \t\tcolor: red;\n6. \t}\n7. </style>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-contains/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.css\nLine number range: 1 - 1\nContent:\n1. [data-foo*=\'bar\'][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-contains/expected.html\nLine number range: 1 - 2\nContent:\n1. <div><p svelte-xyz="" data-foo="foobarbaz">this is styled</p>\n2. \t<p data-foo="fooBARbaz">this is unstyled</p></div>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-contains/input.html\nLine number range: 1 - 10\nContent:\n1. <div>\n2. \t<p data-foo=\'foobarbaz\'>this is styled</p>\n3. \t<p data-foo=\'fooBARbaz\'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo*=\'bar\'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-equals/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.css\nLine number range: 1 - 1\nContent:\n1. [data-foo=\'bar\'][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-equals/expected.html\nLine number range: 1 - 2\nContent:\n1. <div><p svelte-xyz="" data-foo="bar">this is styled</p>\n2. \t<p data-foo="baz">this is unstyled</p></div>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-equals/input.html\nLine number range: 1 - 10\nContent:\n1. <div>\n2. \t<p data-foo=\'bar\'>this is styled</p>\n3. \t<p data-foo=\'baz\'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo=\'bar\'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.css\nLine number range: 1 - 1\nContent:\n1. [data-foo^=\'bar\'][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/expected.html\nLine number range: 1 - 2\nContent:\n1. <div><p svelte-xyz="" data-foo="barbaz">this is styled</p>\n2. \t<p data-foo="bazbar">this is unstyled</p></div>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-prefix/input.html\nLine number range: 1 - 10\nContent:\n1. <div>\n2. \t<p data-foo=\'barbaz\'>this is styled</p>\n3. \t<p data-foo=\'bazbar\'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo^=\'bar\'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.css\nLine number range: 1 - 1\nContent:\n1. [data-foo$=\'bar\'][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/expected.html\nLine number range: 1 - 2\nContent:\n1. <div><p data-foo="barbaz">this is unstyled</p>\n2. \t<p svelte-xyz="" data-foo="bazbar">this is styled</p></div>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-suffix/input.html\nLine number range: 1 - 10\nContent:\n1. <div>\n2. \t<p data-foo=\'barbaz\'>this is unstyled</p>\n3. \t<p data-foo=\'bazbar\'>this is styled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo$=\'bar\'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/_config.js\nLine number range: 1 - 3\nContent:\n1. export default {\n2. \tcascade: false\n3. };\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.css\nLine number range: 1 - 1\nContent:\n1. [data-foo~=\'bar\'][svelte-xyz]{color:red}\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/expected.html\nLine number range: 1 - 2\nContent:\n1. <div><p svelte-xyz="" data-foo="qux bar">this is styled</p>\n2. \t<p data-foo="qux baz">this is unstyled</p></div>\n\n\nFile: test/css/samples/omit-scoping-attribute-attribute-selector-word-equals/input.html\nLine number range: 1 - 10\nContent:\n1. <div>\n2. \t<p data-foo=\'qux bar\'>this is styled</p>\n3. \t<p data-foo=\'qux baz\'>this is unstyled</p>\n4. </div>\n5. \n6. <style>\n7. \t[data-foo~=\'bar\'] {\n8. \t\tcolor: red;\n9. \t}\n10. </style>\n\n\nFile: test/css/samples/universal-selector/expected.css\nLine number range: 1 - 1\nContent:\n1. [svelte-xyz],[svelte-xyz] *{color:red}\n\n\nFile: test/css/samples/universal-selector/input.html\nLine number range: 1 - 7\nContent:\n1. <div></div>\n2. \n3. <style>\n4. \t* {\n5. \t\tcolor: red;\n6. \t}\n7. </style>\n\n\nFile: test/css/samples/unused-selector-leading/expected.css\nLine number range: 1 - 1\nContent:\n1. .bar[svelte-xyz]{color:red}\n\n\nFile: test/css/samples/unused-selector-leading/input.html\nLine number range: 1 - 7\nContent:\n1. <div class=\'bar\'></div>\n2. \n3. <style>\n4. \t.foo, .bar, .baz {\n5. \t\tcolor: red;\n6. \t}\n7. </style>\n\n\nFile: test/css/samples/unused-selector/expected.css\nLine number range: 1 - 1\nContent:\n1. .foo[svelte-xyz]{color:red}\n\n\nFile: test/css/samples/unused-selector/input.html\nLine number range: 1 - 11\nContent:\n1. <div class=\'foo\'></div>\n2. \n3. <style>\n4. \t.foo {\n5. \t\tcolor: red;\n6. \t}\n7. \n8. \t.bar {\n9. \t\tcolor: blue;\n10. \t}\n11. </style>\n\n\nFile: test/helpers.js\nLine number range: 1 - 239\nContent:\n1. import { JSDOM } from \'jsdom\';\n2. import assert from \'assert\';\n3. import glob from \'glob\';\n4. import fs from \'fs\';\n5. import path from \'path\';\n6. import chalk from \'chalk\';\n7. \n8. // for coverage purposes, we need to test source files,\n9. // but for sanity purposes, we need to test dist files\n10. export function loadSvelte(test) {\n11. \tif (test) global.__svelte_test = true;\n12. \n13. \tconst resolved = process.env.COVERAGE\n14. \t\t? require.resolve(\'../src/index.js\')\n15. \t\t: require.resolve(\'../compiler/svelte.js\');\n16. \n17. \tdelete require.cache[resolved];\n18. \treturn require(resolved);\n19. }\n20. \n21. export const svelte = loadSvelte();\n22. \n23. export function exists(path) {\n24. \ttry {\n25. \t\tfs.statSync(path);\n26. \t\treturn true;\n27. \t} catch (err) {\n28. \t\treturn false;\n29. \t}\n30. }\n31. \n32. export function tryToLoadJson(file) {\n33. \ttry {\n34. \t\treturn JSON.parse(fs.readFileSync(file));\n35. \t} catch (err) {\n36. \t\tif (err.code !== \'ENOENT\') throw err;\n37. \t\treturn null;\n38. \t}\n39. }\n40. \n41. export function tryToReadFile(file) {\n42. \ttry {\n43. \t\treturn fs.readFileSync(file, \'utf-8\');\n44. \t} catch (err) {\n45. \t\tif (err.code !== \'ENOENT\') throw err;\n46. \t\treturn null;\n47. \t}\n48. }\n49. \n50. const { window } = new JSDOM(\'<main></main>\');\n51. global.document = window.document;\n52. \n53. export function env() {\n54. \twindow._svelteTransitionManager = null;\n55. \twindow.document.body.innerHTML = \'<main></main>\';\n56. \n57. \treturn window;\n58. }\n59. \n60. function cleanChildren(node) {\n61. \tlet previous = null;\n62. \n63. \t// sort attributes\n64. \tconst attributes = Array.from(node.attributes).sort((a, b) => {\n65. \t\treturn a.name < b.name ? -1 : 1;\n66. \t});\n67. \n68. \tattributes.forEach(attr => {\n69. \t\tnode.removeAttribute(attr.name);\n70. \t});\n71. \n72. \tattributes.forEach(attr => {\n73. \t\tnode.setAttribute(attr.name, attr.value);\n74. \t});\n75. \n76. \t// recurse\n77. \t[...node.childNodes].forEach(child => {\n78. \t\tif (child.nodeType === 3) {\n79. \t\t\t// text\n80. \t\t\tif (\n81. \t\t\t\tnode.namespaceURI === \'http://www.w3.org/2000/svg\' &&\n82. \t\t\t\tnode.tagName !== \'text\' &&\n83. \t\t\t\tnode.tagName !== \'tspan\'\n84. \t\t\t) {\n85. \t\t\t\tnode.removeChild(child);\n86. \t\t\t}\n87. \n88. \t\t\tchild.data = child.data.replace(/\\s{2,}/g, \'\\n\');\n89. \n90. \t\t\tif (previous && previous.nodeType === 3) {\n91. \t\t\t\tprevious.data += child.data;\n92. \t\t\t\tprevious.data = previous.data.replace(/\\s{2,}/g, \'\\n\');\n93. \n94. \t\t\t\tnode.removeChild(child);\n95. \t\t\t\tchild = previous;\n96. \t\t\t}\n97. \t\t} else {\n98. \t\t\tcleanChildren(child);\n99. \t\t}\n100. \n101. \t\tprevious = child;\n102. \t});\n103. \n104. \t// collapse whitespace\n105. \tif (node.firstChild && node.firstChild.nodeType === 3) {\n106. \t\tnode.firstChild.data = node.firstChild.data.replace(/^\\s+/, \'\');\n107. \t\tif (!node.firstChild.data) node.removeChild(node.firstChild);\n108. \t}\n109. \n110. \tif (node.lastChild && node.lastChild.nodeType === 3) {\n111. \t\tnode.lastChild.data = node.lastChild.data.replace(/\\s+$/, \'\');\n112. \t\tif (!node.lastChild.data) node.removeChild(node.lastChild);\n113. \t}\n114. }\n115. \n116. export function normalizeHtml(window, html) {\n117. \ttry {\n118. \t\tconst node = window.document.createElement(\'div\');\n119. \t\tnode.innerHTML = html\n120. \t\t\t.replace(/<!--.*?-->/g, \'\')\n121. \t\t\t.replace(/>[\\s\\r\\n]+</g, \'><\')\n122. \t\t\t.trim();\n123. \t\tcleanChildren(node, \'\');\n124. \t\treturn node.innerHTML.replace(/<\\/?noscript\\/?>/g, \'\');\n125. \t} catch (err) {\n126. \t\tthrow new Error(`Failed to normalize HTML:\\n${html}`);\n127. \t}\n128. }\n129. \n130. export function setupHtmlEqual() {\n131. \tconst window = env();\n132. \n133. \tassert.htmlEqual = (actual, expected, message) => {\n134. \t\tassert.deepEqual(\n135. \t\t\tnormalizeHtml(window, actual),\n136. \t\t\tnormalizeHtml(window, expected),\n137. \t\t\tmessage\n138. \t\t);\n139. \t};\n140. }\n141. \n142. export function loadConfig(file) {\n143. \ttry {\n144. \t\tconst resolved = require.resolve(file);\n145. \t\tdelete require.cache[resolved];\n146. \n147. \t\tconst config = require(resolved);\n148. \t\treturn config.default || config;\n149. \t} catch (err) {\n150. \t\tif (err.code === \'MODULE_NOT_FOUND\') {\n151. \t\t\treturn {};\n152. \t\t}\n153. \n154. \t\tthrow err;\n155. \t}\n156. }\n157. \n158. export function addLineNumbers(code) {\n159. \treturn code\n160. \t\t.split(\'\\n\')\n161. \t\t.map((line, i) => {\n162. \t\t\ti = String(i + 1);\n163. \t\t\twhile (i.length < 3) i = ` ${i}`;\n164. \n165. \t\t\treturn (\n166. \t\t\t\tchalk.grey(`  ${i}: `) +\n167. \t\t\t\tline.replace(/^\\t+/, match => match.split(\'\\t\').join(\'    \'))\n168. \t\t\t);\n169. \t\t})\n170. \t\t.join(\'\\n\');\n171. }\n172. \n173. function capitalise(str) {\n174. \treturn str[0].toUpperCase() + str.slice(1);\n175. }\n176. \n177. export function showOutput(cwd, options = {}, s = svelte) {\n178. \tglob.sync(\'**/*.html\', { cwd }).forEach(file => {\n179. \t\tif (file[0] === \'_\') return;\n180. \t\tconst { code } = s.compile(\n181. \t\t\tfs.readFileSync(`${cwd}/${file}`, \'utf-8\'),\n182. \t\t\tObject.assign(options, {\n183. \t\t\t\tfilename: file,\n184. \t\t\t\tname: capitalise(path.basename(file).replace(/\\.html$/, \'\'))\n185. \t\t\t})\n186. \t\t);\n187. \n188. \t\tconsole.log( // eslint-disable-line no-console\n189. \t\t\t`\\n>> ${chalk.cyan.bold(file)}\\n${addLineNumbers(code)}\\n<< ${chalk.cyan.bold(file)}`\n190. \t\t);\n191. \t});\n192. }\n193. \n194. const start = /\\n(\\t+)/;\n195. export function deindent(strings, ...values) {\n196. \tconst indentation = start.exec(strings[0])[1];\n197. \tconst pattern = new RegExp(`^${indentation}`, \'gm\');\n198. \n199. \tlet result = strings[0].replace(start, \'\').replace(pattern, \'\');\n200. \n201. \tlet trailingIndentation = getTrailingIndentation(result);\n202. \n203. \tfor (let i = 1; i < strings.length; i += 1) {\n204. \t\tlet expression = values[i - 1];\n205. \t\tconst string = strings[i].replace(pattern, \'\');\n206. \n207. \t\tif (Array.isArray(expression)) {\n208. \t\t\texpression = expression.length ? expression.join(\'\\n\') : null;\n209. \t\t}\n210. \n211. \t\tif (expression || expression === \'\') {\n212. \t\t\tconst value = String(expression).replace(\n213. \t\t\t\t/\\n/g,\n214. \t\t\t\t`\\n${trailingIndentation}`\n215. \t\t\t);\n216. \t\t\tresult += value + string;\n217. \t\t} else {\n218. \t\t\tlet c = result.length;\n219. \t\t\twhile (/\\s/.test(result[c - 1])) c -= 1;\n220. \t\t\tresult = result.slice(0, c) + string;\n221. \t\t}\n222. \n223. \t\ttrailingIndentation = getTrailingIndentation(result);\n224. \t}\n225. \n226. \treturn result.trim().replace(/\\t+$/gm, \'\');\n227. }\n228. \n229. function getTrailingIndentation(str) {\n230. \tlet i = str.length;\n231. \twhile (str[i - 1] === \' \' || str[i - 1] === \'\\t\') i -= 1;\n232. \treturn str.slice(i, str.length);\n233. }\n234. \n235. export function spaces(i) {\n236. \tlet result = \'\';\n237. \twhile (i--) result += \' \';\n238. \treturn result;\n239. }\n\n\nNow generate the complete self-contained test case that reproduces the bug with the same error/exception.\n' additional_kwargs={} response_metadata={}
2025-11-10 23:58:57,585 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='Create a new sample test directory picked up by the existing runner at test/css/index.js.\n\nAdd these files:\n\nFile: test/css/samples/attribute-selector-presence/_config.js\n--------------------------------\nexport default {\n\tcascade: false\n};\n\nFile: test/css/samples/attribute-selector-presence/input.html\n--------------------------------\n<button foo="bar"></button>\n\n<style>\n\tbutton[foo] {\n\t\tcolor: red;\n\t}\n</style>\n\nFile: test/css/samples/attribute-selector-presence/expected.css\n--------------------------------\nbutton[foo][svelte-xyz]{color:red}' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2879, 'prompt_tokens': 6558, 'total_tokens': 9437, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 2752, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--a0d8ea3e-fcd2-4dfe-9d43-83d24038a3b5-0' usage_metadata={'input_tokens': 6558, 'output_tokens': 2879, 'total_tokens': 9437, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 2752}}
2025-11-10 23:59:03,182 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_sXv42kljL2bkBNd28b0a9Vc8', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 348, 'prompt_tokens': 22592, 'total_tokens': 22940, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--17e72816-e927-4dd7-a463-5984a91bdcc3-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_sXv42kljL2bkBNd28b0a9Vc8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22592, 'output_tokens': 348, 'total_tokens': 22940, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-11-10 23:59:18,247 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_u3WDyxKiTTeHDf7xGs55EbpB', 'function': {'arguments': '{"relative_path":"test/test.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1051, 'prompt_tokens': 23959, 'total_tokens': 25010, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1024, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--296e063a-a275-4684-aaa8-e4dfe9ad0e5f-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/test.js'}, 'id': 'call_u3WDyxKiTTeHDf7xGs55EbpB', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23959, 'output_tokens': 1051, 'total_tokens': 25010, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1024}}
2025-11-10 23:59:42,130 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_nLFCh4rs1whp2GBqbo7LzcSn', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-presence/input.html","content":"<button foo=\\"bar\\"></button>\\n\\n<style>\\n\\tbutton[foo] {\\n\\t\\tcolor: red;\\n\\t}\\n</style>\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2824, 'prompt_tokens': 24085, 'total_tokens': 26909, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 2752, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--552b5ba5-ef86-47a0-84ac-83476a24e7c3-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/css/samples/attribute-selector-presence/input.html', 'content': '<button foo="bar"></button>\n\n<style>\n\tbutton[foo] {\n\t\tcolor: red;\n\t}\n</style>\n'}, 'id': 'call_nLFCh4rs1whp2GBqbo7LzcSn', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24085, 'output_tokens': 2824, 'total_tokens': 26909, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 2752}}
2025-11-10 23:59:44,543 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_cTlg6R3xl30etbaHhGs9R3Fh', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-presence/_config.js","content":"export default {\\n\\tcascade: false\\n};\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 45, 'prompt_tokens': 24178, 'total_tokens': 24223, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--203afa53-e9cd-4bee-b5cf-16d3b5bac5e5-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/css/samples/attribute-selector-presence/_config.js', 'content': 'export default {\n\tcascade: false\n};\n'}, 'id': 'call_cTlg6R3xl30etbaHhGs9R3Fh', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24178, 'output_tokens': 45, 'total_tokens': 24223, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:59:46,164 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_r3pDSHlRs5dgam22rvXUmJqV', 'function': {'arguments': '{"relative_path":"test/css/samples/attribute-selector-presence/expected.css","content":"button[foo][svelte-xyz]{color:red}\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 46, 'prompt_tokens': 24251, 'total_tokens': 24297, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3f14a69c-ba57-4084-a7ba-9383e0b5c080-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/css/samples/attribute-selector-presence/expected.css', 'content': 'button[foo][svelte-xyz]{color:red}\n'}, 'id': 'call_r3pDSHlRs5dgam22rvXUmJqV', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24251, 'output_tokens': 46, 'total_tokens': 24297, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:59:48,732 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='test/css/samples/attribute-selector-presence/expected.css' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 16, 'prompt_tokens': 24325, 'total_tokens': 24341, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--3178e1fa-5637-4b98-869a-f2b5aeba1fab-0' usage_metadata={'input_tokens': 24325, 'output_tokens': 16, 'total_tokens': 24341, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-10 23:59:48,806 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/test/css/samples/attribute-selector-presence/_config.js b/test/css/samples/attribute-selector-presence/_config.js
new file mode 100644
index 000000000..c66e0e527
--- /dev/null
+++ b/test/css/samples/attribute-selector-presence/_config.js
@@ -0,0 +1,3 @@
+export default {
+	cascade: false
+};
diff --git a/test/css/samples/attribute-selector-presence/expected.css b/test/css/samples/attribute-selector-presence/expected.css
new file mode 100644
index 000000000..dbe32dc50
--- /dev/null
+++ b/test/css/samples/attribute-selector-presence/expected.css
@@ -0,0 +1 @@
+button[foo][svelte-xyz]{color:red}
diff --git a/test/css/samples/attribute-selector-presence/input.html b/test/css/samples/attribute-selector-presence/input.html
new file mode 100644
index 000000000..21eddfa47
--- /dev/null
+++ b/test/css/samples/attribute-selector-presence/input.html
@@ -0,0 +1,7 @@
+<button foo="bar"></button>
+
+<style>
+	button[foo] {
+		color: red;
+	}
+</style>

2025-11-10 23:59:48,808 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-10 23:59:48,846 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-10 23:59:48,846 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-10 23:59:49,087 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:59:49,087 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-10 23:59:49,087 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-10 23:59:49,189 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:59:49,189 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
Removing Dockerfile
[?2004l
2025-11-10 23:59:49,189 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-10 23:59:49,190 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory test/css/samples/attribute-selector-presence in the container
2025-11-10 23:59:49,190 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p test/css/samples/attribute-selector-presence
2025-11-10 23:59:49,291 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-10 23:59:49,291 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
e
[?2004l
[?2004l
2025-11-10 23:59:49,292 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/css/samples/attribute-selector-presence/_config.js in the container
2025-11-10 23:59:49,293 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/css/samples/attribute-selector-presence/expected.css in the container
2025-11-10 23:59:49,294 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/css/samples/attribute-selector-presence/input.html in the container
2025-11-10 23:59:49,303 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-10 23:59:49,305 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - ERROR - Error in bug reproducing execute node: The bug reproducing patch added not one files
2025-11-11 00:00:12,806 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log='THE TEST WAS NOT EXECUTED BECAUSE OF AN ERROR: The bug reproducing patch added not one files\n\nExplanation: The proposed reproduction requires adding three new files under test/css/samples/attribute-selector-presence/ (input.html, _config.js, expected.css). The current environment only allows adding a single file, so the test runner could not discover a complete sample and did not run. Because no test actually executed, we cannot confirm the bug and the test does not (yet) fail as described in the issue.\n\nTo properly reproduce, the sample needs to be fully present so that test/css/index.js picks it up and executes it. The expected failure should match the issue: a thrown TypeError: "operators[operator] is not a function" when processing the presence selector button[foo] against <button foo="bar"></button>. The provided sample appears correct and uses the exact example from the issue; once all required files are in place, it should reproduce the bug.\n\nAction needed: Re-submit the change in a way compatible with the single-file limitation (e.g., modify an existing sample directory’s files in one change, or create an inline test in a single file the runner executes), or run in an environment that permits adding multiple files so the sample directory is complete.' reproduced_bug_commands=['node test/css/index.js']
2025-11-11 00:00:12,808 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-11-11 00:00:12,809 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-11-11 00:00:12,811 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:00:12,845 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Your previous test case failed to reproduce the bug. Here is the failure log:\nTHE TEST WAS NOT EXECUTED BECAUSE OF AN ERROR: The bug reproducing patch added not one files\n\nExplanation: The proposed reproduction requires adding three new files under test/css/samples/attribute-selector-presence/ (input.html, _config.js, expected.css). The current environment only allows adding a single file, so the test runner could not discover a complete sample and did not run. Because no test actually executed, we cannot confirm the bug and the test does not (yet) fail as described in the issue.\n\nTo properly reproduce, the sample needs to be fully present so that test/css/index.js picks it up and executes it. The expected failure should match the issue: a thrown TypeError: "operators[operator] is not a function" when processing the presence selector button[foo] against <button foo="bar"></button>. The provided sample appears correct and uses the exact example from the issue; once all required files are in place, it should reproduce the bug.\n\nAction needed: Re-submit the change in a way compatible with the single-file limitation (e.g., modify an existing sample directory’s files in one change, or create an inline test in a single file the runner executes), or run in an environment that permits adding multiple files so the sample directory is complete.\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:00:32,358 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'does not throw for presence selector when attribute has a value\', () => {\n\t\t// Reproduces: button[foo] should match even when foo has a value\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.doesNotThrow(() => {\n\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\n\t\t});\n\t});\n})' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1930, 'prompt_tokens': 6988, 'total_tokens': 8918, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1792, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--203214a2-46fb-483b-a536-11352cd52e8d-0' usage_metadata={'input_tokens': 6988, 'output_tokens': 1930, 'total_tokens': 8918, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1792}}
2025-11-11 00:00:37,279 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_0OeFEDvPqe61LQ3y92YxknCc', 'function': {'arguments': '{"relative_path":"test/create/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 156, 'prompt_tokens': 22603, 'total_tokens': 22759, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d0447d4d-8b72-4fff-9078-e517c702b832-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/create/index.js'}, 'id': 'call_0OeFEDvPqe61LQ3y92YxknCc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22603, 'output_tokens': 156, 'total_tokens': 22759, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:00:43,816 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_sjrqxo0MtAtIrbXNBIJaod8C', 'function': {'arguments': '{"relative_path":"test/test.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 411, 'prompt_tokens': 22926, 'total_tokens': 23337, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--69ea72a0-1bff-437c-957d-5661191172b7-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/test.js'}, 'id': 'call_sjrqxo0MtAtIrbXNBIJaod8C', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22926, 'output_tokens': 411, 'total_tokens': 23337, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:00:48,264 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_VJVarprLUFWjN2U5wAkwglae', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 220, 'prompt_tokens': 23052, 'total_tokens': 23272, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--cef9aeaf-8f14-451a-a948-37dcf16660c0-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_VJVarprLUFWjN2U5wAkwglae', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23052, 'output_tokens': 220, 'total_tokens': 23272, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:01:01,760 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_y1Mvpqs5b8fss9PH4Cagp3P9', 'function': {'arguments': '{"relative_path":"test/parser/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 604, 'prompt_tokens': 24419, 'total_tokens': 25023, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5474a72b-d240-46e7-999f-b83d6336a084-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/parser/index.js'}, 'id': 'call_y1Mvpqs5b8fss9PH4Cagp3P9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24419, 'output_tokens': 604, 'total_tokens': 25023, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:01:16,207 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_mH3I7e1xOqIxMJyGO5o9sYm6', 'function': {'arguments': '{"relative_path":"test/css-presence-selector/index.js","content":"import assert from \'assert\';\\nimport { svelte } from \'../helpers.js\';\\n\\ndescribe(\'css\', () => {\\n\\tit(\'does not throw for presence selector when attribute has a value\', () => {\\n\\t\\t// Reproduces: button[foo] should match even when foo has a value\\n\\t\\tconst input = `\\n\\t\\t\\t<button foo=\\"bar\\"></button>\\n\\t\\t\\t<style>\\n\\t\\t\\t\\tbutton[foo] {}\\n\\t\\t\\t</style>\\n\\t\\t`;\\n\\n\\t\\tassert.doesNotThrow(() => {\\n\\t\\t\\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\\n\\t\\t});\\n\\t});\\n})\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1352, 'prompt_tokens': 25191, 'total_tokens': 26543, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6e0fb865-b462-4c5c-b098-c878789366f7-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/css-presence-selector/index.js', 'content': 'import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'does not throw for presence selector when attribute has a value\', () => {\n\t\t// Reproduces: button[foo] should match even when foo has a value\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.doesNotThrow(() => {\n\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\n\t\t});\n\t});\n})\n'}, 'id': 'call_mH3I7e1xOqIxMJyGO5o9sYm6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25191, 'output_tokens': 1352, 'total_tokens': 26543, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-11 00:01:18,477 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='test/css-presence-selector/index.js' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 11, 'prompt_tokens': 25408, 'total_tokens': 25419, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--0b81ef7d-ea82-4ee6-ac1c-a31491951bc0-0' usage_metadata={'input_tokens': 25408, 'output_tokens': 11, 'total_tokens': 25419, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:01:18,513 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/test/css-presence-selector/index.js b/test/css-presence-selector/index.js
new file mode 100644
index 000000000..9e84d9069
--- /dev/null
+++ b/test/css-presence-selector/index.js
@@ -0,0 +1,18 @@
+import assert from 'assert';
+import { svelte } from '../helpers.js';
+
+describe('css', () => {
+	it('does not throw for presence selector when attribute has a value', () => {
+		// Reproduces: button[foo] should match even when foo has a value
+		const input = `
+			<button foo="bar"></button>
+			<style>
+				button[foo] {}
+			</style>
+		`;
+
+		assert.doesNotThrow(() => {
+			svelte.compile(input, { format: 'iife', name: 'SvelteComponent' });
+		});
+	});
+})

2025-11-11 00:01:18,515 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:01:18,546 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:01:18,546 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:01:18,648 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:18,648 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:01:18,648 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:01:18,750 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:18,750 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
Removing test/css/samples/attribute-selector-presence/
[?2004l
2025-11-11 00:01:18,750 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:01:18,751 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory test/css-presence-selector in the container
2025-11-11 00:01:18,751 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p test/css-presence-selector
2025-11-11 00:01:18,852 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:18,852 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:01:18,853 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/css-presence-selector/index.js in the container
2025-11-11 00:01:18,861 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:01:22,185 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_40fapmJXtutYeGzeodpw8Moq', 'function': {'arguments': '{"command":"node test/css-presence-selector/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 223, 'prompt_tokens': 579, 'total_tokens': 802, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6fec2f5a-d641-4d06-9205-f7721e7cf2a6-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'node test/css-presence-selector/index.js'}, 'id': 'call_40fapmJXtutYeGzeodpw8Moq', 'type': 'tool_call'}] usage_metadata={'input_tokens': 579, 'output_tokens': 223, 'total_tokens': 802, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:01:22,189 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: node test/css-presence-selector/index.js
2025-11-11 00:01:22,308 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:01:22,308 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
(node:393) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.
(Use `node --trace-warnings ...` to show where the warning was created)
/testbed/test/css-presence-selector/index.js:1
import assert from 'assert';
^^^^^^

SyntaxError: Cannot use import statement outside a module
[90m    at Object.compileFunction (node:vm:360:18)[39m
[90m    at wrapSafe (node:internal/modules/cjs/loader:1126:15)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1162:27)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:22:47[39m
[?2004l
2025-11-11 00:01:28,554 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ST0ZnS8v4O7KxBlWAmTGIWuh', 'function': {'arguments': '{"command":"npm i esm"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 410, 'prompt_tokens': 931, 'total_tokens': 1341, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--fc2eea89-6551-4acb-a889-d58b861f9b53-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm i esm'}, 'id': 'call_ST0ZnS8v4O7KxBlWAmTGIWuh', 'type': 'tool_call'}] usage_metadata={'input_tokens': 931, 'output_tokens': 410, 'total_tokens': 1341, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:01:28,558 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm i esm
2025-11-11 00:01:34,340 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:34,340 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?25l[[100;90m..................[0m] | reify: [32;40mtiming[0m [35marborist:ctor[0m Completed in 0ms[0m[K
[[100;90m..................[0m] - idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] \ idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] \ idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[107;97m#########[0m[100;90m.........[0m] \ idealTree: [32;40mtiming[0m [35midealTree[0m Completed in 652ms[0m[K
[[107;97m##################[0m] - reify:esm: [7msill[0m [35maudit[0m bulk request {[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] \ reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] / reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] | reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K
[[107;97m##################[0m] - reify:esm: [32;40mhttp[0m [35mfetch[0m GET 200 https://registry.npmjs.org[0m[K

[K[?25h
added 1 package, and audited 681 packages in 5s

[31m[1m77[22m[39m vulnerabilities (4 [1mlow[22m, 25 [33m[1mmoderate[22m[39m, 28 [31m[1mhigh[22m[39m, 20 [35m[1mcritical[22m[39m)

To address issues that do not require attention, run:
  npm audit fix

To address all issues (including breaking changes), run:
  npm audit fix --force

Run `npm audit` for details.
[?2004l
2025-11-11 00:01:35,925 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hfeCKsg5H4GuiVkgAuMgwPx6', 'function': {'arguments': '{"command":"node -r esm test/css-presence-selector/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 28, 'prompt_tokens': 5965, 'total_tokens': 5993, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--eec5ab2c-dd6a-415d-8082-7464a6660482-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'node -r esm test/css-presence-selector/index.js'}, 'id': 'call_hfeCKsg5H4GuiVkgAuMgwPx6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5965, 'output_tokens': 28, 'total_tokens': 5993, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:01:35,931 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: node -r esm test/css-presence-selector/index.js
2025-11-11 00:01:37,482 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:01:37,482 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
/testbed/node_modules/esm/esm.js:1
const __global__ = this;(function (require, module, __shared__) { var __shared__;const e=module,t={Array:global.Array,Buffer:global.Buffer,Error:global.Error,EvalError:global.EvalError,Function:global.Function,JSON:global.JSON,Object:global.Object,Promise:global.Promise,RangeError:global.RangeError,ReferenceError:global.ReferenceError,Reflect:global.Reflect,SyntaxError:global.SyntaxError,TypeError:global.TypeError,URIError:global.URIError,eval:global.eval},r=global.console;module.exports=(function(e){var t={};function r(i){if(t[i])return t[i].exports;var n=t[i]={i:i,l:!1,exports:{}};return e[i].call(n.exports,n,n.exports,r),n.l=!0,n.exports}return r.d=function(e,t,r){Reflect.defineProperty(e,t,{configurable:!0,enumerable:!0,get:r})},r.n=function(e){return e.a=e,function(){return e}},r(r.s=2)})([(function(e,t){var r;t=e.exports=$,"object"==typeof process&&process,r=function(){},t.SEMVER_SPEC_VERSION="2.0.0";var i=256,n=Number.MAX_SAFE_INTEGER||9007199254740991,s=t.re=[],a=t.src=[],o=0,u=o++;a[u]="0|[1-9]\\d*";var l=o++;a[l]="[0-9]+";var c=o++;a[c]="\\d*[a-zA-Z-][a-zA-Z0-9-]*";var p=o++;a[p]="("+a[u]+")\\.("+a[u]+")\\.("+a[u]+")";var h=o++;a[h]="("+a[l]+")\\.("+a[l]+")\\.("+a[l]+")";var f=o++;a[f]="(?:"+a[u]+"|"+a[c]+")";var d=o++;a[d]="(?:"+a[l]+"|"+a[c]+")";var m=o++;a[m]="(?:-("+a[f]+"(?:\\."+a[f]+")*))";var v=o++;a[v]="(?:-?("+a[d]+"(?:\\."+a[d]+")*))";var g=o++;a[g]="[0-9A-Za-z-]+";var y=o++;a[y]="(?:\\+("+a[g]+"(?:\\."+a[g]+")*))";var x=o++,b="v?"+a[p]+a[m]+"?"+a[y]+"?";a[x]="^"+b+"$";var w="[v=\\s]*"+a[h]+a[v]+"?"+a[y]+"?",E=o++;a[E]="^"+w+"$";var S=o++;a[S]="((?:<|>)?=?)";var R=o++;a[R]=a[l]+"|x|X|\\*";var P=o++;a[P]=a[u]+"|x|X|\\*";var _=o++;a[_]="[v=\\s]*("+a[P]+")(?:\\.("+a[P]+")(?:\\.("+a[P]+")(?:"+a[m]+")?"+a[y]+"?)?)?";var k=o++;a[k]="[v=\\s]*("+a[R]+")(?:\\.("+a[R]+")(?:\\.("+a[R]+")(?:"+a[v]+")?"+a[y]+"?)?)?";var I=o++;a[I]="^"+a[S]+"\\s*"+a[_]+"$";var A=o++;a[A]="^"+a[S]+"\\s*"+a[k]+"$";var N=o++;a[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var C=o++;a[C]="(?:~>?)";var O=o++;a[O]="(\\s*)"+a[C]+"\\s+",s[O]=RegExp(a[O],"g");var T=o++;a[T]="^"+a[C]+a[_]+"$";var M=o++;a[M]="^"+a[C]+a[k]+"$";var L=o++;a[L]="(?:\\^)";var D=o++;a[D]="(\\s*)"+a[L]+"\\s+",s[D]=RegExp(a[D],"g");var F=o++;a[F]="^"+a[L]+a[_]+"$";var j=o++;a[j]="^"+a[L]+a[k]+"$";var V=o++;a[V]="^"+a[S]+"\\s*("+w+")$|^$";var G=o++;a[G]="^"+a[S]+"\\s*("+b+")$|^$";var B=o++;a[B]="(\\s*)"+a[S]+"\\s*("+w+"|"+a[_]+")",s[B]=RegExp(a[B],"g");var U=o++;a[U]="^\\s*("+a[_]+")\\s+-\\s+("+a[_]+")\\s*$";var W=o++;a[W]="^\\s*("+a[k]+")\\s+-\\s+("+a[k]+")\\s*$";var q=o++;a[q]="(<|>)?=?\\s*\\*";for(var z=0;z<35;z++)r(z,a[z]),s[z]||(s[z]=RegExp(a[z]));function H(e,t){"use strict";if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $)return e;if("string"!=typeof e)return null;if(e.length>i)return null;var r=t.loose?s[E]:s[x];if(!r.test(e))return null;try{return new $(e,t)}catch(e){return null}}function $(e,t){"use strict";if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof $){if(e.loose===t.loose)return e;e=e.version}else if("string"!=typeof e)throw new TypeError("Invalid Version: "+e);if(e.length>i)throw new TypeError("version is longer than "+i+" characters");if(!(this instanceof $))return new $(e,t);r("SemVer",e,t),this.options=t,this.loose=!!t.loose;var a=e.trim().match(t.loose?s[E]:s[x]);if(!a)throw new TypeError("Invalid Version: "+e);if(this.raw=e,this.major=+a[1],this.minor=+a[2],this.patch=+a[3],this.major>n||this.major<0)throw new TypeError("Invalid major version");if(this.minor>n||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>n||this.patch<0)throw new TypeError("Invalid patch version");this.prerelease=a[4]?a[4].split(".").map((function(e){if(/^[0-9]+$/.test(e)){var t=+e;if(t>=0&&t<n)return t}return e})):[],this.build=a[5]?a[5].split("."):[],this.format()}t.parse=H,t.valid=function(e,t){"use strict";var r=H(e,t);return r?r.version:null},t.clean=function(e,t){"use strict";var r=H(e.trim().replace(/^[=v]+/,""),t);return r?r.version:null},t.SemVer=$,$.prototype.format=function(){"use strict";return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},$.prototype.toString=function(){"use strict";return this.version},$.prototype.compare=function(e){"use strict";return r("SemVer.compare",this.version,this.options,e),e instanceof $||(e=new $(e,this.options)),this.compareMain(e)||this.comparePre(e)},$.prototype.compareMain=function(e){"use strict";return e instanceof $||(e=new $(e,this.options)),J(this.major,e.major)||J(this.minor,e.minor)||J(this.patch,e.patch)},$.prototype.comparePre=function(e){"use strict";if(e instanceof $||(e=new $(e,this.options)),this.prerelease.length&&!e.prerelease.length)return-1;if(!this.prerelease.length&&e.prerelease.length)return 1;if(!this.prerelease.length&&!e.prerelease.length)return 0;var t=0;do{var i=this.prerelease[t],n=e.prerelease[t];if(r("prerelease compare",t,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return J(i,n)}while(++t)},$.prototype.inc=function(e,t){"use strict";switch(e){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",t);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",t);break;case"prepatch":this.prerelease.length=0,this.inc("patch",t),this.inc("pre",t);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",t),this.inc("pre",t);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var r=this.prerelease.length;--r>=0;)"number"==typeof this.prerelease[r]&&(this.prerelease[r]++,r=-2);-1===r&&this.prerelease.push(0)}t&&(this.prerelease[0]===t?isNaN(this.prerelease[1])&&(this.prerelease=[t,0]):this.prerelease=[t,0]);break;default:throw Error("invalid increment argument: "+e)}return this.format(),this.raw=this.version,this},t.inc=function(e,t,r,i){"use strict";"string"==typeof r&&(i=r,r=void 0);try{return new $(e,r).inc(t,i).version}catch(e){return null}},t.diff=function(e,t){"use strict";if(Z(e,t))return null;var r=H(e),i=H(t),n="";if(r.prerelease.length||i.prerelease.length){n="pre";var s="prerelease"}for(var a in r)if(("major"===a||"minor"===a||"patch"===a)&&r[a]!==i[a])return n+a;return s},t.compareIdentifiers=J;var K=/^[0-9]+$/;function J(e,t){"use strict";var r=K.test(e),i=K.test(t);return r&&i&&(e=+e,t=+t),e===t?0:r&&!i?-1:i&&!r?1:e<t?-1:1}function Y(e,t,r){"use strict";return new $(e,r).compare(new $(t,r))}function X(e,t,r){"use strict";return Y(e,t,r)>0}function Q(e,t,r){"use strict";return Y(e,t,r)<0}function Z(e,t,r){"use strict";return 0===Y(e,t,r)}function ee(e,t,r){"use strict";return 0!==Y(e,t,r)}function te(e,t,r){"use strict";return Y(e,t,r)>=0}function re(e,t,r){"use strict";return Y(e,t,r)<=0}function ie(e,t,r,i){"use strict";switch(t){case"===":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e===r;case"!==":return"object"==typeof e&&(e=e.version),"object"==typeof r&&(r=r.version),e!==r;case"":case"=":case"==":return Z(e,r,i);case"!=":return ee(e,r,i);case">":return X(e,r,i);case">=":return te(e,r,i);case"<":return Q(e,r,i);case"<=":return re(e,r,i);default:throw new TypeError("Invalid operator: "+t)}}function ne(e,t){"use strict";if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ne){if(e.loose===!!t.loose)return e;e=e.value}if(!(this instanceof ne))return new ne(e,t);r("comparator",e,t),this.options=t,this.loose=!!t.loose,this.parse(e),this.value=this.semver===se?"":this.operator+this.semver.version,r("comp",this)}t.rcompareIdentifiers=function(e,t){"use strict";return J(t,e)},t.major=function(e,t){"use strict";return new $(e,t).major},t.minor=function(e,t){"use strict";return new $(e,t).minor},t.patch=function(e,t){"use strict";return new $(e,t).patch},t.compare=Y,t.compareLoose=function(e,t){"use strict";return Y(e,t,!0)},t.rcompare=function(e,t,r){"use strict";return Y(t,e,r)},t.sort=function(e,r){"use strict";return e.sort((function(e,i){return t.compare(e,i,r)}))},t.rsort=function(e,r){"use strict";return e.sort((function(e,i){return t.rcompare(e,i,r)}))},t.gt=X,t.lt=Q,t.eq=Z,t.neq=ee,t.gte=te,t.lte=re,t.cmp=ie,t.Comparator=ne;var se={};function ae(e,t){"use strict";if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),e instanceof ae)return e.loose===!!t.loose&&e.includePrerelease===!!t.includePrerelease?e:new ae(e.raw,t);if(e instanceof ne)return new ae(e.value,t);if(!(this instanceof ae))return new ae(e,t);if(this.options=t,this.loose=!!t.loose,this.includePrerelease=!!t.includePrerelease,this.raw=e,this.set=e.split(/\s*\|\|\s*/).map((function(e){return this.parseRange(e.trim())}),this).filter((function(e){return e.length})),!this.set.length)throw new TypeError("Invalid SemVer Range: "+e);this.format()}function oe(e){"use strict";return!e||"x"===e.toLowerCase()||"*"===e}function ue(e,t,r,i,n,s,a,o,u,l,c,p,h){"use strict";return t=oe(r)?"":oe(i)?">="+r+".0.0":oe(n)?">="+r+"."+i+".0":">="+t,o=oe(u)?"":oe(l)?"<"+(+u+1)+".0.0":oe(c)?"<"+u+"."+(+l+1)+".0":p?"<="+u+"."+l+"."+c+"-"+p:"<="+o,(t+" "+o).trim()}function le(e,t,i){"use strict";for(var n=0;n<e.length;n++)if(!e[n].test(t))return!1;if(t.prerelease.length&&!i.includePrerelease){for(n=0;n<e.length;n++)if(r(e[n].semver),e[n].semver!==se&&e[n].semver.prerelease.length>0){var s=e[n].semver;if(s.major===t.major&&s.minor===t.minor&&s.patch===t.patch)return!0}return!1}return!0}function ce(e,t,r){"use strict";try{t=new ae(t,r)}catch(e){return!1}return t.test(e)}function pe(e,t,r,i){"use strict";var n,s,a,o,u;switch(e=new $(e,i),t=new ae(t,i),r){case">":n=X,s=re,a=Q,o=">",u=">=";break;case"<":n=Q,s=te,a=X,o="<",u="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(ce(e,t,i))return!1;for(var l=0;l<t.set.length;++l){var c=t.set[l],p=null,h=null;if(c.forEach((function(e){e.semver===se&&(e=new ne(">=0.0.0")),p=p||e,h=h||e,n(e.semver,p.semver,i)?p=e:a(e.semver,h.semver,i)&&(h=e)})),p.operator===o||p.operator===u)return!1;if((!h.operator||h.operator===o)&&s(e,h.semver))return!1;if(h.operator===u&&a(e,h.semver))return!1}return!0}ne.prototype.parse=function(e){"use strict";var t=this.options.loose?s[V]:s[G],r=e.match(t);if(!r)throw new TypeError("Invalid comparator: "+e);this.operator=r[1],"="===this.operator&&(this.operator=""),this.semver=r[2]?new $(r[2],this.options.loose):se},ne.prototype.toString=function(){"use strict";return this.value},ne.prototype.test=function(e){"use strict";return r("Comparator.test",e,this.options.loose),this.semver===se||("string"==typeof e&&(e=new $(e,this.options)),ie(e,this.operator,this.semver,this.options))},ne.prototype.intersects=function(e,t){"use strict";if(!(e instanceof ne))throw new TypeError("a Comparator is required");var r;if(t&&"object"==typeof t||(t={loose:!!t,includePrerelease:!1}),""===this.operator)return r=new ae(e.value,t),ce(this.value,r,t);if(""===e.operator)return r=new ae(this.value,t),ce(e.semver,r,t);var i=!(">="!==this.operator&&">"!==this.operator||">="!==e.operator&&">"!==e.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==e.operator&&"<"!==e.operator),s=this.semver.version===e.semver.version,a=!(">="!==this.operator&&"<="!==this.operator||">="!==e.operator&&"<="!==e.operator),o=ie(this.semver,"<",e.semver,t)&&(">="===this.operator||">"===this.operator)&&("<="===e.operator||"<"===e.operator),u=ie(this.semver,">",e.semver,t)&&("<="===this.operator||"<"===this.operator)&&(">="===e.operator||">"===e.operator);return i||n||s&&a||o||u},t.Range=ae,ae.prototype.format=function(){"use strict";return this.range=this.set.map((function(e){return e.join(" ").trim()})).join("||").trim(),this.range},ae.prototype.toString=function(){"use strict";return this.range},ae.prototype.parseRange=function(e){"use strict";var t=this.options.loose;e=e.trim();var i=t?s[W]:s[U];e=e.replace(i,ue),r("hyphen replace",e),e=e.replace(s[B],"$1$2$3"),r("comparator trim",e,s[B]),e=e.replace(s[O],"$1~"),e=e.replace(s[D],"$1^"),e=e.split(/\s+/).join(" ");var n=t?s[V]:s[G],a=e.split(" ").map((function(e){return(function(e,t){return r("comp",e,t),e=(function(e,t){return e.trim().split(/\s+/).map((function(e){return(function(e,t){r("caret",e,t);var i=t.loose?s[j]:s[F];return e.replace(i,(function(t,i,n,s,a){var o;return r("caret",e,t,i,n,s,a),oe(i)?o="":oe(n)?o=">="+i+".0.0 <"+(+i+1)+".0.0":oe(s)?o="0"===i?">="+i+"."+n+".0 <"+i+"."+(+n+1)+".0":">="+i+"."+n+".0 <"+(+i+1)+".0.0":a?(r("replaceCaret pr",a),o="0"===i?"0"===n?">="+i+"."+n+"."+s+"-"+a+" <"+i+"."+n+"."+(+s+1):">="+i+"."+n+"."+s+"-"+a+" <"+i+"."+(+n+1)+".0":">="+i+"."+n+"."+s+"-"+a+" <"+(+i+1)+".0.0"):(r("no pr"),o="0"===i?"0"===n?">="+i+"."+n+"."+s+" <"+i+"."+n+"."+(+s+1):">="+i+"."+n+"."+s+" <"+i+"."+(+n+1)+".0":">="+i+"."+n+"."+s+" <"+(+i+1)+".0.0"),r("caret return",o),o}))})(e,t)})).join(" ")})(e,t),r("caret",e),e=(function(e,t){return e.trim().split(/\s+/).map((function(e){return(function(e,t){var i=t.loose?s[M]:s[T];return e.replace(i,(function(t,i,n,s,a){var o;return r("tilde",e,t,i,n,s,a),oe(i)?o="":oe(n)?o=">="+i+".0.0 <"+(+i+1)+".0.0":oe(s)?o=">="+i+"."+n+".0 <"+i+"."+(+n+1)+".0":a?(r("replaceTilde pr",a),o=">="+i+"."+n+"."+s+"-"+a+" <"+i+"."+(+n+1)+".0"):o=">="+i+"."+n+"."+s+" <"+i+"."+(+n+1)+".0",r("tilde return",o),o}))})(e,t)})).join(" ")})(e,t),r("tildes",e),e=(function(e,t){return r("replaceXRanges",e,t),e.split(/\s+/).map((function(e){return(function(e,t){e=e.trim();var i=t.loose?s[A]:s[I];return e.replace(i,(function(t,i,n,s,a,o){r("xRange",e,t,i,n,s,a,o);var u=oe(n),l=u||oe(s),c=l||oe(a),p=c;return"="===i&&p&&(i=""),u?t=">"===i||"<"===i?"<0.0.0":"*":i&&p?(l&&(s=0),a=0,">"===i?(i=">=",l?(n=+n+1,s=0,a=0):(s=+s+1,a=0)):"<="===i&&(i="<",l?n=+n+1:s=+s+1),t=i+n+"."+s+"."+a):l?t=">="+n+".0.0 <"+(+n+1)+".0.0":c&&(t=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0"),r("xRange return",t),t}))})(e,t)})).join(" ")})(e,t),r("xrange",e),e=(function(e,t){return r("replaceStars",e,t),e.trim().replace(s[q],"")})(e,t),r("stars",e),e})(e,this.options)}),this).join(" ").split(/\s+/);return this.options.loose&&(a=a.filter((function(e){return!!e.match(n)}))),a=a.map((function(e){return new ne(e,this.options)}),this),a},ae.prototype.intersects=function(e,t){"use strict";if(!(e instanceof ae))throw new TypeError("a Range is required");return this.set.some((function(r){return r.every((function(r){return e.set.some((function(e){return e.every((function(e){return r.intersects(e,t)}))}))}))}))},t.toComparators=function(e,t){"use strict";return new ae(e,t).set.map((function(e){return e.map((function(e){return e.value})).join(" ").trim().split(" ")}))},ae.prototype.test=function(e){"use strict";if(!e)return!1;"string"==typeof e&&(e=new $(e,this.options));for(var t=0;t<this.set.length;t++)if(le(this.set[t],e,this.options))return!0;return!1},t.satisfies=ce,t.maxSatisfying=function(e,t,r){"use strict";var i=null,n=null;try{var s=new ae(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(i&&-1!==n.compare(e)||(i=e,n=new $(i,r)))})),i},t.minSatisfying=function(e,t,r){"use strict";var i=null,n=null;try{var s=new ae(t,r)}catch(e){return null}return e.forEach((function(e){s.test(e)&&(i&&1!==n.compare(e)||(i=e,n=new $(i,r)))})),i},t.minVersion=function(e,t){"use strict";e=new ae(e,t);var r=new $("0.0.0");if(e.test(r))return r;if(r=new $("0.0.0-0"),e.test(r))return r;r=null;for(var i=0;i<e.set.length;++i){var n=e.set[i];n.forEach((function(e){var t=new $(e.semver.version);switch(e.operator){case">":0===t.prerelease.length?t.patch++:t.prerelease.push(0),t.raw=t.format();case"":case">=":r&&!X(r,t)||(r=t);break;case"<":case"<=":break;default:throw Error("Unexpected operation: "+e.operator)}}))}return r&&e.test(r)?r:null},t.validRange=function(e,t){"use strict";try{return new ae(e,t).range||"*"}catch(e){return null}},t.ltr=function(e,t,r){"use strict";return pe(e,t,"<",r)},t.gtr=function(e,t,r){"use strict";return pe(e,t,">",r)},t.outside=pe,t.prerelease=function(e,t){"use strict";var r=H(e,t);return r&&r.prerelease.length?r.prerelease:null},t.intersects=function(e,t,r){"use strict";return e=new ae(e,r),t=new ae(t,r),e.intersects(t)},t.coerce=function(e){"use strict";if(e instanceof $)return e;if("string"!=typeof e)return null;var t=e.match(s[N]);return null==t?null:H(t[1]+"."+(t[2]||"0")+"."+(t[3]||"0"))}}),(function(e,t,r){var i=!0,n=-1,s=0,a=1,o=2,u=3,l=4,c=5,p=6,h=7,f=8,d=9,m=10,v=11,g=13,y=0,x=[];function b(){var e=x.pop();return e||(e={context:y,elements:null,element_array:null}),e}function w(e){x.push(e)}var E=[];function S(e){E.push(e)}var R=t;R.escape=function(e){var t,r="";if(!e)return e;for(t=0;t<e.length;t++)'"'!==e[t]&&"\\"!==e[t]&&"`"!==e[t]&&"'"!==e[t]||(r+="\\"),r+=e[t];return r},R.begin=function(e,t){var r,x={name:null,value_type:s,string:"",contains:null},R={line:1,col:1},P=0,_=0,k=!0,I=!1,A=null,N=void 0,C=[],O={first:null,last:null,saved:null,push(e){var t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last||(this.first=t),this.last=t},pop(){var e=this.last;return e?((this.last=e.prior)||(this.first=null),e.next=this.saved,this.saved=e,e.node):null}},T=y,M=0,L=!1,D=!1,F=!1,j=!1,V=!1,G={first:null,last:null,saved:null,push(e){var t=this.saved;t?(this.saved=t.next,t.node=e,t.next=null,t.prior=this.last):t={node:e,next:null,prior:this.last},this.last||(this.first=t),this.last=t},shift(){var e=this.first;return e?((this.first=e.next)||(this.last=null),e.next=this.saved,this.saved=e,e.node):null},unshift(e){var t=this.saved;t?(this.saved=t.next,t.node=e,t.next=this.first,t.prior=null):t={node:e,next:this.first,prior:null},this.first||(this.last=t),this.first=t}},B=null,U=!1,W=!1,q=!1,z=!1,H=!1,$=!1,K=!1,J=0,Y=0,X=!1,Q=!1;return{value(){var e=A;return A=void 0,e},reset(){_=0,k=!0,G.last&&(G.last.next=G.save),G.save=G.first,G.first=G.last=null,O.last&&(O.last.next=O.save),O.save=G.first,O.first=O.last=null,C=null,N=void 0,T=y,x.value_type=s,x.name=null,x.string="",R.line=1,R.col=1,I=!1,M=0,Q=!1,U=!1,q=!1,z=!1},write(r){var i;for("string"!=typeof r&&(r+=""),i=this._write(r,!1);i>0&&(A&&("function"==typeof t&&(function e(r,i){var n,s,a=r[i];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s=e(a,n),void 0!==s?a[n]=s:delete a[n]);return t.call(r,i,a)})({"":A},""),e(A),A=void 0),!(i<2));i=this._write());},_write(e,t){var Z,ee,te,re=0;function ie(e,t){throw Error(`${e} '${String.fromCodePoint(t)}' unexpected at ${P} (near '${te.substr(P>4?P-4:0,P>4?3:P-1)}[${String.fromCodePoint(t)}]${te.substr(P,10)}') [${R.line}:${R.col}]`)}function ne(){x.value_type=s,x.string=""}function se(e){return e.length>1&&!L&&!D&&!F&&48===e.charCodeAt(0)?(I?-1:1)*+("0o"+e):(I?-1:1)*+e}function ae(){switch(x.value_type){case c:C.push(i?se(x.string):(I?-1:1)*+x.string);break;case l:C.push(x.string);break;case o:C.push(!0);break;case u:C.push(!1);break;case f:case d:C.push(NaN);break;case m:C.push(-1/0);break;case v:C.push(1/0);break;case a:C.push(null);break;case n:C.push(void 0);break;case g:C.push(void 0),delete C[C.length-1];break;case p:case h:C.push(x.contains)}}function oe(){switch(x.value_type){case c:N[x.name]=i?se(x.string):(I?-1:1)*+x.string;break;case l:N[x.name]=x.string;break;case o:N[x.name]=!0;break;case u:N[x.name]=!1;break;case f:case d:N[x.name]=NaN;break;case m:N[x.name]=-1/0;break;case v:N[x.name]=1/0;break;case a:N[x.name]=null;break;case n:N[x.name]=void 0;break;case p:case h:N[x.name]=x.contains}}function ue(e){for(var t=0;0===t&&P<te.length;){r=te.charAt(P);var i=te.codePointAt(P++);if(i>=65536&&(r+=te.charAt(P),P++),R.col++,i===e)q?(x.string+=r,q=!1):(t=-1,X?ie("Incomplete Octal sequence",i):K?ie("Incomplete hexidecimal sequence",i):$?ie("Incomplete unicode sequence",i):H&&ie("Incomplete long unicode sequence",i),t=1);else if(q){if(X){if(Y<3&&i>=48&&i<=57){if(J*=8,J+=i-48,Y++,3===Y){x.string+=String.fromCodePoint(J),X=!1,q=!1;continue}continue}if(J>255){ie("(escaped character, parsing octal escape val=%d) fault while parsing",i),t=-1;break}x.string+=String.fromCodePoint(J),X=!1,q=!1;continue}if(H){if(125===i){x.string+=String.fromCodePoint(J),H=!1,$=!1,q=!1;continue}if(J*=16,i>=48&&i<=57)J+=i-48;else if(i>=65&&i<=70)J+=i-65+10;else{if(!(i>=97&&i<=102)){ie("(escaped character, parsing hex of \\u)",i),t=-1,H=!1,q=!1;continue}J+=i-97+10}continue}if(K||$){if(0===Y&&123===i){H=!0;continue}if(Y<2||$&&Y<4){if(J*=16,i>=48&&i<=57)J+=i-48;else if(i>=65&&i<=70)J+=i-65+10;else{if(!(i>=97&&i<=102)){ie($?"(escaped character, parsing hex of \\u)":"(escaped character, parsing hex of \\x)",i),t=-1,K=!1,q=!1;continue}J+=i-97+10}Y++,$?4===Y&&(x.string+=String.fromCodePoint(J),$=!1,q=!1):2===Y&&(x.string+=String.fromCodePoint(J),K=!1,q=!1);continue}}switch(i){case 13:z=!0,R.col=1;continue;case 10:case 2028:case 2029:R.line++;break;case 116:x.string+="\t";break;case 98:x.string+="\b";break;case 110:x.string+="\n";break;case 114:x.string+="\r";break;case 102:x.string+="\f";break;case 48:case 49:case 50:case 51:X=!0,J=i-48,Y=1;continue;case 120:K=!0,Y=0,J=0;continue;case 117:$=!0,Y=0,J=0;continue;default:x.string+=r}q=!1}else if(92===i)q?(x.string+="\\",q=!1):q=!0;else{if(z){if(z=!1,10===i){R.line++,R.col=1,q=!1;continue}R.line++,R.col=1;continue}x.string+=r}}return t}function le(){for(var e;(e=P)<te.length;){r=te.charAt(e);var i=te.codePointAt(P++);if(i>=65536&&(ie("fault while parsing number;",i),r+=te.charAt(P),P++),95!==i)if(R.col++,i>=48&&i<=57)F&&(V=!0),x.string+=r;else if(45===i||43===i){if(0!==x.string.length&&(!F||j||V)){k=!1,ie("fault while parsing number;",i);break}x.string+=r,j=!0}else if(46===i){if(D||L||F){k=!1,ie("fault while parsing number;",i);break}x.string+=r,D=!0}else if(120===i||98===i||111===i||88===i||66===i||79===i){if(L||"0"!==x.string){k=!1,ie("fault while parsing number;",i);break}L=!0,x.string+=r}else{if(101!==i&&69!==i){if(32===i||13===i||10===i||9===i||65279===i||44===i||125===i||93===i||58===i)break;t&&(k=!1,ie("fault while parsing number;",i));break}if(F){k=!1,ie("fault while parsing number;",i);break}x.string+=r,F=!0}}P=e,t||P!==te.length?(W=!1,x.value_type=c,T===y&&(Q=!0)):W=!0}if(!k)return-1;for(e&&e.length?(ee=(function(){var e=E.pop();return e?e.n=0:e={buf:null,n:0},e})(),ee.buf=e,G.push(ee)):W&&(W=!1,x.value_type=c,T===y&&(Q=!0),re=1);k&&(ee=G.shift());){if(P=ee.n,te=ee.buf,U){var ce=ue(B);ce<0?k=!1:ce>0&&(U=!1,k&&(x.value_type=l))}for(W&&le();!Q&&k&&P<te.length;){if(r=te.charAt(P),Z=te.codePointAt(P++),Z>=65536&&(r+=te.charAt(P),P++),R.col++,M){if(1===M){if(42===Z){M=3;continue}47!==Z?(ie("fault while parsing;",Z),k=!1):M=2;continue}if(2===M){if(10===Z){M=0;continue}continue}if(3===M){if(42===Z){M=4;continue}continue}if(4===M){if(47===Z){M=0;continue}42!==Z&&(M=3);continue}}switch(Z){case 47:M||(M=1);break;case 123:if(29===_||30===_||3===T&&0===_){ie("fault while parsing; getting field name unexpected ",Z),k=!1;break}var pe=b();x.value_type=p;var he={};T===y?A=N=he:4===T&&(N[x.name]=he),pe.context=T,pe.elements=N,pe.element_array=C,pe.name=x.name,N=he,O.push(pe),ne(),T=3;break;case 91:if(3===T||29===_||30===_){ie("Fault while parsing; while getting field name unexpected",Z),k=!1;break}var fe=b();x.value_type=h;var de=[];T===y?A=C=de:4===T&&(N[x.name]=de),fe.context=T,fe.elements=N,fe.element_array=C,fe.name=x.name,C=de,O.push(fe),ne(),T=1;break;case 58:if(3===T){if(0!==_&&29!==_&&30!==_){k=FALSE,thorwError(`fault while parsing; unquoted keyword used as object field name (state:${_})`,Z);break}_=0,x.name=x.string,x.string="",T=4,x.value_type=s}else ie(1===T?"(in array, got colon out of string):parsing fault;":"(outside any object, got colon out of string):parsing fault;",Z),k=!1;break;case 125:if(31===_&&(_=0),3===T){ne();var me=O.pop();T=me.context,N=me.elements,C=me.element_array,w(me),T===y&&(Q=!0)}else if(4===T){x.value_type!==s&&oe(),x.value_type=p,x.contains=N;var ve=O.pop();x.name=ve.name,T=ve.context,N=ve.elements,C=ve.element_array,w(ve),T===y&&(Q=!0)}else ie("Fault while parsing; unexpected",Z),k=!1;I=!1;break;case 93:31===_&&(_=0),1===T?(x.value_type!==s&&ae(),x.value_type=h,x.contains=C,ve=O.pop(),x.name=ve.name,T=ve.context,N=ve.elements,C=ve.element_array,w(ve),T===y&&(Q=!0)):(ie(`bad context ${T}; fault while parsing`,Z),k=!1),I=!1;break;case 44:31===_&&(_=0),1===T?(x.value_type===s&&(x.value_type=g),x.value_type!==s&&(ae(),ne())):4===T?(T=3,x.value_type!==s&&(oe(),ne())):(k=!1,ie("bad context; excessive commas while parsing;",Z)),I=!1;break;default:if(3===T)switch(Z){case 96:case 34:case 39:if(0===_){var ge=ue(Z);ge?x.value_type=l:(B=Z,U=!0)}else ie("fault while parsing; quote not at start of field name",Z);break;case 10:R.line++,R.col=1;case 13:case 32:case 9:case 65279:if(31===_){_=0,T===y&&(Q=!0);break}if(0===_||30===_)break;29===_?_=30:(k=!1,ie("fault while parsing; whitepsace unexpected",Z));break;default:30===_&&(k=!1,ie("fault while parsing; character unexpected",Z)),0===_&&(_=29),x.string+=r}else switch(Z){case 96:case 34:case 39:var ye=ue(Z);ye?(x.value_type=l,_=31):(B=Z,U=!0);break;case 10:R.line++,R.col=1;case 32:case 9:case 13:case 65279:if(31===_){_=0,T===y&&(Q=!0);break}if(0===_)break;29===_?_=30:(k=!1,ie("fault parsing whitespace",Z));break;case 116:0===_?_=1:27===_?_=28:(k=!1,ie("fault parsing",Z));break;case 114:1===_?_=2:(k=!1,ie("fault parsing",Z));break;case 117:2===_?_=3:9===_?_=10:0===_?_=12:(k=!1,ie("fault parsing",Z));break;case 101:3===_?(x.value_type=o,_=31):8===_?(x.value_type=u,_=31):14===_?_=15:18===_?_=19:(k=!1,ie("fault parsing",Z));break;case 110:0===_?_=9:12===_?_=13:17===_?_=18:22===_?_=23:25===_?_=26:(k=!1,ie("fault parsing",Z));break;case 100:13===_?_=14:19===_?(x.value_type=n,_=31):(k=!1,ie("fault parsing",Z));break;case 105:16===_?_=17:24===_?_=25:26===_?_=27:(k=!1,ie("fault parsing",Z));break;case 108:10===_?_=11:11===_?(x.value_type=a,_=31):6===_?_=7:(k=!1,ie("fault parsing",Z));break;case 102:0===_?_=5:15===_?_=16:23===_?_=24:(k=!1,ie("fault parsing",Z));break;case 97:5===_?_=6:20===_?_=21:(k=!1,ie("fault parsing",Z));break;case 115:7===_?_=8:(k=!1,ie("fault parsing",Z));break;case 73:0===_?_=22:(k=!1,ie("fault parsing",Z));break;case 78:0===_?_=20:21===_?(x.value_type=I?f:d,_=31):(k=!1,ie("fault parsing",Z));break;case 121:28===_?(x.value_type=I?m:v,_=31):(k=!1,ie("fault parsing",Z));break;case 45:0===_?I=!I:(k=!1,ie("fault parsing",Z));break;default:Z>=48&&Z<=57||43===Z||46===Z||45===Z?(L=!1,F=!1,j=!1,V=!1,D=!1,x.string=r,ee.n=P,le()):(k=!1,ie("fault parsing",Z))}}if(Q){31===_&&(_=0);break}}if(P===te.length?(S(ee),U||W||3===T?re=0:T!==y||x.value_type===s&&!A||(Q=!0,re=1)):(ee.n=P,G.unshift(ee),re=2),Q)break}if(!k)return-1;if(Q&&x.value_type!==s){switch(x.value_type){case c:A=i?se(x.string):(I?-1:1)*+x.string;break;case l:A=x.string;break;case o:A=!0;break;case u:A=!1;break;case a:A=null;break;case n:A=void 0;break;case d:case f:A=NaN;break;case v:A=1/0;break;case m:A=-1/0;break;case p:case h:A=x.contains}I=!1,x.string="",x.value_type=s}return Q=!1,re}}};var P=[Object.freeze(R.begin())],_=0;R.parse=function(e,t){var r,i=_++;if(P.length<=i&&P.push(Object.freeze(R.begin())),r=P[i],"string"!=typeof e&&(e+=""),r.reset(),r._write(e,!0)>0){var n=r.value();return"function"==typeof t&&(function e(r,i){var n,s,a=r[i];if(a&&"object"==typeof a)for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(s=e(a,n),void 0!==s?a[n]=s:delete a[n]);return t.call(r,i,a)})({"":n},""),_--,n}}}),(function(i,n,s){var a=function(e){"use strict";return e+"\u200d"},o=Object.prototype.__defineGetter__,u=function(e,t,r){"use strict";return o.call(e,t,r),e},l=Object.prototype.__defineSetter__,c=function(e,t,r){"use strict";return l.call(e,t,r),e},p={configurable:!0,enumerable:!0,value:void 0,writable:!0},h=[],f=function(e,t,r){"use strict";return u(e,t,(function(){return this[t]=void 0,this[t]=Reflect.apply(r,this,h)})),c(e,t,(function(e){p.value=e,Reflect.defineProperty(this,t,p)})),e},d=["index.js","esm.js","esm/loader.js"],m={PACKAGE_DIRNAME:null,PACKAGE_FILENAMES:null,PACKAGE_PREFIX:a("esm"),PACKAGE_RANGE:"3.2.25",PACKAGE_VERSION:"3.2.25",STACK_TRACE_LIMIT:30},v=e,g=v.filename,y=v.parent,x=null!=y&&y.filename;f(m,"PACKAGE_DIRNAME",(function(){"use strict";var e=__shared__.module.safePath;return e.dirname(g)})),f(m,"PACKAGE_FILENAMES",(function(){"use strict";for(var e=__shared__.module.safePath,t=e.sep,r=this.PACKAGE_DIRNAME,i=d.length;i--;)d[i]=r+t+d[i];return d})),f(m,"PACKAGE_PARENT_NAME",(function(){"use strict";var e=__shared__.module.safePath,t=e.sep,r="string"==typeof x?x.lastIndexOf(t+"node_modules"+t):-1;if(-1===r)return"";var i=r+14,n=x.indexOf(t,i);return-1===n?"":x.slice(i,n)}));var b=m,w=b.PACKAGE_PREFIX,E=b.PACKAGE_VERSION,S=Symbol.for(w+"@"+E+":shared"),R=(function(){"use strict";if(void 0!==__shared__)return __shared__.reloaded=!1,__shared__;try{return __shared__=require(S),__shared__.reloaded=!0,__shared__}catch(e){}return e=Function.prototype.toString,r=new Proxy(class{},{[w]:1}),i={wasm:"object"==typeof WebAssembly&&null!==WebAssembly},n={_compile:Symbol.for(w+":module._compile"),entry:Symbol.for(w+":entry"),mjs:Symbol.for(w+':Module._extensions[".mjs"]'),namespace:Symbol.for(w+":namespace"),package:Symbol.for(w+":package"),proxy:Symbol.for(w+":proxy"),realGetProxyDetails:Symbol.for(w+":realGetProxyDetails"),realRequire:Symbol.for(w+":realRequire"),runtime:Symbol.for(w+":runtime"),shared:S,wrapper:Symbol.for(w+":wrapper")},s={},o={bridged:new Map,customInspectKey:void 0,defaultInspectOptions:void 0,entry:{cache:new WeakMap},external:t,inited:!1,loader:new Map,memoize:{builtinEntries:new Map,builtinModules:new Map,fsRealpath:new Map,moduleESMResolveFilename:new Map,moduleInternalFindPath:new Map,moduleInternalReadPackage:new Map,moduleStaticResolveFilename:new Map,shimFunctionPrototypeToString:new WeakMap,shimProcessBindingUtilGetProxyDetails:new Map,shimPuppeteerExecutionContextPrototypeEvaluateHandle:new WeakMap,utilGetProxyDetails:new WeakMap,utilMaskFunction:new WeakMap,utilMaxSatisfying:new Map,utilParseURL:new Map,utilProxyExports:new WeakMap,utilSatisfies:new Map,utilUnwrapOwnProxy:new WeakMap,utilUnwrapProxy:new WeakMap},module:{},moduleState:{instantiating:!1,parsing:!1,requireDepth:0,statFast:null,statSync:null},package:{dir:new Map,root:new Map},pendingScripts:new Map,pendingWrites:new Map,realpathNativeSync:void 0,reloaded:!1,safeGlobal:__global__,support:i,symbol:n,unsafeGlobal:global,utilBinding:s},f(o,"circularErrorMessage",(function(){try{var e={};e.a=e,JSON.stringify(e)}catch(e){var t=e.message;return t}})),f(o,"defaultGlobal",(function(){var e=o.module.safeVM;return new e.Script("this").runInThisContext()})),f(o,"originalConsole",(function(){var e=o.module,t=e.safeInspector,r=e.safeVM,i=e.utilGet,n=i(t,"console");return"function"==typeof n?n:new r.Script("console").runInNewContext()})),f(o,"proxyNativeSourceText",(function(){try{return e.call(r)}catch(e){}return""})),f(o,"runtimeName",(function(){var e=o.module.safeCrypto;return a("_"+e.createHash("md5").update(""+Date.now()).digest("hex").slice(0,3))})),f(o,"unsafeContext",(function(){var e=o.module,t=e.safeVM,r=e.utilPrepareContext;return r(t.createContext(o.unsafeGlobal))})),f(i,"await",(function(){var e=o.module.safeVM;try{return new e.Script("async()=>await 1").runInThisContext(),!0}catch(e){}return!1})),f(i,"consoleOptions",(function(){var e=o.module,t=e.safeProcess,r=e.utilSatisfies;return r(t.version,">=10")})),f(i,"createCachedData",(function(){var e=o.module.safeVM;return"function"==typeof e.Script.prototype.createCachedData})),f(i,"inspectProxies",(function(){var e=o.module.safeUtil,t=e.inspect(r,{depth:1,showProxy:!0});return-1!==t.indexOf("Proxy [")&&-1!==t.indexOf(w)})),f(i,"lookupShadowed",(function(){var e={__proto__:{get a(){},set a(e){}},a:1};return void 0===e.__lookupGetter__("a")&&void 0===e.__lookupSetter__("a")})),f(i,"nativeProxyReceiver",(function(){var e=o.module,t=e.SafeBuffer,r=e.utilGet,i=e.utilToString;try{var n=new Proxy(t.alloc(0),{get:function(e,t){return e[t]}});return"string"==typeof(""+n)}catch(e){return!/Illegal/.test(i(r(e,"message")))}})),f(i,"realpathNative",(function(){var e=o.module,t=e.safeProcess,r=e.utilSatisfies;return r(t.version,">=9.2")})),f(i,"replShowProxy",(function(){var e=o.module,t=e.safeProcess,r=e.utilSatisfies;return r(t.version,">=10")})),f(i,"vmCompileFunction",(function(){var e=o.module,t=e.safeProcess,r=e.utilSatisfies;return r(t.version,">=10.10")})),f(s,"errorDecoratedSymbol",(function(){var e=o.module,t=e.binding,r=e.safeProcess,i=e.utilSatisfies;return i(r.version,"<7")?"node:decorated":t.util.decorated_private_symbol})),f(s,"hiddenKeyType",(function(){return typeof s.errorDecoratedSymbol})),__shared__=o;var e,r,i,n,s,o})(),P=R.inited?R.module.utilUnapply:R.module.utilUnapply=(function(){"use strict";return function(e){return function(t,...r){return Reflect.apply(e,t,r)}}})(),_=R.inited?R.module.GenericFunction:R.module.GenericFunction=(function(){"use strict";return{bind:P(Function.prototype.bind)}})(),k=R.inited?R.module.realRequire:R.module.realRequire=(function(){"use strict";try{var e=require(R.symbol.realRequire);if("function"==typeof e)return e}catch(e){}return require})(),I=R.inited?R.module.realProcess:R.module.realProcess=k("process"),A=R.inited?R.module.utilIsObjectLike:R.module.utilIsObjectLike=(function(){"use strict";return function(e){var t=typeof e;return"function"===t||"object"===t&&null!==e}})(),N=R.inited?R.module.utilSetProperty:R.module.utilSetProperty=(function(){"use strict";var e={configurable:!0,enumerable:!0,value:void 0,writable:!0};return function(t,r,i){return!!A(t)&&(e.value=i,Reflect.defineProperty(t,r,e))}})(),C=R.inited?R.module.utilSilent:R.module.utilSilent=(function(){"use strict";return function(e){var t=Reflect.getOwnPropertyDescriptor(I,"noDeprecation");N(I,"noDeprecation",!0);try{return e()}finally{void 0===t?Reflect.deleteProperty(I,"noDeprecation"):Reflect.defineProperty(I,"noDeprecation",t)}}})(),O=R.inited?R.module.utilGetSilent:R.module.utilGetSilent=(function(){"use strict";return function(e,t){var r=C((function(){try{return e[t]}catch(e){}}));return"function"!=typeof r?r:function(...e){var t=this;return C((function(){return Reflect.apply(r,t,e)}))}}})(),T=R.inited?R.module.utilKeys:R.module.utilKeys=(function(){"use strict";return function(e){return A(e)?Object.keys(e):[]}})(),M=R.inited?R.module.utilHas:R.module.utilHas=(function(){"use strict";var e=Object.prototype.hasOwnProperty;return function(t,r){return null!=t&&e.call(t,r)}})(),L=R.inited?R.module.utilNoop:R.module.utilNoop=(function(){"use strict";return function(){}})(),D=R.inited?R.module.utilIsObject:R.module.utilIsObject=(function(){"use strict";return function(e){return"object"==typeof e&&null!==e}})(),F=R.inited?R.module.utilOwnKeys:R.module.utilOwnKeys=(function(){"use strict";return function(e){return A(e)?Reflect.ownKeys(e):[]}})(),j=R.inited?R.module.utilIsDataPropertyDescriptor:R.module.utilIsDataPropertyDescriptor=(function(){"use strict";return function(e){return D(e)&&!0===e.configurable&&!0===e.enumerable&&!0===e.writable&&M(e,"value")}})(),V=R.inited?R.module.utilSafeCopyProperty:R.module.utilSafeCopyProperty=(function(){"use strict";return function(e,t,r){if(!A(e)||!A(t))return e;var i=Reflect.getOwnPropertyDescriptor(t,r);if(void 0!==i){if(M(i,"value")){var n=i.value;Array.isArray(n)&&(i.value=Array.from(n))}j(i)?e[r]=i.value:(i.configurable=!0,M(i,"writable")&&(i.writable=!0),Reflect.defineProperty(e,r,i))}return e}})(),G=R.inited?R.module.utilSafeAssignProperties:R.module.utilSafeAssignProperties=(function(){"use strict";return function(e){for(var t=arguments.length,r=0;++r<t;)for(var i=arguments[r],n=F(i),s=0,a=null==n?0:n.length;s<a;s++){var o=n[s];V(e,i,o)}return e}})(),B=R.inited?R.module.utilSetPrototypeOf:R.module.utilSetPrototypeOf=(function(){"use strict";return function(e,t){return A(e)&&Reflect.setPrototypeOf(e,A(t)?t:null)}})(),U=R.inited?R.module.utilSafe:R.module.utilSafe=(function(){"use strict";return function(e){if("function"!=typeof e)return Array.isArray(e)?Array.from(e):D(e)?G({},e):e;for(var t=e,r=function(...e){var r=Reflect.construct(t,e);return B(r,o),r},i=F(t),n=0,s=null==i?0:i.length;n<s;n++){var a=i[n];"prototype"!==a&&V(r,t,a)}var o=r.prototype;return B(o,null),G(o,t.prototype),r}})(),W=R.inited?R.module.safeProcess:R.module.safeProcess=(function(){"use strict";var e=U(I),t=Reflect.getOwnPropertyDescriptor(e,"binding");f(e,"binding",(function(){if(void 0===t)return L;Reflect.defineProperty(e,"binding",t);var r=O(e,"binding"),i="function"==typeof r?_.bind(r,I):L;return N(e,"binding",i),i}));var r=e.config,i={variables:{v8_enable_inspector:0}};return A(r)&&M(r,"variables")&&A(r.variables)&&M(r.variables,"v8_enable_inspector")&&r.variables.v8_enable_inspector&&(i.variables.v8_enable_inspector=1),N(e,"argv",U(e.argv)),N(e,"config",i),N(e,"dlopen",_.bind(e.dlopen,I)),N(e,"emitWarning",_.bind(e.emitWarning,I)),N(e,"env",U(e.env)),N(e,"execArgv",U(e.execArgv)),N(e,"getMaxListeners",_.bind(I.getMaxListeners,I)),N(e,"once",_.bind(I.once,I)),N(e,"setMaxListeners",_.bind(I.setMaxListeners,I)),N(e,"versions",U(e.versions)),e})(),q=W.argv,z=W.config,H=W.cwd,$=W.dlopen,K=W.emitWarning,J=W.env,Y=W.execArgv,X=W.getMaxListeners,Q=W.once,Z=W.platform,ee=W.setMaxListeners,te=W.stdin,re=W.type,ie=W.versions,ne=W,se=R.inited?R.module.binding:R.module.binding=(function(){"use strict";for(var e=["fs","inspector","natives","util"],t=new Map([["fs",["internalModuleStat","realpath"]],["inspector",["consoleCall"]],["natives",void 0],["util",["decorated_private_symbol","getProxyDetails","safeGetenv","setHiddenValue"]]]),r={},i=function(e){f(r,e,(function(){var r={},i=ne.binding(e);if(!A(i))return r;var n=t.get(e);void 0===n&&(n=T(i));for(var s=function(e){f(r,e,(function(){if("consoleCall"===e)return C((function(){return i[e]}));var t=O(i,e);return"function"==typeof t?_.bind(t,i):t}))},a=0,o=n,u=null==o?0:o.length;a<u;a++){var l=o[a];s(l)}return r}))},n=0,s=null==e?0:e.length;n<s;n++){var a=e[n];i(a)}return r})(),ae=R.inited?R.module.utilGetPrototypeOf:R.module.utilGetPrototypeOf=(function(){"use strict";return function(e){return A(e)?Reflect.getPrototypeOf(e):null}})(),oe=R.inited?R.module.utilToExternalFunction:R.module.utilToExternalFunction=(function(){"use strict";var e=R.external.Function,t=ae(e),r=ae(e.prototype);return function(e){return B(e,t),M(e,"prototype")&&B(e.prototype,r),e}})(),ue=R.inited?R.module.OwnProxy:R.module.OwnProxy=(function(){"use strict";var e={value:oe((function(){return"{}"}))},t={value:1};class r{constructor(i,n){var s={__proto__:n},a=new Proxy(i,s);for(var o in B(n,null),n)oe(n[o]);Reflect.defineProperty(s,R.customInspectKey,e),Reflect.defineProperty(s,R.symbol.proxy,t),r.instances.set(a,[i,s]);var u={},l=new Proxy(a,u);return r.instances.set(l,[a,u]),l}}return r.instances=new WeakMap,B(r.prototype,null),r})(),le=R.inited?R.module.safeRequire:R.module.safeRequire=(function(){"use strict";var e=k.resolve;function t(e){try{return k(e)}catch(e){}}return t.resolve=function(t){try{return Reflect.apply(e,k,[t])}catch(e){}return""},t})(),ce=R.inited?R.module.realGetProxyDetails:R.module.realGetProxyDetails=(function(){"use strict";var e,t=le(R.symbol.realGetProxyDetails);return"function"==typeof t?t:(t=function(t){if(void 0===e&&(e="function"==typeof se.util.getProxyDetails),e&&A(t))try{return se.util.getProxyDetails(t)}catch(e){}},t)})(),pe=R.inited?R.module.utilGetProxyDetails:R.module.utilGetProxyDetails=(function(){"use strict";return function(e){var t=R.memoize.utilGetProxyDetails,r=t.get(e);if(void 0!==r)return r.details;if(A(e)){var i=ue.instances.get(e)||ce(e);return t.set(e,{details:i}),i}}})(),he=R.inited?R.module.utilUnwrapProxy:R.module.utilUnwrapProxy=(function(){"use strict";return function(e){if(!A(e))return e;var t,r=R.memoize.utilUnwrapProxy,i=r.get(e);if(void 0!==i)return i;for(var n=e;void 0!==(t=pe(n));)n=t[0];return r.set(e,n),n}})(),fe=R.inited?R.module.realPath:R.module.realPath=he(k("path")),de=R.inited?R.module.safePath:R.module.safePath=U(fe),me=de.basename,ve=de.delimiter,ge=de.dirname,ye=de.extname,xe=de.isAbsolute,be=de.normalize,we=de.resolve,Ee=de.sep,Se=de.toNamespacedPath,Re=de,Pe={},_e={},ke=R.inited?R.module.utilAlwaysTrue:R.module.utilAlwaysTrue=(function(){"use strict";return function(){return!0}})(),Ie=R.inited?R.module.FastPath:R.module.FastPath=(function(){"use strict";class e{constructor(e){this.stack=[e]}call(e,t,r){var i=this.stack,n=i[i.length-1];i.push(r,n[r]);var s=e[t](this);return i.length-=2,s}each(e,t){for(var r=this.stack,i=r[r.length-1],n=i.length,s=-1;++s<n;)r.push(s,i[s]),e[t](this),r.length-=2}getNode(e,t){var r=this.stack,i=r.length;for("function"!=typeof t&&(t=ke),void 0!==e&&(i=e<0?i+e:e);i-- >0;){var n=r[i--];if(D(n)&&!Array.isArray(n)&&t(n))return n}return null}getParentNode(e){return this.getNode(-2,e)}getValue(){var e=this.stack;return e[e.length-1]}}return B(e.prototype,null),e})(),Ae=R.inited?R.module.MagicString:R.module.MagicString=(function(){"use strict";class e{constructor(e,t,r){this.content=r,this.end=t,this.intro="",this.original=r,this.outro="",this.next=null,this.start=e}appendLeft(e){this.outro+=e}appendRight(e){this.intro+=e}contains(e){return this.start<e&&e<this.end}edit(e){this.content=e,this.intro="",this.outro=""}prependLeft(e){this.outro=e+this.outro}prependRight(e){this.intro=e+this.intro}split(t){var r=t-this.start,i=this.original.slice(0,r),n=this.original.slice(r),s=new e(t,this.end,n);return s.outro=this.outro,s.next=this.next,this.original=i,this.end=t,this.content=i,this.outro="",this.next=s,s}toString(){return this.intro+this.content+this.outro}}B(e.prototype,null);class t{constructor(t){var r=new e(0,t.length,t);this.original=t,this.intro="",this.outro="",this.firstChunk=r,this.lastSearchedChunk=r,this.byStart=new Map,this.byStart.set(0,r),this.byEnd=new Map,this.byEnd.set(t.length,r)}appendLeft(e,t){this._split(e);var r=this.byEnd.get(e);return void 0===r?this.intro+=t:r.appendLeft(t),this}appendRight(e,t){this._split(e);var r=this.byStart.get(e);return void 0===r?this.outro+=t:r.appendRight(t),this}overwrite(e,t,r){this._split(e),this._split(t);var i=this.byStart.get(e),n=this.byEnd.get(t);if(e===t)return r?this.appendLeft(e,r):this;if(i.edit(r),i===n)return this;for(var s=i.next;s!==n;)s.edit(""),s=s.next;return s.edit(""),this}prependLeft(e,t){this._split(e);var r=this.byEnd.get(e);return void 0===r?this.intro=t+this.intro:r.prependLeft(t),this}prependRight(e,t){this._split(e);var r=this.byStart.get(e);return void 0===r?this.outro=t+this.outro:r.prependRight(t),this}_split(e){if(!this.byStart.has(e)&&!this.byEnd.has(e))for(var t=this.lastSearchedChunk,r=e>t.end;t;){if(t.contains(e))return void this._splitChunk(t,e);t=r?this.byStart.get(t.end):this.byEnd.get(t.start)}}_splitChunk(e,t){var r=e.split(t);this.byEnd.set(t,e),this.byStart.set(t,r),this.byEnd.set(r.end,r),this.lastSearchedChunk=e}toString(){for(var e=this.intro,t=this.firstChunk;t;)e+=""+t,t=t.next;return e+this.outro}}return B(t.prototype,null),t})();class Ne{constructor(e,t={}){this.label=e,this.keyword=t.keyword,this.beforeExpr=!!t.beforeExpr,this.startsExpr=!!t.startsExpr,this.isLoop=!!t.isLoop,this.isAssign=!!t.isAssign,this.prefix=!!t.prefix,this.postfix=!!t.postfix,this.binop=t.binop||null,this.updateContext=null}}function Ce(e,t){"use strict";return new Ne(e,{beforeExpr:!0,binop:t})}var Oe={beforeExpr:!0},Te={startsExpr:!0},Me={};function Le(e,t={}){return t.keyword=e,Me[e]=new Ne(e,t)}var De={num:new Ne("num",Te),regexp:new Ne("regexp",Te),string:new Ne("string",Te),name:new Ne("name",Te),eof:new Ne("eof"),bracketL:new Ne("[",{beforeExpr:!0,startsExpr:!0}),bracketR:new Ne("]"),braceL:new Ne("{",{beforeExpr:!0,startsExpr:!0}),braceR:new Ne("}"),parenL:new Ne("(",{beforeExpr:!0,startsExpr:!0}),parenR:new Ne(")"),comma:new Ne(",",Oe),semi:new Ne(";",Oe),colon:new Ne(":",Oe),dot:new Ne("."),question:new Ne("?",Oe),arrow:new Ne("=>",Oe),template:new Ne("template"),invalidTemplate:new Ne("invalidTemplate"),ellipsis:new Ne("...",Oe),backQuote:new Ne("`",Te),dollarBraceL:new Ne("${",{beforeExpr:!0,startsExpr:!0}),eq:new Ne("=",{beforeExpr:!0,isAssign:!0}),assign:new Ne("_=",{beforeExpr:!0,isAssign:!0}),incDec:new Ne("++/--",{prefix:!0,postfix:!0,startsExpr:!0}),prefix:new Ne("!/~",{beforeExpr:!0,prefix:!0,startsExpr:!0}),logicalOR:Ce("||",1),logicalAND:Ce("&&",2),bitwiseOR:Ce("|",3),bitwiseXOR:Ce("^",4),bitwiseAND:Ce("&",5),equality:Ce("==/!=/===/!==",6),relational:Ce("</>/<=/>=",7),bitShift:Ce("<</>>/>>>",8),plusMin:new Ne("+/-",{beforeExpr:!0,binop:9,prefix:!0,startsExpr:!0}),modulo:Ce("%",10),star:Ce("*",10),slash:Ce("/",10),starstar:new Ne("**",{beforeExpr:!0}),_break:Le("break"),_case:Le("case",Oe),_catch:Le("catch"),_continue:Le("continue"),_debugger:Le("debugger"),_default:Le("default",Oe),_do:Le("do",{isLoop:!0,beforeExpr:!0}),_else:Le("else",Oe),_finally:Le("finally"),_for:Le("for",{isLoop:!0}),_function:Le("function",Te),_if:Le("if"),_return:Le("return",Oe),_switch:Le("switch"),_throw:Le("throw",Oe),_try:Le("try"),_var:Le("var"),_const:Le("const"),_while:Le("while",{isLoop:!0}),_with:Le("with"),_new:Le("new",{beforeExpr:!0,startsExpr:!0}),_this:Le("this",Te),_super:Le("super",Te),_class:Le("class",Te),_extends:Le("extends",Oe),_export:Le("export"),_import:Le("import"),_null:Le("null",Te),_true:Le("true",Te),_false:Le("false",Te),_in:Le("in",{beforeExpr:!0,binop:7}),_instanceof:Le("instanceof",{beforeExpr:!0,binop:7}),_typeof:Le("typeof",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_void:Le("void",{beforeExpr:!0,prefix:!0,startsExpr:!0}),_delete:Le("delete",{beforeExpr:!0,prefix:!0,startsExpr:!0})},Fe={3:"abstract boolean byte char class double enum export extends final float goto implements import int interface long native package private protected public short static super synchronized throws transient volatile",5:"class enum extends super const export import",6:"enum",strict:"implements interface let package private protected public static yield",strictBind:"eval arguments"},je="break case catch continue debugger default do else finally for function if return switch throw try var while with null true false instanceof typeof void delete new in this",Ve={5:je,6:je+" const class extends export import super"},Ge=/^in(stanceof)?$/,Be="\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0560-\u0588\u05d0-\u05ea\u05ef-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u0860-\u086a\u08a0-\u08b4\u08b6-\u08bd\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u09fc\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0af9\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58-\u0c5a\u0c60\u0c61\u0c80\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d54-\u0d56\u0d5f-\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f5\u13f8-\u13fd\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1878\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1c80-\u1c88\u1c90-\u1cba\u1cbd-\u1cbf\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2118-\u211d\u2124\u2126\u2128\u212a-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309b-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312f\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fef\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua7b9\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua8fd\ua8fe\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab65\uab70-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc",Ue="\u200c\u200d\xb7\u0300-\u036f\u0387\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u0669\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u06f0-\u06f9\u0711\u0730-\u074a\u07a6-\u07b0\u07c0-\u07c9\u07eb-\u07f3\u07fd\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08d3-\u08e1\u08e3-\u0903\u093a-\u093c\u093e-\u094f\u0951-\u0957\u0962\u0963\u0966-\u096f\u0981-\u0983\u09bc\u09be-\u09c4\u09c7\u09c8\u09cb-\u09cd\u09d7\u09e2\u09e3\u09e6-\u09ef\u09fe\u0a01-\u0a03\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a66-\u0a71\u0a75\u0a81-\u0a83\u0abc\u0abe-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ae2\u0ae3\u0ae6-\u0aef\u0afa-\u0aff\u0b01-\u0b03\u0b3c\u0b3e-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b62\u0b63\u0b66-\u0b6f\u0b82\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd7\u0be6-\u0bef\u0c00-\u0c04\u0c3e-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0cbc\u0cbe-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0ce2\u0ce3\u0ce6-\u0cef\u0d00-\u0d03\u0d3b\u0d3c\u0d3e-\u0d44\u0d46-\u0d48\u0d4a-\u0d4d\u0d57\u0d62\u0d63\u0d66-\u0d6f\u0d82\u0d83\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0e50-\u0e59\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0ed0-\u0ed9\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e\u0f3f\u0f71-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102b-\u103e\u1040-\u1049\u1056-\u1059\u105e-\u1060\u1062-\u1064\u1067-\u106d\u1071-\u1074\u1082-\u108d\u108f-\u109d\u135d-\u135f\u1369-\u1371\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4-\u17d3\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u18a9\u1920-\u192b\u1930-\u193b\u1946-\u194f\u19d0-\u19da\u1a17-\u1a1b\u1a55-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1ab0-\u1abd\u1b00-\u1b04\u1b34-\u1b44\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1b82\u1ba1-\u1bad\u1bb0-\u1bb9\u1be6-\u1bf3\u1c24-\u1c37\u1c40-\u1c49\u1c50-\u1c59\u1cd0-\u1cd2\u1cd4-\u1ce8\u1ced\u1cf2-\u1cf4\u1cf7-\u1cf9\u1dc0-\u1df9\u1dfb-\u1dff\u203f\u2040\u2054\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302f\u3099\u309a\ua620-\ua629\ua66f\ua674-\ua67d\ua69e\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua823-\ua827\ua880\ua881\ua8b4-\ua8c5\ua8d0-\ua8d9\ua8e0-\ua8f1\ua8ff-\ua909\ua926-\ua92d\ua947-\ua953\ua980-\ua983\ua9b3-\ua9c0\ua9d0-\ua9d9\ua9e5\ua9f0-\ua9f9\uaa29-\uaa36\uaa43\uaa4c\uaa4d\uaa50-\uaa59\uaa7b-\uaa7d\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaeb-\uaaef\uaaf5\uaaf6\uabe3-\uabea\uabec\uabed\uabf0-\uabf9\ufb1e\ufe00-\ufe0f\ufe20-\ufe2f\ufe33\ufe34\ufe4d-\ufe4f\uff10-\uff19\uff3f",We=RegExp("["+Be+"]"),qe=RegExp("["+Be+Ue+"]");Be=Ue=null;var ze=[0,11,2,25,2,18,2,1,2,14,3,13,35,122,70,52,268,28,4,48,48,31,14,29,6,37,11,29,3,35,5,7,2,4,43,157,19,35,5,35,5,39,9,51,157,310,10,21,11,7,153,5,3,0,2,43,2,1,4,0,3,22,11,22,10,30,66,18,2,1,11,21,11,25,71,55,7,1,65,0,16,3,2,2,2,28,43,28,4,28,36,7,2,27,28,53,11,21,11,18,14,17,111,72,56,50,14,50,14,35,477,28,11,0,9,21,190,52,76,44,33,24,27,35,30,0,12,34,4,0,13,47,15,3,22,0,2,0,36,17,2,24,85,6,2,0,2,3,2,14,2,9,8,46,39,7,3,1,3,21,2,6,2,1,2,4,4,0,19,0,13,4,159,52,19,3,54,47,21,1,2,0,185,46,42,3,37,47,21,0,60,42,86,26,230,43,117,63,32,0,257,0,11,39,8,0,22,0,12,39,3,3,20,0,35,56,264,8,2,36,18,0,50,29,113,6,2,1,2,37,22,0,26,5,2,1,2,31,15,0,328,18,270,921,103,110,18,195,2749,1070,4050,582,8634,568,8,30,114,29,19,47,17,3,32,20,6,18,689,63,129,68,12,0,67,12,65,1,31,6129,15,754,9486,286,82,395,2309,106,6,12,4,8,8,9,5991,84,2,70,2,1,3,0,3,1,3,3,2,11,2,0,2,6,2,64,2,3,3,7,2,6,2,27,2,3,2,4,2,0,4,6,2,339,3,24,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,30,2,24,2,7,4149,196,60,67,1213,3,2,26,2,1,2,0,3,0,2,9,2,3,2,0,2,0,7,0,5,0,2,0,2,0,2,2,2,1,2,0,3,0,2,0,2,0,2,0,2,0,2,1,2,0,3,3,2,6,2,3,2,3,2,0,2,9,2,16,6,2,2,4,2,16,4421,42710,42,4148,12,221,3,5761,15,7472,3104,541],He=[509,0,227,0,150,4,294,9,1368,2,2,1,6,3,41,2,5,0,166,1,574,3,9,9,525,10,176,2,54,14,32,9,16,3,46,10,54,9,7,2,37,13,2,9,6,1,45,0,13,2,49,13,9,3,4,9,83,11,7,0,161,11,6,9,7,3,56,1,2,6,3,1,3,2,10,0,11,1,3,6,4,4,193,17,10,9,5,0,82,19,13,9,214,6,3,8,28,1,83,16,16,9,82,12,9,9,84,14,5,9,243,14,166,9,280,9,41,6,2,3,9,0,10,10,47,15,406,7,2,7,17,9,57,21,2,13,123,5,4,0,2,1,2,6,2,0,9,9,49,4,2,1,2,4,9,9,330,3,19306,9,135,4,60,6,26,9,1016,45,17,3,19723,1,5319,4,4,5,9,7,3,6,31,3,149,2,1418,49,513,54,5,49,9,0,15,0,23,4,2,14,1361,6,2,16,3,6,2,1,2,4,2214,6,110,6,6,9,792487,239];function $e(e,t){"use strict";for(var r=65536,i=0;i<t.length;i+=2){if(r+=t[i],r>e)return!1;if(r+=t[i+1],r>=e)return!0}}function Ke(e,t){"use strict";return e<65?36===e:e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&We.test(String.fromCharCode(e)):!1!==t&&$e(e,ze)))}function Je(e,t){"use strict";return e<48?36===e:e<58||!(e<65)&&(e<91||(e<97?95===e:e<123||(e<=65535?e>=170&&qe.test(String.fromCharCode(e)):!1!==t&&($e(e,ze)||$e(e,He)))))}var Ye=/\r\n?|\n|\u2028|\u2029/,Xe=RegExp(Ye.source,"g");function Qe(e,t){"use strict";return 10===e||13===e||!t&&(8232===e||8233===e)}var Ze=/[\u1680\u2000-\u200a\u202f\u205f\u3000\ufeff]/,et=/(?:\s|\/\/.*|\/\*[^]*?\*\/)*/g,tt=Object.prototype,rt=tt.hasOwnProperty,it=tt.toString;function nt(e,t){"use strict";return rt.call(e,t)}var st=Array.isArray||function(e){return"[object Array]"===it.call(e)};function at(e){"use strict";return RegExp("^(?:"+e.replace(/ /g,"|")+")$")}class ot{constructor(e,t){this.line=e,this.column=t}offset(e){return new ot(this.line,this.column+e)}}class ut{constructor(e,t,r){this.start=t,this.end=r,null!==e.sourceFile&&(this.source=e.sourceFile)}}function lt(e,t){"use strict";for(var r=1,i=0;;){Xe.lastIndex=i;var n=Xe.exec(e);if(!(n&&n.index<t))return new ot(r,t-i);++r,i=n.index+n[0].length}}var ct={ecmaVersion:9,sourceType:"script",onInsertedSemicolon:null,onTrailingComma:null,allowReserved:null,allowReturnOutsideFunction:!1,allowImportExportEverywhere:!1,allowAwaitOutsideFunction:!1,allowHashBang:!1,locations:!1,onToken:null,onComment:null,ranges:!1,program:null,sourceFile:null,directSourceFile:null,preserveParens:!1},pt=1,ht=2,ft=pt|ht,dt=4,mt=8,vt=64,gt=128;function yt(e,t){"use strict";return ht|(e?dt:0)|(t?mt:0)}class xt{constructor(e,t,r){this.options=e=(function(e){var t={};for(var r in ct)t[r]=e&&nt(e,r)?e[r]:ct[r];if(t.ecmaVersion>=2015&&(t.ecmaVersion-=2009),null==t.allowReserved&&(t.allowReserved=t.ecmaVersion<5),st(t.onToken)){var i=t.onToken;t.onToken=function(e){return i.push(e)}}return st(t.onComment)&&(t.onComment=(function(e,t){return function(r,i,n,s,a,o){var u={type:r?"Block":"Line",value:i,start:n,end:s};e.locations&&(u.loc=new ut(this,a,o)),e.ranges&&(u.range=[n,s]),t.push(u)}})(t,t.onComment)),t})(e),this.sourceFile=e.sourceFile,this.keywords=at(Ve[e.ecmaVersion>=6?6:5]);var i="";if(!e.allowReserved){for(var n=e.ecmaVersion;!(i=Fe[n]);n--);"module"===e.sourceType&&(i+=" await")}this.reservedWords=at(i);var s=(i?i+" ":"")+Fe.strict;this.reservedWordsStrict=at(s),this.reservedWordsStrictBind=at(s+" "+Fe.strictBind),this.input=t+"",this.containsEsc=!1,r?(this.pos=r,this.lineStart=this.input.lastIndexOf("\n",r-1)+1,this.curLine=this.input.slice(0,this.lineStart).split(Ye).length):(this.pos=this.lineStart=0,this.curLine=1),this.type=De.eof,this.value=null,this.start=this.end=this.pos,this.startLoc=this.endLoc=this.curPosition(),this.lastTokEndLoc=this.lastTokStartLoc=null,this.lastTokStart=this.lastTokEnd=this.pos,this.context=this.initialContext(),this.exprAllowed=!0,this.inModule="module"===e.sourceType,this.strict=this.inModule||this.strictDirective(this.pos),this.potentialArrowAt=-1,this.yieldPos=this.awaitPos=this.awaitIdentPos=0,this.labels=[],this.undefinedExports={},0===this.pos&&e.allowHashBang&&"#!"===this.input.slice(0,2)&&this.skipLineComment(2),this.scopeStack=[],this.enterScope(pt),this.regexpState=null}parse(){var e=this.options.program||this.startNode();return this.nextToken(),this.parseTopLevel(e)}get inFunction(){return(this.currentVarScope().flags&ht)>0}get inGenerator(){return(this.currentVarScope().flags&mt)>0}get inAsync(){return(this.currentVarScope().flags&dt)>0}get allowSuper(){return(this.currentThisScope().flags&vt)>0}get allowDirectSuper(){return(this.currentThisScope().flags&gt)>0}get treatFunctionsAsVar(){return this.treatFunctionsAsVarInScope(this.currentScope())}inNonArrowFunction(){return(this.currentThisScope().flags&ht)>0}static extend(...e){for(var t=this,r=0;r<e.length;r++)t=e[r](t);return t}static parse(e,t){return new this(t,e).parse()}static parseExpressionAt(e,t,r){var i=new this(r,e,t);return i.nextToken(),i.parseExpression()}static tokenizer(e,t){return new this(t,e)}}var bt=xt.prototype,wt=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)")/;function Et(){"use strict";this.shorthandAssign=this.trailingComma=this.parenthesizedAssign=this.parenthesizedBind=this.doubleProto=-1}bt.strictDirective=function(e){"use strict";for(;;){et.lastIndex=e,e+=et.exec(this.input)[0].length;var t=wt.exec(this.input.slice(e));if(!t)return!1;if("use strict"===(t[1]||t[2]))return!0;e+=t[0].length,et.lastIndex=e,e+=et.exec(this.input)[0].length,";"===this.input[e]&&e++}},bt.eat=function(e){"use strict";return this.type===e&&(this.next(),!0)},bt.isContextual=function(e){"use strict";return this.type===De.name&&this.value===e&&!this.containsEsc},bt.eatContextual=function(e){"use strict";return!!this.isContextual(e)&&(this.next(),!0)},bt.expectContextual=function(e){"use strict";this.eatContextual(e)||this.unexpected()},bt.canInsertSemicolon=function(){"use strict";return this.type===De.eof||this.type===De.braceR||Ye.test(this.input.slice(this.lastTokEnd,this.start))},bt.insertSemicolon=function(){"use strict";if(this.canInsertSemicolon())return this.options.onInsertedSemicolon&&this.options.onInsertedSemicolon(this.lastTokEnd,this.lastTokEndLoc),!0},bt.semicolon=function(){"use strict";this.eat(De.semi)||this.insertSemicolon()||this.unexpected()},bt.afterTrailingComma=function(e,t){"use strict";if(this.type===e)return this.options.onTrailingComma&&this.options.onTrailingComma(this.lastTokStart,this.lastTokStartLoc),t||this.next(),!0},bt.expect=function(e){"use strict";this.eat(e)||this.unexpected()},bt.unexpected=function(e){"use strict";this.raise(null!=e?e:this.start,"Unexpected token")},bt.checkPatternErrors=function(e,t){"use strict";if(e){e.trailingComma>-1&&this.raiseRecoverable(e.trailingComma,"Comma is not permitted after the rest element");var r=t?e.parenthesizedAssign:e.parenthesizedBind;r>-1&&this.raiseRecoverable(r,"Parenthesized pattern")}},bt.checkExpressionErrors=function(e,t){"use strict";if(!e)return!1;var r=e.shorthandAssign,i=e.doubleProto;if(!t)return r>=0||i>=0;r>=0&&this.raise(r,"Shorthand property assignments are valid only in destructuring patterns"),i>=0&&this.raiseRecoverable(i,"Redefinition of __proto__ property")},bt.checkYieldAwaitInDefaultParams=function(){"use strict";this.yieldPos&&(!this.awaitPos||this.yieldPos<this.awaitPos)&&this.raise(this.yieldPos,"Yield expression cannot be a default value"),this.awaitPos&&this.raise(this.awaitPos,"Await expression cannot be a default value")},bt.isSimpleAssignTarget=function(e){"use strict";return"ParenthesizedExpression"===e.type?this.isSimpleAssignTarget(e.expression):"Identifier"===e.type||"MemberExpression"===e.type};var St=xt.prototype;St.checkPropClash=function(e,t,r){"use strict";if(!(this.options.ecmaVersion>=9&&"SpreadElement"===e.type||this.options.ecmaVersion>=6&&(e.computed||e.method||e.shorthand))){var i,n=e.key;switch(n.type){case"Identifier":i=n.name;break;case"Literal":i=n.value+"";break;default:return}var s=e.kind;if(this.options.ecmaVersion>=6)"__proto__"===i&&"init"===s&&(t.proto&&(r&&r.doubleProto<0?r.doubleProto=n.start:this.raiseRecoverable(n.start,"Redefinition of __proto__ property")),t.proto=!0);else{i="$"+i;var a,o=t[i];o?(a="init"===s?this.strict&&o.init||o.get||o.set:o.init||o[s],a&&this.raiseRecoverable(n.start,"Redefinition of property")):o=t[i]={init:!1,get:!1,set:!1},o[s]=!0}}},St.parseExpression=function(e,t){"use strict";var r=this.start,i=this.startLoc,n=this.parseMaybeAssign(e,t);if(this.type===De.comma){var s=this.startNodeAt(r,i);for(s.expressions=[n];this.eat(De.comma);)s.expressions.push(this.parseMaybeAssign(e,t));return this.finishNode(s,"SequenceExpression")}return n},St.parseMaybeAssign=function(e,t,r){"use strict";if(this.isContextual("yield")){if(this.inGenerator)return this.parseYield(e);this.exprAllowed=!1}var i=!1,n=-1,s=-1,a=-1;t?(n=t.parenthesizedAssign,s=t.trailingComma,a=t.shorthandAssign,t.parenthesizedAssign=t.trailingComma=t.shorthandAssign=-1):(t=new Et,i=!0);var o=this.start,u=this.startLoc;this.type!==De.parenL&&this.type!==De.name||(this.potentialArrowAt=this.start);var l=this.parseMaybeConditional(e,t);if(r&&(l=r.call(this,l,o,u)),this.type.isAssign){var c=this.startNodeAt(o,u);return c.operator=this.value,c.left=this.type===De.eq?this.toAssignable(l,!1,t):l,i||Et.call(t),t.shorthandAssign=-1,this.checkLVal(l),this.next(),c.right=this.parseMaybeAssign(e),this.finishNode(c,"AssignmentExpression")}return i&&this.checkExpressionErrors(t,!0),n>-1&&(t.parenthesizedAssign=n),s>-1&&(t.trailingComma=s),a>-1&&(t.shorthandAssign=a),l},St.parseMaybeConditional=function(e,t){"use strict";var r=this.start,i=this.startLoc,n=this.parseExprOps(e,t);if(this.checkExpressionErrors(t))return n;if(this.eat(De.question)){var s=this.startNodeAt(r,i);return s.test=n,s.consequent=this.parseMaybeAssign(),this.expect(De.colon),s.alternate=this.parseMaybeAssign(e),this.finishNode(s,"ConditionalExpression")}return n},St.parseExprOps=function(e,t){"use strict";var r=this.start,i=this.startLoc,n=this.parseMaybeUnary(t,!1);return this.checkExpressionErrors(t)?n:n.start===r&&"ArrowFunctionExpression"===n.type?n:this.parseExprOp(n,r,i,-1,e)},St.parseExprOp=function(e,t,r,i,n){"use strict";var s=this.type.binop;if(null!=s&&(!n||this.type!==De._in)&&s>i){var a=this.type===De.logicalOR||this.type===De.logicalAND,o=this.value;this.next();var u=this.start,l=this.startLoc,c=this.parseExprOp(this.parseMaybeUnary(null,!1),u,l,s,n),p=this.buildBinary(t,r,e,c,o,a);return this.parseExprOp(p,t,r,i,n)}return e},St.buildBinary=function(e,t,r,i,n,s){"use strict";var a=this.startNodeAt(e,t);return a.left=r,a.operator=n,a.right=i,this.finishNode(a,s?"LogicalExpression":"BinaryExpression")},St.parseMaybeUnary=function(e,t){"use strict";var r,i=this.start,n=this.startLoc;if(this.isContextual("await")&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction))r=this.parseAwait(),t=!0;else if(this.type.prefix){var s=this.startNode(),a=this.type===De.incDec;s.operator=this.value,s.prefix=!0,this.next(),s.argument=this.parseMaybeUnary(null,!0),this.checkExpressionErrors(e,!0),a?this.checkLVal(s.argument):this.strict&&"delete"===s.operator&&"Identifier"===s.argument.type?this.raiseRecoverable(s.start,"Deleting local variable in strict mode"):t=!0,r=this.finishNode(s,a?"UpdateExpression":"UnaryExpression")}else{if(r=this.parseExprSubscripts(e),this.checkExpressionErrors(e))return r;for(;this.type.postfix&&!this.canInsertSemicolon();){var o=this.startNodeAt(i,n);o.operator=this.value,o.prefix=!1,o.argument=r,this.checkLVal(r),this.next(),r=this.finishNode(o,"UpdateExpression")}}return!t&&this.eat(De.starstar)?this.buildBinary(i,n,r,this.parseMaybeUnary(null,!1),"**",!1):r},St.parseExprSubscripts=function(e){"use strict";var t=this.start,r=this.startLoc,i=this.parseExprAtom(e),n="ArrowFunctionExpression"===i.type&&")"!==this.input.slice(this.lastTokStart,this.lastTokEnd);if(this.checkExpressionErrors(e)||n)return i;var s=this.parseSubscripts(i,t,r);return e&&"MemberExpression"===s.type&&(e.parenthesizedAssign>=s.start&&(e.parenthesizedAssign=-1),e.parenthesizedBind>=s.start&&(e.parenthesizedBind=-1)),s},St.parseSubscripts=function(e,t,r,i){"use strict";for(var n=this.options.ecmaVersion>=8&&"Identifier"===e.type&&"async"===e.name&&this.lastTokEnd===e.end&&!this.canInsertSemicolon()&&"async"===this.input.slice(e.start,e.end);;){var s=this.parseSubscript(e,t,r,i,n);if(s===e||"ArrowFunctionExpression"===s.type)return s;e=s}},St.parseSubscript=function(e,t,r,i,n){"use strict";var s=this.eat(De.bracketL);if(s||this.eat(De.dot)){var a=this.startNodeAt(t,r);a.object=e,a.property=s?this.parseExpression():this.parseIdent(!0),a.computed=!!s,s&&this.expect(De.bracketR),e=this.finishNode(a,"MemberExpression")}else if(!i&&this.eat(De.parenL)){var o=new Et,u=this.yieldPos,l=this.awaitPos,c=this.awaitIdentPos;this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0;var p=this.parseExprList(De.parenR,this.options.ecmaVersion>=8,!1,o);if(n&&!this.canInsertSemicolon()&&this.eat(De.arrow))return this.checkPatternErrors(o,!1),this.checkYieldAwaitInDefaultParams(),this.awaitIdentPos>0&&this.raise(this.awaitIdentPos,"Cannot use 'await' as identifier inside an async function"),this.yieldPos=u,this.awaitPos=l,this.awaitIdentPos=c,this.parseArrowExpression(this.startNodeAt(t,r),p,!0);this.checkExpressionErrors(o,!0),this.yieldPos=u||this.yieldPos,this.awaitPos=l||this.awaitPos,this.awaitIdentPos=c||this.awaitIdentPos;var h=this.startNodeAt(t,r);h.callee=e,h.arguments=p,e=this.finishNode(h,"CallExpression")}else if(this.type===De.backQuote){var f=this.startNodeAt(t,r);f.tag=e,f.quasi=this.parseTemplate({isTagged:!0}),e=this.finishNode(f,"TaggedTemplateExpression")}return e},St.parseExprAtom=function(e){"use strict";this.type===De.slash&&this.readRegexp();var t,r=this.potentialArrowAt===this.start;switch(this.type){case De._super:return this.allowSuper||this.raise(this.start,"'super' keyword outside a method"),t=this.startNode(),this.next(),this.type!==De.parenL||this.allowDirectSuper||this.raise(t.start,"super() call outside constructor of a subclass"),this.type!==De.dot&&this.type!==De.bracketL&&this.type!==De.parenL&&this.unexpected(),this.finishNode(t,"Super");case De._this:return t=this.startNode(),this.next(),this.finishNode(t,"ThisExpression");case De.name:var i=this.start,n=this.startLoc,s=this.containsEsc,a=this.parseIdent(!1);if(this.options.ecmaVersion>=8&&!s&&"async"===a.name&&!this.canInsertSemicolon()&&this.eat(De._function))return this.parseFunction(this.startNodeAt(i,n),0,!1,!0);if(r&&!this.canInsertSemicolon()){if(this.eat(De.arrow))return this.parseArrowExpression(this.startNodeAt(i,n),[a],!1);if(this.options.ecmaVersion>=8&&"async"===a.name&&this.type===De.name&&!s)return a=this.parseIdent(!1),!this.canInsertSemicolon()&&this.eat(De.arrow)||this.unexpected(),this.parseArrowExpression(this.startNodeAt(i,n),[a],!0)}return a;case De.regexp:var o=this.value;return t=this.parseLiteral(o.value),t.regex={pattern:o.pattern,flags:o.flags},t;case De.num:case De.string:return this.parseLiteral(this.value);case De._null:case De._true:case De._false:return t=this.startNode(),t.value=this.type===De._null?null:this.type===De._true,t.raw=this.type.keyword,this.next(),this.finishNode(t,"Literal");case De.parenL:var u=this.start,l=this.parseParenAndDistinguishExpression(r);return e&&(e.parenthesizedAssign<0&&!this.isSimpleAssignTarget(l)&&(e.parenthesizedAssign=u),e.parenthesizedBind<0&&(e.parenthesizedBind=u)),l;case De.bracketL:return t=this.startNode(),this.next(),t.elements=this.parseExprList(De.bracketR,!0,!0,e),this.finishNode(t,"ArrayExpression");case De.braceL:return this.parseObj(!1,e);case De._function:return t=this.startNode(),this.next(),this.parseFunction(t,0);case De._class:return this.parseClass(this.startNode(),!1);case De._new:return this.parseNew();case De.backQuote:return this.parseTemplate();default:this.unexpected()}},St.parseLiteral=function(e){"use strict";var t=this.startNode();return t.value=e,t.raw=this.input.slice(this.start,this.end),this.next(),this.finishNode(t,"Literal")},St.parseParenExpression=function(){"use strict";this.expect(De.parenL);var e=this.parseExpression();return this.expect(De.parenR),e},St.parseParenAndDistinguishExpression=function(e){"use strict";var t,r=this.start,i=this.startLoc,n=this.options.ecmaVersion>=8;if(this.options.ecmaVersion>=6){this.next();var s,a=this.start,o=this.startLoc,u=[],l=!0,c=!1,p=new Et,h=this.yieldPos,f=this.awaitPos;for(this.yieldPos=0,this.awaitPos=0;this.type!==De.parenR;){if(l?l=!1:this.expect(De.comma),n&&this.afterTrailingComma(De.parenR,!0)){c=!0;break}if(this.type===De.ellipsis){s=this.start,u.push(this.parseParenItem(this.parseRestBinding())),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element");break}u.push(this.parseMaybeAssign(!1,p,this.parseParenItem))}var d=this.start,m=this.startLoc;if(this.expect(De.parenR),e&&!this.canInsertSemicolon()&&this.eat(De.arrow))return this.checkPatternErrors(p,!1),this.checkYieldAwaitInDefaultParams(),this.yieldPos=h,this.awaitPos=f,this.parseParenArrowList(r,i,u);u.length&&!c||this.unexpected(this.lastTokStart),s&&this.unexpected(s),this.checkExpressionErrors(p,!0),this.yieldPos=h||this.yieldPos,this.awaitPos=f||this.awaitPos,u.length>1?(t=this.startNodeAt(a,o),t.expressions=u,this.finishNodeAt(t,"SequenceExpression",d,m)):t=u[0]}else t=this.parseParenExpression();if(this.options.preserveParens){var v=this.startNodeAt(r,i);return v.expression=t,this.finishNode(v,"ParenthesizedExpression")}return t},St.parseParenItem=function(e){"use strict";return e},St.parseParenArrowList=function(e,t,r){"use strict";return this.parseArrowExpression(this.startNodeAt(e,t),r)};var Rt=[];St.parseNew=function(){"use strict";var e=this.startNode(),t=this.parseIdent(!0);if(this.options.ecmaVersion>=6&&this.eat(De.dot)){e.meta=t;var r=this.containsEsc;return e.property=this.parseIdent(!0),("target"!==e.property.name||r)&&this.raiseRecoverable(e.property.start,"The only valid meta property for new is new.target"),this.inNonArrowFunction()||this.raiseRecoverable(e.start,"new.target can only be used in functions"),this.finishNode(e,"MetaProperty")}var i=this.start,n=this.startLoc;return e.callee=this.parseSubscripts(this.parseExprAtom(),i,n,!0),e.arguments=this.eat(De.parenL)?this.parseExprList(De.parenR,this.options.ecmaVersion>=8,!1):Rt,this.finishNode(e,"NewExpression")},St.parseTemplateElement=function({isTagged:e}){var t=this.startNode();return this.type===De.invalidTemplate?(e||this.raiseRecoverable(this.start,"Bad escape sequence in untagged template literal"),t.value={raw:this.value,cooked:null}):t.value={raw:this.input.slice(this.start,this.end).replace(/\r\n?/g,"\n"),cooked:this.value},this.next(),t.tail=this.type===De.backQuote,this.finishNode(t,"TemplateElement")},St.parseTemplate=function({isTagged:e=!1}={}){var t=this.startNode();this.next(),t.expressions=[];var r=this.parseTemplateElement({isTagged:e});for(t.quasis=[r];!r.tail;)this.type===De.eof&&this.raise(this.pos,"Unterminated template literal"),this.expect(De.dollarBraceL),t.expressions.push(this.parseExpression()),this.expect(De.braceR),t.quasis.push(r=this.parseTemplateElement({isTagged:e}));return this.next(),this.finishNode(t,"TemplateLiteral")},St.isAsyncProp=function(e){"use strict";return!e.computed&&"Identifier"===e.key.type&&"async"===e.key.name&&(this.type===De.name||this.type===De.num||this.type===De.string||this.type===De.bracketL||this.type.keyword||this.options.ecmaVersion>=9&&this.type===De.star)&&!Ye.test(this.input.slice(this.lastTokEnd,this.start))},St.parseObj=function(e,t){"use strict";var r=this.startNode(),i=!0,n={};for(r.properties=[],this.next();!this.eat(De.braceR);){if(i)i=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var s=this.parseProperty(e,t);e||this.checkPropClash(s,n,t),r.properties.push(s)}return this.finishNode(r,e?"ObjectPattern":"ObjectExpression")},St.parseProperty=function(e,t){"use strict";var r,i,n,s,a=this.startNode();if(this.options.ecmaVersion>=9&&this.eat(De.ellipsis))return e?(a.argument=this.parseIdent(!1),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.finishNode(a,"RestElement")):(this.type===De.parenL&&t&&(t.parenthesizedAssign<0&&(t.parenthesizedAssign=this.start),t.parenthesizedBind<0&&(t.parenthesizedBind=this.start)),a.argument=this.parseMaybeAssign(!1,t),this.type===De.comma&&t&&t.trailingComma<0&&(t.trailingComma=this.start),this.finishNode(a,"SpreadElement"));this.options.ecmaVersion>=6&&(a.method=!1,a.shorthand=!1,(e||t)&&(n=this.start,s=this.startLoc),e||(r=this.eat(De.star)));var o=this.containsEsc;return this.parsePropertyName(a),!e&&!o&&this.options.ecmaVersion>=8&&!r&&this.isAsyncProp(a)?(i=!0,r=this.options.ecmaVersion>=9&&this.eat(De.star),this.parsePropertyName(a,t)):i=!1,this.parsePropertyValue(a,e,r,i,n,s,t,o),this.finishNode(a,"Property")},St.parsePropertyValue=function(e,t,r,i,n,s,a,o){"use strict";if((r||i)&&this.type===De.colon&&this.unexpected(),this.eat(De.colon))e.value=t?this.parseMaybeDefault(this.start,this.startLoc):this.parseMaybeAssign(!1,a),e.kind="init";else if(this.options.ecmaVersion>=6&&this.type===De.parenL)t&&this.unexpected(),e.kind="init",e.method=!0,e.value=this.parseMethod(r,i);else if(t||o||!(this.options.ecmaVersion>=5)||e.computed||"Identifier"!==e.key.type||"get"!==e.key.name&&"set"!==e.key.name||this.type===De.comma||this.type===De.braceR)this.options.ecmaVersion>=6&&!e.computed&&"Identifier"===e.key.type?((r||i)&&this.unexpected(),this.checkUnreserved(e.key),"await"!==e.key.name||this.awaitIdentPos||(this.awaitIdentPos=n),e.kind="init",t?e.value=this.parseMaybeDefault(n,s,e.key):this.type===De.eq&&a?(a.shorthandAssign<0&&(a.shorthandAssign=this.start),e.value=this.parseMaybeDefault(n,s,e.key)):e.value=e.key,e.shorthand=!0):this.unexpected();else{(r||i)&&this.unexpected(),e.kind=e.key.name,this.parsePropertyName(e),e.value=this.parseMethod(!1);var u="get"===e.kind?0:1;if(e.value.params.length!==u){var l=e.value.start;this.raiseRecoverable(l,"get"===e.kind?"getter should have no params":"setter should have exactly one param")}else"set"===e.kind&&"RestElement"===e.value.params[0].type&&this.raiseRecoverable(e.value.params[0].start,"Setter cannot use rest params")}},St.parsePropertyName=function(e){"use strict";if(this.options.ecmaVersion>=6){if(this.eat(De.bracketL))return e.computed=!0,e.key=this.parseMaybeAssign(),this.expect(De.bracketR),e.key;e.computed=!1}return e.key=this.type===De.num||this.type===De.string?this.parseExprAtom():this.parseIdent(!0)},St.initFunction=function(e){"use strict";e.id=null,this.options.ecmaVersion>=6&&(e.generator=e.expression=!1),this.options.ecmaVersion>=8&&(e.async=!1)},St.parseMethod=function(e,t,r){"use strict";var i=this.startNode(),n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.initFunction(i),this.options.ecmaVersion>=6&&(i.generator=e),this.options.ecmaVersion>=8&&(i.async=!!t),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(yt(t,i.generator)|vt|(r?gt:0)),this.expect(De.parenL),i.params=this.parseBindingList(De.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams(),this.parseFunctionBody(i,!1,!0),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(i,"FunctionExpression")},St.parseArrowExpression=function(e,t,r){"use strict";var i=this.yieldPos,n=this.awaitPos,s=this.awaitIdentPos;return this.enterScope(16|yt(r,!1)),this.initFunction(e),this.options.ecmaVersion>=8&&(e.async=!!r),this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,e.params=this.toAssignableList(t,!0),this.parseFunctionBody(e,!0,!1),this.yieldPos=i,this.awaitPos=n,this.awaitIdentPos=s,this.finishNode(e,"ArrowFunctionExpression")},St.parseFunctionBody=function(e,t,r){"use strict";var i=t&&this.type!==De.braceL,n=this.strict,s=!1;if(i)e.body=this.parseMaybeAssign(),e.expression=!0,this.checkParams(e,!1);else{var a=this.options.ecmaVersion>=7&&!this.isSimpleParamList(e.params);n&&!a||(s=this.strictDirective(this.end),s&&a&&this.raiseRecoverable(e.start,"Illegal 'use strict' directive in function with non-simple parameter list"));var o=this.labels;this.labels=[],s&&(this.strict=!0),this.checkParams(e,!n&&!s&&!t&&!r&&this.isSimpleParamList(e.params)),e.body=this.parseBlock(!1),e.expression=!1,this.adaptDirectivePrologue(e.body.body),this.labels=o}this.exitScope(),this.strict&&e.id&&this.checkLVal(e.id,5),this.strict=n},St.isSimpleParamList=function(e){"use strict";for(var t=0,r=null==e?0:e.length;t<r;t++){var i=e[t];if("Identifier"!==i.type)return!1}return!0},St.checkParams=function(e,t){"use strict";for(var r={},i=0,n=e.params,s=null==n?0:n.length;i<s;i++){var a=n[i];this.checkLVal(a,1,t?null:r)}},St.parseExprList=function(e,t,r,i){"use strict";for(var n=[],s=!0;!this.eat(e);){if(s)s=!1;else if(this.expect(De.comma),t&&this.afterTrailingComma(e))break;var a=void 0;r&&this.type===De.comma?a=null:this.type===De.ellipsis?(a=this.parseSpread(i),i&&this.type===De.comma&&i.trailingComma<0&&(i.trailingComma=this.start)):a=this.parseMaybeAssign(!1,i),n.push(a)}return n},St.checkUnreserved=function({start:e,end:t,name:r}){if(this.inGenerator&&"yield"===r&&this.raiseRecoverable(e,"Cannot use 'yield' as identifier inside a generator"),this.inAsync&&"await"===r&&this.raiseRecoverable(e,"Cannot use 'await' as identifier inside an async function"),this.keywords.test(r)&&this.raise(e,`Unexpected keyword '${r}'`),!(this.options.ecmaVersion<6&&-1!==this.input.slice(e,t).indexOf("\\"))){var i=this.strict?this.reservedWordsStrict:this.reservedWords;i.test(r)&&(this.inAsync||"await"!==r||this.raiseRecoverable(e,"Cannot use keyword 'await' outside an async function"),this.raiseRecoverable(e,`The keyword '${r}' is reserved`))}},St.parseIdent=function(e,t){"use strict";var r=this.startNode();return e&&"never"===this.options.allowReserved&&(e=!1),this.type===De.name?r.name=this.value:this.type.keyword?(r.name=this.type.keyword,"class"!==r.name&&"function"!==r.name||this.lastTokEnd===this.lastTokStart+1&&46===this.input.charCodeAt(this.lastTokStart)||this.context.pop()):this.unexpected(),this.next(),this.finishNode(r,"Identifier"),e||(this.checkUnreserved(r),"await"!==r.name||this.awaitIdentPos||(this.awaitIdentPos=r.start)),r},St.parseYield=function(e){"use strict";this.yieldPos||(this.yieldPos=this.start);var t=this.startNode();return this.next(),this.type===De.semi||this.canInsertSemicolon()||this.type!==De.star&&!this.type.startsExpr?(t.delegate=!1,t.argument=null):(t.delegate=this.eat(De.star),t.argument=this.parseMaybeAssign(e)),this.finishNode(t,"YieldExpression")},St.parseAwait=function(){"use strict";this.awaitPos||(this.awaitPos=this.start);var e=this.startNode();return this.next(),e.argument=this.parseMaybeUnary(null,!0),this.finishNode(e,"AwaitExpression")};var Pt=xt.prototype;Pt.raise=function(e,t){"use strict";var r=lt(this.input,e);t+=" ("+r.line+":"+r.column+")";var i=new SyntaxError(t);throw i.pos=e,i.loc=r,i.raisedAt=this.pos,i},Pt.raiseRecoverable=Pt.raise,Pt.curPosition=function(){"use strict";if(this.options.locations)return new ot(this.curLine,this.pos-this.lineStart)};var _t=xt.prototype;_t.toAssignable=function(e,t,r){"use strict";if(this.options.ecmaVersion>=6&&e)switch(e.type){case"Identifier":this.inAsync&&"await"===e.name&&this.raise(e.start,"Cannot use 'await' as identifier inside an async function");break;case"ObjectPattern":case"ArrayPattern":case"RestElement":break;case"ObjectExpression":e.type="ObjectPattern",r&&this.checkPatternErrors(r,!0);for(var i=0,n=e.properties,s=null==n?0:n.length;i<s;i++){var a=n[i];this.toAssignable(a,t),"RestElement"!==a.type||"ArrayPattern"!==a.argument.type&&"ObjectPattern"!==a.argument.type||this.raise(a.argument.start,"Unexpected token")}break;case"Property":"init"!==e.kind&&this.raise(e.key.start,"Object pattern can't contain getter or setter"),this.toAssignable(e.value,t);break;case"ArrayExpression":e.type="ArrayPattern",r&&this.checkPatternErrors(r,!0),this.toAssignableList(e.elements,t);break;case"SpreadElement":e.type="RestElement",this.toAssignable(e.argument,t),"AssignmentPattern"===e.argument.type&&this.raise(e.argument.start,"Rest elements cannot have a default value");break;case"AssignmentExpression":"="!==e.operator&&this.raise(e.left.end,"Only '=' operator can be used for specifying default value."),e.type="AssignmentPattern",delete e.operator,this.toAssignable(e.left,t);case"AssignmentPattern":break;case"ParenthesizedExpression":this.toAssignable(e.expression,t,r);break;case"MemberExpression":if(!t)break;default:this.raise(e.start,"Assigning to rvalue")}else r&&this.checkPatternErrors(r,!0);return e},_t.toAssignableList=function(e,t){"use strict";for(var r=e.length,i=0;i<r;i++){var n=e[i];n&&this.toAssignable(n,t)}if(r){var s=e[r-1];6===this.options.ecmaVersion&&t&&s&&"RestElement"===s.type&&"Identifier"!==s.argument.type&&this.unexpected(s.argument.start)}return e},_t.parseSpread=function(e){"use strict";var t=this.startNode();return this.next(),t.argument=this.parseMaybeAssign(!1,e),this.finishNode(t,"SpreadElement")},_t.parseRestBinding=function(){"use strict";var e=this.startNode();return this.next(),6===this.options.ecmaVersion&&this.type!==De.name&&this.unexpected(),e.argument=this.parseBindingAtom(),this.finishNode(e,"RestElement")},_t.parseBindingAtom=function(){"use strict";if(this.options.ecmaVersion>=6)switch(this.type){case De.bracketL:var e=this.startNode();return this.next(),e.elements=this.parseBindingList(De.bracketR,!0,!0),this.finishNode(e,"ArrayPattern");case De.braceL:return this.parseObj(!0)}return this.parseIdent()},_t.parseBindingList=function(e,t,r){"use strict";for(var i=[],n=!0;!this.eat(e);)if(n?n=!1:this.expect(De.comma),t&&this.type===De.comma)i.push(null);else{if(r&&this.afterTrailingComma(e))break;if(this.type===De.ellipsis){var s=this.parseRestBinding();this.parseBindingListItem(s),i.push(s),this.type===De.comma&&this.raise(this.start,"Comma is not permitted after the rest element"),this.expect(e);break}var a=this.parseMaybeDefault(this.start,this.startLoc);this.parseBindingListItem(a),i.push(a)}return i},_t.parseBindingListItem=function(e){"use strict";return e},_t.parseMaybeDefault=function(e,t,r){"use strict";if(r=r||this.parseBindingAtom(),this.options.ecmaVersion<6||!this.eat(De.eq))return r;var i=this.startNodeAt(e,t);return i.left=r,i.right=this.parseMaybeAssign(),this.finishNode(i,"AssignmentPattern")},_t.checkLVal=function(e,t=0,r){switch(e.type){case"Identifier":this.strict&&this.reservedWordsStrictBind.test(e.name)&&this.raiseRecoverable(e.start,(t?"Binding ":"Assigning to ")+e.name+" in strict mode"),r&&(nt(r,e.name)&&this.raiseRecoverable(e.start,"Argument name clash"),r[e.name]=!0),0!==t&&5!==t&&this.declareName(e.name,t,e.start);break;case"MemberExpression":t&&this.raiseRecoverable(e.start,"Binding member expression");break;case"ObjectPattern":for(var i=0,n=e.properties,s=null==n?0:n.length;i<s;i++){var a=n[i];this.checkLVal(a,t,r)}break;case"Property":this.checkLVal(e.value,t,r);break;case"ArrayPattern":for(var o=0,u=e.elements,l=null==u?0:u.length;o<l;o++){var c=u[o];c&&this.checkLVal(c,t,r)}break;case"AssignmentPattern":this.checkLVal(e.left,t,r);break;case"RestElement":this.checkLVal(e.argument,t,r);break;case"ParenthesizedExpression":this.checkLVal(e.expression,t,r);break;default:this.raise(e.start,(t?"Binding":"Assigning to")+" rvalue")}};class kt{constructor(e,t,r){this.type="",this.start=t,this.end=0,e.options.locations&&(this.loc=new ut(e,r)),e.options.directSourceFile&&(this.sourceFile=e.options.directSourceFile),e.options.ranges&&(this.range=[t,0])}}var It=xt.prototype;function At(e,t,r,i){"use strict";return e.type=t,e.end=r,this.options.locations&&(e.loc.end=i),this.options.ranges&&(e.range[1]=r),e}It.startNode=function(){"use strict";return new kt(this,this.start,this.startLoc)},It.startNodeAt=function(e,t){"use strict";return new kt(this,e,t)},It.finishNode=function(e,t){"use strict";return At.call(this,e,t,this.lastTokEnd,this.lastTokEndLoc)},It.finishNodeAt=function(e,t,r,i){"use strict";return At.call(this,e,t,r,i)};var Nt=xt.prototype;class Ct{constructor(e){this.flags=e,this.var=[],this.lexical=[],this.functions=[]}}Nt.enterScope=function(e){"use strict";this.scopeStack.push(new Ct(e))},Nt.exitScope=function(){"use strict";this.scopeStack.pop()},Nt.treatFunctionsAsVarInScope=function(e){"use strict";return e.flags&ht||!this.inModule&&e.flags&pt},Nt.declareName=function(e,t,r){"use strict";var i=!1;if(2===t){var n=this.currentScope();i=n.lexical.indexOf(e)>-1||n.functions.indexOf(e)>-1||n.var.indexOf(e)>-1,n.lexical.push(e),this.inModule&&n.flags&pt&&delete this.undefinedExports[e]}else if(4===t){var s=this.currentScope();s.lexical.push(e)}else if(3===t){var a=this.currentScope();i=this.treatFunctionsAsVar?a.lexical.indexOf(e)>-1:a.lexical.indexOf(e)>-1||a.var.indexOf(e)>-1,a.functions.push(e)}else for(var o=this.scopeStack.length-1;o>=0;--o){var u=this.scopeStack[o];if(u.lexical.indexOf(e)>-1&&!(32&u.flags&&u.lexical[0]===e)||!this.treatFunctionsAsVarInScope(u)&&u.functions.indexOf(e)>-1){i=!0;break}if(u.var.push(e),this.inModule&&u.flags&pt&&delete this.undefinedExports[e],u.flags&ft)break}i&&this.raiseRecoverable(r,`Identifier '${e}' has already been declared`)},Nt.checkLocalExport=function(e){"use strict";-1===this.scopeStack[0].lexical.indexOf(e.name)&&-1===this.scopeStack[0].var.indexOf(e.name)&&(this.undefinedExports[e.name]=e)},Nt.currentScope=function(){"use strict";return this.scopeStack[this.scopeStack.length-1]},Nt.currentVarScope=function(){"use strict";for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ft)return t}},Nt.currentThisScope=function(){"use strict";for(var e=this.scopeStack.length-1;;e--){var t=this.scopeStack[e];if(t.flags&ft&&!(16&t.flags))return t}};var Ot=xt.prototype;Ot.parseTopLevel=function(e){"use strict";var t={};for(e.body||(e.body=[]);this.type!==De.eof;){var r=this.parseStatement(null,!0,t);e.body.push(r)}if(this.inModule)for(var i=0,n=Object.keys(this.undefinedExports),s=null==n?0:n.length;i<s;i++){var a=n[i];this.raiseRecoverable(this.undefinedExports[a].start,`Export '${a}' is not defined`)}return this.adaptDirectivePrologue(e.body),this.next(),this.options.ecmaVersion>=6&&(e.sourceType=this.options.sourceType),this.finishNode(e,"Program")};var Tt={kind:"loop"},Mt={kind:"switch"};Ot.isLet=function(e){"use strict";if(this.options.ecmaVersion<6||!this.isContextual("let"))return!1;et.lastIndex=this.pos;var t=et.exec(this.input),r=this.pos+t[0].length,i=this.input.charCodeAt(r);if(91===i)return!0;if(e)return!1;if(123===i)return!0;if(Ke(i,!0)){for(var n=r+1;Je(this.input.charCodeAt(n),!0);)++n;var s=this.input.slice(r,n);if(!Ge.test(s))return!0}return!1},Ot.isAsyncFunction=function(){"use strict";if(this.options.ecmaVersion<8||!this.isContextual("async"))return!1;et.lastIndex=this.pos;var e=et.exec(this.input),t=this.pos+e[0].length;return!(Ye.test(this.input.slice(this.pos,t))||"function"!==this.input.slice(t,t+8)||t+8!==this.input.length&&Je(this.input.charAt(t+8)))},Ot.parseStatement=function(e,t,r){"use strict";var i,n=this.type,s=this.startNode();switch(this.isLet(e)&&(n=De._var,i="let"),n){case De._break:case De._continue:return this.parseBreakContinueStatement(s,n.keyword);case De._debugger:return this.parseDebuggerStatement(s);case De._do:return this.parseDoStatement(s);case De._for:return this.parseForStatement(s);case De._function:return e&&(this.strict||"if"!==e&&"label"!==e)&&this.options.ecmaVersion>=6&&this.unexpected(),this.parseFunctionStatement(s,!1,!e);case De._class:return e&&this.unexpected(),this.parseClass(s,!0);case De._if:return this.parseIfStatement(s);case De._return:return this.parseReturnStatement(s);case De._switch:return this.parseSwitchStatement(s);case De._throw:return this.parseThrowStatement(s);case De._try:return this.parseTryStatement(s);case De._const:case De._var:return i=i||this.value,e&&"var"!==i&&this.unexpected(),this.parseVarStatement(s,i);case De._while:return this.parseWhileStatement(s);case De._with:return this.parseWithStatement(s);case De.braceL:return this.parseBlock(!0,s);case De.semi:return this.parseEmptyStatement(s);case De._export:case De._import:return this.options.allowImportExportEverywhere||(t||this.raise(this.start,"'import' and 'export' may only appear at the top level"),this.inModule||this.raise(this.start,"'import' and 'export' may appear only with 'sourceType: module'")),n===De._import?this.parseImport(s):this.parseExport(s,r);default:if(this.isAsyncFunction())return e&&this.unexpected(),this.next(),this.parseFunctionStatement(s,!0,!e);var a=this.value,o=this.parseExpression();return n===De.name&&"Identifier"===o.type&&this.eat(De.colon)?this.parseLabeledStatement(s,a,o,e):this.parseExpressionStatement(s,o)}},Ot.parseBreakContinueStatement=function(e,t){"use strict";var r="break"===t;this.next(),this.eat(De.semi)||this.insertSemicolon()?e.label=null:this.type!==De.name?this.unexpected():(e.label=this.parseIdent(),this.semicolon());for(var i=0;i<this.labels.length;++i){var n=this.labels[i];if(null==e.label||n.name===e.label.name){if(null!=n.kind&&(r||"loop"===n.kind))break;if(e.label&&r)break}}return i===this.labels.length&&this.raise(e.start,"Unsyntactic "+t),this.finishNode(e,r?"BreakStatement":"ContinueStatement")},Ot.parseDebuggerStatement=function(e){"use strict";return this.next(),this.semicolon(),this.finishNode(e,"DebuggerStatement")},Ot.parseDoStatement=function(e){"use strict";return this.next(),this.labels.push(Tt),e.body=this.parseStatement("do"),this.labels.pop(),this.expect(De._while),e.test=this.parseParenExpression(),this.options.ecmaVersion>=6?this.eat(De.semi):this.semicolon(),this.finishNode(e,"DoWhileStatement")},Ot.parseForStatement=function(e){"use strict";this.next();var t=this.options.ecmaVersion>=9&&(this.inAsync||!this.inFunction&&this.options.allowAwaitOutsideFunction)&&this.eatContextual("await")?this.lastTokStart:-1;if(this.labels.push(Tt),this.enterScope(0),this.expect(De.parenL),this.type===De.semi)return t>-1&&this.unexpected(t),this.parseFor(e,null);var r=this.isLet();if(this.type===De._var||this.type===De._const||r){var i=this.startNode(),n=r?"let":this.value;return this.next(),this.parseVar(i,!0,n),this.finishNode(i,"VariableDeclaration"),!(this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of"))||1!==i.declarations.length||"var"!==n&&i.declarations[0].init?(t>-1&&this.unexpected(t),this.parseFor(e,i)):(this.options.ecmaVersion>=9&&(this.type===De._in?t>-1&&this.unexpected(t):e.await=t>-1),this.parseForIn(e,i))}var s=new Et,a=this.parseExpression(!0,s);return this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of")?(this.options.ecmaVersion>=9&&(this.type===De._in?t>-1&&this.unexpected(t):e.await=t>-1),this.toAssignable(a,!1,s),this.checkLVal(a),this.parseForIn(e,a)):(this.checkExpressionErrors(s,!0),t>-1&&this.unexpected(t),this.parseFor(e,a))},Ot.parseFunctionStatement=function(e,t,r){"use strict";return this.next(),this.parseFunction(e,Dt|(r?0:Ft),!1,t)},Ot.parseIfStatement=function(e){"use strict";return this.next(),e.test=this.parseParenExpression(),e.consequent=this.parseStatement("if"),e.alternate=this.eat(De._else)?this.parseStatement("if"):null,this.finishNode(e,"IfStatement")},Ot.parseReturnStatement=function(e){"use strict";return this.inFunction||this.options.allowReturnOutsideFunction||this.raise(this.start,"'return' outside of function"),this.next(),this.eat(De.semi)||this.insertSemicolon()?e.argument=null:(e.argument=this.parseExpression(),this.semicolon()),this.finishNode(e,"ReturnStatement")},Ot.parseSwitchStatement=function(e){"use strict";var t;this.next(),e.discriminant=this.parseParenExpression(),e.cases=[],this.expect(De.braceL),this.labels.push(Mt),this.enterScope(0);for(var r=!1;this.type!==De.braceR;)if(this.type===De._case||this.type===De._default){var i=this.type===De._case;t&&this.finishNode(t,"SwitchCase"),e.cases.push(t=this.startNode()),t.consequent=[],this.next(),i?t.test=this.parseExpression():(r&&this.raiseRecoverable(this.lastTokStart,"Multiple default clauses"),r=!0,t.test=null),this.expect(De.colon)}else t||this.unexpected(),t.consequent.push(this.parseStatement(null));return this.exitScope(),t&&this.finishNode(t,"SwitchCase"),this.next(),this.labels.pop(),this.finishNode(e,"SwitchStatement")},Ot.parseThrowStatement=function(e){"use strict";return this.next(),Ye.test(this.input.slice(this.lastTokEnd,this.start))&&this.raise(this.lastTokEnd,"Illegal newline after throw"),e.argument=this.parseExpression(),this.semicolon(),this.finishNode(e,"ThrowStatement")};var Lt=[];Ot.parseTryStatement=function(e){"use strict";if(this.next(),e.block=this.parseBlock(),e.handler=null,this.type===De._catch){var t=this.startNode();if(this.next(),this.eat(De.parenL)){t.param=this.parseBindingAtom();var r="Identifier"===t.param.type;this.enterScope(r?32:0),this.checkLVal(t.param,r?4:2),this.expect(De.parenR)}else this.options.ecmaVersion<10&&this.unexpected(),t.param=null,this.enterScope(0);t.body=this.parseBlock(!1),this.exitScope(),e.handler=this.finishNode(t,"CatchClause")}return e.finalizer=this.eat(De._finally)?this.parseBlock():null,e.handler||e.finalizer||this.raise(e.start,"Missing catch or finally clause"),this.finishNode(e,"TryStatement")},Ot.parseVarStatement=function(e,t){"use strict";return this.next(),this.parseVar(e,!1,t),this.semicolon(),this.finishNode(e,"VariableDeclaration")},Ot.parseWhileStatement=function(e){"use strict";return this.next(),e.test=this.parseParenExpression(),this.labels.push(Tt),e.body=this.parseStatement("while"),this.labels.pop(),this.finishNode(e,"WhileStatement")},Ot.parseWithStatement=function(e){"use strict";return this.strict&&this.raise(this.start,"'with' in strict mode"),this.next(),e.object=this.parseParenExpression(),e.body=this.parseStatement("with"),this.finishNode(e,"WithStatement")},Ot.parseEmptyStatement=function(e){"use strict";return this.next(),this.finishNode(e,"EmptyStatement")},Ot.parseLabeledStatement=function(e,t,r,i){"use strict";for(var n=0,s=this.labels,a=null==s?0:s.length;n<a;n++){var o=s[n];o.name===t&&this.raise(r.start,"Label '"+t+"' is already declared")}for(var u=this.type.isLoop?"loop":this.type===De._switch?"switch":null,l=this.labels.length-1;l>=0;l--){var c=this.labels[l];if(c.statementStart!==e.start)break;c.statementStart=this.start,c.kind=u}return this.labels.push({name:t,kind:u,statementStart:this.start}),e.body=this.parseStatement(i?-1===i.indexOf("label")?i+"label":i:"label"),this.labels.pop(),e.label=r,this.finishNode(e,"LabeledStatement")},Ot.parseExpressionStatement=function(e,t){"use strict";return e.expression=t,this.semicolon(),this.finishNode(e,"ExpressionStatement")},Ot.parseBlock=function(e=!0,t=this.startNode()){for(t.body=[],this.expect(De.braceL),e&&this.enterScope(0);!this.eat(De.braceR);){var r=this.parseStatement(null);t.body.push(r)}return e&&this.exitScope(),this.finishNode(t,"BlockStatement")},Ot.parseFor=function(e,t){"use strict";return e.init=t,this.expect(De.semi),e.test=this.type===De.semi?null:this.parseExpression(),this.expect(De.semi),e.update=this.type===De.parenR?null:this.parseExpression(),this.expect(De.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,"ForStatement")},Ot.parseForIn=function(e,t){"use strict";var r=this.type===De._in?"ForInStatement":"ForOfStatement";return this.next(),"ForInStatement"===r&&("AssignmentPattern"===t.type||"VariableDeclaration"===t.type&&null!=t.declarations[0].init&&(this.strict||"Identifier"!==t.declarations[0].id.type))&&this.raise(t.start,"Invalid assignment in for-in loop head"),e.left=t,e.right="ForInStatement"===r?this.parseExpression():this.parseMaybeAssign(),this.expect(De.parenR),e.body=this.parseStatement("for"),this.exitScope(),this.labels.pop(),this.finishNode(e,r)},Ot.parseVar=function(e,t,r){"use strict";for(e.declarations=[],e.kind=r;;){var i=this.startNode();if(this.parseVarId(i,r),this.eat(De.eq)?i.init=this.parseMaybeAssign(t):"const"!==r||this.type===De._in||this.options.ecmaVersion>=6&&this.isContextual("of")?"Identifier"===i.id.type||t&&(this.type===De._in||this.isContextual("of"))?i.init=null:this.raise(this.lastTokEnd,"Complex binding patterns require an initialization value"):this.unexpected(),e.declarations.push(this.finishNode(i,"VariableDeclarator")),!this.eat(De.comma))break}return e},Ot.parseVarId=function(e,t){"use strict";"const"!==t&&"let"!==t||!this.isContextual("let")||this.raiseRecoverable(this.start,"let is disallowed as a lexically bound name"),e.id=this.parseBindingAtom(),this.checkLVal(e.id,"var"===t?1:2,!1)};var Dt=1,Ft=2;Ot.parseFunction=function(e,t,r,i){"use strict";this.initFunction(e),(this.options.ecmaVersion>=9||this.options.ecmaVersion>=6&&!i)&&(this.type===De.star&&t&Ft&&this.unexpected(),e.generator=this.eat(De.star)),this.options.ecmaVersion>=8&&(e.async=!!i),t&Dt&&(e.id=4&t&&this.type!==De.name?null:this.parseIdent(),!e.id||t&Ft||this.checkLVal(e.id,this.strict||e.generator||e.async?this.treatFunctionsAsVar?1:2:3));var n=this.yieldPos,s=this.awaitPos,a=this.awaitIdentPos;return this.yieldPos=0,this.awaitPos=0,this.awaitIdentPos=0,this.enterScope(yt(e.async,e.generator)),t&Dt||(e.id=this.type===De.name?this.parseIdent():null),this.parseFunctionParams(e),this.parseFunctionBody(e,r,!1),this.yieldPos=n,this.awaitPos=s,this.awaitIdentPos=a,this.finishNode(e,t&Dt?"FunctionDeclaration":"FunctionExpression")},Ot.parseFunctionParams=function(e){"use strict";this.expect(De.parenL),e.params=this.parseBindingList(De.parenR,!1,this.options.ecmaVersion>=8),this.checkYieldAwaitInDefaultParams()},Ot.parseClass=function(e,t){"use strict";this.next();var r=this.strict;this.strict=!0,this.parseClassId(e,t),this.parseClassSuper(e);var i=this.startNode(),n=!1;for(i.body=[],this.expect(De.braceL);!this.eat(De.braceR);){var s=this.parseClassElement(null!==e.superClass);s&&(i.body.push(s),"MethodDefinition"===s.type&&"constructor"===s.kind&&(n&&this.raise(s.start,"Duplicate constructor in the same class"),n=!0))}return e.body=this.finishNode(i,"ClassBody"),this.strict=r,this.finishNode(e,t?"ClassDeclaration":"ClassExpression")},Ot.parseClassElement=function(e){"use strict";var t=this;if(this.eat(De.semi))return null;var r=this.startNode(),i=function(e,i=!1){var n=t.start,s=t.startLoc;return!(!t.eatContextual(e)||(t.type===De.parenL||i&&t.canInsertSemicolon())&&(r.key&&t.unexpected(),r.computed=!1,r.key=t.startNodeAt(n,s),r.key.name=e,t.finishNode(r.key,"Identifier"),1))};r.kind="method",r.static=i("static");var n=this.eat(De.star),s=!1;n||(this.options.ecmaVersion>=8&&i("async",!0)?(s=!0,n=this.options.ecmaVersion>=9&&this.eat(De.star)):i("get")?r.kind="get":i("set")&&(r.kind="set")),r.key||this.parsePropertyName(r);var a=r.key,o=!1;return r.computed||r.static||!("Identifier"===a.type&&"constructor"===a.name||"Literal"===a.type&&"constructor"===a.value)?r.static&&"Identifier"===a.type&&"prototype"===a.name&&this.raise(a.start,"Classes may not have a static property named prototype"):("method"!==r.kind&&this.raise(a.start,"Constructor can't have get/set modifier"),n&&this.raise(a.start,"Constructor can't be a generator"),s&&this.raise(a.start,"Constructor can't be an async method"),r.kind="constructor",o=e),this.parseClassMethod(r,n,s,o),"get"===r.kind&&0!==r.value.params.length&&this.raiseRecoverable(r.value.start,"getter should have no params"),"set"===r.kind&&1!==r.value.params.length&&this.raiseRecoverable(r.value.start,"setter should have exactly one param"),"set"===r.kind&&"RestElement"===r.value.params[0].type&&this.raiseRecoverable(r.value.params[0].start,"Setter cannot use rest params"),r},Ot.parseClassMethod=function(e,t,r,i){"use strict";return e.value=this.parseMethod(t,r,i),this.finishNode(e,"MethodDefinition")},Ot.parseClassId=function(e,t){"use strict";this.type===De.name?(e.id=this.parseIdent(),t&&this.checkLVal(e.id,2,!1)):(!0===t&&this.unexpected(),e.id=null)},Ot.parseClassSuper=function(e){"use strict";e.superClass=this.eat(De._extends)?this.parseExprSubscripts():null},Ot.parseExport=function(e,t){"use strict";if(this.next(),this.eat(De.star))return this.expectContextual("from"),this.type!==De.string&&this.unexpected(),e.source=this.parseExprAtom(),this.semicolon(),this.finishNode(e,"ExportAllDeclaration");if(this.eat(De._default)){var r;if(this.checkExport(t,"default",this.lastTokStart),this.type===De._function||(r=this.isAsyncFunction())){var i=this.startNode();this.next(),r&&this.next(),e.declaration=this.parseFunction(i,4|Dt,!1,r)}else if(this.type===De._class){var n=this.startNode();e.declaration=this.parseClass(n,"nullableID")}else e.declaration=this.parseMaybeAssign(),this.semicolon();return this.finishNode(e,"ExportDefaultDeclaration")}if(this.shouldParseExportStatement())e.declaration=this.parseStatement(null),"VariableDeclaration"===e.declaration.type?this.checkVariableExport(t,e.declaration.declarations):this.checkExport(t,e.declaration.id.name,e.declaration.id.start),e.specifiers=[],e.source=null;else{if(e.declaration=null,e.specifiers=this.parseExportSpecifiers(t),this.eatContextual("from"))this.type!==De.string&&this.unexpected(),e.source=this.parseExprAtom();else{for(var s=0,a=e.specifiers,o=null==a?0:a.length;s<o;s++){var u=a[s];this.checkUnreserved(u.local),this.checkLocalExport(u.local)}e.source=null}this.semicolon()}return this.finishNode(e,"ExportNamedDeclaration")},Ot.checkExport=function(e,t,r){"use strict";e&&(nt(e,t)&&this.raiseRecoverable(r,"Duplicate export '"+t+"'"),e[t]=!0)},Ot.checkPatternExport=function(e,t){"use strict";var r=t.type;if("Identifier"===r)this.checkExport(e,t.name,t.start);else if("ObjectPattern"===r)for(var i=0,n=t.properties,s=null==n?0:n.length;i<s;i++){var a=n[i];this.checkPatternExport(e,a)}else if("ArrayPattern"===r)for(var o=0,u=t.elements,l=null==u?0:u.length;o<l;o++){var c=u[o];c&&this.checkPatternExport(e,c)}else"Property"===r?this.checkPatternExport(e,t.value):"AssignmentPattern"===r?this.checkPatternExport(e,t.left):"RestElement"===r?this.checkPatternExport(e,t.argument):"ParenthesizedExpression"===r&&this.checkPatternExport(e,t.expression)},Ot.checkVariableExport=function(e,t){"use strict";if(e)for(var r=0,i=null==t?0:t.length;r<i;r++){var n=t[r];this.checkPatternExport(e,n.id)}},Ot.shouldParseExportStatement=function(){"use strict";return"var"===this.type.keyword||"const"===this.type.keyword||"class"===this.type.keyword||"function"===this.type.keyword||this.isLet()||this.isAsyncFunction()},Ot.parseExportSpecifiers=function(e){"use strict";var t=[],r=!0;for(this.expect(De.braceL);!this.eat(De.braceR);){if(r)r=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var i=this.startNode();i.local=this.parseIdent(!0),i.exported=this.eatContextual("as")?this.parseIdent(!0):i.local,this.checkExport(e,i.exported.name,i.exported.start),t.push(this.finishNode(i,"ExportSpecifier"))}return t},Ot.parseImport=function(e){"use strict";return this.next(),this.type===De.string?(e.specifiers=Lt,e.source=this.parseExprAtom()):(e.specifiers=this.parseImportSpecifiers(),this.expectContextual("from"),e.source=this.type===De.string?this.parseExprAtom():this.unexpected()),this.semicolon(),this.finishNode(e,"ImportDeclaration")},Ot.parseImportSpecifiers=function(){"use strict";var e=[],t=!0;if(this.type===De.name){var r=this.startNode();if(r.local=this.parseIdent(),this.checkLVal(r.local,2),e.push(this.finishNode(r,"ImportDefaultSpecifier")),!this.eat(De.comma))return e}if(this.type===De.star){var i=this.startNode();return this.next(),this.expectContextual("as"),i.local=this.parseIdent(),this.checkLVal(i.local,2),e.push(this.finishNode(i,"ImportNamespaceSpecifier")),e}for(this.expect(De.braceL);!this.eat(De.braceR);){if(t)t=!1;else if(this.expect(De.comma),this.afterTrailingComma(De.braceR))break;var n=this.startNode();n.imported=this.parseIdent(!0),this.eatContextual("as")?n.local=this.parseIdent():(this.checkUnreserved(n.imported),n.local=n.imported),this.checkLVal(n.local,2),e.push(this.finishNode(n,"ImportSpecifier"))}return e},Ot.adaptDirectivePrologue=function(e){"use strict";for(var t=0;t<e.length&&this.isDirectiveCandidate(e[t]);++t)e[t].directive=e[t].expression.raw.slice(1,-1)},Ot.isDirectiveCandidate=function(e){"use strict";return"ExpressionStatement"===e.type&&"Literal"===e.expression.type&&"string"==typeof e.expression.value&&('"'===this.input[e.start]||"'"===this.input[e.start])};class jt{constructor(e,t,r,i,n){this.token=e,this.isExpr=!!t,this.preserveSpace=!!r,this.override=i,this.generator=!!n}}var Vt={b_stat:new jt("{",!1),b_expr:new jt("{",!0),b_tmpl:new jt("${",!1),p_stat:new jt("(",!1),p_expr:new jt("(",!0),q_tmpl:new jt("`",!0,!0,function(e){return e.tryReadTemplateToken()}),f_stat:new jt("function",!1),f_expr:new jt("function",!0),f_expr_gen:new jt("function",!0,!1,null,!0),f_gen:new jt("function",!1,!1,null,!0)},Gt=xt.prototype;Gt.initialContext=function(){"use strict";return[Vt.b_stat]},Gt.braceIsBlock=function(e){"use strict";var t=this.curContext();return t===Vt.f_expr||t===Vt.f_stat||(e!==De.colon||t!==Vt.b_stat&&t!==Vt.b_expr?e===De._return||e===De.name&&this.exprAllowed?Ye.test(this.input.slice(this.lastTokEnd,this.start)):e===De._else||e===De.semi||e===De.eof||e===De.parenR||e===De.arrow||(e===De.braceL?t===Vt.b_stat:e!==De._var&&e!==De._const&&e!==De.name&&!this.exprAllowed):!t.isExpr)},Gt.inGeneratorContext=function(){"use strict";for(var e=this.context.length-1;e>=1;e--){var t=this.context[e];if("function"===t.token)return t.generator}return!1},Gt.updateContext=function(e){"use strict";var t,r=this.type;r.keyword&&e===De.dot?this.exprAllowed=!1:(t=r.updateContext)?t.call(this,e):this.exprAllowed=r.beforeExpr},De.parenR.updateContext=De.braceR.updateContext=function(){"use strict";if(1!==this.context.length){var e=this.context.pop();e===Vt.b_stat&&"function"===this.curContext().token&&(e=this.context.pop()),this.exprAllowed=!e.isExpr}else this.exprAllowed=!0},De.braceL.updateContext=function(e){"use strict";this.context.push(this.braceIsBlock(e)?Vt.b_stat:Vt.b_expr),this.exprAllowed=!0},De.dollarBraceL.updateContext=function(){"use strict";this.context.push(Vt.b_tmpl),this.exprAllowed=!0},De.parenL.updateContext=function(e){"use strict";var t=e===De._if||e===De._for||e===De._with||e===De._while;this.context.push(t?Vt.p_stat:Vt.p_expr),this.exprAllowed=!0},De.incDec.updateContext=function(){},De._function.updateContext=De._class.updateContext=function(e){"use strict";!e.beforeExpr||e===De.semi||e===De._else||e===De._return&&Ye.test(this.input.slice(this.lastTokEnd,this.start))||(e===De.colon||e===De.braceL)&&this.curContext()===Vt.b_stat?this.context.push(Vt.f_stat):this.context.push(Vt.f_expr),this.exprAllowed=!1},De.backQuote.updateContext=function(){"use strict";this.curContext()===Vt.q_tmpl?this.context.pop():this.context.push(Vt.q_tmpl),this.exprAllowed=!1},De.star.updateContext=function(e){"use strict";if(e===De._function){var t=this.context.length-1;this.context[t]=this.context[t]===Vt.f_expr?Vt.f_expr_gen:Vt.f_gen}this.exprAllowed=!0},De.name.updateContext=function(e){"use strict";var t=!1;this.options.ecmaVersion>=6&&e!==De.dot&&("of"===this.value&&!this.exprAllowed||"yield"===this.value&&this.inGeneratorContext())&&(t=!0),this.exprAllowed=t};class Bt{reset(){}}class Ut{constructor(e){this.type=e.type,this.value=e.value,this.start=e.start,this.end=e.end,e.options.locations&&(this.loc=new ut(e,e.startLoc,e.endLoc)),e.options.ranges&&(this.range=[e.start,e.end])}}var Wt=xt.prototype;function qt(e){"use strict";return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}Wt.next=function(){"use strict";this.options.onToken&&this.options.onToken(new Ut(this)),this.lastTokEnd=this.end,this.lastTokStart=this.start,this.lastTokEndLoc=this.endLoc,this.lastTokStartLoc=this.startLoc,this.nextToken()},Wt.getToken=function(){"use strict";return this.next(),new Ut(this)},"undefined"!=typeof Symbol&&(Wt[Symbol.iterator]=function(){"use strict";var e=this;return{next:function(){var t=e.getToken();return{done:t.type===De.eof,value:t}}}}),Wt.curContext=function(){"use strict";return this.context[this.context.length-1]},Wt.nextToken=function(){"use strict";var e=this.curContext();return e&&e.preserveSpace||this.skipSpace(),this.start=this.pos,this.options.locations&&(this.startLoc=this.curPosition()),this.pos>=this.input.length?this.finishToken(De.eof):e.override?e.override(this):void this.readToken(this.fullCharCodeAtPos())},Wt.readToken=function(e){"use strict";return Ke(e,this.options.ecmaVersion>=6)||92===e?this.readWord():this.getTokenFromCode(e)},Wt.fullCharCodeAtPos=function(){"use strict";var e=this.input.charCodeAt(this.pos);if(e<=55295||e>=57344)return e;var t=this.input.charCodeAt(this.pos+1);return(e<<10)+t-56613888},Wt.skipBlockComment=function(){"use strict";var e,t=this.options.onComment&&this.curPosition(),r=this.pos,i=this.input.indexOf("*/",this.pos+=2);if(-1===i&&this.raise(this.pos-2,"Unterminated comment"),this.pos=i+2,this.options.locations)for(Xe.lastIndex=r;(e=Xe.exec(this.input))&&e.index<this.pos;)++this.curLine,this.lineStart=e.index+e[0].length;this.options.onComment&&this.options.onComment(!0,this.input.slice(r+2,i),r,this.pos,t,this.curPosition())},Wt.skipLineComment=function(e){"use strict";for(var t=this.pos,r=this.options.onComment&&this.curPosition(),i=this.input.charCodeAt(this.pos+=e);this.pos<this.input.length&&!Qe(i);)i=this.input.charCodeAt(++this.pos);this.options.onComment&&this.options.onComment(!1,this.input.slice(t+e,this.pos),t,this.pos,r,this.curPosition())},Wt.skipSpace=function(){"use strict";e:for(;this.pos<this.input.length;){var e=this.input.charCodeAt(this.pos);switch(e){case 32:case 160:++this.pos;break;case 13:10===this.input.charCodeAt(this.pos+1)&&++this.pos;case 10:case 8232:case 8233:++this.pos,this.options.locations&&(++this.curLine,this.lineStart=this.pos);break;case 47:switch(this.input.charCodeAt(this.pos+1)){case 42:this.skipBlockComment();break;case 47:this.skipLineComment(2);break;default:break e}break;default:if(!(e>8&&e<14||e>=5760&&Ze.test(String.fromCharCode(e))))break e;++this.pos}}},Wt.finishToken=function(e,t){"use strict";this.end=this.pos,this.options.locations&&(this.endLoc=this.curPosition());var r=this.type;this.type=e,this.value=t,this.updateContext(r)},Wt.readToken_dot=function(){"use strict";var e=this.input.charCodeAt(this.pos+1);if(e>=48&&e<=57)return this.readNumber(!0);var t=this.input.charCodeAt(this.pos+2);return this.options.ecmaVersion>=6&&46===e&&46===t?(this.pos+=3,this.finishToken(De.ellipsis)):(++this.pos,this.finishToken(De.dot))},Wt.readToken_slash=function(){"use strict";var e=this.input.charCodeAt(this.pos+1);return this.exprAllowed?(++this.pos,this.readRegexp()):61===e?this.finishOp(De.assign,2):this.finishOp(De.slash,1)},Wt.readToken_mult_modulo_exp=function(e){"use strict";var t=this.input.charCodeAt(this.pos+1),r=1,i=42===e?De.star:De.modulo;return this.options.ecmaVersion>=7&&42===e&&42===t&&(++r,i=De.starstar,t=this.input.charCodeAt(this.pos+2)),61===t?this.finishOp(De.assign,r+1):this.finishOp(i,r)},Wt.readToken_pipe_amp=function(e){"use strict";var t=this.input.charCodeAt(this.pos+1);return t===e?this.finishOp(124===e?De.logicalOR:De.logicalAND,2):61===t?this.finishOp(De.assign,2):this.finishOp(124===e?De.bitwiseOR:De.bitwiseAND,1)},Wt.readToken_caret=function(){"use strict";var e=this.input.charCodeAt(this.pos+1);return 61===e?this.finishOp(De.assign,2):this.finishOp(De.bitwiseXOR,1)},Wt.readToken_plus_min=function(e){"use strict";var t=this.input.charCodeAt(this.pos+1);return t===e?45!==t||this.inModule||62!==this.input.charCodeAt(this.pos+2)||0!==this.lastTokEnd&&!Ye.test(this.input.slice(this.lastTokEnd,this.pos))?this.finishOp(De.incDec,2):(this.skipLineComment(3),this.skipSpace(),this.nextToken()):61===t?this.finishOp(De.assign,2):this.finishOp(De.plusMin,1)},Wt.readToken_lt_gt=function(e){"use strict";var t=this.input.charCodeAt(this.pos+1),r=1;return t===e?(r=62===e&&62===this.input.charCodeAt(this.pos+2)?3:2,61===this.input.charCodeAt(this.pos+r)?this.finishOp(De.assign,r+1):this.finishOp(De.bitShift,r)):33!==t||60!==e||this.inModule||45!==this.input.charCodeAt(this.pos+2)||45!==this.input.charCodeAt(this.pos+3)?(61===t&&(r=2),this.finishOp(De.relational,r)):(this.skipLineComment(4),this.skipSpace(),this.nextToken())},Wt.readToken_eq_excl=function(e){"use strict";var t=this.input.charCodeAt(this.pos+1);return 61===t?this.finishOp(De.equality,61===this.input.charCodeAt(this.pos+2)?3:2):61===e&&62===t&&this.options.ecmaVersion>=6?(this.pos+=2,this.finishToken(De.arrow)):this.finishOp(61===e?De.eq:De.prefix,1)},Wt.getTokenFromCode=function(e){"use strict";switch(e){case 46:return this.readToken_dot();case 40:return++this.pos,this.finishToken(De.parenL);case 41:return++this.pos,this.finishToken(De.parenR);case 59:return++this.pos,this.finishToken(De.semi);case 44:return++this.pos,this.finishToken(De.comma);case 91:return++this.pos,this.finishToken(De.bracketL);case 93:return++this.pos,this.finishToken(De.bracketR);case 123:return++this.pos,this.finishToken(De.braceL);case 125:return++this.pos,this.finishToken(De.braceR);case 58:return++this.pos,this.finishToken(De.colon);case 63:return++this.pos,this.finishToken(De.question);case 96:if(this.options.ecmaVersion<6)break;return++this.pos,this.finishToken(De.backQuote);case 48:var t=this.input.charCodeAt(this.pos+1);if(120===t||88===t)return this.readRadixNumber(16);if(this.options.ecmaVersion>=6){if(111===t||79===t)return this.readRadixNumber(8);if(98===t||66===t)return this.readRadixNumber(2)}case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return this.readNumber(!1);case 34:case 39:return this.readString(e);case 47:return this.readToken_slash();case 37:case 42:return this.readToken_mult_modulo_exp(e);case 124:case 38:return this.readToken_pipe_amp(e);case 94:return this.readToken_caret();case 43:case 45:return this.readToken_plus_min(e);case 60:case 62:return this.readToken_lt_gt(e);case 61:case 33:return this.readToken_eq_excl(e);case 126:return this.finishOp(De.prefix,1)}this.raise(this.pos,"Unexpected character '"+qt(e)+"'")},Wt.finishOp=function(e,t){"use strict";var r=this.input.slice(this.pos,this.pos+t);return this.pos+=t,this.finishToken(e,r)},Wt.readRegexp=function(){"use strict";for(var e,t,r=this.pos;;){this.pos>=this.input.length&&this.raise(r,"Unterminated regular expression");var i=this.input.charAt(this.pos);if(Ye.test(i)&&this.raise(r,"Unterminated regular expression"),e)e=!1;else{if("["===i)t=!0;else if("]"===i&&t)t=!1;else if("/"===i&&!t)break;e="\\"===i}++this.pos}var n=this.input.slice(r,this.pos);++this.pos;var s=this.pos,a=this.readWord1();this.containsEsc&&this.unexpected(s);var o=this.regexpState||(this.regexpState=new Bt(this));o.reset(r,n,a),this.validateRegExpFlags(o),this.validateRegExpPattern(o);var u=null;try{u=RegExp(n,a)}catch(e){}return this.finishToken(De.regexp,{pattern:n,flags:a,value:u})},Wt.readInt=function(e,t){"use strict";for(var r=this.pos,i=0,n=0,s=null==t?1/0:t;n<s;++n){var a,o=this.input.charCodeAt(this.pos);if(a=o>=97?o-97+10:o>=65?o-65+10:o>=48&&o<=57?o-48:1/0,a>=e)break;++this.pos,i=i*e+a}return this.pos===r||null!=t&&this.pos-r!==t?null:i},Wt.readRadixNumber=function(e){"use strict";this.pos+=2;var t=this.readInt(e);return null==t&&this.raise(this.start+2,"Expected number in radix "+e),Ke(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number"),this.finishToken(De.num,t)},Wt.readNumber=function(e){"use strict";var t=this.pos;e||null!==this.readInt(10)||this.raise(t,"Invalid number");var r=this.pos-t>=2&&48===this.input.charCodeAt(t);r&&this.strict&&this.raise(t,"Invalid number"),r&&/[89]/.test(this.input.slice(t,this.pos))&&(r=!1);var i=this.input.charCodeAt(this.pos);46!==i||r||(++this.pos,this.readInt(10),i=this.input.charCodeAt(this.pos)),69!==i&&101!==i||r||(i=this.input.charCodeAt(++this.pos),43!==i&&45!==i||++this.pos,null===this.readInt(10)&&this.raise(t,"Invalid number")),Ke(this.fullCharCodeAtPos())&&this.raise(this.pos,"Identifier directly after number");var n=this.input.slice(t,this.pos),s=r?parseInt(n,8):parseFloat(n);return this.finishToken(De.num,s)},Wt.readCodePoint=function(){"use strict";var e,t=this.input.charCodeAt(this.pos);if(123===t){this.options.ecmaVersion<6&&this.unexpected();var r=++this.pos;e=this.readHexChar(this.input.indexOf("}",this.pos)-this.pos),++this.pos,e>1114111&&this.invalidStringToken(r,"Code point out of bounds")}else e=this.readHexChar(4);return e},Wt.readString=function(e){"use strict";for(var t="",r=++this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated string constant");var i=this.input.charCodeAt(this.pos);if(i===e)break;92===i?(t+=this.input.slice(r,this.pos),t+=this.readEscapedChar(!1),r=this.pos):(Qe(i,this.options.ecmaVersion>=10)&&this.raise(this.start,"Unterminated string constant"),++this.pos)}return t+=this.input.slice(r,this.pos++),this.finishToken(De.string,t)};var zt={};Wt.tryReadTemplateToken=function(){"use strict";this.inTemplateElement=!0;try{this.readTmplToken()}catch(e){if(e!==zt)throw e;this.readInvalidTemplateToken()}this.inTemplateElement=!1},Wt.invalidStringToken=function(e,t){"use strict";if(this.inTemplateElement&&this.options.ecmaVersion>=9)throw zt;this.raise(e,t)},Wt.readTmplToken=function(){"use strict";for(var e="",t=this.pos;;){this.pos>=this.input.length&&this.raise(this.start,"Unterminated template");var r=this.input.charCodeAt(this.pos);if(96===r||36===r&&123===this.input.charCodeAt(this.pos+1))return this.pos!==this.start||this.type!==De.template&&this.type!==De.invalidTemplate?(e+=this.input.slice(t,this.pos),this.finishToken(De.template,e)):36===r?(this.pos+=2,this.finishToken(De.dollarBraceL)):(++this.pos,this.finishToken(De.backQuote));if(92===r)e+=this.input.slice(t,this.pos),e+=this.readEscapedChar(!0),t=this.pos;else if(Qe(r)){switch(e+=this.input.slice(t,this.pos),++this.pos,r){case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:e+="\n";break;default:e+=String.fromCharCode(r)}this.options.locations&&(++this.curLine,this.lineStart=this.pos),t=this.pos}else++this.pos}},Wt.readInvalidTemplateToken=function(){"use strict";for(;this.pos<this.input.length;this.pos++)switch(this.input[this.pos]){case"\\":++this.pos;break;case"$":if("{"!==this.input[this.pos+1])break;case"`":return this.finishToken(De.invalidTemplate,this.input.slice(this.start,this.pos))}this.raise(this.start,"Unterminated template")},Wt.readEscapedChar=function(e){"use strict";var t=this.input.charCodeAt(++this.pos);switch(++this.pos,t){case 110:return"\n";case 114:return"\r";case 120:return String.fromCharCode(this.readHexChar(2));case 117:return qt(this.readCodePoint());case 116:return"\t";case 98:return"\b";case 118:return"\v";case 102:return"\f";case 13:10===this.input.charCodeAt(this.pos)&&++this.pos;case 10:return this.options.locations&&(this.lineStart=this.pos,++this.curLine),"";default:if(t>=48&&t<=55){var r=this.input.substr(this.pos-1,3).match(/^[0-7]+/)[0],i=parseInt(r,8);return i>255&&(r=r.slice(0,-1),i=parseInt(r,8)),this.pos+=r.length-1,t=this.input.charCodeAt(this.pos),"0"===r&&56!==t&&57!==t||!this.strict&&!e||this.invalidStringToken(this.pos-1-r.length,e?"Octal literal in template string":"Octal literal in strict mode"),String.fromCharCode(i)}return Qe(t)?"":String.fromCharCode(t)}},Wt.readHexChar=function(e){"use strict";var t=this.pos,r=this.readInt(16,e);return null===r&&this.invalidStringToken(t,"Bad character escape sequence"),r},Wt.readWord1=function(){"use strict";this.containsEsc=!1;for(var e="",t=!0,r=this.pos,i=this.options.ecmaVersion>=6;this.pos<this.input.length;){var n=this.fullCharCodeAtPos();if(Je(n,i))this.pos+=n<=65535?1:2;else{if(92!==n)break;this.containsEsc=!0,e+=this.input.slice(r,this.pos);var s=this.pos;117!==this.input.charCodeAt(++this.pos)&&this.invalidStringToken(this.pos,"Expecting Unicode escape sequence \\uXXXX"),++this.pos;var a=this.readCodePoint();(t?Ke:Je)(a,i)||this.invalidStringToken(s,"Invalid Unicode escape"),e+=qt(a),r=this.pos}t=!1}return e+this.input.slice(r,this.pos)},Wt.readWord=function(){"use strict";var e=this.readWord1(),t=De.name;return this.keywords.test(e)&&(this.containsEsc&&this.raiseRecoverable(this.start,"Escape sequence in keyword "+e),t=Me[e]),this.finishToken(t,e)};for(var Ht=/^(?:'((?:\\.|[^'])*?)'|"((?:\\.|[^"])*?)"|;)/,$t={Parser:xt,createWordsRegExp:at,getLineInfo:lt,isIdentifierChar:Je,isIdentifierStart:Ke,lineBreakRegExp:Ye,literalRegExp:Ht,reservedWords:Fe,skipWhiteSpaceRegExp:et,tokTypes:De},Kt=R.inited?R.module.utilWrap:R.module.utilWrap=(function(){"use strict";return function(e,t){return function(...r){return Reflect.apply(t,this,[e,r])}}})(),Jt=R.inited?R.module.acornParserBigInt:R.module.acornParserBigInt=(function(){"use strict";var e=110,t={enable:e=>(e.readNumber=Kt(e.readNumber,i),e.readRadixNumber=Kt(e.readRadixNumber,n),e)};function r(t,r){var i=t.pos;return"number"==typeof r?t.pos+=2:r=10,null!==t.readInt(r)&&t.input.charCodeAt(t.pos)===e?(++t.pos,t.finishToken(De.num,null)):(t.pos=i,null)}function i(e,t){var i=t[0];if(!i){var n=r(this);if(null!==n)return n}return Reflect.apply(e,this,t)}function n(e,t){var i=t[0],n=r(this,i);return null===n?Reflect.apply(e,this,t):n}return t})(),Yt=R.inited?R.module.parseBranch:R.module.parseBranch=(function(){"use strict";var e;return function(t){return void 0!==e&&e!==t||(e=fr.create("",{allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!0,ecmaVersion:10})),e.awaitIdentPos=t.awaitIdentPos,e.awaitPos=t.awaitPos,e.containsEsc=t.containsEsc,e.curLine=t.curLine,e.end=t.end,e.exprAllowed=t.exprAllowed,e.inModule=t.inModule,e.input=t.input,e.inTemplateElement=t.inTemplateElement,e.lastTokEnd=t.lastTokEnd,e.lastTokStart=t.lastTokStart,e.lineStart=t.lineStart,e.pos=t.pos,e.potentialArrowAt=t.potentialArrowAt,e.sourceFile=t.sourceFile,e.start=t.start,e.strict=t.strict,e.type=t.type,e.value=t.value,e.yieldPos=t.yieldPos,e}})(),Xt=R.inited?R.module.acornParserClassFields:R.module.acornParserClassFields=(function(){"use strict";var e=35,t={enable:e=>(e.getTokenFromCode=Kt(e.getTokenFromCode,r),e.parseClassElement=Kt(e.parseClassElement,i),e)};function r(t,r){var i=r[0];return i!==e?Reflect.apply(t,this,r):(++this.pos,this.finishToken(De.name,this.readWord1()))}function i(e,t){var r=this.type;if(r!==De.bracketL&&r!==De.name)return Reflect.apply(e,this,t);var i=Yt(this),n=this.startNode();i.parsePropertyName(n);var s=i.type;if(s===De.parenL)return Reflect.apply(e,this,t);if(s!==De.braceR&&s!==De.eq&&s!==De.semi){if(this.isContextual("async")||this.isContextual("get")||this.isContextual("set"))return Reflect.apply(e,this,t);if(this.isContextual("static")){if(s===De.star)return Reflect.apply(e,this,t);var a=Yt(i);a.parsePropertyName(n);var o=a.type;if(o===De.parenL)return Reflect.apply(e,this,t);if(o!==De.braceR&&o!==De.eq&&o!==De.semi&&(i.isContextual("async")||i.isContextual("get")||i.isContextual("set")))return Reflect.apply(e,this,t)}}var u=this.startNode();return u.static=s!==De.braceR&&s!==De.eq&&this.eatContextual("static"),this.parsePropertyName(u),u.value=this.eat(De.eq)?this.parseExpression():null,this.finishNode(u,"FieldDefinition"),this.semicolon(),u}return t})(),Qt=R.inited?R.module.parseErrors:R.module.parseErrors=(function(){"use strict";function e(e){class t extends e{constructor(e,t,r){super(r);var i=lt(e.input,t),n=i.column,s=i.line;this.column=n,this.inModule=e.inModule,this.line=s}}return Reflect.defineProperty(t,"name",{configurable:!0,value:e.name}),t}return{ReferenceError:e(ReferenceError),SyntaxError:e(SyntaxError)}})(),Zt=R.inited?R.module.acornParserErrorMessages:R.module.acornParserErrorMessages=(function(){"use strict";var e="Keyword must not contain escaped characters",t="Invalid or unexpected token",r="Unexpected end of input",i="Unexpected token",n="missing ) after argument list",s="Duplicate export of '",a="Duplicate export '",o="'import' and 'export' may only appear at the top level",u="'import' and 'export' may appear only with 'sourceType: module'",l="Escape sequence in keyword ",c=new Set(["await is only valid in async function","HTML comments are not allowed in modules","Cannot use 'import.meta' outside a module","new.target expression is not allowed here","Illegal return statement",e,t,r,"Unexpected eval or arguments in strict mode","Unexpected identifier","Unexpected reserved word","Unexpected strict mode reserved word","Unexpected string",i,n,"Unterminated template literal"]),p=new Map([["'return' outside of function","Illegal return statement"],["Binding arguments in strict mode","Unexpected eval or arguments in strict mode"],["Binding await in strict mode","Unexpected reserved word"],["Cannot use keyword 'await' outside an async function","await is only valid in async function"],["The keyword 'await' is reserved","Unexpected reserved word"],["The keyword 'yield' is reserved","Unexpected strict mode reserved word"],["Unterminated string constant",t],["Unterminated template","Unterminated template literal"],["new.target can only be used in functions","new.target expression is not allowed here"]]),h={enable:e=>(e.parseExprList=f,e.raise=d,e.raiseRecoverable=d,e.unexpected=m,e)};function f(e,t,r,i){for(var s=[],a=!0;!this.eat(e);){if(a)a=!1;else if(r||e!==De.parenR?this.expect(De.comma):this.eat(De.comma)||this.raise(this.start,n),t&&this.afterTrailingComma(e))break;var o=void 0;r&&this.type===De.comma?o=null:this.type===De.ellipsis?(o=this.parseSpread(i),i&&this.type===De.comma&&-1===i.trailingComma&&(i.trailingComma=this.start)):o=this.parseMaybeAssign(!1,i),s.push(o)}return s}function d(t,r){if(p.has(r))r=p.get(r);else if(r===o||r===u)r=i+" "+this.type.label;else if(r.startsWith(a))r=r.replace(a,s);else if(r.startsWith(l))r=e;else if(!c.has(r)&&!r.startsWith(i))return;throw new Qt.SyntaxError(this,t,r)}function m(e){void 0===e&&(e=this.start);var i=this.type===De.eof?r:t;this.raise(e,i)}return h})(),er=R.inited?R.module.parseLookahead:R.module.parseLookahead=(function(){"use strict";return function(e){var t=Yt(e);return t.next(),t}})(),tr=R.inited?R.module.acornParserFirstAwaitOutSideFunction:R.module.acornParserFirstAwaitOutSideFunction=(function(){"use strict";var e={enable:e=>(e.firstAwaitOutsideFunction=null,e.parseAwait=Kt(e.parseAwait,t),e.parseForStatement=Kt(e.parseForStatement,r),e)};function t(e,t){return this.inAsync||this.inFunction||null!==this.firstAwaitOutsideFunction||(this.firstAwaitOutsideFunction=lt(this.input,this.start)),Reflect.apply(e,this,t)}function r(e,t){if(this.inAsync||this.inFunction||null!==this.firstAwaitOutsideFunction)return Reflect.apply(e,this,t);var r=t[0],i=er(this),n=i.start,s=Reflect.apply(e,this,t);return r.await&&null===this.firstAwaitOutsideFunction&&(this.firstAwaitOutsideFunction=lt(this.input,n)),s}return e})(),rr=R.inited?R.module.acornParserFirstReturnOutSideFunction:R.module.acornParserFirstReturnOutSideFunction=(function(){"use strict";var e={enable:e=>(e.firstReturnOutsideFunction=null,e.parseReturnStatement=Kt(e.parseReturnStatement,t),e)};function t(e,t){return this.inFunction||null!==this.firstReturnOutsideFunction||(this.firstReturnOutsideFunction=lt(this.input,this.start)),Reflect.apply(e,this,t)}return e})(),ir=R.inited?R.module.acornParserFunctionParamsStart:R.module.acornParserFunctionParamsStart=(function(){"use strict";var e={enable:e=>(e.parseFunctionParams=Kt(e.parseFunctionParams,t),e)};function t(e,t){var r=t[0];return r.functionParamsStart=this.start,Reflect.apply(e,this,t)}return e})(),nr=R.inited?R.module.acornParserHTMLComment:R.module.acornParserHTMLComment=(function(){"use strict";var e=33,t=45,r=60,i=62,n="HTML comments are not allowed in modules",s=$t.lineBreakRegExp,a={enable:e=>(e.readToken_lt_gt=Kt(e.readToken_lt_gt,o),e.readToken_plus_min=Kt(e.readToken_plus_min,u),e)};function o(i,s){if(this.inModule){var a=s[0],o=this.input,u=this.pos,l=o.charCodeAt(u+1);a===r&&l===e&&o.charCodeAt(u+2)===t&&o.charCodeAt(u+3)===t&&this.raise(u,n)}return Reflect.apply(i,this,s)}function u(e,r){if(this.inModule){var a=r[0],o=this.input,u=this.lastTokEnd,l=this.pos,c=o.charCodeAt(l+1);c!==a||c!==t||o.charCodeAt(l+2)!==i||0!==u&&!s.test(o.slice(u,l))||this.raise(l,n)}return Reflect.apply(e,this,r)}return a})(),sr=R.inited?R.module.acornParserImport:R.module.acornParserImport=(function(){"use strict";var e="Cannot use 'import.meta' outside a module",t="Keyword must not contain escaped characters",r="'import.meta' is not a valid assignment target",i="Invalid left-hand side in assignment",n="Unexpected identifier",s="Unexpected string",a="Unexpected token",o={enable:e=>(De._import.startsExpr=!0,e.checkLVal=Kt(e.checkLVal,u),e.parseExport=Kt(e.parseExport,l),e.parseExprAtom=Kt(e.parseExprAtom,c),e.parseNew=Kt(e.parseNew,p),e.parseStatement=Kt(e.parseStatement,f),e.parseSubscript=Kt(e.parseSubscript,h),e)};function u(e,t){var n=t[0],s=n.type,a=n.start;if("CallExpression"===s&&"Import"===n.callee.type)throw new Qt.ReferenceError(this,a,i);if("MetaProperty"===s&&"import"===n.meta.name&&"meta"===n.property.name){var o=this.type,u=Qt.SyntaxError;throw o!==De.eq&&o!==De.incDec||"meta"!==this.input.slice(this.lastTokStart,this.lastTokEnd)||(u=Qt.ReferenceError),new u(this,a,r)}return Reflect.apply(e,this,t)}function l(e,t){if(er(this).type!==De.star)return Reflect.apply(e,this,t);var r=t[0],i=t[1];this.next();var n=this.start,s=this.startLoc;this.next();var a="ExportAllDeclaration";if(this.eatContextual("as")){var o=this.parseIdent(!0);this.checkExport(i,o.name,o.start);var u=this.startNodeAt(n,s);a="ExportNamedDeclaration",u.exported=o,r.declaration=null,r.specifiers=[this.finishNode(u,"ExportNamespaceSpecifier")]}return this.expectContextual("from"),this.type!==De.string&&this.unexpected(),r.source=this.parseExprAtom(),this.semicolon(),this.finishNode(r,a)}function c(r,i){if(this.type===De._import){var s=er(this),a=s.type;if(a===De.dot)return(function(r){var i=r.startNode(),s=r.parseIdent(!0);i.meta=s,r.expect(De.dot);var a=r.containsEsc,o=r.parseIdent(!0);return i.property=o,"meta"!==o.name?r.raise(o.start,n):a?r.raise(o.start,t):r.inModule||r.raise(s.start,e),r.finishNode(i,"MetaProperty")})(this);if(a===De.parenL)return(function(e){var t=e.startNode();return e.expect(De._import),e.finishNode(t,"Import")})(this);this.unexpected()}var o=Reflect.apply(r,this,i),u=o.type;return u!==De._false&&u!==De._null&&u!==De._true||(o.raw=""),o}function p(e,t){var r=er(this);return r.type===De._import&&er(r).type===De.parenL&&this.unexpected(),Reflect.apply(e,this,t)}function h(e,t){var r=t[0],i=t[1],n=t[2];if("Import"===r.type&&this.type===De.parenL){var s=this.startNodeAt(i,n);this.expect(De.parenL),s.arguments=[this.parseMaybeAssign()],s.callee=r,this.expect(De.parenR),this.finishNode(s,"CallExpression"),t[0]=s}return Reflect.apply(e,this,t)}function f(e,t){var r=t[1];if(this.type===De._import){var i,o=er(this),u=o.start,l=o.type;if(l===De.dot||l===De.parenL){var c=this.startNode(),p=this.parseMaybeAssign();return this.parseExpressionStatement(c,p)}this.inModule&&(r||this.options.allowImportExportEverywhere)||(i=l===De.name?n:l===De.string?s:a+" "+l.label,this.raise(u,i))}return Reflect.apply(e,this,t)}return o})(),ar=R.inited?R.module.acornParserNumericSeparator:R.module.acornParserNumericSeparator=(function(){"use strict";var e=48,t=57,r=97,i=95,n=65,s={enable:e=>(e.readInt=a,e)};function a(s,a){for(var o=this.pos,u="number"==typeof a,l=u?a:1/0,c=-1,p=0;++c<l;){var h=this.input.charCodeAt(this.pos);if(h!==i){var f=1/0;if(h>=r?f=h-r+10:h>=n?f=h-n+10:h>=e&&h<=t&&(f=h-e),f>=s)break;++this.pos,p=p*s+f}else++this.pos}var d=this.pos;return d===o||u&&d-o!==a?null:p}return s})(),or=R.inited?R.module.acornParserLiteral:R.module.acornParserLiteral=(function(){"use strict";var e={enable:e=>(e.parseLiteral=t,e.parseTemplateElement=r,e)};function t(e){var t=this.startNode();return t.raw="",t.value=e,this.next(),this.finishNode(t,"Literal")}function r(){var e=this.startNode();return e.value={cooked:"",raw:""},this.next(),e.tail=this.type===De.backQuote,this.finishNode(e,"TemplateElement")}return e})(),ur=R.inited?R.module.utilAlwaysFalse:R.module.utilAlwaysFalse=(function(){"use strict";return function(){return!1}})(),lr=R.inited?R.module.acornParserTolerance:R.module.acornParserTolerance=(function(){"use strict";var e=new Map,t={enable:e=>(e.isDirectiveCandidate=ur,e.strictDirective=ur,e.isSimpleParamList=ke,e.adaptDirectivePrologue=L,e.checkLocalExport=L,e.checkParams=L,e.checkPatternErrors=L,e.checkPatternExport=L,e.checkPropClash=L,e.checkVariableExport=L,e.checkYieldAwaitInDefaultParams=L,e.declareName=L,e.invalidStringToken=L,e.validateRegExpFlags=L,e.validateRegExpPattern=L,e.checkExpressionErrors=r,e.enterScope=i,e)};function r(e){return!!e&&-1!==e.shorthandAssign}function i(t){this.scopeStack.push((function(t){var r=e.get(t);return void 0===r&&(r={flags:t,functions:[],lexical:[],var:[]},e.set(t,r)),r})(t))}return t})(),cr=R.inited?R.module.parseGetIdentifiersFromPattern:R.module.parseGetIdentifiersFromPattern=(function(){"use strict";return function(e){for(var t=[],r=[e],i=-1;++i<r.length;){var n=r[i];if(null!==n)switch(n.type){case"Identifier":t.push(n);break;case"Property":case"ObjectProperty":r.push(n.value);break;case"AssignmentPattern":r.push(n.left);break;case"ObjectPattern":r.push(...n.properties);break;case"ArrayPattern":r.push(...n.elements);break;case"RestElement":r.push(n.argument)}}return t}})(),pr=R.inited?R.module.acornParserTopLevel:R.module.acornParserTopLevel=(function(){"use strict";var e={enable:e=>(e.parseTopLevel=t,e)};function t(e){Array.isArray(e.body)||(e.body=[]);for(var t=e.body,i={},n=new Set,s=new Set,a=new Set,o=this.inModule,u={firstAwaitOutsideFunction:null,firstReturnOutsideFunction:null,identifiers:s,importedBindings:a,insertIndex:e.start,insertPrefix:""},l=!1;this.type!==De.eof;){var c=this.parseStatement(null,!0,i),p=c.expression,h=c.type;l||("ExpressionStatement"===h&&"Literal"===p.type&&"string"==typeof p.value?(u.insertIndex=c.end,u.insertPrefix=";"):l=!0);var f=c;if("ExportDefaultDeclaration"!==h&&"ExportNamedDeclaration"!==h||(f=c.declaration,null!==f&&(h=f.type)),"VariableDeclaration"===h)for(var d=0,m=f.declarations,v=null==m?0:m.length;d<v;d++)for(var g=m[d],y=cr(g.id),x=0,b=null==y?0:y.length;x<b;x++){var w=y[x],E=w.name;o&&n.has(E)&&r(this,w.start,E),s.add(E)}else if("ClassDeclaration"===h){var S=f,R=S.id;null!==R&&s.add(R.name)}else if("FunctionDeclaration"===h){var P=f,_=P.id;if(null!==_){var k=_.name;o&&s.has(k)&&r(this,_.start,k),n.add(k),s.add(k)}}else if("ImportDeclaration"===h)for(var I=0,A=f.specifiers,N=null==A?0:A.length;I<N;I++){var C=A[I].local,O=C.name;a.has(O)&&r(this,C.start,O),a.add(O),s.add(O)}t.push(c)}return this.next(),u.firstAwaitOutsideFunction=this.firstAwaitOutsideFunction,u.firstReturnOutsideFunction=this.firstReturnOutsideFunction,e.top=u,this.finishNode(e,"Program")}function r(e,t,r){throw new Qt.SyntaxError(e,t,"Identifier '"+r+"' has already been declared")}return e})(),hr=R.inited?R.module.utilDefaults:R.module.utilDefaults=(function(){"use strict";return function(e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];for(var n in i)!M(i,n)||void 0!==e[n]&&M(e,n)||(e[n]=i[n])}return e}})(),fr=R.inited?R.module.Parser:R.module.Parser=(function(){"use strict";var e=at(Fe[6]),t=new Map([[2,"module"],[1,"script"]]),r={create:function(t,i){i=r.createOptions(i);var n=i,s=n.strict,a=new xt(i,t);return Jt.enable(a),Xt.enable(a),Zt.enable(a),tr.enable(a),rr.enable(a),ir.enable(a),nr.enable(a),sr.enable(a),ar.enable(a),or.enable(a),lr.enable(a),pr.enable(a),void 0!==s&&(a.strict=!!s,a.strict||(a.reservedWords=e)),a},createOptions:function(e){var i=hr({},e,r.defaultOptions),n=i.sourceType,s=t.get(n);return void 0!==s&&(n=s),i.sourceType=n,i},defaultOptions:{allowAwaitOutsideFunction:!0,allowReturnOutsideFunction:!1,ecmaVersion:10,sourceType:"module",strict:void 0},parse(e,t){var i=r.create(e,t),n=i.parse();return n.inModule=i.inModule,n.strict=i.strict,n}};return r})(),dr=R.inited?R.module.utilAscendingComparator:R.module.utilAscendingComparator=(function(){"use strict";return function(e,t){return e>t?1:e<t?-1:0}})(),mr=R.inited?R.module.Visitor:R.module.Visitor=(function(){"use strict";var e=new Map,t=new Set(["alternate","argument","arguments","block","body","callee","cases","consequent","declaration","declarations","discriminant","elements","expression","expressions","finalizer","handler","init","key","left","object","properties","right","superClass","test","update","value"]);class r{visit(e,t){this.reset(t);var r=this.possibleIndexes;Array.isArray(r)&&0!==r.length&&(this.possibleEnd=r.length,this.possibleStart=0,this.visitWithoutReset(e))}visitWithoutReset(e){var t=e.getValue();if(D(t))if(Array.isArray(t))e.each(this,"visitWithoutReset");else{var r="visit"+t.type;"function"==typeof this[r]?this[r](e):this.visitChildren(e)}}visitChildren(r){var i=r.getValue(),n=i.end,s=i.start,a=this.possibleIndexes,o=this.possibleStart,u=this.possibleEnd,l=o,c=u;if("number"==typeof s&&"number"==typeof n){for(;l<c&&a[l]<s;)l+=1;for(;l<c&&a[c-1]>n;)c-=1}if(l<c){this.possibleStart=l,this.possibleEnd=c;for(var p=(function(r){var i=e.get(r);if(void 0!==i)return i;i=[];for(var n=T(r),s="Property"!==r.type||!r.computed,a=0,o=null==n?0:n.length;a<o;a++){var u=n[a];s&&"key"===u||t.has(u)&&D(r[u])&&i.push(u)}return e.set(r,i),i})(i),h=0,f=null==p?0:p.length;h<f;h++){var d=p[h];r.call(this,"visitWithoutReset",d)}this.possibleStart=o,this.possibleEnd=u}}}return B(r.prototype,null),r})(),vr=R.inited?R.module.parseGetNamesFromPattern:R.module.parseGetNamesFromPattern=(function(){"use strict";return function(e){for(var t=cr(e),r=[],i=0,n=null==t?0:t.length;i<n;i++){var s=t[i].name;r.push(s)}return r}})(),gr=R.inited?R.module.parseGetShadowed:R.module.parseGetShadowed=(function(){"use strict";return function(e,t,r){var i="arguments"===t,n=null;return e.getParentNode((function(s){var a=s.type;if("WithStatement"===a){var o=e.getValue();return n=s.object===o?null:s,null!==n}var u=r.get(s);void 0===u&&(u=new Map,r.set(s,u));var l=u.get(t);if(void 0!==l)return n=l,null!==n;var c="FunctionExpression"===a,p=c||"FunctionDeclaration"===a;if(i&&p)return n=s,u.set(t,n),!0;if("BlockStatement"===a)for(var h=0,f=s.body,d=null==f?0:f.length;h<d;h++){var m=f[h];if("VariableDeclaration"===m.type)for(var v=0,g=m.declarations,y=null==g?0:g.length;v<y;v++)for(var x=g[v],b=vr(x.id),w=0,E=null==b?0:b.length;w<E;w++){var S=b[w];if(S===t)return n=x,u.set(t,n),!0}}if("CatchClause"===a){var R=s.param;if(null!==R&&R.name===t)return n=R,u.set(t,n),!0}if(c){var P=s.id;if(null!==P&&P.name===t)return n=s,u.set(t,n),!0}if(p||"ArrowFunctionExpression"===a)for(var _=0,k=s.params,I=null==k?0:k.length;_<I;_++){var A=k[_],N=vr(A),C=N[0];if(C===t)return n=A,u.set(t,n),!0}u.set(t,null)})),n}})(),yr=R.inited?R.module.parseIsShadowed:R.module.parseIsShadowed=(function(){"use strict";return function(e,t,r){return null!==gr(e,t,r)}})(),xr=R.inited?R.module.parseIsOutsideFunction:R.module.parseIsOutsideFunction=(function(){"use strict";return function(e,t,r){var i=!1;return e.getParentNode((function(e){var n=e.type,s=r.get(e);void 0===s&&(s=new Map,r.set(e,s));var a=s.get(t);return void 0!==a?i=a:"Program"===n?(i=!0,s.set(t,i),!0):(s.set(t,!1),"ArrowFunctionExpression"===n||"FunctionDeclaration"===n||"FunctionExpression"===n||void 0)})),i}})(),br=R.inited?R.module.parsePad:R.module.parsePad=(function(){"use strict";return function(e,t,r,i){for(var n=e.slice(r,i),s=n.split("\n"),a=t.split("\n"),o=a.length-1,u=s.length,l=o-1;++l<u;){var c=s[l],p=c.charCodeAt(c.length-1);l>o&&(a[l]=""),13===p&&(a[l]+="\r")}return a.join("\n")}})(),wr=R.inited?R.module.parseOverwrite:R.module.parseOverwrite=(function(){"use strict";return function(e,t,r,i){var n=e.magicString,s=br(n.original,i,t,r);return n.overwrite(t,r,s)}})(),Er=R.inited?R.module.visitorAssignment:R.module.visitorAssignment=(function(){"use strict";var e=new Map,t=new Map;function r(r,i,n){var s=r.assignableBindings,a=r.importedBindings,o=r.magicString,u=r.runtimeName,l=i.getValue(),c=l[n],p=vr(c),h=l.end,f=l.start;if(r.transformImportBindingAssignments)for(var d=0,m=null==p?0:p.length;d<m;d++){var v=p[d];if(a.has(v)&&!yr(i,v,t)){var g=o.original,y=l.right,x=u+".b("+JSON.stringify(g.slice(c.start,c.end))+',"'+l.operator+'"';void 0!==y&&(x+=","+g.slice(y.start,y.end)),x+=")",wr(r,f,h,x);break}}var b=r.transformInsideFunctions,w=r.transformOutsideFunctions;if(b||w)for(var E=b&&w,S=0,R=null==p?0:p.length;S<R;S++){var P=p[S];if(s.has(P)&&!yr(i,P,t)&&(E||b&&!xr(i,P,e)||w&&xr(i,P,e))){o.prependLeft(f,u+".u(").prependRight(h,")");break}}}return new class extends mr{reset(e){this.assignableBindings=null,this.importedBindings=null,this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.transformImportBindingAssignments=!1,this.transformInsideFunctions=!1,this.transformOutsideFunctions=!1,void 0!==e&&(this.assignableBindings=e.assignableBindings,this.importedBindings=e.importedBindings,this.magicString=e.magicString,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName,this.transformImportBindingAssignments=e.transformImportBindingAssignments,this.transformInsideFunctions=e.transformInsideFunctions,this.transformOutsideFunctions=e.transformOutsideFunctions)}visitAssignmentExpression(e){r(this,e,"left"),e.call(this,"visitWithoutReset","right")}visitUpdateExpression(e){r(this,e,"argument")}}})(),Sr=R.inited?R.module.parseIsBindingIdentifier:R.module.parseIsBindingIdentifier=(function(){"use strict";return function(e,t){if("Identifier"!==e.type)return!1;if(void 0===t)return!0;var r=t.type;return"Property"===r?t.computed||t.shorthand:("AssignmentExpression"!==r&&"AssignmentPattern"!==r||t.left!==e)&&("UpdateExpression"!==r||t.argument!==e)&&"BreakStatement"!==r&&"ContinueStatement"!==r&&"ImportDefaultSpecifier"!==r&&"ImportNamespaceSpecifier"!==r&&"ImportSpecifier"!==r&&"LabeledStatement"!==r}})(),Rr=R.inited?R.module.visitorEval:R.module.visitorEval=(function(){"use strict";var e=new Map;return new class extends mr{reset(e){this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.strict=!1,this.transforms=0,this.transformUpdateBindings=!1,void 0!==e&&(this.magicString=e.magicString,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName,this.strict=e.strict,this.transformUpdateBindings=e.transformUpdateBindings)}visitCallExpression(e){var t=e.getValue(),r=t.callee;if("eval"===r.name){if(0!==t.arguments.length){this.transforms|=8;var i=t.end,n=this.magicString,s=this.runtimeName,a=this.strict?s+".c":"(eval==="+s+".v?"+s+".c:"+s+".k)";n.prependLeft(r.end,"("+a).prependRight(i,")"),this.transformUpdateBindings&&n.prependLeft(t.start,s+".u(").prependRight(i,")"),e.call(this,"visitWithoutReset","arguments")}}else this.visitChildren(e)}visitIdentifier(t){var r=t.getValue();if("eval"===r.name){var i=t.getParentNode(),n=i.type;if(("UnaryExpression"!==n||"typeof"!==i.operator)&&Sr(r,i)&&!yr(t,"eval",e)){this.transforms|=8;var s=r.end,a=r.start,o=this.runtimeName,u=this.strict?o+".e":"(eval==="+o+".v?"+o+".e:eval)";"Property"===n&&i.shorthand?this.magicString.prependLeft(s,":"+u):wr(this,a,s,u)}}}}})(),Pr=R.inited?R.module.utilEscapeRegExp:R.module.utilEscapeRegExp=(function(){"use strict";var e=/[\\^$.*+?()[\]{}|]/g;return function(t){return"string"==typeof t?t.replace(e,"\\$&"):""}})(),_r=R.inited?R.module.parseFindIndexes:R.module.parseFindIndexes=(function(){"use strict";return function(e,t){var r=[],i=t.length;if(0===i)return r;for(var n,s=i-1,a=RegExp("\\b(?:"+(function(){for(var e=-1,r="";++e<i;)r+=Pr(t[e])+(e===s?"":"|");return r})()+")\\b","g");null!==(n=a.exec(e));){var o=n,u=o.index;0!==u&&46===e.charCodeAt(u-1)||r.push(u)}return r}})(),kr=R.inited?R.module.visitorGlobals:R.module.visitorGlobals=(function(){"use strict";var e=new Map;return new class extends mr{reset(e){this.globals=null,this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.transforms=0,void 0!==e&&(this.globals=e.globals,this.magicString=e.magicString,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName)}visitCallExpression(t){var r=t.getValue(),i=r.callee;if("MemberExpression"===i.type){var n=i.object,s=n.name;if(this.globals.has(s)){var a=r.arguments;if(0!==a.length&&!yr(t,s,e)){if("console"===s){for(var o=!0,u=0,l=null==a?0:a.length;u<l;u++){var c=a[u].type;if("Literal"!==c&&"TemplateLiteral"!==c){o=!1;break}}if(o)return;this.transforms|=1}else"Reflect"===s&&(this.transforms|=64);this.magicString.prependLeft(n.start,this.runtimeName+".g."),t.call(this,"visitWithoutReset","arguments")}}else this.visitChildren(t)}else this.visitChildren(t)}visitIdentifier(t){var r=t.getValue(),i=r.name;if(this.globals.has(i)){var n=t.getParentNode(),s=n.type;if(("UnaryExpression"!==s||"typeof"!==n.operator)&&Sr(r,n)&&!yr(t,i,e)){"console"===i?this.transforms|=1:"Reflect"===i&&(this.transforms|=64);var a=this.runtimeName+".g.",o=r.start;"Property"===s&&n.shorthand&&(a=":"+a+i,o=r.end),this.magicString.prependLeft(o,a)}}}}})(),Ir=R.inited?R.module.parseIndexOfPragma:R.module.parseIndexOfPragma=(function(){"use strict";return function(e,t){for(var r=0;;){et.lastIndex=r,r+=et.exec(e)[0].length;var i=Ht.exec(e.slice(r));if(null===i)return-1;if((i[1]||i[2])===t)return r;r+=i[0].length}}})(),Ar=R.inited?R.module.parseHasPragma:R.module.parseHasPragma=(function(){"use strict";return function(e,t){var r=Ir(e,t);return-1!==r&&(r>=13&&"use module"===t?-1===Ir(e.slice(0,r),"use script"):!(r>=13&&"use script"===t)||-1===Ir(e.slice(0,r),"use module"))}})(),Nr=R.inited?R.module.parsePreserveChild:R.module.parsePreserveChild=(function(){"use strict";return function(e,t,r){var i=t[r],n=i.start,s=t.start,a="";if(n>e.firstLineBreakPos){var o=n-s;a=7===o?"       ":" ".repeat(o)}return wr(e,s,n,a)}})(),Cr=R.inited?R.module.parsePreserveLine:R.module.parsePreserveLine=(function(){"use strict";return function(e,{end:t,start:r}){return wr(e,r,t,"")}})(),Or=R.inited?R.module.utilEscapeQuotes:R.module.utilEscapeQuotes=(function(){"use strict";var e=new Map([[39,/\\?'/g],[34,/\\?"/g]]);return function(t,r=34){if("string"!=typeof t)return"";var i=String.fromCharCode(r);return t.replace(e.get(r),"\\"+i)}})(),Tr=R.inited?R.module.utilToString:R.module.utilToString=(function(){"use strict";var e=String;return function(t){if("string"==typeof t)return t;try{return e(t)}catch(e){}return""}})(),Mr=R.inited?R.module.utilUnescapeQuotes:R.module.utilUnescapeQuotes=(function(){"use strict";var e=new Map([[39,/\\'/g],[34,/\\"/g]]);return function(t,r=34){if("string"!=typeof t)return"";var i=String.fromCharCode(r);return t.replace(e.get(r),i)}})(),Lr=R.inited?R.module.utilStripQuotes:R.module.utilStripQuotes=(function(){"use strict";return function(e,t){if("string"!=typeof e)return"";var r=e.charCodeAt(0),i=e.charCodeAt(e.length-1);if(void 0===t&&(39===r&&39===i?t=39:34===r&&34===i&&(t=34)),void 0===t)return e;var n=e.slice(1,-1);return Mr(n,t)}})(),Dr=R.inited?R.module.utilToStringLiteral:R.module.utilToStringLiteral=(function(){"use strict";var e=/[\u2028\u2029]/g,t=new Map([["\u2028","\\u2028"],["\u2029","\\u2029"]]);function r(e){return"\\"+t.get(e)}return function(t,i=34){var n=JSON.stringify(t);if("string"!=typeof n&&(n=Tr(t)),n=n.replace(e,r),34===i&&34===n.charCodeAt(0))return n;var s=String.fromCharCode(i),a=Lr(n,i);return s+Or(a,i)+s}})(),Fr=R.inited?R.module.visitorImportExport:R.module.visitorImportExport=(function(){"use strict";function e(){return{imports:new Map,reExports:new Map,star:!1}}function t(e,t,r){e.hoistedExports.push(...r),t.declaration?Nr(e,t,"declaration"):Cr(e,t)}function r(e,t){Cr(e,t)}return new class extends mr{finalizeHoisting(){var e=this.top,t=e.importedBindings,r=e.insertPrefix;0!==t.size&&(r+=(this.generateVarDeclarations?"var ":"let ")+[...t].join(",")+";"),r+=(function(e,t){var r="",i=t.length;if(0===i)return r;var n=i-1,s=-1;r+=e.runtimeName+".x([";for(var a=0,o=null==t?0:t.length;a<o;a++){var u=t[a],l=u[0],c=u[1];r+='["'+l+'",()=>'+c+"]"+(++s===n?"":",")}return r+="]);",r})(this,this.hoistedExports);var i=this.runtimeName;this.importSpecifierMap.forEach((function(e,t){r+=i+".w("+Dr(t);var n="";e.imports.forEach((function(e,t){var r=(function e(t,r){return-1===r.indexOf(t)?t:e(a(t),r)})("v",e);n+=(""===n?"":",")+'["'+t+'",'+("*"===t?"null":'["'+e.join('","')+'"]')+",function("+r+"){"+e.join("=")+"="+r+"}]"})),e.reExports.forEach((function(e,t){for(var r=0,s=null==e?0:e.length;r<s;r++){var a=e[r];n+=(""===n?"":",")+'["'+a+'",null,'+i+'.f("'+a+'","'+t+'")]'}})),e.star&&(n+=(""===n?"":",")+'["*",null,'+i+".n()]"),""!==n&&(r+=",["+n+"]"),r+=");"})),this.magicString.prependLeft(e.insertIndex,r),this.yieldIndex+=r.length}reset(e){if(this.assignableBindings=null,this.firstLineBreakPos=-1,this.generateVarDeclarations=!1,this.hoistedExports=null,this.hoistedImportsString="",this.importSpecifierMap=null,this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.sourceType=null,this.temporalBindings=null,this.top=null,this.transforms=0,this.yieldIndex=0,void 0!==e){var t=e.magicString;this.assignableBindings=new Set,this.firstLineBreakPos=t.original.search(Ye),this.generateVarDeclarations=e.generateVarDeclarations,this.hoistedExports=[],this.importSpecifierMap=new Map,this.magicString=t,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName,this.sourceType=e.sourceType,this.temporalBindings=new Set,this.top=e.top,this.yieldIndex=e.yieldIndex}}visitCallExpression(e){var t=e.getValue(),r=t.callee;"Import"===r.type?0!==t.arguments.length&&(this.transforms|=2,wr(this,r.start,r.end,this.runtimeName+".i"),e.call(this,"visitWithoutReset","arguments")):this.visitChildren(e)}visitImportDeclaration(t){if(2===this.sourceType){this.transforms|=16;var i=this.importSpecifierMap,n=this.temporalBindings,s=t.getValue(),a=s.source.value,o=s.specifiers,u=i.get(a);void 0===u&&(u=e(),i.set(a,u));for(var l=u,c=l.imports,p=0,h=null==o?0:o.length;p<h;p++){var f=o[p],d=f.type,m="*";"ImportSpecifier"===d?m=f.imported.name:"ImportDefaultSpecifier"===d&&(m="default");var v=c.get(m);void 0===v&&(v=[],c.set(m,v));var g=f.local.name;v.push(g),"*"!==m&&n.add(g)}r(this,s)}}visitExportAllDeclaration(t){if(2===this.sourceType){this.transforms|=4;var i=this.importSpecifierMap,n=t.getValue(),s=n.source.value,a=i.get(s);void 0===a&&(a=e(),i.set(s,a)),a.star=!0,r(this,n)}}visitExportDefaultDeclaration(e){if(2===this.sourceType){this.transforms|=4;var r=e.getValue(),i=r.declaration,n=this.magicString,s=this.runtimeName,a=i.type,o=i.id;void 0===o&&(o=null);var u=null===o?s+"anonymous":o.name;if(null!==o&&"ClassDeclaration"===a||"FunctionDeclaration"===a)null===o&&n.prependLeft(i.functionParamsStart," "+u),t(this,r,[["default",u]]);else{var l=s+".d(",c=");";null!==o||"ArrowFunctionExpression"!==a&&"ClassDeclaration"!==a&&"ClassExpression"!==a&&"FunctionExpression"!==a||(l="const "+u+"=",c=";"+s+".d("+u+");"),"SequenceExpression"===a&&(l+="(",c=")"+c);var p=null===o?s+".o":u;this.hoistedExports.push(["default",p]),wr(this,r.start,i.start,""),wr(this,i.end,r.end,""),n.prependLeft(i.start,l).prependRight(i.end,c)}null!==o&&this.assignableBindings.add(u),e.call(this,"visitWithoutReset","declaration")}}visitExportNamedDeclaration(i){if(2===this.sourceType){this.transforms|=4;var n=this.assignableBindings,s=this.magicString,a=i.getValue(),o=a.declaration,u=a.source,l=a.specifiers;if(null!==o){var c=[],p=o.type;if("ClassDeclaration"===p||"FunctionDeclaration"===p){var h=o.id.name;n.add(h),c.push([h,h])}else if("VariableDeclaration"===p)for(var f=(function({declaration:e,type:t}){if("ExportDefaultDeclaration"===t){var r=e.type;return"FunctionDeclaration"===r||"ClassDeclaration"===r}return"ExportNamedDeclaration"!==t||null===e||"VariableDeclaration"!==e.type||"const"!==e.kind})(a),d=0,m=o.declarations,v=null==m?0:m.length;d<v;d++)for(var g=m[d].id,y=vr(g),x=0,b=null==y?0:y.length;x<b;x++){var w=y[x];f&&n.add(w),c.push([w,w])}t(this,a,c)}else if(null===u){for(var E=[],S=this.top.identifiers,R=0,P=null==l?0:l.length;R<P;R++){var _=l[R],k=_.exported.name,I=_.local.name;if(!S.has(I))throw new Qt.SyntaxError({inModule:!0,input:s.original},_.start,"Export '"+I+"' is not defined in module");n.add(I),E.push([k,I])}t(this,a,E)}else{var A=this.importSpecifierMap,N=u.value,C=A.get(N);void 0===C&&(C=e(),A.set(N,C));for(var O=0,T=null==l?0:l.length;O<T;O++){var M=l[O],L=M.exported.name,D=C,F=D.reExports,j=F.get(L);void 0===j&&(j=[],F.set(L,j));var V="ExportNamespaceSpecifier"===M.type?"*":M.local.name;j.push(V)}r(this,a)}null!==o&&i.call(this,"visitWithoutReset","declaration")}}visitMetaProperty(e){var t=e.getValue(),r=t.meta;"import"===r.name&&(this.transforms|=32,wr(this,r.start,r.end,this.runtimeName+"._"))}}})(),jr=R.inited?R.module.visitorRequire:R.module.visitorRequire=(function(){"use strict";var e=new Map;return new class extends mr{reset(e){this.found=!1,this.possibleIndexes=null,void 0!==e&&(this.possibleIndexes=e.possibleIndexes)}visitCallExpression(t){var r=t.getValue(),i=r.callee;"require"===i.name?0===r.arguments.length||yr(t,"require",e)||(this.found=!0,t.call(this,"visitWithoutReset","arguments")):this.visitChildren(t)}}})(),Vr=R.inited?R.module.utilStripShebang:R.module.utilStripShebang=(function(){"use strict";var e=/^#!.*/;return function(t){return"string"!=typeof t?"":35===t.charCodeAt(0)?t.replace(e,""):t}})(),Gr=R.inited?R.module.parseMaybeIdentifier:R.module.parseMaybeIdentifier=(function(){"use strict";return function(e,t){var r=e.getValue(),i=e.getParentNode();if(Sr(r,i)){for(var n=-2;"MemberExpression"===i.type;){n-=2;var s=e.getNode(n);if(null===s)break;i=s}t(r,i)}}})(),Br=R.inited?R.module.visitorTemporal:R.module.visitorTemporal=(function(){"use strict";var e=new Map;return new class extends mr{reset(e){this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.temporalBindings=null,this.transforms=0,void 0!==e&&(this.magicString=e.magicString,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName,this.temporalBindings=e.temporalBindings)}visitIdentifier(t){var r=this,i=t.getValue(),n=i.name;if(this.temporalBindings.has(n)&&!yr(t,n,e)){var s=this.magicString,a=this.runtimeName;Gr(t,(function(e,t){r.transforms|=128;var i=e.end,o=e.start;if(t.shorthand)s.prependLeft(i,":"+a+'.a("'+n+'",'+n+")");else{var u="",l="";"NewExpression"===t.type&&(u="(",l=")"),wr(r,o,i,u+a+'.a("'+n+'",'+n+")"+l)}}))}}visitExportDefaultDeclaration(e){var t=e.getValue(),r=t.declaration;"FunctionDeclaration"!==r.type&&(this.transforms|=128,this.magicString.appendRight(r.end,this.runtimeName+'.j(["default"]);')),e.call(this,"visitWithoutReset","declaration")}visitExportNamedDeclaration(e){var t=e.getValue(),r=t.declaration,i=t.specifiers,n=new Set;if(null!==r){var s=r.type;if("ClassDeclaration"===s)n.add(r.id.name);else if("VariableDeclaration"===s)for(var a=0,o=r.declarations,u=null==o?0:o.length;a<u;a++)for(var l=o[a].id,c=vr(l),p=0,h=null==c?0:c.length;p<h;p++){var f=c[p];n.add(f)}}else if(null===t.source)for(var d=0,m=null==i?0:i.length;d<m;d++){var v=i[d];n.add(v.exported.name)}else for(var g=0,y=null==i?0:i.length;g<y;g++){var x=i[g];n.add(x.exported.name)}if(0!==n.size){this.transforms|=128;var b=r||t,w=b.end;this.magicString.appendRight(w,";"+this.runtimeName+".j("+JSON.stringify([...n])+");")}null!==r&&e.call(this,"visitWithoutReset","declaration")}}})(),Ur=R.inited?R.module.visitorUndeclared:R.module.visitorUndeclared=(function(){"use strict";var e=new Map;return new class extends mr{reset(e){this.magicString=null,this.possibleIndexes=null,this.runtimeName=null,this.transforms=0,this.undeclared=null,void 0!==e&&(this.magicString=e.magicString,this.possibleIndexes=e.possibleIndexes,this.runtimeName=e.runtimeName,this.undeclared=e.undeclared)}visitIdentifier(t){var r=this,i=t.getValue(),n=i.name;if(this.undeclared.has(n)&&Sr(i,s)&&!yr(t,n,e)){var s=t.getParentNode(),a=this.runtimeName;if("UnaryExpression"===s.type&&"typeof"===s.operator)return this.transforms|=256,void wr(this,i.start,i.end,a+".g."+n);Gr(t,(function(e,t){r.transforms|=256;var i=e.end,s=e.start;if(t.shorthand)r.magicString.prependLeft(i,":"+a+'.t("'+n+'")');else{var o="",u="";"NewExpression"===t.type&&(o="(",u=")"),wr(r,s,i,o+a+'.t("'+n+'")'+u)}}))}}}})(),Wr=R.inited?R.module.Compiler:R.module.Compiler=(function(){"use strict";var e={cjsPaths:!1,cjsVars:!1,generateVarDeclarations:!1,hint:-1,pragmas:!0,runtimeName:"_",sourceType:1,strict:void 0,topLevelReturn:!1},t={createOptions:function(e){return hr({},e,t.defaultOptions)},defaultOptions:e,compile(e,r){e=Vr(e),r=t.createOptions(r),Er.reset(),Rr.reset(),kr.reset(),Fr.reset(),jr.reset(),Br.reset(),Ur.reset();var i={circular:0,code:e,codeWithTDZ:null,filename:null,firstAwaitOutsideFunction:null,firstReturnOutsideFunction:null,mtime:-1,scriptData:null,sourceType:1,transforms:0,yieldIndex:0},n=r,s=n.hint,a=r,o=a.sourceType;1===s?o=1:2===s?o=2:r.pragmas&&(Ar(e,"use module")?o=2:Ar(e,"use script")&&(o=1));var u=_r(e,["export"]),l=_r(e,["eval"]),c=_r(e,["import"]),p=0!==u.length||0!==l.length||0!==c.length;if(!p&&(1===o||3===o))return i;var h,d,m={allowReturnOutsideFunction:r.topLevelReturn||1===o,sourceType:1===o?1:2,strict:r.strict},v=!0;try{h=fr.parse(e,m),v=!1}catch(e){d=e}if(v&&3===o){o=1,m.allowReturnOutsideFunction=!0,m.sourceType=o;try{h=fr.parse(e,m),v=!1}catch(e){}}if(v)throw r.cjsPaths&&(d.inModule=!1),d;var g=r,y=g.cjsVars,x=g.runtimeName,b=h,w=b.strict,E=b.top,S=E.identifiers;Reflect.deleteProperty(h,"inModule"),Reflect.deleteProperty(h,"strict"),Reflect.deleteProperty(h,"top");var R=new Ae(e),P=new Ie(h),_=E.insertIndex;c.push(...u),c.sort(dr),Fr.visit(P,{generateVarDeclarations:r.generateVarDeclarations,magicString:R,possibleIndexes:c,runtimeName:x,sourceType:1===o?1:2,top:E,yieldIndex:_});var k,I=Fr.transforms,A=0!=(2&I),N=0!=(4&I),C=0!=(16&I),O=0!=(32&I);if(3===o&&(o=N||O||C?2:1),A||C){var T=new Set(["Reflect","console"]),M=[];S.has("console")?T.delete("console"):M.push("console"),S.has("Reflect")?T.delete("Reflect"):M.push("Reflect"),kr.visit(P,{globals:T,magicString:R,possibleIndexes:_r(e,M),runtimeName:x})}if(S.has("eval")||Rr.visit(P,{magicString:R,possibleIndexes:l,runtimeName:x,strict:w,transformUpdateBindings:N}),N||C){var L=Fr.assignableBindings;k=_r(e,[...L]),y&&jr.visit(P,{possibleIndexes:_r(e,["require"])});var D=E.importedBindings,F=!jr.found&&0!==D.size,j=k;F&&(j.push(..._r(e,[...D])),j.sort(dr)),Er.visit(P,{assignableBindings:L,importedBindings:D,magicString:R,possibleIndexes:j,runtimeName:x,transformImportBindingAssignments:F,transformInsideFunctions:!0}),Fr.finalizeHoisting()}if(!y&&2===o){for(var V=["__dirname","__filename","arguments","exports","module","require"],G=new Set,B=[],U=0,W=null==V?0:V.length;U<W;U++){var q=V[U];S.has(q)||(G.add(q),B.push(q))}Ur.visit(P,{magicString:R,possibleIndexes:_r(e,B),runtimeName:x,undeclared:G})}if(i.transforms=Rr.transforms|kr.transforms|I|Ur.transforms,0!==i.transforms&&(_=Fr.yieldIndex,i.code=""+R),C){var z=Fr.assignableBindings,H=Fr.temporalBindings;f(i,"codeWithTDZ",(function(){var t=_r(e,[...H]);t.push(...u),t.sort(dr),Er.visit(P,{assignableBindings:z,magicString:R,possibleIndexes:k,runtimeName:x,transformOutsideFunctions:!0}),Br.visit(P,{magicString:R,possibleIndexes:t,runtimeName:x,temporalBindings:H});var r=Br.transforms;return i.transforms|=r,0==(128&r)?null:""+R})),i.circular=-1}return i.firstAwaitOutsideFunction=E.firstAwaitOutsideFunction,i.firstReturnOutsideFunction=E.firstReturnOutsideFunction,i.sourceType=o,i.yieldIndex=_,i}};return t})(),qr=R.inited?R.module.SafeBuffer:R.module.SafeBuffer=U(R.external.Buffer),zr=R.inited?R.module.GenericBuffer:R.module.GenericBuffer=(function(){"use strict";return{alloc:qr.alloc,concat:qr.concat,slice:P(qr.prototype.slice)}})(),Hr=R.inited?R.module.realFs:R.module.realFs=he(k("fs")),$r=R.inited?R.module.safeFs:R.module.safeFs=(function(){"use strict";var e=U(Hr),t=e.realpathSync.native;return"function"==typeof t&&(R.realpathNativeSync=t),M(e,"constants")&&N(e,"constants",U(e.constants)),N(e,"Stats",U(e.Stats)),e})(),Kr=$r.mkdirSync,Jr=$r.readdirSync,Yr=$r.readFileSync,Xr=$r.realpathSync,Qr=$r.Stats,Zr=$r.statSync,ei=$r.unlinkSync,ti=$r.writeFileSync,ri=R.inited?R.module.envLastArgMatch:R.module.envLastArgMatch=(function(){"use strict";return function(e,t,r=1){for(var i=null==e?0:e.length;i--;){var n=t.exec(e[i]);if(null!==n)return Lr(n[r])}}})(),ii=R.inited?R.module.utilGetToStringTag:R.module.utilGetToStringTag=(function(){"use strict";var e=Object.prototype.toString;return function(t){return e.call(t)}})(),ni=R.inited?R.module.realUtil:R.module.realUtil=he(k("util")),si=R.inited?R.module.safeUtil:R.module.safeUtil=(function(){"use strict";var e=U(ni),t=e.inspect,r=t.custom;R.customInspectKey="symbol"==typeof r?r:"inspect";var i=t.defaultOptions;return A(i)||(i={breakLength:60,colors:!1,compact:!0,customInspect:!0,depth:2,maxArrayLength:100,showHidden:!1,showProxy:!1}),R.defaultInspectOptions=i,M(e,"types")&&N(e,"types",U(e.types)),e})(),ai=si.deprecate,oi=si.inspect,ui=si.types,li=si,ci=R.inited?R.module.utilIsRegExp:R.module.utilIsRegExp=(function(){"use strict";return"function"==typeof(ui&&ui.isRegExp)?ui.isRegExp:function(e){return D(e)&&"[object RegExp]"===ii(e)}})(),pi=R.inited?R.module.utilToMatcher:R.module.utilToMatcher=(function(){"use strict";return function(e){return"function"==typeof e?function(t){return e(t)}:ci(e)?function(t){return e.test(t)}:function(t){return t===e}}})(),hi=R.inited?R.module.utilMatches:R.module.utilMatches=(function(){"use strict";return function(e,t){for(var r,i=0,n=null==e?0:e.length;i<n;i++){var s=e[i];if(void 0===r&&(r=pi(t)),r(s))return!0}return!1}})(),fi=R.inited?R.module.utilParseCommand:R.module.utilParseCommand=(function(){"use strict";var e=/(?:[^ "'\\]|\\.)*(["'])(?:(?!\1)[^\\]|\\.)*\1|(?:[^ "'\\]|\\.)+/g;return function(t){var r=[];if("string"==typeof t)for(var i;null!==(i=e.exec(t));)r.push(i[0]);return r}})(),di=R.inited?R.module.envGetFlags:R.module.envGetFlags=(function(){"use strict";return function(){var e=fi(J.NODE_OPTIONS);Array.isArray(Y)&&e.push(...Y);var t={};return f(t,"abortOnUncaughtException",(function(){return hi(e,"--abort-on-uncaught-exception")})),f(t,"check",(function(){return hi(e,/^(?:--check|-c)$/)})),f(t,"esModuleSpecifierResolution",(function(){return ri(e,/^--es-module-specifier-resolution=(.+)$/)})),f(t,"eval",(function(){return hi(e,/^(?:--eval|-e)$/)})),f(t,"experimentalJSONModules",(function(){return hi(e,"--experimental-json-modules")})),f(t,"experimentalPolicy",(function(){return hi(e,"--experimental-policy")})),f(t,"experimentalREPLAwait",(function(){return hi(e,"--experimental-repl-await")})),f(t,"experimentalWorker",(function(){return hi(e,"--experimental-worker")})),f(t,"exposeInternals",(function(){return hi(e,/^--expose[-_]internals$/)})),f(t,"inspectBrk",(function(){return hi(e,/^--(?:debug|inspect)-brk(?:=.+)?$/)})),f(t,"interactive",(function(){return hi(e,/^(?:--interactive|-i)$/)})),f(t,"pendingDeprecation",(function(){return hi(e,"--pending-deprecation")})),f(t,"preserveSymlinks",(function(){return hi(e,"--preserve-symlinks")})),f(t,"preserveSymlinksMain",(function(){return hi(e,"--preserve-symlinks-main")})),f(t,"print",(function(){return hi(e,/^(?:--print|-pe?)$/)})),f(t,"type",(function(){return ri(e,/^--type=(.+)$/)})),f(t,"inspect",(function(){return t.inspectBrk||hi(e,/^--(?:debug|inspect)(?:=.*)?$/)})),f(t,"preloadModules",(function(){for(var t=/^(?:--require|-r)$/,r=e.length,i=[],n=-1;++n<r;)t.test(e[n])&&i.push(Lr(e[++n]));return i})),t}})(),mi=R.inited?R.module.pathIsAbsolute:R.module.pathIsAbsolute=(function(){"use strict";return function(e){if("string"!=typeof e||0===e.length)return!1;if(47===e.charCodeAt(0)){var t=en.WIN32,r=e.charCodeAt(1);if(!t)return 47!==r}return xe(e)}})(),vi=R.inited?R.module.envIsWin32:R.module.envIsWin32=(function(){"use strict";return function(){return"win32"===Z}})(),gi=R.inited?R.module.pathIsSep:R.module.pathIsSep=(function(){"use strict";var e=vi();return function(t){return"number"==typeof t?47===t||e&&92===t:"/"===t||e&&"\\"===t}})(),yi=R.inited?R.module.pathIsRelativePath:R.module.pathIsRelativePath=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;if(0===t)return!1;var r=e.charCodeAt(0);if(46!==r)return!1;if(1===t)return!0;if(r=e.charCodeAt(1),46===r){if(2===t)return!0;r=e.charCodeAt(2)}return gi(r)}})(),xi=R.inited?R.module.utilIsPath:R.module.utilIsPath=(function(){"use strict";return function(e){return"string"==typeof e&&0!==e.length&&(yi(e)||mi(e))}})(),bi=s(1),wi=R.inited?R.module.utilQuotifyJSON:R.module.utilQuotifyJSON=(function(){"use strict";var e=new Set(["false","true"]),t=new Set(['"',"'"]),r=/(|[^a-zA-Z])([a-zA-Z]+)([^a-zA-Z]|)/g;return function(i){return"string"!=typeof i||""===i?i:i.replace(r,(function(r,i,n,s){return t.has(i)||e.has(n)||t.has(s)?r:i+'"'+n+'"'+s}))}})(),Ei=R.inited?R.module.utilParseJSON6:R.module.utilParseJSON6=(function(){"use strict";function e(e){if("string"==typeof e&&e.length)try{return Object(bi.parse)(e)}catch(e){}return null}return function(t){return e(t)||e(wi(t))}})(),Si=R.inited?R.module.utilStripBOM:R.module.utilStripBOM=(function(){"use strict";return function(e){return"string"!=typeof e?"":65279===e.charCodeAt(0)?e.slice(1):e}})(),Ri=R.inited?R.module.fsReadFile:R.module.fsReadFile=(function(){"use strict";return function(e,t){var r=null;try{r=Yr(e,t)}catch(e){}return r&&"utf8"===t?Si(r):r}})(),Pi=R.inited?R.module.envGetOptions:R.module.envGetOptions=(function(){"use strict";return function(){var e=J&&J.ESM_OPTIONS;if("string"!=typeof e)return null;var t=e.trim();if(xi(t)&&(t=Ri(we(t),"utf8"),t=null===t?"":t.trim()),""===t)return null;var r=t.charCodeAt(0);return 39!==r&&123!==r&&34!==r||(t=Ei(t)),t}})(),_i=R.inited?R.module.builtinIds:R.module.builtinIds=(function(){"use strict";var t=e.constructor.builtinModules;if(Array.isArray(t)&&Object.isFrozen(t))t=Array.from(t);else{var r=di(),i=r.exposeInternals;for(var n in t=[],se.natives)i?"internal/bootstrap_loaders"!==n&&"internal/bootstrap/loaders"!==n&&t.push(n):n.startsWith("internal/")||t.push(n)}return t.sort()})(),ki=R.inited?R.module.builtinLookup:R.module.builtinLookup=(function(){"use strict";return new Set(_i)})(),Ii=R.inited?R.module.envHasInspector:R.module.envHasInspector=(function(){"use strict";return function(){return 1===z.variables.v8_enable_inspector||ki.has("inspector")&&A(le("inspector"))}})(),Ai=R.inited?R.module.envIsBrave:R.module.envIsBrave=(function(){"use strict";return function(){return M(ie,"Brave")}})(),Ni=R.inited?R.module.utilIsOwnPath:R.module.utilIsOwnPath=(function(){"use strict";var e=b.PACKAGE_FILENAMES;return function(t){if("string"==typeof t)for(var r=0,i=null==e?0:e.length;r<i;r++){var n=e[r];if(t===n)return!0}return!1}})(),Ci=R.inited?R.module.envHasLoaderModule:R.module.envHasLoaderModule=(function(){"use strict";return function(e){return hi(e,(function({filename:e}){return Ni(e)}))}})(),Oi=R.inited?R.module.envIsInternal:R.module.envIsInternal=(function(){"use strict";return function(){return e.id.startsWith("internal/")}})(),Ti=e,Mi=Ti,Li=Mi.parent,Di=new Set;null!=Li&&!Di.has(Li);)Di.add(Li),Ti=Li,Li=Ti.parent;var Fi=Ti,ji=R.inited?R.module.envIsPreloaded:R.module.envIsPreloaded=(function(){"use strict";return function(){return!!Oi()||"internal/preload"===Fi.id&&Ci(Fi.children)}})(),Vi=R.inited?R.module.envIsCheck:R.module.envIsCheck=(function(){"use strict";return function(){var e=q.length;return(1===e||2===e)&&di().check&&ji()}})(),Gi=R.inited?R.module.envIsCLI:R.module.envIsCLI=(function(){"use strict";return function(){return q.length>1&&ji()}})(),Bi=R.inited?R.module.envIsDevelopment:R.module.envIsDevelopment=(function(){"use strict";return function(){return"development"===J.NODE_ENV}})(),Ui=R.inited?R.module.envIsElectron:R.module.envIsElectron=(function(){"use strict";return function(){return M(ie,"electron")||Ai()}})(),Wi=R.inited?R.module.envIsElectronRenderer:R.module.envIsElectronRenderer=(function(){"use strict";return function(){return"renderer"===re&&Ui()}})(),qi=R.inited?R.module.envIsPrint:R.module.envIsPrint=(function(){"use strict";return function(){return 1===q.length&&di().print&&ji()}})(),zi=R.inited?R.module.envIsEval:R.module.envIsEval=(function(){"use strict";return function(){if(qi())return!0;if(1!==q.length||!ji())return!1;var e=di();return e.eval||!te.isTTY&&!e.interactive}})(),Hi=R.inited?R.module.envIsJamine:R.module.envIsJamine=(function(){"use strict";var e=b.PACKAGE_PARENT_NAME;return function(){return"jasmine"===e}})(),$i=R.inited?R.module.envIsNdb:R.module.envIsNdb=(function(){"use strict";return function(){return M(ie,"ndb")}})(),Ki=R.inited?R.module.envIsNyc:R.module.envIsNyc=(function(){"use strict";return function(){return M(J,"NYC_ROOT_ID")}})(),Ji=R.inited?R.module.envIsREPL:R.module.envIsREPL=(function(){"use strict";return function(){return 1===q.length&&(!!ji()||"<repl>"===Fi.id&&null===Fi.filename&&!1===Fi.loaded&&null==Fi.parent&&Ci(Fi.children))}})(),Yi=R.inited?R.module.envIsRunkit:R.module.envIsRunkit=(function(){"use strict";return function(){return M(J,"RUNKIT_HOST")}})(),Xi=R.inited?R.module.envIsTink:R.module.envIsTink=(function(){"use strict";var e=b.PACKAGE_PARENT_NAME;return function(){return"tink"===e}})(),Qi=R.inited?R.module.envIsYarnPnP:R.module.envIsYarnPnP=(function(){"use strict";return function(){return M(ie,"pnp")}})(),Zi={};f(Zi,"BRAVE",Ai),f(Zi,"CHECK",Vi),f(Zi,"CLI",Gi),f(Zi,"DEVELOPMENT",Bi),f(Zi,"ELECTRON",Ui),f(Zi,"ELECTRON_RENDERER",Wi),f(Zi,"EVAL",zi),f(Zi,"FLAGS",di),f(Zi,"HAS_INSPECTOR",Ii),f(Zi,"INTERNAL",Oi),f(Zi,"JASMINE",Hi),f(Zi,"NDB",$i),f(Zi,"NYC",Ki),f(Zi,"OPTIONS",Pi),f(Zi,"PRELOADED",ji),f(Zi,"PRINT",qi),f(Zi,"REPL",Ji),f(Zi,"RUNKIT",Yi),f(Zi,"TINK",Xi),f(Zi,"WIN32",vi),f(Zi,"YARN_PNP",Qi);var en=Zi,tn=R.inited?R.module.fsStatSync:R.module.fsStatSync=(function(){"use strict";var e=en.ELECTRON,t=Qr.prototype;return function(r){if("string"!=typeof r)return null;var i,n=R.moduleState.statSync;if(null!==n&&(i=n.get(r),void 0!==i))return i;try{i=Zr(r),!e||i instanceof Qr||B(i,t)}catch(e){i=null}return null!==n&&n.set(r,i),i}})(),rn=R.inited?R.module.pathToNamespacedPath:R.module.pathToNamespacedPath=(function(){"use strict";return"function"==typeof Se?Se:Re._makeLong})(),nn=R.inited?R.module.fsStatFast:R.module.fsStatFast=(function(){"use strict";var e,t=Qr.prototype.isFile;return function(r){if("string"!=typeof r)return-1;var i,n=R.moduleState.statFast;return null!==n&&(i=n.get(r),void 0!==i)?i:(i=(function(r){if(void 0===e&&(e="function"==typeof se.fs.internalModuleStat),e){try{return(function(e){var t="string"==typeof e?se.fs.internalModuleStat(rn(e)):-1;return t<0?-1:t})(r)}catch(e){}e=!1}return(function(e){var r=tn(e);return null!==r?Reflect.apply(t,r,[])?0:1:-1})(r)})(r),null!==n&&n.set(r,i),i)}})(),sn=R.inited?R.module.fsExists:R.module.fsExists=(function(){"use strict";return function(e){return-1!==nn(e)}})(),an=R.inited?R.module.utilGetCachePathHash:R.module.utilGetCachePathHash=(function(){"use strict";return function(e){return"string"==typeof e?e.slice(0,8):""}})(),on=R.inited?R.module.pathIsExtMJS:R.module.pathIsExtMJS=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;return t>4&&109===e.charCodeAt(t-3)&&46===e.charCodeAt(t-4)&&106===e.charCodeAt(t-2)&&115===e.charCodeAt(t-1)}})(),un=R.inited?R.module.utilGet:R.module.utilGet=(function(){"use strict";return function(e,t,r){if(null!=e)try{return void 0===r?e[t]:Reflect.get(e,t,r)}catch(e){}}})(),ln=R.inited?R.module.utilGetEnv:R.module.utilGetEnv=(function(){"use strict";return function(e){return un(I.env,e)}})(),cn=R.inited?R.module.utilIsDirectory:R.module.utilIsDirectory=(function(){"use strict";return function(e){return 1===nn(e)}})(),pn=R.inited?R.module.fsMkdir:R.module.fsMkdir=(function(){"use strict";return function(e){if("string"==typeof e)try{return Kr(e),!0}catch(e){}return!1}})(),hn=R.inited?R.module.fsMkdirp:R.module.fsMkdirp=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;for(var t=[];!cn(e);){t.push(e);var r=ge(e);if(e===r)break;e=r}for(var i=t.length;i--;)if(!pn(t[i]))return!1;return!0}})(),fn=R.inited?R.module.utilParseJSON:R.module.utilParseJSON=(function(){"use strict";return function(e){if("string"==typeof e&&e.length)try{return JSON.parse(e)}catch(e){}return null}})(),dn=R.inited?R.module.pathNormalize:R.module.pathNormalize=(function(){"use strict";var e=vi(),t=/\\/g;return e?function(e){return"string"==typeof e?e.replace(t,"/"):""}:function(e){return"string"==typeof e?e:""}})(),mn=R.inited?R.module.pathRelative:R.module.pathRelative=(function(){"use strict";var e=vi();return e?function(e,t){for(var r=e.length,i=t.length,n=e.toLowerCase(),s=t.toLowerCase(),a=-1;++a<r&&92===e.charCodeAt(a););for(var o=r-a,u=-1;++u<i&&92===t.charCodeAt(u););for(var l=i-u,c=o<l?o:l,p=-1,h=-1;++p<=c;){if(p===c){if(l>c){if(92===t.charCodeAt(u+p))return t.slice(u+p+1);if(2===p)return t.slice(u+p)}o>c&&(92===e.charCodeAt(a+p)?h=p:2===p&&(h=3));break}var f=n.charCodeAt(a+p),d=s.charCodeAt(u+p);if(f!==d)break;92===f&&(h=p)}if(p!==c&&-1===h)return t;var m="";for(-1===h&&(h=0),p=a+h;++p<=r;)p!==r&&92!==e.charCodeAt(p)||(m+=0===m.length?"..":"/..");return m.length>0?m+dn(t.slice(u+h)):(u+=h,92===t.charCodeAt(u)&&++u,dn(t.slice(u)))}:function(e,t){for(var r=e.length,i=r-1,n=1,s=t.length,a=s-n,o=i<a?i:a,u=-1,l=-1;++u<=o;){if(u===o){if(a>o){if(47===t.charCodeAt(n+u))return t.slice(n+u+1);if(0===u)return t.slice(n+u)}else i>o&&(47===e.charCodeAt(1+u)?l=u:0===u&&(l=0));break}var c=e.charCodeAt(1+u),p=t.charCodeAt(n+u);if(c!==p)break;47===c&&(l=u)}var h="";for(u=1+l;++u<=r;)u!==r&&47!==e.charCodeAt(u)||(h+=0===h.length?"..":"/..");return 0!==h.length?h+t.slice(n+l):(n+=l,47===t.charCodeAt(n)&&++n,t.slice(n))}})(),vn=R.inited?R.module.fsRemoveFile:R.module.fsRemoveFile=(function(){"use strict";return function(e){if("string"==typeof e)try{return ei(e),!0}catch(e){}return!1}})(),gn=R.inited?R.module.fsWriteFile:R.module.fsWriteFile=(function(){"use strict";return function(e,t,r){if("string"==typeof e)try{return ti(e,t,r),!0}catch(e){}return!1}})(),yn=R.inited?R.module.CachingCompiler:R.module.CachingCompiler=(function(){"use strict";var e=b.PACKAGE_VERSION,t={compile:(e,t={})=>!t.eval&&t.filename&&t.cachePath?(function(e,t){var i=t.cacheName,n=t.cachePath,s=r(e,t);if(!i||!n||0===s.transforms)return s;var a=R.pendingWrites,o=a.get(n);return void 0===o&&(o=new Map,a.set(n,o)),o.set(i,s),s})(e,t):r(e,t),from(e){var t=e.package,r=t.cache,i=e.cacheName,s=r.meta.get(i);if(void 0===s)return null;var a=s.length,o={circular:0,code:null,codeWithTDZ:null,filename:null,firstAwaitOutsideFunction:null,firstReturnOutsideFunction:null,mtime:-1,scriptData:null,sourceType:1,transforms:0,yieldIndex:-1};if(a>2){var u=s[7];"string"==typeof u&&(o.filename=we(t.cachePath,u));var l=s[5];null!==l&&(o.firstAwaitOutsideFunction=n(l));var c=s[6];null!==c&&(o.firstReturnOutsideFunction=n(c)),o.mtime=+s[3],o.sourceType=+s[4],o.transforms=+s[2]}a>7&&2===o.sourceType&&(e.type=3,o.circular=+s[8],o.yieldIndex=+s[9]);var p=s[0],h=s[1];return-1!==p&&-1!==h&&(o.scriptData=zr.slice(r.buffer,p,h)),e.compileData=o,r.compile.set(i,o),o}};function r(e,t){var r=Wr.compile(e,(function(e={}){var t=e.cjsPaths,r=e.cjsVars,i=e.topLevelReturn;on(e.filename)&&(t=void 0,r=void 0,i=void 0);var n=e.runtimeName;return e.eval?{cjsPaths:t,cjsVars:r,runtimeName:n,topLevelReturn:!0}:{cjsPaths:t,cjsVars:r,generateVarDeclarations:e.generateVarDeclarations,hint:e.hint,pragmas:e.pragmas,runtimeName:n,sourceType:e.sourceType,strict:e.strict,topLevelReturn:i}})(t));return t.eval?r:(r.filename=t.filename,r.mtime=t.mtime,r)}function i({column:e,line:t}){return[e,t]}function n([e,t]){return{column:e,line:t}}return ee(X()+1),Q("exit",oe((function(){ee(Math.max(X()-1,0));var t=R.pendingScripts,r=R.pendingWrites,n=R.package.dir;n.forEach((function(e,i){if(""!==i){var s,a=!hn(i),o=e.dirty;o||a||(o=!!fn(ln("ESM_DISABLE_CACHE")),e.dirty=o),(o||a)&&(n.delete(i),t.delete(i),r.delete(i)),a||o&&(s=i+Ee+".dirty",sn(s)||gn(s,""),vn(i+Ee+".data.blob"),vn(i+Ee+".data.json"),e.compile.forEach((function(e,t){vn(i+Ee+t)})))}}));var s=new Map,a=R.support.createCachedData;t.forEach((function(e,t){var r=n.get(t),i=r.compile,o=r.meta;e.forEach((function(e,r){var n,u=i.get(r);void 0===u&&(u=null),null!==u&&(n=u.scriptData,null===n&&(n=void 0));var l=!1,c=null;if(void 0===n&&(a&&"function"==typeof e.createCachedData?c=e.createCachedData():e.cachedDataProduced&&(c=e.cachedData)),null!==c&&c.length&&(l=!0),null!==u)if(null!==c)u.scriptData=c;else if(void 0!==n&&e.cachedDataRejected){l=!0;var p=o.get(r);void 0!==p&&(p[0]=-1,p[1]=-1),c=null,u.scriptData=null}if(l&&""!==r){var h=s.get(t);void 0===h&&(h=new Map,s.set(t,h)),h.set(r,c)}}))})),s.forEach((function(t,r){var s=n.get(r),a=s.compile,o=s.meta;t.forEach((function(e,t){var n=o.get(t);if(void 0===n){n=[-1,-1];var s=a.get(t);if(void 0===s&&(s=null),null!==s){var u=s,l=u.filename,c=u.firstAwaitOutsideFunction,p=u.firstReturnOutsideFunction,h=u.mtime,f=u.sourceType,d=u.transforms,m=null===c?null:i(c),v=null===p?null:i(p);1===f?0!==d&&n.push(d,h,f,m,v,mn(r,l)):n.push(d,h,f,m,v,mn(r,l),s.circular,s.yieldIndex)}o.set(t,n)}}));var u=s.buffer,l=[],c={},p=0;o.forEach((function(e,r){var i=t.get(r);if(void 0===i){var n=a.get(r);void 0===n&&(n=null);var s=e[0],o=e[1];i=null,null!==n?i=n.scriptData:-1!==s&&-1!==o&&(i=zr.slice(u,s,o))}null!==i&&(e[0]=p,p+=i.length,e[1]=p,l.push(i)),c[r]=e})),gn(r+Ee+".data.blob",zr.concat(l)),gn(r+Ee+".data.json",JSON.stringify({meta:c,version:e}))})),r.forEach((function(e,t){e.forEach((function(e,r){gn(t+Ee+r,e.code)&&(function(e,t){var r=R.package.dir.get(e),i=r.compile,n=r.meta,s=an(t);i.forEach((function(r,a){a!==t&&a.startsWith(s)&&(i.delete(a),n.delete(a),vn(e+Ee+a))}))})(t,r)}))}))}))),t})(),xn=R.inited?R.module.SafeArray:R.module.SafeArray=U(R.external.Array),bn=R.inited?R.module.GenericArray:R.module.GenericArray=(function(){"use strict";var e=Array.prototype,t=xn.prototype;return{concat:P(t.concat),from:xn.from,indexOf:P(e.indexOf),join:P(e.join),of:xn.of,push:P(e.push),unshift:P(e.unshift)}})(),wn=R.inited?R.module.GenericObject:R.module.GenericObject=(function(){"use strict";var e=R.external.Object;return{create:(t,r)=>(null===r&&(r=void 0),null===t||A(t)?Object.create(t,r):void 0===r?new e:Object.defineProperties(new e,r))}})(),En=R.inited?R.module.RealModule:R.module.RealModule=he(k("module")),Sn=R.inited?R.module.SafeModule:R.module.SafeModule=U(En),Rn=R.inited?R.module.SafeObject:R.module.SafeObject=U(R.external.Object),Pn=R.inited?R.module.utilAssign:R.module.utilAssign=(function(){"use strict";return function(e){for(var t=arguments.length,r=0;++r<t;){var i=arguments[r];for(var n in i)M(i,n)&&(e[n]=i[n])}return e}})(),_n=R.inited?R.module.utilDecodeURIComponent:R.module.utilDecodeURIComponent=(function(){"use strict";var e=decodeURIComponent;return function(t){return"string"==typeof t?e(t):""}})(),kn=R.inited?R.module.realPunycode:R.module.realPunycode=(function(){"use strict";if(ki.has("punycode")){var e=le("punycode");return A(e)?he(e):void 0}})(),In=R.inited?R.module.safePunycode:R.module.safePunycode=U(kn),An=void 0===In?void 0:In.toUnicode,Nn=R.inited?R.module.realURL:R.module.realURL=he(k("url")),Cn=R.inited?R.module.safeURL:R.module.safeURL=U(Nn),On=Cn.URL,Tn=Cn.domainToUnicode,Mn=Cn.parse,Ln=R.inited?R.module.utilDomainToUnicode:R.module.utilDomainToUnicode=(function(){"use strict";var e="function"==typeof Tn?Tn:An;return function(t){return"string"==typeof t?e(t):""}})(),Dn=R.inited?R.module.pathHasEncodedSep:R.module.pathHasEncodedSep=(function(){"use strict";var e=en.WIN32,t=/%2f/i,r=/%5c|%2f/i;return function(i){return"string"==typeof i&&(e?r.test(i):t.test(i))}})(),Fn=R.inited?R.module.utilParseURL:R.module.utilParseURL=(function(){"use strict";var e="function"==typeof On,t=["hash","host","hostname","href","pathname","port","protocol","search"];return function(r){var i=R.memoize.utilParseURL,n=i.get(r);return void 0!==n?n:("string"==typeof r&&r.length>1&&47===r.charCodeAt(0)&&47===r.charCodeAt(1)&&(r="file:"+r),n=e?new On(r):(function(e){for(var r=Mn(e),i=0,n=null==t?0:t.length;i<n;i++){var s=t[i];"string"!=typeof r[s]&&(r[s]="")}return r})(r),i.set(r,n),n)}})(),jn=R.inited?R.module.utilGetFilePathFromURL:R.module.utilGetFilePathFromURL=(function(){"use strict";var e=en.WIN32;return function(t){var r="string"==typeof t?Fn(t):t,i=r.pathname;if(""===i||"file:"!==r.protocol||Dn(i))return"";var n=r.host;if(i=_n(i),""!==n&&"localhost"!==n)return e?"\\\\"+Ln(n)+be(i):"";if(!e)return i;if(i.length<3||58!==i.charCodeAt(2))return"";var s=i.charCodeAt(1);return(s>=65&&s<=90||s>=97&&s<=122)&&47===i.charCodeAt(3)?be(i).slice(1):""}})(),Vn=R.inited?R.module.utilIsFileOrigin:R.module.utilIsFileOrigin=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;return t>7&&102===e.charCodeAt(0)&&105===e.charCodeAt(1)&&108===e.charCodeAt(2)&&101===e.charCodeAt(3)&&58===e.charCodeAt(4)&&47===e.charCodeAt(5)&&47===e.charCodeAt(6)}})(),Gn=R.inited?R.module.utilGetModuleDirname:R.module.utilGetModuleDirname=(function(){"use strict";return function(e){if(D(e)){var t=e.path;if("string"==typeof t)return t;var r=e.id;if(ki.has(r))return"";var i=e.filename;if(null===i&&"string"==typeof r&&(i=Vn(r)?jn(r):r),"string"==typeof i)return ge(i)}return"."}})(),Bn=R.inited?R.module.pathIsExtNode:R.module.pathIsExtNode=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;return t>5&&110===e.charCodeAt(t-4)&&46===e.charCodeAt(t-5)&&111===e.charCodeAt(t-3)&&100===e.charCodeAt(t-2)&&101===e.charCodeAt(t-1)}})(),Un=R.inited?R.module.utilCopyProperty:R.module.utilCopyProperty=(function(){"use strict";return function(e,t,r){if(!A(e)||!A(t))return e;var i=Reflect.getOwnPropertyDescriptor(t,r);return void 0!==i&&(j(i)?e[r]=t[r]:Reflect.defineProperty(e,r,i)),e}})(),Wn=R.inited?R.module.utilIsError:R.module.utilIsError=(function(){"use strict";var e=li.types;if("function"==typeof(e&&e.isNativeError))return e.isNativeError;var t=se.util.isNativeError;return"function"==typeof t?t:li.isError})(),qn=R.inited?R.module.errorCaptureStackTrace:R.module.errorCaptureStackTrace=(function(){"use strict";var e=Error.captureStackTrace;return function(t,r){return Wn(t)&&("function"==typeof r?e(t,r):e(t)),t}})(),zn=R.inited?R.module.utilNativeTrap:R.module.utilNativeTrap=(function(){"use strict";return function(e){return function t(...r){try{return Reflect.apply(e,this,r)}catch(e){throw qn(e,t),e}}}})(),Hn=R.inited?R.module.utilEmptyArray:R.module.utilEmptyArray=(function(){"use strict";return[]})(),$n=R.inited?R.module.utilEmptyObject:R.module.utilEmptyObject=(function(){"use strict";return{}})(),Kn=R.inited?R.module.utilIsOwnProxy:R.module.utilIsOwnProxy=(function(){"use strict";var e=b.PACKAGE_PREFIX,t=RegExp("[\\[\"']"+Pr(e)+":proxy['\"\\]]\\s*:\\s*1\\s*\\}\\s*.?$"),r={breakLength:1/0,colors:!1,compact:!0,customInspect:!1,depth:0,maxArrayLength:0,showHidden:!1,showProxy:!0},i={breakLength:1/0,colors:!1,compact:!0,customInspect:!1,depth:1,maxArrayLength:0,showHidden:!0,showProxy:!0},n=0;return function(e){return ue.instances.has(e)||(function(e){if(!R.support.inspectProxies||!A(e)||1!=++n)return!1;var s;try{s=oi(e,r)}finally{n-=1}if(!s.startsWith("Proxy ["))return!1;n+=1;try{s=oi(e,i)}finally{n-=1}return t.test(s)})(e)}})(),Jn=R.inited?R.module.utilUnwrapOwnProxy:R.module.utilUnwrapOwnProxy=(function(){"use strict";return function(e){if(!A(e))return e;var t=R.memoize.utilUnwrapOwnProxy,r=t.get(e);if(void 0!==r)return r;for(var i,n=ue.instances,s=e;void 0!==(i=n.get(s));)s=i[0];return t.set(e,s),s}})(),Yn=R.inited?R.module.shimFunctionPrototypeToString:R.module.shimFunctionPrototypeToString=(function(){"use strict";var e=R.proxyNativeSourceText,t=""===e?"function () { [native code] }":e,r={enable(r){var i=Reflect.getOwnPropertyDescriptor(r,"Function").value.prototype,n=R.memoize.shimFunctionPrototypeToString;if((function(e,t){var r=t.get(e);if(void 0!==r)return r;r=!0;try{var i=e.toString;"function"==typeof i&&(r=Reflect.apply(i,new ue(i,$n),Hn)===Reflect.apply(i,i,Hn))}catch(e){r=!1}return t.set(e,r),r})(i,n))return r;var s=zn((function(r,i){""!==e&&Kn(i)&&(i=Jn(i));try{return Reflect.apply(r,i,Hn)}catch(e){if("function"!=typeof i)throw e}if(Kn(i))try{return Reflect.apply(r,Jn(i),Hn)}catch(e){}return t}));return Reflect.defineProperty(i,"toString",{configurable:!0,value:new ue(i.toString,{apply:s}),writable:!0})&&n.set(i,!0),r}};return r})();Yn.enable(R.safeGlobal);var Xn=function(e,t){"use strict";if("function"!=typeof t)return e;var r=R.memoize.utilMaskFunction,i=r.get(e);if(void 0!==i)return i.proxy;i=r.get(t),void 0!==i&&(t=i.source);var n=new ue(e,{get:(e,t,r)=>"toString"!==t||M(e,"toString")?(r===n&&(r=e),Reflect.get(e,t,r)):i.toString}),s=M(t,"prototype")?t.prototype:void 0;if(A(s)){var a=M(e,"prototype")?e.prototype:void 0;A(a)||(a=wn.create(),Reflect.defineProperty(e,"prototype",{value:a,writable:!0})),Reflect.defineProperty(a,"constructor",{configurable:!0,value:n,writable:!0}),B(a,ae(s))}else{var o=Reflect.getOwnPropertyDescriptor(t,"prototype");void 0===o?Reflect.deleteProperty(e,"prototype"):Reflect.defineProperty(e,"prototype",o)}return Un(e,t,"name"),B(e,ae(t)),i={proxy:n,source:t,toString:new ue(e.toString,{apply:zn((function(t,r,n){return Pc.state.package.default.options.debug||"function"!=typeof r||Jn(r)!==e||(r=i.source),Reflect.apply(t,r,n)}))})},r.set(e,i),r.set(n,i),n},Qn=R.inited?R.module.utilIsModuleNamespaceObjectLike:R.module.utilIsModuleNamespaceObjectLike=(function(){"use strict";return function(e){if(!D(e)||null!==ae(e))return!1;var t=Reflect.getOwnPropertyDescriptor(e,Symbol.toStringTag);return void 0!==t&&!1===t.configurable&&!1===t.enumerable&&!1===t.writable&&"Module"===t.value}})(),Zn=R.inited?R.module.utilIsProxyInspectable:R.module.utilIsProxyInspectable=(function(){"use strict";return function(e){return!!A(e)&&("function"==typeof e||Array.isArray(e)||Reflect.has(e,Symbol.toStringTag)||e===xo.process.module.exports||"[object Object]"===ii(e))}})(),es=R.inited?R.module.utilIsNativeLike:R.module.utilIsNativeLike=(function(){"use strict";var e=Function.prototype.toString,t=RegExp("^"+Pr(e.call(e)).replace(/toString|(function ).*?(?=\\\()/g,"$1.*?")+"$");return function(r){return"function"==typeof r&&(function(r){try{return t.test(e.call(r))}catch(e){}return!1})(r)}})(),ts=R.inited?R.module.utilIsProxy:R.module.utilIsProxy=(function(){"use strict";if("function"==typeof(ui&&ui.isProxy))return ui.isProxy;var e,t={breakLength:1/0,colors:!1,compact:!0,customInspect:!1,depth:0,maxArrayLength:0,showHidden:!1,showProxy:!0};return function(r){return!!ue.instances.has(r)||(void 0===e&&(e="function"==typeof se.util.getProxyDetails),e?!!pe(r):R.support.inspectProxies&&A(r)&&oi(r,t).startsWith("Proxy ["))}})(),rs=R.inited?R.module.utilIsNative:R.module.utilIsNative=(function(){"use strict";return function(e){if(!es(e))return!1;var t=e.name;return!("string"==typeof t&&t.startsWith("bound ")||ts(e))}})(),is=R.inited?R.module.utilIsStackTraceMaskable:R.module.utilIsStackTraceMaskable=(function(){"use strict";return function(e){if(!Wn(e))return!1;var t=Reflect.getOwnPropertyDescriptor(e,"stack");return!(void 0!==t&&!0===t.configurable&&!1===t.enumerable&&"function"==typeof t.get&&"function"==typeof t.set&&!rs(t.get)&&!rs(t.set))}})(),ns=R.inited?R.module.utilSetHiddenValue:R.module.utilSetHiddenValue=(function(){"use strict";var e;return function(t,r,i){if(void 0===e&&(e="function"==typeof se.util.setHiddenValue),e&&typeof r===R.utilBinding.hiddenKeyType&&null!=r&&A(t))try{return se.util.setHiddenValue(t,r,i)}catch(e){}return!1}})(),ss=R.inited?R.module.errorDecorateStackTrace:R.module.errorDecorateStackTrace=(function(){"use strict";return function(e){return Wn(e)&&ns(e,R.utilBinding.errorDecoratedSymbol,!0),e}})(),as=R.inited?R.module.utilEncodeURI:R.module.utilEncodeURI=(function(){"use strict";var e=encodeURI;return function(t){return"string"==typeof t?e(t):""}})(),os=R.inited?R.module.utilGetURLFromFilePath:R.module.utilGetURLFromFilePath=(function(){"use strict";var e=/[?#]/g,t=new Map([["#","%23"],["?","%3F"]]);function r(e){return t.get(e)}return function(t){var i="string"==typeof t?t.length:0;if(0===i)return"file:///";var n=t,s=i;t=dn(we(t)),t=as(t).replace(e,r),i=t.length,47!==t.charCodeAt(i-1)&&gi(n.charCodeAt(s-1))&&(t+="/");for(var a=-1;++a<i&&47===t.charCodeAt(a););return a>1?t="/"+t.slice(a):0===a&&(t="/"+t),"file://"+t}})(),us=R.inited?R.module.utilGetModuleURL:R.module.utilGetModuleURL=(function(){"use strict";return function(e){if("string"==typeof e)return xi(e)?os(e):e;if(D(e)){var t=e.filename,r=e.id;if("string"==typeof t)return os(t);if("string"==typeof r)return r}return""}})(),ls=R.inited?R.module.utilIsParseError:R.module.utilIsParseError=(function(){"use strict";return function(e){for(var t in Qt)if(e instanceof Qt[t])return!0;return!1}})(),cs=R.inited?R.module.utilReplaceWithout:R.module.utilReplaceWithout=(function(){"use strict";return function(e,t,r){if("string"!=typeof e||"string"!=typeof t)return e;var i=r(e.replace(t,"\u200dWITHOUT\u200d"));return"string"==typeof i?i.replace("\u200dWITHOUT\u200d",(function(){return t})):e}})(),ps=R.inited?R.module.utilUntransformRuntime:R.module.utilUntransformRuntime=(function(){"use strict";var e=/\w+\u200D\.a\("(.+?)",\1\)/g,t=/\w+\u200D\.t\("(.+?)"\)/g,r=/\(eval===(\w+\u200D)\.v\?\1\.c:\1\.k\)/g,i=/\(eval===(\w+\u200D)\.v\?\1\.e:eval\)/g,n=/\w+\u200D\.(\w+)(\.)?/g,s=/\w+\u200D\.b\("(.+?)","(.+?)",?/g;function a(e,t){return t}function o(){return""}function u(){return"eval"}function l(e,t,r=""){return"e"===t?"eval"+r:"_"===t||"i"===t?"import"+r:"r"===t?"require"+r:""}function c(e,t,r){return"("+t+r}return function(p){return"string"!=typeof p?"":p.replace(e,a).replace(t,a).replace(r,o).replace(i,u).replace(s,c).replace(n,l)}})(),hs=R.inited?R.module.errorScrubStackTrace:R.module.errorScrubStackTrace=(function(){"use strict";var e=b.PACKAGE_FILENAMES,t=/:1:\d+(?=\)?$)/gm,r=/(\n +at .+)+$/;return function(i){if("string"!=typeof i)return"";var n=r.exec(i);if(null===n)return i;var s=n.index,a=i.slice(0,s),o=i.slice(s).split("\n").filter((function(t){for(var r=0,i=null==e?0:e.length;r<i;r++){var n=e[r];if(-1!==t.indexOf(n))return!1}return!0})).join("\n").replace(t,":1");return a+ps(o)}})(),fs=R.inited?R.module.utilToExternalError:R.module.utilToExternalError=(function(){"use strict";var e=R.external,t=e.Error,r=e.EvalError,i=e.RangeError,n=e.ReferenceError,s=e.SyntaxError,a=e.TypeError,o=e.URIError,u=new Map([["Error",t.prototype],["EvalError",r.prototype],["RangeError",i.prototype],["ReferenceError",n.prototype],["SyntaxError",s.prototype],["TypeError",a.prototype],["URIError",o.prototype]]);return function(e){if(e instanceof Error){var t=ae(e),r=t.name,i=u.get(r);void 0!==i&&B(e,i)}return e}})(),ds=R.inited?R.module.errorMaskStackTrace:R.module.errorMaskStackTrace=(function(){"use strict";var e=/^(.+)\n( *\^+)\n(\n)?/m,t=/^( *at (?:.+? \()?)(.+?)(?=:\d+)/gm,r=/^\s*$/,i=/^(.+?):(\d+)(?=\n)/;function n(e,t,r){return t+us(r)}function s(e,t,r){return us(t)+":"+r}function a(e){try{return Tr(un(e,"name"))+": "+Tr(un(e,"message"))}catch(e){}return""}return function(o,u={}){if(!Wn(o))return o;var l,c,p=u.content,h=u.filename,f=u.inModule,d=ls(o);d&&(l=o.column,c=o.line,void 0===f&&(f=o.inModule),Reflect.deleteProperty(o,"column"),Reflect.deleteProperty(o,"inModule"),Reflect.deleteProperty(o,"line")),fs(o);var m=un(o,"stack");if("string"!=typeof m)return o;var v=a(o);return Reflect.defineProperty(o,"stack",{configurable:!0,get:oe((function(){this.stack="";var o=Tr(un(this,"message")),u=Tr(un(this,"name")),g=a(this),y=m.replace(v,(function(){return g}));y=d?(function(e,t,i,n,s,a,o){var u=[0,1];if("string"==typeof o&&(u.push(o+":"+n),"string"!=typeof a&&(a=Ri(o,"utf8"))),"string"==typeof a){var l=a.split("\n"),c=n-1;if(c<l.length){var p="^";i.startsWith("Export '")&&(p=p.repeat(i.indexOf("'",8)-8));var h=l[c];r.test(h)||u.push(h," ".repeat(s)+p,"")}}var f=e.split("\n");return u.push(t+": "+i),f.splice(...u),f.join("\n")})(y,u,o,c,l,p,h):(function(t,r,n){var s=i.exec(t);if(null===s)return"string"==typeof n?n+":1\n"+t:t;var a,o,u=s[0],l=s[1],c=+s[2],p=l!==n&&xi(l);if(!p)if("string"!=typeof r&&"string"==typeof n&&".wasm"!==ye(n)&&(r=Ri(n,"utf8")),"string"!=typeof r||r.startsWith("\0asm"))p=!0;else{var h=c-1;a=r.split("\n"),o=h>-1&&h<a.length?a[h]:""}var f=!1;if(t=t.replace(e,(function(e,t,r,i=""){if(f=!0,p&&(o=t),"string"!=typeof o)return"";if(1===c){var n=O(bc,"wrapper");if(Array.isArray(n)){var s=n[0];if("string"==typeof s&&t.startsWith(s)){var a=s.length;t=t.slice(a),r=r.slice(a)}}}return t===o?o+"\n"+r+"\n"+i:o+(o?"\n\n":"\n")})),f)return t;if(o&&"string"==typeof o){var d=u.length;t=t.slice(0,d)+"\n"+o+"\n"+t.slice(d)}return t})(y,p,h);var x=f?function(e){return(function(e){return e.replace(i,s).replace(t,n)})(hs(e))}:hs;return this.stack=cs(y,g,x)})),set:oe((function(e){Reflect.defineProperty(this,"stack",{configurable:!0,value:e,writable:!0})}))}),ss(o),o}})(),ms=function(e){"use strict";var t=Pc.state.package.default;return null!==t&&t.options.debug||!is(e)||ds(e),e},vs=R.inited?R.module.utilIsModuleNamespaceObject:R.module.utilIsModuleNamespaceObject=(function(){"use strict";return function(e){return D(e)&&Reflect.has(e,R.symbol.namespace)&&Kn(e)}})(),gs=R.inited?R.module.utilIsUpdatableDescriptor:R.module.utilIsUpdatableDescriptor=(function(){"use strict";return function(e){return D(e)&&(!0===e.configurable||!0===e.writable)&&M(e,"value")}})(),ys=R.inited?R.module.utilIsUpdatableGet:R.module.utilIsUpdatableGet=(function(){"use strict";return function(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);return void 0===r||!0===r.configurable||!0===r.writable||"function"==typeof r.get}})(),xs=R.inited?R.module.utilOwnPropertyNames:R.module.utilOwnPropertyNames=(function(){"use strict";return function(e){return A(e)?Object.getOwnPropertyNames(e):[]}})(),bs=R.inited?R.module.utilToRawModuleNamespaceObject:R.module.utilToRawModuleNamespaceObject=(function(){"use strict";var e={value:"Module"};return function(t){var r={__proto__:null};return Reflect.defineProperty(r,Symbol.toStringTag,e),Pn(r,t)}})(),ws={},Es=/\S/;function Ss(e,t){"use strict";return{__proto__:null,[R.customInspectKey]:oe((function(r){var i=Pn(wn.create(),t);return i.depth=r,Ns(e,i)}))}}function Rs(e,t){"use strict";try{return Reflect.get(e,t)}catch(e){}return ws}function Ps(...e){try{return Reflect.apply(oi,this,e)}catch(e){}return""}var _s=function(...e){var t=e[0],r=e[1],i=e[2];if(!A(t))return Reflect.apply(oi,this,e);t=ms(t);var n=wn.create();"boolean"==typeof r?n.showHidden=!0:Pn(n,r);var s=R.defaultInspectOptions,a=M(n,"customInspect")?n.customInspect:s.customInspect,o=M(n,"showProxy")?n.showProxy:s.showProxy;void 0===i||M(n,"depth")||(n.depth=i),e[0]=t,e[1]=n;var u=Reflect.apply(Ps,this,e);return!Zn(t)||-1===u.indexOf("Proxy [")&&!Qn(t)?u:(n.customInspect=a,n.showProxy=o,r=Pn(wn.create(),n),e[0]=(function e(t,r,i){"use strict";if(!Zn(t))return t;if(void 0===i)i=new Map;else{var n=i.get(t);if(void 0!==n)return n}var s,a,o=!1,u=new ue(t,{get(e,t,i){i===u&&(i=e);var n=R.customInspectKey,l=Reflect.get(e,t,i),c=l;return l!==Ns||t!==n&&"inspect"!==t?o||t!==n?"toString"===t&&"function"==typeof l&&(c=_.bind(l,e)):c=oe((function(...t){o=!0;var i=t[0],n=t[1],c=Pn(wn.create(),n),p=r.showProxy;c.customInspect=r.customInspect,c.depth=i,c.showProxy=p;try{return e===ws?c.colors?(function(e,t){var r=Ns.styles.special;if(void 0===r)return"<uninitialized>";var i=Ns.colors[r],n=i[0],s=i[1];return"\x1b["+n+"m<uninitialized>\x1b["+s+"m"})():"<uninitialized>":vs(e)?(function(e,t){for(var r=xs(e),i=bs(),n=0,s=null==r?0:r.length;n<s;n++){var a=r[n];i[a]=Rs(e,a)}var o=Ns(i,t),u=o.slice(0,o.search(Es)),l=o.slice(o.indexOf("{"),o.lastIndexOf("}")+1);return u+"[Module] "+l})(e,c):(void 0===a&&(a=Kn(e)),void 0===s&&(s=ts(e)),p&&s&&!a?(function(e,t){var r=pe(e),i=e;void 0!==r&&(i=new Proxy(Ss(r[0],t),Ss(r[1],t)));var n=Pn({},t);return n.customInspect=!0,oi(i,n)})(e,c):("function"!=typeof l&&(c.customInspect=!0),c.showProxy=!1,oi(u,c)))}finally{o=!1}})):c=oi,c!==l&&ys(e,t)?c:ms(l)},getOwnPropertyDescriptor(t,n){var s=Reflect.getOwnPropertyDescriptor(t,n);if(gs(s)){var a=s.value;A(a)&&(s.value=e(a,r,i))}return s}});return i.set(t,u),i.set(u,u),u})(t,r),n.customInspect=!0,n.showProxy=!1,Reflect.apply(oi,this,e))},ks=R.inited?R.module.utilProxyWrap:R.module.utilProxyWrap=(function(){"use strict";return function(e,t){return new ue(e,{apply:(e,r,i)=>Reflect.apply(t,r,[e,i]),construct:(e,r,i)=>Reflect.construct(t,[e,r],i)})}})(),Is=R.inited?R.module.utilToWrapper:R.module.utilToWrapper=(function(){"use strict";return function(e){return function(t,r){return Reflect.apply(e,this,r)}}})(),As=ks(li.inspect,Is(_s)),Ns=As;function Cs(e){"use strict";try{return JSON.stringify(e)}catch(e){if(Wn(e)){if("TypeError"===un(e,"name")&&un(e,"message")===R.circularErrorMessage)return"[Circular]";fs(e)}throw e}}var Os,Ts=function(e,...t){var r=t[0],i=t.length,n=0,s="",a="";if("string"==typeof r){if(1===i)return r;for(var o,u,l=r.length,c=l-1,p=-1,h=0;++p<c;)if(37===r.charCodeAt(p)){var f=r.charCodeAt(++p);if(n+1!==i){var d=void 0;switch(f){case 115:var m=t[++n];"bigint"==typeof m?d=m+"n":D(m)?(void 0===u&&(u=Pn({},e,{breakLength:120,colors:!1,compact:!0,depth:0})),d=_s(m,u)):d=m+"";break;case 106:d=Cs(t[++n]);break;case 100:var v=t[++n],g=typeof v;d="bigint"===g?v+"n":"symbol"===g?"NaN":+v+"";break;case 79:d=_s(t[++n],e);break;case 111:void 0===o&&(o=Pn({},e,{depth:4,showHidden:!0,showProxy:!0})),d=_s(t[++n],o);break;case 105:var y=t[++n],x=typeof y;d="bigint"===x?y+"n":"symbol"===x?"NaN":parseInt(y)+"";break;case 102:var b=t[++n];d="symbol"==typeof b?"NaN":parseFloat(b)+"";break;case 37:a+=r.slice(h,p),h=p+1}h!==p-1&&(a+=r.slice(h,p-1)),a+=d,h=p+1}else 37===f&&(a+=r.slice(h,p),h=p+1)}0!==h&&(++n,s=" ",h<l&&(a+=r.slice(h)))}for(;n<i;){var w=t[n];a+=s+("string"==typeof w?w:_s(w,e)),s=" ",++n}return a},Ms=function(...e){return Ts($n,...e)},Ls=li.formatWithOptions,Ds=li.types;if(A(Ds)){Os=wn.create();for(var Fs=ks(Ds.isModuleNamespaceObject,Is(vs)),js=ks(Ds.isProxy,(function(e,[t]){return e(t)&&!Kn(t)})),Vs=F(Ds),Gs=0,Bs=null==Vs?0:Vs.length;Gs<Bs;Gs++){var Us=Vs[Gs];"isModuleNamespaceObject"===Us?Os.isModuleNamespaceObject=Fs:"isProxy"===Us?Os.isProxy=js:Un(Os,Ds,Us)}}for(var Ws=wn.create(),qs=F(li),zs=0,Hs=null==qs?0:qs.length;zs<Hs;zs++){var $s=qs[zs];"format"===$s?Ws.format=ks(li.format,Is(Ms)):"formatWithOptions"===$s?"function"==typeof Ls&&(Ws.formatWithOptions=ks(Ls,Is(Ts))):"inspect"===$s?Ws.inspect=Ns:"types"===$s?void 0!==Os&&(Ws.types=Os):Un(Ws,li,$s)}var Ks=Ws,Js=R.inited?R.module.realConsole:R.module.realConsole=he(k("console")),Ys=R.inited?R.module.safeConsole:R.module.safeConsole=(function(){"use strict";var e=U(Js),t=e.Console;return N(e,"Console",Xn(U(t),t)),e})(),Xs=R.inited?R.module.safeGlobalConsole:R.module.safeGlobalConsole=U(r),Qs=en.ELECTRON_RENDERER,Zs=en.FLAGS,ea=en.HAS_INSPECTOR,ta=Ys.Console,ra=ta.prototype,ia=F(ra),na={customInspect:!0},sa=(function(e){"use strict";for(var t=ma(e.log,ha),r=new Map([["assert",ma(e.assert,oa)],["debug",t],["dir",ma(e.dir,ca)],["dirxml",t],["info",t],["log",t],["trace",ma(e.trace)],["warn",ma(e.warn)]]),i=T(e),n=0,s=null==i?0:i.length;n<s;n++){var a=i[n];if(pa(a)&&!r.has(a)){var o=e[a];"function"==typeof o&&r.set(a,ma(o))}}return r})(ra),aa=(function(e,t){"use strict";for(var r=0,i=null==e?0:e.length;r<i;r++){var n=e[r];if(t.test(Tr(n)))return n}})(Object.getOwnPropertySymbols(Ys),/IsConsole/i);function oa(e,[t,...r]){return Reflect.apply(e,this,[t,...da(r,fa)])}function ua(){"use strict";var e=(function(e){try{return(function({stderr:e,stdout:t}){var r=ya.prototype,i=Reflect.construct(ya,R.support.consoleOptions?[{stderr:e,stdout:t}]:[t,e]);B(i,wn.create());for(var n=0,s=null==ia?0:ia.length;n<s;n++){var a=ia[n];pa(a)&&!M(i,a)&&Un(i,r,a)}return i})(e)}catch(e){}return null})(ne);if(null===e)return Js;if(ea&&Zs.inspect)for(var t=se.inspector.consoleCall,r=R.originalConsole,i="function"==typeof t,n=i?{}:null,s=T(r),a=0,o=null==s?0:s.length;a<o;a++){var u=s[a];if(pa(u)){var l=r[u];if("function"==typeof l){var c=e[u];i&&"function"==typeof c&&M(e,u)?N(e,u,_.bind(t,void 0,l,c,n)):N(e,u,l)}}}else if(Qs)for(var p=T(Xs),h=0,f=null==p?0:p.length;h<f;h++){var d=p[h];if(pa(d)){var m=Xs[d];"function"==typeof m&&N(e,d,m)}}for(var v=F(Ys),g=0,y=null==v?0:v.length;g<y;g++){var x=v[g];pa(x)&&!M(e,x)&&Un(e,Ys,x)}return e.Console=ya,e}function la(e){"use strict";for(var t=T(e),r=new Map,i=0,n=null==t?0:t.length;i<n;i++){var s=t[i],a=e[s],o=Xs[s];"function"!=typeof a||"function"!=typeof o||pa(s)&&!es(o)||r.set(o,a)}return r}function ca(e,[t,r]){return Reflect.apply(e,this,[{[R.customInspectKey](e,i){var n=Pn({},i,r);return n.customInspect=!!M(r,"customInspect")&&r.customInspect,n.depth=e,Ks.inspect(t,n)}},na])}function pa(e){"use strict";return"Console"!==e&&"constructor"!==e}function ha(e,t){"use strict";return Reflect.apply(e,this,da(t,fa))}function fa(e){"use strict";return D(e)?{[R.customInspectKey](t,r){var i=Pn({},r);return i.depth=t,Ks.inspect(e,i)}}:e}function da(e,t){"use strict";for(var r=e.length,i=-1;++i<r;)e[i]=t(e[i]);return e}function ma(e,t=function(e,t){"use strict";return Reflect.apply(e,this,t)}){var r={method(...r){var i=R.defaultInspectOptions,n=i.customInspect;N(i,"customInspect",!0);try{return Reflect.apply(t,this,[e,r])}finally{N(i,"customInspect",n)}}};return Xn(r.method,e)}"symbol"!=typeof aa&&(aa=Symbol("kIsConsole"));for(var va,ga,ya=Xn((function(...e){var t=new.target;if(void 0===t)return Reflect.construct(ya,e);this[aa]=!0;for(var r=ya.prototype,i=T(r),n=0,s=null==i?0:i.length;n<s;n++){var a=i[n];if(pa(a)){var o=this[a];"function"==typeof o&&(this[a]=_.bind(o,this))}}for(var u=Reflect.construct(ta,e,t),l=F(u),c=0,p=null==l?0:l.length;c<p;c++){var h=l[c];pa(h)&&!M(this,h)&&Un(this,u,h)}}),ta),xa=ya.prototype,ba=0,wa=null==ia?0:ia.length;ba<wa;ba++){var Ea=ia[ba];if(pa(Ea)){var Sa=sa.get(Ea);if(void 0===Sa)Un(xa,ra,Ea);else{var Ra=Reflect.getOwnPropertyDescriptor(ra,Ea);Reflect.defineProperty(xa,Ea,{configurable:Ra.configurable,enumerable:Ra.enumerable,value:Sa,writable:!0===Ra.writable||"function"==typeof Ra.set})}}}Reflect.defineProperty(ya,Symbol.hasInstance,{value:oe((function(e){return e[aa]}))});for(var Pa=new ue(r,{get(e,t,r){r===Pa&&(r=e);var i=Reflect.get(e,t,r);if(ys(e,t)){void 0===va&&(va=ua(),ga=la(va));var n=ga.get(i);if(void 0!==n)return n}return i},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(gs(r)){void 0===va&&(va=ua(),ga=la(va));var i=ga.get(r.value);void 0!==i&&(r.value=i)}return r}}),_a=Pa,ka=R.inited?R.module.utilAssignProperties:R.module.utilAssignProperties=(function(){"use strict";return function(e){for(var t=arguments.length,r=0;++r<t;)for(var i=arguments[r],n=F(i),s=0,a=null==n?0:n.length;s<a;s++){var o=n[s];Un(e,i,o)}return e}})(),Ia=R.inited?R.module.realTimers:R.module.realTimers=he(k("timers")),Aa=R.inited?R.module.safeTimers:R.module.safeTimers=(function(){"use strict";var e=en.ELECTRON,t=U(Ia);if(e){var r=R.unsafeGlobal;N(t,"setImmediate",r.setImmediate),N(t,"setInterval",r.setInterval),N(t,"setTimeout",r.setTimeout)}return t})(),Na=Aa.setImmediate,Ca=Aa,Oa=R.inited?R.module.builtinTimers:R.module.builtinTimers=ka(wn.create(),Ca),Ta=R.inited?R.module.realVM:R.module.realVM=he(k("vm")),Ma=R.inited?R.module.safeVM:R.module.safeVM=(function(){"use strict";for(var e=U(Ta),t=e.Script,r=U(t),i=r.prototype,n=ae(t.prototype),s=F(n),a=0,o=null==s?0:s.length;a<o;a++){var u=s[a];M(i,u)||Un(i,n,u)}return B(i,n),N(e,"Script",r),e})(),La=Ma.Script,Da=Ma,Fa=R.inited?R.module.builtinVM:R.module.builtinVM=(function(){"use strict";for(var e=wn.create(),t=F(Da),r=0,i=null==t?0:t.length;r<i;r++){var n=t[r];"Module"!==n&&"SourceTextModule"!==n&&Un(e,Da,n)}return e})(),ja={__proto__:null},Va=R.memoize.builtinModules,Ga=function(e){f(ja,e,(function(){"use strict";var t=Va.get(e);if(void 0!==t)return t;var r=new bc(e);return r.exports=(function(e){switch(e){case"console":return _a;case"module":return bc;case"timers":return Oa;case"util":return Ks;case"vm":return Fa}return he(k(e))})(e),r.loaded=!0,"console"!==e&&"module"!==e&&"util"!==e&&Va.set(e,r),r}))},Ba=0,Ua=null==_i?0:_i.length;Ba<Ua;Ba++){var Wa=_i[Ba];Ga(Wa)}for(var qa=ja,za=R.inited?R.module.utilInstanceOf:R.module.utilInstanceOf=(function(){"use strict";return function(e,t){var r=t.prototype;if(A(e))for(var i=e;null!==(i=ae(i));)if(i===r)return!0;return!1}})(),Ha=R.inited?R.module.utilGetGetter:R.module.utilGetGetter=(function(){"use strict";var e=Object.prototype.__lookupGetter__;return function(t,r){var i=void 0===r;if(i||!R.support.lookupShadowed){var n=i?t:Reflect.getOwnPropertyDescriptor(t,r);if(void 0!==n)return n.get;if(i)return}return e.call(t,r)}})(),$a=R.inited?R.module.utilGetSetter:R.module.utilGetSetter=(function(){"use strict";var e=Object.prototype.__lookupSetter__;return function(t,r){var i=void 0===r;if(i||!R.support.lookupShadowed){var n=i?t:Reflect.getOwnPropertyDescriptor(t,r);if(void 0!==n)return n.set;if(i)return}return e.call(t,r)}})(),Ka=R.inited?R.module.utilIsAnyArrayBuffer:R.module.utilIsAnyArrayBuffer=(function(){"use strict";return"function"==typeof(ui&&ui.isAnyArrayBuffer)?ui.isAnyArrayBuffer:function(e){if(!D(e))return!1;var t=ii(e);return"[object ArrayBuffer]"===t||"[object SharedArrayBuffer]"===t}})(),Ja=R.inited?R.module.utilIsDate:R.module.utilIsDate=(function(){"use strict";return"function"==typeof(ui&&ui.isDate)?ui.isDate:function(e){return D(e)&&"[object Date]"===ii(e)}})(),Ya=R.inited?R.module.utilIsExternal:R.module.utilIsExternal=(function(){"use strict";return"function"==typeof(ui&&ui.isExternal)?ui.isExternal:ur})(),Xa=R.inited?R.module.utilIsMap:R.module.utilIsMap=(function(){"use strict";return"function"==typeof(ui&&ui.isMap)?ui.isMap:function(e){return D(e)&&"[object Map]"===ii(e)}})(),Qa=R.inited?R.module.utilIsMapIterator:R.module.utilIsMapIterator=(function(){"use strict";return"function"==typeof(ui&&ui.isMapIterator)?ui.isMapIterator:function(e){return D(e)&&"[object Map Iterator]"===ii(e)}})(),Za=R.inited?R.module.utilIsNumberObject:R.module.utilIsNumberObject=(function(){"use strict";return"function"==typeof(ui&&ui.isNumberObject)?ui.isNumberObject:function(e){return D(e)&&"[object Number]"===ii(e)}})(),eo=R.inited?R.module.utilIsPlainObject:R.module.utilIsPlainObject=(function(){"use strict";return function(e){if(!D(e))return!1;for(var t=ae(e),r=t,i=null;r;)i=r,r=ae(i);return t===i}})(),to=R.inited?R.module.utilIsPromise:R.module.utilIsPromise=(function(){"use strict";return"function"==typeof(ui&&ui.isPromise)?ui.isPromise:function(e){return D(e)&&"[object Promise]"===ii(e)}})(),ro=R.inited?R.module.utilIsSet:R.module.utilIsSet=(function(){"use strict";return"function"==typeof(ui&&ui.isSet)?ui.isSet:function(e){return D(e)&&"[object Set]"===ii(e)}})(),io=R.inited?R.module.utilIsSetIterator:R.module.utilIsSetIterator=(function(){"use strict";return"function"==typeof(ui&&ui.isSetIterator)?ui.isSetIterator:function(e){return D(e)&&"[object Set Iterator]"===ii(e)}})(),no=R.inited?R.module.utilIsStringObject:R.module.utilIsStringObject=(function(){"use strict";return"function"==typeof(ui&&ui.isStringObject)?ui.isStringObject:function(e){return D(e)&&"[object String]"===ii(e)}})(),so=R.inited?R.module.utilIsWeakMap:R.module.utilIsWeakMap=(function(){"use strict";return"function"==typeof(ui&&ui.isWeakMap)?ui.isWeakMap:function(e){return"[object WeakMap]"===ii(e)}})(),ao=R.inited?R.module.utilIsWeakSet:R.module.utilIsWeakSet=(function(){"use strict";return"function"==typeof(ui&&ui.isWeakSet)?ui.isWeakSet:function(e){return"[object WeakSet]"===ii(e)}})(),oo=R.inited?R.module.utilIsWebAssemblyCompiledModule:R.module.utilIsWebAssemblyCompiledModule=(function(){"use strict";return"function"==typeof(ui&&ui.isWebAssemblyCompiledModule)?ui.isWebAssemblyCompiledModule:function(e){return D(e)&&"[object WebAssembly.Module]"===ii(e)}})(),uo=R.inited?R.module.utilIsUpdatableSet:R.module.utilIsUpdatableSet=(function(){"use strict";return function(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);return void 0===r||!0===r.configurable||!0===r.writable||"function"==typeof r.set}})(),lo=R.inited?R.module.utilProxyExports:R.module.utilProxyExports=(function(){"use strict";function e(e,t){if("function"!=typeof e&&"string"!=typeof t){var r=ii(e).slice(8,-1);return"Object"===r?t:r}return t}return function(t){var r=t.module.exports;if(!A(r))return r;var i=R.memoize.utilProxyExports,n=i.get(r);if(void 0!==n)return n.proxy;for(var s=oe((function(e,t,r){r===m&&(r=e);var i=void 0!==Ha(e,t),n=Reflect.get(e,t,r);return i&&o(t,n),n})),a=function(e,r){if(!rs(r))return r;var i=n.wrap.get(r);return void 0!==i?i:(i=new ue(r,{apply:zn((function(r,i,n){return i!==m&&i!==t.completeMutableNamespace&&i!==t.completeNamespace||(i=e),Reflect.apply(r,i,n)}))}),n.wrap.set(r,i),n.unwrap.set(i,r),i)},o=function(e,r){var i=t.getters,n=i[e];if(void 0!==n){t.addGetter(e,(function(){return r}));try{t.updateBindings(e)}finally{i[e]=n}}else t.updateBindings()},u={defineProperty(e,r,i){var a=i.value;if("function"==typeof a){var o=n.unwrap.get(a);i.value=void 0===o?a:o}return Rn.defineProperty(e,r,i),"function"==typeof i.get&&"function"!=typeof u.get&&(u.get=s),M(t.getters,r)&&(t.addGetter(r,(function(){return t.exports[r]})),t.updateBindings(r)),!0},deleteProperty:(e,r)=>!!Reflect.deleteProperty(e,r)&&(M(t.getters,r)&&(t.addGetter(r,(function(){return t.exports[r]})),t.updateBindings(r)),!0),set(e,r,i,s){if(!uo(e,r))return!1;var a="function"==typeof i?n.unwrap.get(i):void 0;void 0!==a&&(i=a),s===m&&(s=e);var o=void 0!==$a(e,r);return!!Reflect.set(e,r,i,s)&&(M(t.getters,r)?(t.addGetter(r,(function(){return t.exports[r]})),t.updateBindings(o?void 0:r)):o&&t.updateBindings(),!0)}},l=t.builtin,c=l?null:T(r),p=0,h=null==c?0:c.length;p<h;p++){var f=c[p];if("function"==typeof Reflect.getOwnPropertyDescriptor(r,f).get){u.get=s;break}}var d=!R.support.nativeProxyReceiver;l||d||("function"==typeof r?d=rs(r):eo(r)||(d=to(r)||Xa(r)||ro(r)||so(r)||ao(r)||Ja(r)||ci(r)||ArrayBuffer.isView(r)||Ka(r)||Za(r)||no(r)||Qa(r)||io(r)||oo(r)||Ya(r))),d?(u.get=function(t,r,i){i===m&&(i=t);var n=s(t,r,i),o=n;return r===Symbol.toStringTag&&(o=e(t,n)),o=a(t,o),o!==n&&ys(t,r)?o:n},u.getOwnPropertyDescriptor=function(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);if(gs(r)){var i=r.value;"function"==typeof i&&(r.value=a(e,i))}return r}):l&&D(r)&&!Reflect.has(r,Symbol.toStringTag)&&"[object Object]"!==ii(r)&&(u.get=function(t,r,i){i===m&&(i=t);var n=Reflect.get(t,r,i);if(r===Symbol.toStringTag){var s=e(t,n);if(s!==n&&ys(t,r))return s}return n});var m=new ue(r,u);return n={proxy:m,unwrap:new WeakMap,wrap:new WeakMap},i.set(r,n),i.set(m,n),m}})(),co=Function.prototype[Symbol.hasInstance],po={__proto__:null},ho=R.memoize.builtinEntries,fo=function(e){f(po,e,(function(){"use strict";var t=ho.get(e);if(void 0!==t)return t;var r=(function(e){var t=qa[e],r=t.exports,i=r,n="function"==typeof i;if(n&&"assert"!==e){var s=i,a=s.prototype,o=Xn((function(e){return this===r?e instanceof s||za(e,r):za(e,this)}),co),u=new ue(s,{get(e,t,i){i!==r&&i!==u||(i=e);var n=Reflect.get(e,t,i),s=n;return t===Symbol.hasInstance?s=o:n===e?s=r:n===a&&(s=l),s!==n&&ys(e,t)?s:n},getOwnPropertyDescriptor(e,t){var r=Reflect.getOwnPropertyDescriptor(e,t);return void 0!==r&&r.value===a&&gs(r)&&(r.value=l),r}}),l=new ue(a,{get(e,t,i){i===l&&(i=e);var n=Reflect.get(e,t,i);return n===s&&ys(e,t)?r:n},getOwnPropertyDescriptor(e,t){var i=Reflect.getOwnPropertyDescriptor(e,t);return void 0!==i&&i.value===s&&gs(i)&&(i.value=r),i}});t.exports=u}var c=Zp.get(t);return c.builtin=!0,r=lo(c),t.exports=r,c.exports=r,n&&"module"===e&&(i.prototype.constructor=r),c.loaded(),c})(e);return"console"!==e&&"module"!==e&&"util"!==e&&ho.set(e,r),r}))},mo=0,vo=null==_i?0:_i.length;mo<vo;mo++){var go=_i[mo];fo(go)}var yo,xo=po,bo=R.inited?R.module.builtinReflect:R.module.builtinReflect=(function(){"use strict";var e=R.external.Reflect,t=e.defineProperty,r=e.deleteProperty,i=e.set;function n(e){return Xn((function(...t){var r=t[0];try{return Reflect.apply(e,this,t)}catch(e){if(vs(r))return!1;throw e}}),e)}var s=wn.create();return ka(s,e),"function"==typeof t&&(s.defineProperty=n(t)),"function"==typeof r&&(s.deleteProperty=n(r)),"function"==typeof i&&(s.set=n(i)),s})(),wo=R.inited?R.module.builtinGlobal:R.module.builtinGlobal=(function(){"use strict";var e={Reflect:bo,get console(){return xo.console.module.exports}},t=new Map([["Reflect",R.external.Reflect],["console",r]]),i=new ue(R.unsafeGlobal,{get(r,n,s){s===i&&(s=r);var a=Reflect.get(r,n,s);if(t.has(n)){var o=e[n];if(o!==a&&a===t.get(n)&&ys(r,n))return o}return a},getOwnPropertyDescriptor(r,i){var n=Reflect.getOwnPropertyDescriptor(r,i);return t.has(i)&&void 0!==n&&n.value===t.get(i)&&gs(n)&&(n.value=e[i]),n}});return i})(),Eo=R.inited?R.module.errorGetBuiltinErrorConstructor:R.module.errorGetBuiltinErrorConstructor=(function(){"use strict";var e=R.external.Error;return function(t){if(t instanceof Error||t===Error.prototype)return Error;if(t instanceof e||t===e.prototype)return e;for(var r=t;null!==(r=ae(r));){var i=r.constructor;if("function"==typeof i&&"Error"===i.name&&rs(i))return i}return e}})(),So=R.inited?R.module.errorConstructError:R.module.errorConstructError=(yo=b.STACK_TRACE_LIMIT,function(e,t,r=yo){var i=Eo(e.prototype),n=Reflect.getOwnPropertyDescriptor(i,"stackTraceLimit"),s=void 0===n?void 0:n.value,a=0===r||"number"!=typeof s||Number.isNaN(s)||s<r;a&&N(i,"stackTraceLimit",r);var o=Reflect.construct(e,t);return a&&(void 0===n?Reflect.deleteProperty(i,"stackTraceLimit"):Reflect.defineProperty(i,"stackTraceLimit",n)),o}),Ro=R.inited?R.module.errorGetLocationFromStackTrace:R.module.errorGetLocationFromStackTrace=(function(){"use strict";var e=/^(.+?):(\d+)(?=\n)/,t=/^ *at (?:.+? \()?(.+?):(\d+)(?:\:(\d+))?/gm;function r(e){return xi(e)&&!Ni(e)}return function(i){if(!Wn(i))return null;var n=un(i,"stack");if("string"!=typeof n)return null;var s=Tr(un(i,"message"));n=n.replace(s,"");var a=e.exec(n);if(null!==a){var o=a,u=o[1],l=o[2];if(r(u))return{column:0,filename:u,line:l}}for(t.lastIndex=0;null!==(a=t.exec(n));){var c=a,p=c[1],h=c[2],f=c[3];if(r(p))return{column:f,filename:p,line:h}}return null}})(),Po=R.inited?R.module.utilGetModuleName:R.module.utilGetModuleName=(function(){"use strict";return function(e){if(D(e)){var t=e.filename,r=e.id;if("string"==typeof r)return"."===r&&"string"==typeof t?t:r;if("string"==typeof t)return t}return""}})(),_o=function(e,t=128){var r=_s(e);return r.length>t?r.slice(0,t)+"...":r},ko=R.inited?R.module.errors:R.module.errors=(function(){"use strict";var e=39,t=b.PACKAGE_VERSION,r=R.external,i=r.Error,n=r.ReferenceError,s=r.SyntaxError,a=r.TypeError,o=new Map,u={MAIN_NOT_FOUND:function(t,r){var n=new i("Cannot find module "+Dr(t,e)+'. Please verify that the package.json has a valid "main" entry');return n.code="MODULE_NOT_FOUND",n.path=r,n.requestPath=t,n},MODULE_NOT_FOUND:function(t,r){var n=(function(e){for(var t=[],r=new Set;null!=e&&!r.has(e);)r.add(e),t.push(Po(e)),e=e.parent;return t})(r),s="Cannot find module "+Dr(t,e);0!==n.length&&(s+="\nRequire stack:\n- "+n.join("\n- "));var a=new i(s);return a.code="MODULE_NOT_FOUND",a.requireStack=n,a}};function l(e,t,r){u[e]=(function(e,t){return function(...r){var i,n=r.length,s=0===n?null:r[n-1],a="function"==typeof s?r.pop():null,u=o.get(t),l=u(...r);null===a?i=So(e,[l]):(i=So(e,[l],0),qn(i,a));var c=Ro(i);if(null!==c){var p=un(i,"stack");"string"==typeof p&&Reflect.defineProperty(i,"stack",{configurable:!0,value:c.filename+":"+c.line+"\n"+p,writable:!0})}return i}})(r,e),o.set(e,t)}function c(e,t,r){u[e]=(function(e,t){return class extends e{constructor(...e){var r=o.get(t);super(r(...e));var i=Tr(un(this,"name"));Reflect.defineProperty(this,"name",{configurable:!0,value:i+" ["+t+"]",writable:!0}),un(this,"stack"),Reflect.deleteProperty(this,"name")}get code(){return t}set code(e){N(this,"code",e)}}})(r,e),o.set(e,t)}function p(t){return"symbol"==typeof t?Tr(t):Dr(t,e)}return l("ERR_CONST_ASSIGNMENT",(function(){return"Assignment to constant variable."}),a),l("ERR_EXPORT_CYCLE",(function(e,t){return"Detected cycle while resolving name '"+t+"' in '"+us(e)+"'"}),s),l("ERR_EXPORT_MISSING",(function(e,t){return"The requested module '"+us(e)+"' does not provide an export named '"+t+"'"}),s),l("ERR_EXPORT_STAR_CONFLICT",(function(e,t){return"The requested module '"+us(e)+"' contains conflicting star exports for name '"+t+"'"}),s),l("ERR_INVALID_ESM_FILE_EXTENSION",(function(e){return"Cannot load module from .mjs: "+us(e)}),i),l("ERR_INVALID_ESM_OPTION",(function(r,i,n){return"The esm@"+t+" option "+(n?Tr(r):Dr(r,e))+" is invalid. Received "+_o(i)}),i),l("ERR_NS_ASSIGNMENT",(function(e,t){return"Cannot assign to read only module namespace property "+p(t)+" of "+us(e)}),a),l("ERR_NS_DEFINITION",(function(e,t){return"Cannot define module namespace property "+p(t)+" of "+us(e)}),a),l("ERR_NS_DELETION",(function(e,t){return"Cannot delete module namespace property "+p(t)+" of "+us(e)}),a),l("ERR_NS_EXTENSION",(function(e,t){return"Cannot add module namespace property "+p(t)+" to "+us(e)}),a),l("ERR_NS_REDEFINITION",(function(e,t){return"Cannot redefine module namespace property "+p(t)+" of "+us(e)}),a),l("ERR_UNDEFINED_IDENTIFIER",(function(e){return e+" is not defined"}),n),l("ERR_UNKNOWN_ESM_OPTION",(function(e){return"Unknown esm@"+t+" option: "+e}),i),c("ERR_INVALID_ARG_TYPE",(function(e,t,r){var i="The '"+e+"' argument must be "+t;return arguments.length>2&&(i+=". Received type "+(null===r?"null":typeof r)),i}),a),c("ERR_INVALID_ARG_VALUE",(function(e,t,r="is invalid"){return"The argument '"+e+"' "+r+". Received "+_o(t)}),i),c("ERR_INVALID_PROTOCOL",(function(e,t){return"Protocol '"+e+"' not supported. Expected '"+t+"'"}),i),c("ERR_MODULE_RESOLUTION_LEGACY",(function(e,t,r){return e+" not found by import in "+t+". Legacy behavior in require() would have found it at "+r}),i),c("ERR_REQUIRE_ESM",(function(e){return"Must use import to load module: "+us(e)}),i),c("ERR_UNKNOWN_FILE_EXTENSION",(function(e){return"Unknown file extension: "+e}),i),u})(),Io=R.inited?R.module.bundledLookup:R.module.bundledLookup=(function(){"use strict";var e=en.BRAVE,t=en.ELECTRON,r=new Set;return t&&r.add("electron"),e&&r.add("ad-block").add("tracking-protection"),r})(),Ao=R.inited?R.module.pathIsExtJS:R.module.pathIsExtJS=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;return t>3&&46===e.charCodeAt(t-3)&&106===e.charCodeAt(t-2)&&115===e.charCodeAt(t-1)}})(),No=R.inited?R.module.moduleInternalReadPackage:R.module.moduleInternalReadPackage=(function(){"use strict";var e=/"main"/;return function(t,r){var i=R.memoize.moduleInternalReadPackage,n=void 0===r?0:r.length,s=t+"\0";n>0&&(s+=1===n?r[0]:r.join());var a=i.get(s);if(void 0!==a)return a;var o,u=t+Ee+"package.json",l=Ri(u,"utf8");if(null===l||""===l||1===n&&"main"===r[0]&&!e.test(l))return null;try{o=JSON.parse(l)}catch(e){throw e.message="Error parsing "+u+": "+e.message,e.path=u,fs(e),e}return D(o)?(i.set(s,o),o):null}})(),Co=R.inited?R.module.fsRealpath:R.module.fsRealpath=(function(){"use strict";var e,t=en.ELECTRON,r=en.WIN32,i=R.realpathNativeSync,n=t||r,s=!n&&"function"==typeof i;function a(t){try{return Xr(t)}catch(r){if(Wn(r)&&"ENOENT"===r.code&&(void 0===e&&(e=!n&&!R.support.realpathNative&&"function"==typeof se.fs.realpath),e))return(function(e){if("string"==typeof e)try{return se.fs.realpath(rn(e))}catch(e){}return""})(t)}return""}return function(e){if("string"!=typeof e)return"";var t=R.memoize.fsRealpath,r=t.get(e);return void 0!==r?r:(r=s?(function(e){try{return i(e)}catch(e){}return a(e)})(e):a(e),""!==r&&t.set(e,r),r)}})(),Oo=39,To=en.FLAGS,Mo=en.TINK,Lo=en.YARN_PNP,Do=ko.MAIN_NOT_FOUND,Fo=Qr.prototype.isFile,jo=["main"],Vo=Mo||Lo,Go=!Vo&&!To.preserveSymlinks,Bo=!Vo&&!To.preserveSymlinksMain;function Uo(e,t,r){"use strict";for(var i=0,n=null==t?0:t.length;i<n;i++){var s=t[i],a=qo(e+s,r);if(""!==a)return a}return""}function Wo(e,t,r,i){"use strict";if("string"!=typeof t)return"";var n=we(e,t),s=qo(n,i);return""===s&&(s=Uo(n,r,i)),""===s&&(s=Uo(n+Ee+"index",r,i)),s}function qo(e,t){"use strict";var r=-1;if(Ao(e)||on(e)){var i=tn(e);null!==i&&(r=Reflect.apply(Fo,i,[])?0:1)}else r=nn(e);if(r)return"";var n=t?Bo:Go;return n?Co(e):e}function zo(e,t,r,i,n){"use strict";var s,a,o,u=No(t,r);if(null===u)return Uo(t+Ee+"index",i,n);for(var l=0,c=null==r?0:r.length;l<c;l++)if(s=r[l],a=u[s],o=Wo(t,a,i,n),""!==o&&("main"===s||!on(o)))return o;var p=t+Ee+"package.json";if(o=Uo(t+Ee+"index",i,n),""===o)throw new Do(e,p);return To.pendingDeprecation&&K("Invalid "+Dr(s,Oo)+" field in "+Dr(p,Oo)+" of "+_o(a)+". Please either fix or report it to the module author","DeprecationWarning","DEP0128"),o}var Ho,$o=function(e,t,r=!1,i,n){var s=t.length,a=e+"\0"+(1===s?t[0]:bn.join(t))+"\0";void 0!==i&&(a+=1===i.length?i[0]:i.join()),a+="\0",void 0!==n&&(a+=1===n.length?n[0]:n.join()),a+="\0",r&&(a+="1");var o=R.memoize.moduleInternalFindPath,u=o.get(a);if(void 0!==u)return u;var l=r?Bo:Go,c=mi(e);if(!c&&0===s)return"";var p=e.length,h=0!==p;if(h){var f=e.charCodeAt(p-1);46===f&&(f=e.charCodeAt(p-2),46===f&&(f=e.charCodeAt(p-3))),h=gi(f)}c&&(l?(t=[ge(e)],e=me(e)):t=[e]);for(var d=0,m=t,v=null==m?0:m.length;d<v;d++){var g=m[d];if(c||1===nn(g)){var y=g;if(!l||(y=Co(g),""!==y)){c?l&&(y+=Ee+e):y=we(y,e);var x=-1,b=null;Ao(y)||on(y)?(b=tn(y),null!==b&&(x=Reflect.apply(Fo,b,[])?0:1)):x=nn(y);var w="";if(h||(0===x&&(w=l?Co(y):y),""===w&&(void 0===n&&(n=T(bc._extensions)),w=Uo(y,n,r))),1===x&&""===w&&(void 0===n&&(n=T(bc._extensions)),void 0===i&&(i=jo),w=zo(e,y,i,n,r)),""!==w)return o.set(a,w),w}}}return""},Ko={},Jo=R.inited?R.module.utilValidateString:R.module.utilValidateString=(function(){"use strict";var e=ko.ERR_INVALID_ARG_TYPE;return function(t,r){if("string"!=typeof t)throw new e(r,"string",t)}})(),Yo=en.ELECTRON,Xo=en.WIN32,Qo=Array.prototype.map.call("node_modules",(function(e){return e.charCodeAt(0)})).reverse(),Zo=Qo.length,eu=Xn((function(e){"use strict";if(Jo(e,"from"),Yo)return Sn._nodeModulePaths(e);if(e=we(e),Xo){if(e.length>1&&92===e.charCodeAt(e.length-1)&&58===e.charCodeAt(e.length-2))return bn.of(e+"node_modules")}else if("/"===e)return bn.of("/node_modules");for(var t=e,r=t.length,i=r,n=0,s=bn.of();r--;){var a=e.charCodeAt(r);gi(a)?(n!==Zo&&bn.push(s,e.slice(0,i)+Ee+"node_modules"),i=r,n=0):-1!==n&&(Qo[n]===a?n+=1:n=-1)}return Xo||bn.push(s,"/node_modules"),s}),En._nodeModulePaths),tu=eu,ru=en.RUNKIT,iu=b.PACKAGE_DIRNAME,nu=function(e,t=null,r=!1){var i=null!==t&&t.filename;if(!yi(e)){var n=null!==t&&t.paths,s=n?bn.from(n):bn.of();return n&&!r&&bn.push(s,...Pc.state.module.globalPaths),ru&&(void 0===Ho&&(Ho=ge(iu)),s.push(Ho)),s.length?s:null}if("string"==typeof i)return bn.of(ge(i));var a=r?tu("."):bc._nodeModulePaths(".");return bn.unshift(a,"."),a},su=1,au=2,ou=en.ELECTRON,uu=en.FLAGS,lu=en.YARN_PNP,cu=ko.ERR_INVALID_PROTOCOL,pu=ko.ERR_MODULE_RESOLUTION_LEGACY,hu=ko.ERR_UNKNOWN_FILE_EXTENSION,fu=ko.MODULE_NOT_FOUND,du=/^\/\/localhost\b/,mu=/[?#].*$/,vu=[".mjs",".js",".json",".node"],gu=["main"],yu=new Set(vu);function xu(e,t,r,i,n,s,a){"use strict";var o;return i&&Array.isArray(i.paths)?o=(function(e,t,r){for(var i=new bc(""),n=[],s=0,a=null==t?0:t.length;s<a;s++){var o=t[s];i.paths=tu(o);for(var u=nu(e,i,r),l=0,c=null==u?0:u.length;l<c;l++){var p=u[l];-1===n.indexOf(p)&&n.push(p)}}return n})(e,i.paths,a):(o=nu(e,t,a),null===o&&(o=[])),$o(e,o,r,n,s)}function bu(e,t){"use strict";if(!Pc.state.package.default.options.debug){var r={filename:null,inModule:!1};if(null!==t){var i=t.type;r.filename=t.filename,r.inModule=(!t.package.options.cjs.paths||".mjs"===t.extname)&&i!==su&&i!==au}ds(e,r)}return e}var wu=function(e,t,r=!1,i){if(ou&&Io.has(e))return Sn._resolveFilename(e,t,r,i);if(ki.has(e))return e;if(lu)return Ko._resolveFilename(e,t,r,i);var n,s,a,o=mi(e),u=Zp.get(t);if(null!==u&&u.updateFilename(),n=o?ge(e):null===u?"":u.dirname,!D(i)){s=R.memoize.moduleESMResolveFilename,a=e+"\0"+n+"\0"+(r?"1":"");var l=s.get(a);if(void 0!==l)return l}var c=!o&&yi(e),p=o||c,h=Yc.get(n).options,f=h.cjs.paths,d=h.mainFields;null!==u&&".mjs"===u.extname&&(f=!1,d=gu);var m="";if(p||47!==e.charCodeAt(0)&&-1===e.indexOf(":")){if(p){var v=e.replace(mu,"");if(!Dn(v)){var g,y=o?[""]:[n];f||(g="explicit"===uu.esModuleSpecifierResolution?Hn:vu),v=_n(v),m=$o(v,y,r,d,g)}}else if(!Dn(e)){var x=_n(e),b=!f,w=f?void 0:vu;if(m=xu(x,t,r,i,d,w,b),""===m&&ki.has(x))return void 0!==s&&s.set(a,x),x}}else{var E=Fn(e);if(m=jn(E),""===m&&"file:"!==E.protocol&&!du.test(e)){var S=new cu(E.protocol,"file:");throw bu(S,u),S}""!==m&&(m=xu(m,t,r,i,Hn,Hn,!0))}if(""!==m){if(f||r||Ao(m)||on(m)||yu.has(ye(m)))return void 0!==s&&s.set(a,m),m;var P=new hu(m);throw bu(P,u),P}if(m=(function(e,t,r,i){"use strict";try{return bc._resolveFilename(e,t,r,i)}catch(e){}return""})(e,t,r,i),""!==m){if(f)return void 0!==s&&s.set(a,m),m;var _=new pu(e,n,m);throw bu(_,u),_}var k=new fu(e,t);throw bu(k,u),k},Eu=function(e,t,r,i){"use strict";var n;try{return wu(e,t,r,i)}catch(e){n=e}try{return bc._resolveFilename(e,t,r,i)}catch(e){}throw n},Su=function(e,t,r=!1,i,n){var s,a=Pc.state.module,o=R.moduleState.parsing,u=i[e];void 0===u&&i===a.scratchCache&&(u=bc._cache[e]);var l=void 0!==u;if(l){var c=null!=t&&t.children;if(Array.isArray(c)&&-1===bn.indexOf(c,u)&&bn.push(c,u),s=Zp.get(u),o||u.loaded||2!==s.state)return s}else{if(M(xo,e))return xo[e];u=new bc(e,t),u.filename=Vn(e)?jn(e):e,s=Zp.get(u),r&&(u.id=".",a.mainModule=u,I.mainModule=u)}var p=s,h=p.compileData,f=s.extname;if(l||null!==h&&null!==h.code||".json"===f||".wasm"===f)return n(s),s;var d=u,m=d._compile,v=M(u,"_compile");return N(u,"_compile",oe((function(e,t){"use strict";v?N(this,"_compile",m):Reflect.deleteProperty(this,"_compile");var r=M(this,R.symbol._compile)?this[R.symbol._compile]:null,i=m;return"function"==typeof r&&(i=r,Reflect.deleteProperty(this,R.symbol._compile)),Reflect.apply(i,this,[e,t])}))),n(s),s},Ru=R.inited?R.module.utilDecodeURI:R.module.utilDecodeURI=(function(){"use strict";var e=decodeURI;return function(t){return"string"==typeof t?e(t):""}})(),Pu=R.inited?R.module.utilGetURLQueryFragment:R.module.utilGetURLQueryFragment=(function(){"use strict";var e=/[?#]/;return function(t){var r="string"==typeof t?t.search(e):-1;return-1===r?"":Ru(as(t.slice(r)))}})(),_u=R.inited?R.module.moduleInternalFindCompilerExtension:R.module.moduleInternalFindCompilerExtension=(function(){"use strict";return function(e,t){var r=t.basename,i=t.extname,n=t.filename;if(""===i)return i;for(var s,a=n.length-i.length,o=0;-1!==(s=r.indexOf(".",o));)if(o=s+1,0!==s){var u=s===a,l=u?i:r.slice(s);if(M(e,l))return l;if(u)break}return""}})(),ku=function(e,t,r=!1,i){var n,s=R.moduleState.parsing,a=Zp.get(t),o=null===a?null:a.package.options.cjs,u=null!==a&&".mjs"===a.extname,l=null===a?-1:a.type;n=null!==a&&o.paths&&!u?Eu(e,t,r):wu(e,t,r);var c=ge(n);"."===c&&ki.has(n)&&(e=n);var p=Yc.from(n),h=p.options.cjs,f=Pu(e),d=Pc.state.module,m=d.moduleCache,v=d.scratchCache,g=bc._cache,y=!h.cache;if(e=""===f?n:os(n)+f,on(n)||M(m,e))g=m;else if(s)g=v;else if(M(v,e)){var x=v[e];y&&1!==Zp.get(x).type&&(g=m),g[e]=x,Reflect.deleteProperty(v,e)}var b=!1,w=function(e){"use strict";var t=1===e.type;t&&(y=!1),r&&y&&Reflect.deleteProperty(I,"mainModule"),t&&null!==a&&(u||1!==l&&2!==l&&!o.cache)&&(e.module.parent=void 0)},E=Su(e,t,r,g,(function(t){"use strict";b=!0,g[e]=t.module,null!==a&&(a.children[t.name]=t),s||w(t),"function"==typeof i&&i(t),(function(e,t,r,i,n){var s,a=!0;try{(function(e,t,r){var i=R.moduleState.parsing;e.updateFilename(t),null===r&&(r=e);var n=Pc.state.module.extensions,s=e.extname,a=r.extname,o=r.type,u=1===o,l=".mjs"===a,c=2===o;(u||c||".js"===s||(".cjs"===s||r.package.options.cjs.extensions)&&!l)&&(n=bc._extensions);var p=_u(n,e);""===p&&(p=".js");var h=e.module;h.paths||(h.paths=u||c||e.package.options.cjs.paths&&!l&&".mjs"!==s?bc._nodeModulePaths(e.dirname):tu(e.dirname)),i&&".cjs"!==p&&".js"!==p&&".json"!==p&&".mjs"!==p&&".wasm"!==p?e.state=2:(n[p](h,t),i||h.loaded||(h.loaded=!0))})(e,t,r),a=!1}catch(e){throw s=e,s}finally{a&&(1!==e.type?Reflect.defineProperty(i,n,{configurable:!0,enumerable:!0,get:oe((function(){throw s})),set:oe((function(e){N(this,n,e)}))}):Reflect.deleteProperty(i,n))}})(t,n,a,g,e)}));return s&&w(E),b||"function"!=typeof i||i(E),null!==a&&(a._lastChild=E),E},Iu=R.inited?R.module.moduleEsmValidateDeep:R.module.moduleEsmValidateDeep=(function(){"use strict";var e=1,t=-1,r=3,i=1,n=4,s=2,a=ko.ERR_EXPORT_CYCLE,o=ko.ERR_EXPORT_MISSING;function u(e,t,i){var n=e.setters[t],s=n.findIndex((function({owner:e}){return e===i}));if(-1!==s){var u=(function e(t,i,n){var s=t.name;if(void 0===n)n=new Set;else if(n.has(s))return!0;n.add(s);for(var a=0,o=t.setters[i],u=null==o?0:o.length;a<u;a++){var l=o[a];if(l.type===r&&e(l.owner,l.exportedName,n))return!0}return!1})(e,t)?a:o;throw n.splice(s,1),new u(e.module,t)}}function l(r,a){var o=".mjs"===a.extname,l=a.package.options.cjs.namedExports&&!o;if(r._namespaceFinalized!==t){var c=r.type,p=c===i,h=r._loaded===e,f=(p||c===n)&&!l&&!r.builtin||c===s&&o;if(!p||f||h){var d,m=r._validation,v=r.getters,g=r.setters;for(var y in g){if(f){if("*"===y||"default"===y)continue;u(r,y,a)}var x=m.get(y);if(!0!==x){if(void 0===d&&(d=h?r.getExportByName("*",a):v),M(d,y)){var b=v[y],w=b,E=w.owner;if(E.type===i&&E._loaded!==e)continue;if(!b.deferred){m.set(y,!0);continue}for(var S=new Set;void 0!==b&&b.deferred;)S.has(b)?b=void 0:(S.add(b),b=b.owner.getters[b.id]);if(void 0!==b){v[y]=b,m.set(y,!0);continue}}m.set(y,!1),u(r,y,a)}}}}}return function e(t,r){var n=t.children;if(void 0===r)r=new Set;else if(r.has(t))return;for(var s in r.add(t),n){var a=n[s];a.type!==i&&e(a,r),l(a,t)}}})(),Au=R.inited?R.module.moduleEsmValidateShallow:R.module.moduleEsmValidateShallow=(function(){"use strict";var e=ko.ERR_EXPORT_MISSING;return function(t,r){var i,n=t._validation,s=t.setters;for(var a in s){var o=n.get(a);if(!0!==o)if(void 0===i&&(i=t.getExportByName("*",r)),M(i,a))n.set(a,!0);else{n.set(a,!1);var u=s[a],l=u.findIndex((function({owner:e}){return e===r}));if(-1!==l)throw u.splice(l,1),new e(t.module,a)}}}})(),Nu=ko.ERR_INVALID_ESM_FILE_EXTENSION;function Cu(e,t,r){"use strict";var i=r._lastChild;if(null!==i&&Object.is(i.module.exports,t))return i;var n=(function(e,t,r){try{return Eu(e,t,void 0)}catch(e){}if(xi(e)){var i=t.filename;return"string"==typeof i?we(i,e):we(e)}return e})(e,r.module),s=new bc(n);return s.exports=t,s.loaded=!0,xi(n)&&(s.filename=n),Zp.get(s)}function Ou(e,t,r){"use strict";var i,n,s=R.moduleState;s.requireDepth+=1;var a=!0;try{i=ku(e,t.module,!1,r),a=!1}catch(e){n=e}if(s.requireDepth-=1,!a)return i;if(".mjs"===t.extname||!Wn(n))throw n;var o=n,u=o.code;if("ERR_INVALID_PROTOCOL"!==u&&"MODULE_NOT_FOUND"!==u)throw n;return null}function Tu(e,t){"use strict";t._passthruRequire=!0;try{return t.module.require(e)}finally{t._passthruRequire=!1}}var Mu=function(e,t,r,i=!1){var n=R.moduleState,s=n.parsing,a=null,o=!1,u=function(e,t,i=t.name){e.children[i]=t,t.addSetters(r,e)},l=function(){"use strict";if(!o){o=!0;var r=Tu(e,t);if(null===a)a=Cu(e,r,t),u(t,a);else if(!Object.is(a.module.exports,r)){var i=a,n=i.name;a=Cu(e,r,t),u(t,a,n)}a.loaded(),a.updateBindings(null,3),Au(a,t)}},c=function(e){return u(t,e)};if(i||s){i&&(n.parsing=!0);try{a=Ou(e,t,c)}finally{i&&(n.parsing=!1)}null!==a&&(a.updateBindings(),i&&2===a.state&&1!==a.type&&Iu(a))}else a=Ou(e,t,c);if(s){if(null===a){var p=Tu(e,t);a=Cu(e,p,t),u(t,a)}a._finalize=l}if(".mjs"===t.extname&&null!==a&&3===a.type&&".mjs"!==a.extname)throw Nu(a.module);s||l()},Lu=R.inited?R.module.utilIdentity:R.module.utilIdentity=(function(){"use strict";return function(e){return e}})(),Du=Pe,Fu=_e,ju=ko.ERR_CONST_ASSIGNMENT,Vu=ko.ERR_UNDEFINED_IDENTIFIER,Gu=R.external,Bu=Gu.Promise,Uu=Gu.eval,Wu={addDefaultValue(e){this.addExportGetters([["default",function(){return e}]]),void 0===e&&this.initBindings(["default"])},addExportFromSetter(e,t=e){var r=this,i=qu(3,(function(i,n){"use strict";var s=r.entry;if(1===s._loaded)return!0;1===n.type&&1!==n._loaded&&(s._namespaceFinalized=-1),s.addGetterFrom(n,e,t)}));return i.exportedName=t,i},addExportGetters(e){this.entry.addGetters(e)},addNamespaceSetter(){var e=this;return qu(4,(function(t,r){"use strict";var i=e.entry;if(1===i._loaded)return!0;var n=1===r._loaded;if(n||1!==r.type){var s=r.getters,a=i.getters,o=i.name,u=n?r.getExportByName("*",i):r.getters;for(var l in u)if("default"!==l){var c=void 0,p=a[l];if(void 0===p||(c=p.owner.name,o!==c)){var h=s[l].owner.name;void 0!==p&&c!==h||i.addGetterFrom(r,l),c=a[l].owner.name,c!==o&&c!==h&&i.addGetter(l,qu(2,(function(){return Fu})))}}}else i._namespaceFinalized=-1}))},assertImportedBinding:function e(t,r){"use strict";if(!0!==this.entry.importedBindings.get(t))throw new Vu(t,e);return r},assertUndeclared:function e(t){"use strict";var r=R.unsafeGlobal;if(!M(r,t))throw new Vu(t,e);return r[t]},compileEval(e){if("string"!=typeof e)return e;var t=this.entry,r=t.package.options.cjs,i=".mjs"===t.extname,n=r.vars&&!i;try{return yn.compile(e,{cjsVars:n,eval:!0,runtimeName:t.runtimeName}).code}catch(n){if(!Pc.state.package.default.options.debug&&is(n)){var s=t.type;ds(n,{content:e,filename:"eval",inModule:(!r.paths||i)&&1!==s&&2!==s})}else fs(n);throw n}},compileGlobalEval(e){if("string"!=typeof e)return e;var t,r=this.entry,i=r.package.options.cjs,n=".mjs"===r.extname,s=r.runtimeName,a=i.vars&&!n;try{var o=yn.compile(e,{cjsVars:a,eval:!0,runtimeName:s});if(0===o.transforms)return e;t=o.code}catch(t){if(!Pc.state.package.default.options.debug&&is(t)){var u=r.type;ds(t,{content:e,filename:"eval",inModule:(!i.paths||n)&&1!==u&&2!==u})}else fs(t);throw t}var l=R.unsafeGlobal;if(M(l,s))return t;var c=this;return Reflect.defineProperty(l,s,{configurable:!0,get:oe((function(){"use strict";return Reflect.deleteProperty(this,s),c}))}),t=(Ar(t,"use strict")?'"use strict";':"")+"let "+s+"=global."+s+";"+t,t},dynamicImport(e){var t=this.entry;return new Bu(function(r,i){"use strict";Na((function(){try{var n,s;"string"!=typeof e&&(e+="");var a=[["*",null,qu(2,(function(e,t){if(1===t._loaded)return n=e,void 0===s&&(s=Na((function(){return r(n)}))),!0}))]];Mu(e,t,a,!0)}catch(e){!Pc.state.package.default.options.debug&&is(e)?ds(e,{inModule:!t.package.options.cjs.paths||".mjs"===t.extname}):fs(e),i(e)}}))})},enable(e,t){if(null!==e.runtime)return e.runtime;var r=e.module,i=r.exports;return e.exports=t,f(i,"meta",(function(){"use strict";var t=e.id,r=null;return Vn(t)?r=t:xi(t)&&(r=os(t)),{__proto__:null,url:r}})),i.addDefaultValue=Wu.addDefaultValue,i.addExportFromSetter=Wu.addExportFromSetter,i.addExportGetters=Wu.addExportGetters,i.addNamespaceSetter=Wu.addNamespaceSetter,i.assertImportedBinding=Wu.assertImportedBinding,i.assertUndeclared=Wu.assertUndeclared,i.compileEval=function(e){return Wu.compileEval.call(i,e)},i.compileGlobalEval=Wu.compileGlobalEval,i.dynamicImport=Wu.dynamicImport,i.entry=e,i.global=wo,i.globalEval=function(e){return Wu.globalEval.call(i,e)},i.import=Wu.import,i.initBindings=Wu.initBindings,i.resumeChildren=Wu.resumeChildren,i.run=Wu.run,i.runResult=void 0,i.throwConstAssignment=Wu.throwConstAssignment,i.updateBindings=Wu.updateBindings,i._=i,i.a=i.assertImportedBinding,i.b=i.throwConstAssignment,i.c=i.compileEval,i.d=i.addDefaultValue,i.e=i.globalEval,i.f=i.addExportFromSetter,i.g=i.global,i.i=i.dynamicImport,i.j=i.initBindings,i.k=Lu,i.n=i.addNamespaceSetter,i.o=Du,i.r=i.run,i.s=i.resumeChildren,i.t=i.assertUndeclared,i.u=i.updateBindings,i.v=Uu,i.w=i.import,i.x=i.addExportGetters,e.runtime=i},globalEval(e){return Uu(this.compileGlobalEval(e))},import(e,t){return Mu(e,this.entry,t)},initBindings(e){this.entry.updateBindings(e)},resumeChildren(){this.entry.resumeChildren()},run(e){var t=this.entry,r=3===t.type?Hu:zu;return this.runResult=r(t,e)},throwConstAssignment:function e(){"use strict";throw new ju(e)},updateBindings(e){return this.entry.updateBindings(null,2),e}};function qu(e,t){"use strict";return t.type=e,t}function zu(e,t){"use strict";var r=e.module,i=e.exports;return r.exports=i,Reflect.apply(t,i,[i,ah(r)])}function Hu(e,t){"use strict";var r=e.module,i=e.exports;return r.exports=i,e.package.options.cjs.vars&&".mjs"!==e.extname?Reflect.apply(t,i,[i,ah(r)]):Reflect.apply(t,void 0,[])}var $u,Ku=Wu,Ju=R.inited?R.module.safeJSON:R.module.safeJSON=U(R.external.JSON),Yu=R.inited?R.module.utilCreateSourceMap:R.module.utilCreateSourceMap=(function(){"use strict";var e=/\n/g;return function(t,r){if(!xi(t))return"";for(var i=0,n="";0===i||e.test(r);)n+=(i?";":"")+"AA"+(i?"C":"A")+"A",i+=1;return'{"version":3,"sources":['+Dr(os(t))+'],"names":[],"mappings":"'+n+'"}'}})(),Xu=R.inited?R.module.utilCreateInlineSourceMap:R.module.utilCreateInlineSourceMap=(function(){"use strict";return function(e,t){var r=Yu(e,t);return""===r?r:"//# sourceMappingURL=data:application/json;charset=utf-8,"+as(r)}})(),Qu=R.inited?R.module.moduleInternalCompileSource:R.module.moduleInternalCompileSource=(function(){"use strict";var e=59;function t(e,t){var r=t.async,i=0!==e.transforms,n=e.code;if(i){var s=null!==e.firstReturnOutsideFunction,a=t.runtimeName;null===e.firstAwaitOutsideFunction&&(r=!1),n="const "+a+"=exports;"+(s?"return ":"")+a+".r(("+(r?"async ":"")+"function(exports,require){"+n+"\n}))"}else r&&(i=!0,n="(async () => { "+Vr(n)+"\n})();");return i&&t.sourceMap&&(n+=Xu(e.filename,n)),n}function r(t,r){var i=r.cjsVars,n=r.runtimeName,s=null!==t.firstReturnOutsideFunction,a="yield;"+n+".s();",o=t.yieldIndex,u=r.async;null===t.firstAwaitOutsideFunction&&(u=!1);var l=t.code;0===t.transforms&&(l=Vr(l)),-1!==o&&(l=0===o?a+l:l.slice(0,o)+(l.charCodeAt(o-1)===e?"":";")+a+l.slice(o));var c="const "+n+"=exports;"+(i?"":"__dirname=__filename=arguments=exports=module=require=void 0;")+(s?"return ":"")+n+".r(("+(u?"async ":"")+"function *("+(i?"exports,require":"")+'){"use strict";'+l+"\n}))";return r.sourceMap&&(c+=Xu(t.filename,c)),c}return function(e,i={}){var n=2===e.sourceType?r:t;return n(e,i)}})(),Zu=R.inited?R.module.utilGetSourceMappingURL:R.module.utilGetSourceMappingURL=(function(){"use strict";return function(e){if("string"!=typeof e)return"";var t=e.length;if(t<22)return"";for(var r=null,i=t;null===r;){if(i=e.lastIndexOf("sourceMappingURL",i),-1===i||i<4)return"";var n=i+16,s=n+1;if(i-=4,47===e.charCodeAt(i)&&47===e.charCodeAt(i+1)){var a=e.charCodeAt(i+2);if(!(64!==a&&35!==a||(a=e.charCodeAt(i+3),32!==a&&9!==a||n<t&&61!==e.charCodeAt(n)))){if(s===t)return"";r=e.slice(s)}}}var o=r.indexOf("\n");-1!==o&&(r=r.slice(0,o)),r=r.trim();for(var u=r.length,l=-1;++l<u;){var c=r.charCodeAt(l);if(39===c||34===c||32===c||9===c)return""}return r}})(),el=R.inited?R.module.errorGetStackFrames:R.module.errorGetStackFrames=($u=oe((function(e,t){return t})),function(e){if(!Wn(e))return[];var t=Eo(e),r=Reflect.getOwnPropertyDescriptor(t,"prepareStackTrace");N(t,"prepareStackTrace",$u);var i=e.stack;return void 0===r?Reflect.deleteProperty(t,"prepareStackTrace"):Reflect.defineProperty(t,"prepareStackTrace",r),Array.isArray(i)?i:[]}),tl=R.inited?R.module.utilIsIdentifierName:R.module.utilIsIdentifierName=(function(){"use strict";return function(e){if("string"!=typeof e||0===e.length)return!1;var t=0,r=e.codePointAt(t);if(!Ke(r,!0))return!1;for(var i=r;void 0!==(r=e.codePointAt(t+=i>65535?2:1));){if(!Je(r,!0))return!1;i=r}return!0}})(),rl=R.inited?R.module.utilIsObjectEmpty:R.module.utilIsObjectEmpty=(function(){"use strict";return function(e){for(var t in e)if(M(e,t))return!1;return!0}})(),il=Pe,nl=4,sl=3,al=0,ol=2,ul=1,ll=1,cl=3,pl=4,hl=5,fl=en.DEVELOPMENT,dl=en.ELECTRON_RENDERER,ml=en.FLAGS,vl=en.NDB,gl="await is only valid in async function",yl={input:""},xl=/^.*?\bexports\b/;function bl(e,t,r){"use strict";var i=e.compileData,n=e.type,s=n===cl,a=n===pl,o=".mjs"===e.extname,u=n===hl,l=e.runtime;null===l&&(s||0!==i.transforms?l=Ku.enable(e,wn.create()):(l=wn.create(),e.runtime=l));var c,p,h=e.package,f=(function(e){return e.package.options.await&&R.support.await&&".mjs"!==e.extname})(e),d=h.options.cjs,m=void 0===l.runResult,v=e.module,g=R.moduleState.parsing,y=!1;if(e.state=g?ul:sl,m){if(e.running=!0,a)l.runResult=(function*(){var i=(function(e,t,r){var i=e.module,n=i.exports,s=e.state,a=!1;if("function"==typeof r){var o=Zp.get(e.parent);a=null!==o&&o.package.options.cjs.extensions&&".mjs"!==o.extname}var u,l,c=a?null:Si(Ri(t,"utf8")),p=!0;try{a?(r(),l=i.exports):l=Ju.parse(c),p=!1}catch(e){u=e,a||(u.message=t+": "+u.message)}if(a&&(e.state=s,N(i,"exports",n)),p)throw u;for(var h=T(l),f=0,d=null==h?0:h.length;f<d;f++){var m=h[f];tl(m)&&e.addGetter(m,(function(){return il}))}return e.addGetter("default",(function(){return il})),l})(e,t,r);yield,(function(e,t){e.exports=t,e.module.exports=t;var r=e.getters,i=function(t){e.addGetter(t,(function(){return e.exports[t]}))};for(var n in r)i(n);e.addGetter("default",(function(){return e.exports}))})(e,i)})();else if(u)l.runResult=(function*(){var r={__proto__:null},i=(function(e,t,r){for(var i=new WebAssembly.Module(Ri(t)),n=WebAssembly.Module.exports(i),s=WebAssembly.Module.imports(i),a=0,o=null==n?0:n.length;a<o;a++){var u=n[a].name;tl(u)&&e.addGetter(u,(function(){return il}))}for(var l=function(t,i){Mu(t,e,[[i,[i],function(e,i){r[t]=i.name}]])},c=0,p=null==s?0:s.length;c<p;c++){var h=s[c],f=h.module,d=h.name;l(f,d)}return i})(e,t,r);yield,(function(e,t,r){e.resumeChildren();var i=e.children;for(var n in r){var s=r[n];r[n]=i[s].module.exports}var a=e.module.exports,o=e.getters,u=new WebAssembly.Instance(t,r),l=Pn(wn.create(),u.exports);e.exports=l;var c=function(t){var r=function(){return e.exports[t]};M(o,t)&&e.addGetter(t,r),Reflect.defineProperty(a,t,{configurable:!0,enumerable:!0,get:oe(r),set:oe((function(e){N(this,t,e)}))})};for(var p in l)c(p)})(e,i,r)})();else{var x=d.vars&&!o,b=Qu(i,{async:f,cjsVars:x,runtimeName:e.runtimeName,sourceMap:wl(e)});if(s)try{e._ranthruCompile?p=Reflect.apply(Ul,v,[b,t]):(e._ranthruCompile=!0,p=v._compile(b,t))}catch(e){y=!0,c=e}else{var w=v._compile;l.runResult=(function*(){return yield,p=Reflect.apply(w,v,[b,t])})()}}e.running=!1}var E=l,S=E.runResult;if(!y&&!g&&m){e.running=!0;try{S.next()}catch(e){y=!0,c=e}e.running=!1}var P=i.firstAwaitOutsideFunction,_=(!d.paths||o)&&e.type!==ll;if(y||e.running||!f||!s||null===P||rl(e.getters)||(y=!0,c=new Qt.SyntaxError(yl,gl),c.column=P.column,c.inModule=_,c.line=P.line),!y&&!e.running){e.running=!0;try{p=S.next().value}catch(e){y=!0,c=e}e.running=!1}if(!y)return(s||u)&&Reflect.defineProperty(v,"loaded",{configurable:!0,enumerable:!0,get:oe((function(){return!1})),set:oe((function(t){t&&(N(this,"loaded",t),e.updateBindings(),e.loaded())}))}),e.state=g?ol:nl,p;if(e.state=al,Pc.state.package.default.options.debug||!is(c))throw fs(c),c;var k=Tr(un(c,"message")),I=un(c,"name");s&&("SyntaxError"===I||"ReferenceError"===I&&xl.test(k))&&(h.cache.dirty=!0);var A=Ro(c);throw null!==A&&(t=A.filename),ds(c,{filename:t,inModule:_}),c}function wl(e){"use strict";var t=e.package.options.sourceMap;return!1!==t&&(t||fl||dl||vl||ml.inspect)&&""===Zu(e.compileData.code)}var El,Sl,Rl,Pl,_l,kl=function(e,t,r,i,n){"use strict";var s=t.extname,a=t.module,o=t.package,u=o.options,l=u.mode,c=-1,p=!1,h=!1,f=1;".cjs"===s?c=1:".json"===s?(c=4,p=!0):".mjs"===s?c=2:".wasm"===s&&(c=5,h=!0),3===l?f=2:2===l&&(f=3);var d=Pc.state.package.default,m=o===d,v=".mjs"===t.extname,g=t.compileData;if(null===g){var y=t.cacheName;if(g=yn.from(t),null===g||0!==g.transforms){if(p||h)t.type=p?pl:hl,g={circular:0,code:null,codeWithTDZ:null,filename:null,firstAwaitOutsideFunction:null,firstReturnOutsideFunction:null,mtime:-1,scriptData:null,sourceType:c,transforms:0,yieldIndex:-1};else{var x=u.cjs,b=x.paths&&!v,w=x.vars&&!v,E=null===g?null:g.scriptData,S=x.topLevelReturn&&!v;g=(function(e,t,r,i){var n;try{return yn.compile(r,i)}catch(e){n=e}throw t.state=al,!Pc.state.package.default.options.debug&&is(n)?(qn(n,e),ds(n,{content:r,filename:i.filename})):fs(n),n})(e,t,r,{cacheName:y,cachePath:o.cachePath,cjsPaths:b,cjsVars:w,filename:i,hint:c,mtime:t.mtime,runtimeName:t.runtimeName,sourceType:f,topLevelReturn:S}),g.scriptData=E,2===g.sourceType&&(t.type=cl),m&&t.type===ll&&8===g.transforms&&(g.code=r,g.transforms=0)}t.compileData=g,o.cache.compile.set(y,g)}}null!==g&&null===g.code&&(g.code=r);var P=t.type===cl,_=!1;if(!P&&!h&&"function"==typeof n){var k=Zp.get(t.parent),I=null!==k&&k.type===cl,A=null===k?null:k.package;I||!m&&A!==d||(_=!0)}if(_){t.type=ll;for(var N=el(So(Error,Hn)),C=0,O=null==N?0:N.length;C<O;C++){var T=N[C],M=T.getFileName();if(mi(M)&&!Ni(M))return n(r)}return bl(t,i,n)}var L=R.moduleState,D=!1;if(!L.parsing){if(!(P||p||h)||t.state!==al)return bl(t,i,n);D=!0,L.parsing=!0,t.state=ul}if(P||p||h)try{var F=bl(t,i,n);if(-1===g.circular&&(g.circular=(function e(t,r,i){if(void 0===i)i=new Set;else if(i.has(r))return!1;i.add(r);var n=r.children;for(var s in n){var a=n[s];if(t===a||e(t,a,i))return!0}return!1})(t,t)?1:0),1===g.circular&&(t.circular=!0,P)){t.runtime=null,a.exports=wn.create();var j=g,V=j.codeWithTDZ;null!==V&&(g.code=V),F=bl(t,i,n)}if(t.updateBindings(),-1!==t._namespaceFinalized&&t.finalizeNamespace(),!D)return F}finally{D&&(L.parsing=!1)}return bl(t,i,n)},Il=R.inited?R.module.realCrypto:R.module.realCrypto=he(k("crypto")),Al=R.inited?R.module.safeCrypto:R.module.safeCrypto=(function(){"use strict";var e=U(Il);return N(e,"Hash",U(e.Hash)),e})(),Nl=Al.Hash,Cl=R.inited?R.module.utilMD5:R.module.utilMD5=(function(){"use strict";return function(e){var t=new Nl("md5");return"string"==typeof e&&t.update(e),t.digest("hex")}})(),Ol=R.inited?R.module.utilGetCacheName:R.module.utilGetCacheName=(function(){"use strict";var e=b.PACKAGE_VERSION;return function(t,r={}){var i=r.cachePath,n=r.filename,s="d41d8cd98f00b204e9800998ecf8427e";"string"==typeof i&&"string"==typeof n&&(s=Cl(mn(i,n)));var a=Cl(e+"\0"+JSON.stringify(r.packageOptions)+"\0"+t);return s.slice(0,8)+a.slice(0,8)+".js"}})(),Tl=Xn((function(e){"use strict";return bc.wrapper[0]+e+bc.wrapper[1]}),En.wrap),Ml=Tl,Ll=bn.of("(function (exports, require, module, __filename, __dirname) { ","\n});"),Dl=Ll,Fl=en.ELECTRON,jl=b.PACKAGE_RANGE,Vl=["exports","require","module","__filename","__dirname"],Gl=En.prototype,Bl=Xn((function(e,t){"use strict";Jo(e,"content"),Jo(t,"filename");var r=Zp.get(this),i=r.state,n=0===i;if(1!==r.package.options.mode&&".mjs"!==r.extname&&(n||2===i)){if(void 0===El){var s=Pc.state.package.default.options,a=Pn({},s.cjs),o=Pn({},s);o.cache=!1,o.cjs=a,El=new Yc("",jl,o)}var u;r.initialize(),r.cacheName=Ol(e),r.package=El,r.runtimeName=R.runtimeName;try{u=kl(Bl,r,e,t)}finally{n&&(r.state=0)}return u}if(void 0===Pl&&(Pl=Fl||!R.support.vmCompileFunction,!Pl)){var l=new ue(Dl,{defineProperty:(e,t,r)=>(Pl=!0,Rn.defineProperty(e,t,r),!0),set:(e,t,r,i)=>(Pl=!0,i===l&&(i=e),Reflect.set(e,t,r,i))});Reflect.defineProperty(bc,"wrap",{configurable:!0,enumerable:!0,get:oe((function(){return Ml})),set:oe((function(e){Pl=!0,N(this,"wrap",e)}))}),Reflect.defineProperty(bc,"wrapper",{configurable:!0,enumerable:!0,get:oe((function(){return l})),set:oe((function(e){Pl=!0,N(this,"wrapper",e)}))})}var c,p=r.compileData;if(null!==p){var h=p.scriptData;null!==h&&(c=h)}var f=Vr(e);if(Pc.state.module.breakFirstLine){if(void 0===Sl){var d=I.argv[1];Sl=d?bc._resolveFilename(d):"repl"}t===Sl&&(Pc.state.module.breakFirstLine=!1,Reflect.deleteProperty(I,"_breakFirstLine"),""===Zu(f)&&(f+=Xu(t,f)),f="debugger;"+f)}var m=this.exports,v=R.unsafeGlobal,g=[m,ah(this),this,t,ge(t)];if(Fl){if(g.push(I,v),void 0===Rl){var y=bc.wrap;Rl="function"==typeof y&&-1!==(y("")+"").indexOf("Buffer")}Rl&&g.push(R.external.Buffer)}void 0===_l&&(_l=v!==R.defaultGlobal,_l&&(Pl=!0));var x,b,w=3===r.type;w||Pl?(f=w?Ml(f):bc.wrap(f),b=new Ta.Script(f,{cachedData:c,filename:t,produceCachedData:!R.support.createCachedData}),x=_l?b.runInContext(R.unsafeContext,{filename:t}):b.runInThisContext({filename:t})):(b=Ta.compileFunction(f,Vl,{cachedData:c,filename:t,produceCachedData:!0}),x=b);var E=r.package.cachePath;if(""!==E){var S=R.pendingScripts,P=S.get(E);void 0===P&&(P=new Map,S.set(E,P)),P.set(r.cacheName,b)}var _=R.moduleState,k=0===_.requireDepth;k&&(_.statFast=new Map,_.statSync=new Map);var A=Reflect.apply(x,m,g);return k&&(_.statFast=null,_.statSync=null),A}),Gl._compile),Ul=Bl,Wl=En.prototype,ql=Xn((function(e){"use strict";if(Jo(e,"filename"),this.loaded)throw new R.external.Error("Module already loaded: "+this.id);var t=Zp.get(this),r=t,i=r.id,n=Pc.state.module.scratchCache;if(M(n,i)){var s=Zp.get(n[i]);t!==s&&(s.exports=this.exports,s.module=this,s.runtime=null,t=s,Zp.set(this,s),Reflect.deleteProperty(n,i))}(function(e,t){e.updateFilename(t);var r=_u(bc._extensions,e);""===r&&(r=".js");var i=e.module;i.paths=bc._nodeModulePaths(e.dirname),bc._extensions[r](i,t),i.loaded||(i.loaded=!0,e.loaded())})(t,e)}),Wl.load),zl=ql,Hl=ko.ERR_INVALID_ARG_VALUE,$l=En.prototype,Kl=Xn((function(e){"use strict";if(Jo(e,"request"),""===e)throw new Hl("request",e,"must be a non-empty string");var t=R.moduleState;t.requireDepth+=1;try{var r=on(this.filename)?Zp.get(this):null;return null!==r&&r._passthruRequire?(r._passthruRequire=!1,ku(e,this).module.exports):bc._load(e,this)}finally{t.requireDepth-=1}}),$l.require),Jl=Kl,Yl=R.inited?R.module.utilSafeDefaultProperties:R.module.utilSafeDefaultProperties=(function(){"use strict";return function(e){for(var t=arguments.length,r=0;++r<t;)for(var i=arguments[r],n=F(i),s=0,a=null==n?0:n.length;s<a;s++){var o=n[s];!M(i,o)||M(e,o)&&void 0!==un(e,o)||V(e,i,o)}return e}})(),Xl=Xn((function(e){"use strict";Jo(e,"filename");var t=new bc(e);return t.filename=e,t.paths=bc._nodeModulePaths(ge(e)),ah(t)}),En.createRequireFromPath),Ql=Xl,Zl=Xn((function(e,t,r){"use strict";Jo(e,"request"),Array.isArray(t)||(t=[]);var i=$o(e,t,r);return""!==i&&i}),En._findPath),ec=Zl,tc=R.inited?R.module.utilSafeGetEnv:R.module.utilSafeGetEnv=(function(){"use strict";var e;return function(t){if(void 0===e&&(e="function"==typeof se.util.safeGetenv),e)try{return se.util.safeGetenv(Tr(t))}catch(e){}return ln(t)}})(),rc=R.inited?R.module.moduleInternalInitGlobalPaths:R.module.moduleInternalInitGlobalPaths=(function(){"use strict";return function(){var e,t,r,i="win32"===I.platform;i?(e=ln("USERPROFILE"),t=ln("HOME")):(e=tc("HOME"),t=tc("NODE_PATH")),r=e&&"string"==typeof e?[we(e,".node_modules"),we(e,".node_libraries")]:[];var n=we(I.execPath,"..",i?"":"..");if(r.push(we(n,"lib","node")),t&&"string"==typeof t){var s=t.split(ve),a=r;r=[];for(var o=0,u=null==s?0:s.length;o<u;o++){var l=s[o];"string"==typeof l&&""!==l&&r.push(l)}r.push(...a)}return r}})(),ic=Xn((function(){"use strict";var e=rc();Pc.state.module.globalPaths=e,bc.globalPaths=bn.from(e)}),En._initPaths),nc=ic,sc=ko.ERR_REQUIRE_ESM,ac=Xn((function(e,t,r=!1){Jo(e,"request");var i=R.moduleState.parsing,n=Zp.get(t);if(null!==n&&n._passthruRequire)return n._passthruRequire=!1,ku(e,t,r).module.exports;var s=null!==n&&1===n.package.options.mode,a=bc._resolveFilename(e,t,r),o=Pc.state.module.scratchCache,u=bc._cache;i?u=o:M(o,a)&&(u[a]=o[a],Reflect.deleteProperty(o,a));var l=!1,c=Su(a,t,r,u,(function(e){"use strict";l=!0,u[a]=e.module,(s||".mjs"===e.extname)&&(e._passthruCompile=!0),(function(e,t,r,i){var n=e.module,s=!0;try{n.load(i),s=!1}finally{e._passthruCompile=!1,s&&Reflect.deleteProperty(t,r)}})(e,u,a,a)}));if(!l&&s&&3===c.type)throw new sc(a);return null!==n&&(n._lastChild=c),c.module.exports}),En._load),oc=ac,uc=Xn((function(e){"use strict";if(Array.isArray(e)&&0!==e.length){var t=new bc("internal/preload",null);try{t.paths=bc._nodeModulePaths(H())}catch(e){if(!Wn(e)||"ENOENT"!==e.code)throw lc(e),e}try{for(var r=0,i=null==e?0:e.length;r<i;r++){var n=e[r];t.require(n)}}catch(e){throw lc(e),e}}}),En._preloadModules);function lc(e){"use strict";!Pc.state.package.default.options.debug&&is(e)?ds(e):fs(e)}var cc=uc,pc=Xn((function(e,t,r=!1){if(Jo(e,"request"),ki.has(e))return r?null:bn.of(e,bn.of());var i=nu(e,t);return r?i:bn.of(e,i)}),En._resolveLookupPaths),hc=pc,fc=en.ELECTRON,dc=ko.MODULE_NOT_FOUND,mc=Xn((function(e,t,r=!1,i){if(Jo(e,"request"),fc&&Io.has(e))return Sn._resolveFilename(e,t,r,i);if(ki.has(e))return e;var n,s,a,o=mi(e),u=Zp.get(t);if(null!==u&&u.updateFilename(),n=o?ge(e):null===u?"":u.dirname,!D(i)){s=R.memoize.moduleStaticResolveFilename,a=e+"\0"+n+"\0"+(r?"1":"");var l=s.get(a);if(void 0!==l)return l}var c,p=!o&&yi(e),h=o||p;c=h&&bc._findPath===ec&&bc._resolveLookupPaths===hc?[n]:void 0===s&&Array.isArray(i.paths)?(function(e,t){"use strict";for(var r=new bc(""),i=[],n=0,s=null==t?0:t.length;n<s;n++){var a=t[n];r.paths=bc._nodeModulePaths(a);for(var o=bc._resolveLookupPaths(e,r,!0),u=0,l=null==o?0:o.length;u<l;u++){var c=o[u];-1===i.indexOf(c)&&i.push(c)}}return i})(e,i.paths):bc._resolveLookupPaths(e,t,!0);var f=bc._findPath(e,c,r);if(!1===f&&(f=""),""!==f)return void 0!==s&&s.set(a,f),f;var d=new dc(e,t);if(!Pc.state.package.default.options.debug){var m={filename:null,inModule:!1};if(null!==u){var v=u.type;m.filename=u.filename,m.inModule=(!u.package.options.cjs.paths||".mjs"===u.extname)&&1!==v&&2!==v}ds(d,m)}throw d}),En._resolveFilename),vc=mc,gc=en.ELECTRON,yc=Xn((function(e="",t){this.children=bn.of(),this.exports=wn.create(),this.filename=null,this.id=e,this.loaded=!1,this.parent=t,this.paths=void 0,this.path=Gn(this);var r=null==t?null:t.children;Array.isArray(r)&&bn.push(r,this)}),En);yc._cache=require.cache,yc._extensions={__proto__:null},yc._findPath=ec,yc._initPaths=nc,yc._load=oc,yc._nodeModulePaths=tu,yc._preloadModules=cc,yc._resolveFilename=vc,yc._resolveLookupPaths=hc,yc.Module=yc,yc.builtinModules=Object.freeze(bn.from(_i)),yc.createRequireFromPath=Ql,yc.wrap=Ml,Pn(yc._extensions,En._extensions),Yl(yc,En),A(yc._cache)||(yc._cache={__proto__:null}),yc._cache!==En._cache&&(yc._cache=new ue(yc._cache,{defineProperty(e,t,r){var i=En._cache;return Bn(t)&&A(i)&&Reflect.defineProperty(i,t,r),Rn.defineProperty(e,t,r),!0},deleteProperty(e,t){var r=En._cache;return Bn(t)&&A(r)&&Reflect.deleteProperty(r,t),Reflect.deleteProperty(e,t)},set(e,t,r,i){var n=En._cache;return Bn(t)&&A(n)&&Reflect.set(n,t,r),Reflect.set(e,t,r,i)}})),gc&&Array.isArray(Sn.wrapper)||(yc.wrapper=Dl);var xc=yc.prototype;xc._compile=Ul,xc.constructor=yc,xc.load=zl,xc.require=Jl,Array.isArray(yc.globalPaths)||yc._initPaths();var bc=yc,wc={__proto__:null,".js":function(e,t){"use strict";e._compile(Si(Yr(t,"utf8")),t)},".json":function(e,t){"use strict";var r,i=Yr(t,"utf8");try{r=Ju.parse(i)}catch(e){throw e.message=t+": "+e.message,e}e.exports=r},".node":function(e,t){"use strict";return $(e,rn(t))}},Ec=wc,Sc=en.FLAGS;class Rc{static init(e){var t=R.loader,r=t.get(e);return void 0===r&&(r={module:{breakFirstLine:Sc.inspectBrk&&!Sc.eval,extensions:Ec,globalPaths:Array.from(bc.globalPaths),mainModule:I.mainModule,moduleCache:{__proto__:null},scratchCache:{__proto__:null}},package:{cache:new Map,default:null}},t.set(e,r)),Rc.state=r}}Rc.state=null,f(Rc,"state",(function(){return Rc.init(JSON.stringify(Yc.createOptions()))})),B(Rc.prototype,null);var Pc=Rc,_c=function(e,t,r){"use strict";var i,n=R.moduleState;n.parsing=!0,n.requireDepth+=1;try{i=ku(e,t,r)}finally{n.parsing=!1,n.requireDepth-=1}try{i.updateBindings(),2===i.state&&(1!==i.type&&Iu(i),ku(e,t,r))}finally{n.requireDepth-=1}return i},kc=R.inited?R.module.utilIsCacheName:R.module.utilIsCacheName=(function(){"use strict";return function(e){if("string"!=typeof e||19!==e.length||!Ao(e))return!1;for(var t=-1;++t<16;){var r=e.charCodeAt(t);if(!(r>=97&&r<=122||r>=48&&r<=57))return!1}return!0}})(),Ic=R.inited?R.module.pathIsExtJSON:R.module.pathIsExtJSON=(function(){"use strict";return function(e){if("string"!=typeof e)return!1;var t=e.length;return t>5&&106===e.charCodeAt(t-4)&&46===e.charCodeAt(t-5)&&115===e.charCodeAt(t-3)&&111===e.charCodeAt(t-2)&&110===e.charCodeAt(t-1)}})(),Ac=R.inited?R.module.utilIsFile:R.module.utilIsFile=(function(){"use strict";return function(e){return 0===nn(e)}})(),Nc=R.inited?R.module.fsReadJSON:R.module.fsReadJSON=(function(){"use strict";return function(e){var t=Ri(e,"utf8");return null===t?null:fn(t)}})(),Cc=R.inited?R.module.fsReadJSON6:R.module.fsReadJSON6=(function(){"use strict";return function(e){var t=Ri(e,"utf8");return null===t?null:Ei(t)}})(),Oc=R.inited?R.module.fsReaddir:R.module.fsReaddir=(function(){"use strict";return function(e){if("string"==typeof e)try{return Jr(e)}catch(e){}return null}})(),Tc=s(0),Mc=46,Lc=en.OPTIONS,Dc=b.PACKAGE_RANGE,Fc=b.PACKAGE_VERSION,jc="*",Vc=ko.ERR_INVALID_ESM_OPTION,Gc=ko.ERR_UNKNOWN_ESM_OPTION,Bc=".esmrc",Uc="package.json",Wc=[".mjs",".cjs",".js",".json"],qc={await:!1,cache:!0,cjs:{cache:!1,dedefault:!1,esModule:!1,extensions:!1,mutableNamespace:!1,namedExports:!1,paths:!1,topLevelReturn:!1,vars:!1},debug:!1,force:!1,mainFields:["main"],mode:1,sourceMap:void 0,wasm:!1},zc={cjs:{cache:!0,dedefault:!1,esModule:!0,extensions:!0,mutableNamespace:!0,namedExports:!0,paths:!0,topLevelReturn:!1,vars:!0},mode:2};class Hc{constructor(e,t,r){r=Hc.createOptions(r);var i="";"string"==typeof r.cache?i=we(e,r.cache):!1!==r.cache&&(i=e+Ee+"node_modules"+Ee+".cache"+Ee+"esm");var n=R.package.dir;if(!n.has(i)){var s={buffer:null,compile:null,meta:null},a=null,o=new Map,u=null;if(""!==i){for(var l=Oc(i),c=!1,p=!1,h=!1,f=0,d=null==l?0:l.length;f<d;f++){var m=l[f];if(kc(m))o.set(m,null);else if(m.charCodeAt(0)===Mc)if(".data.blob"===m)c=!0;else if(".data.json"===m)h=!0;else if(".dirty"===m){p=!0;break}}var v=p,g=null;if(h&&!v&&(g=Nc(i+Ee+".data.json"),v=null===g||!M(g,"version")||g.version!==Fc||!M(g,"meta")||!D(g.meta)),v&&(c=!1,h=!1,o=new Map,p&&vn(i+Ee+".dirty"),(function(e){for(var t=we(e,"../@babel/register"),r=Oc(t),i=0,n=null==r?0:r.length;i<n;i++){var s=r[i];Ic(s)&&vn(t+Ee+s)}})(i)),c&&(a=Ri(i+Ee+".data.blob")),h){var y=g.meta,x=T(y);u=new Map;for(var b=0,w=null==x?0:x.length;b<w;b++){var E=x[b];u.set(E,y[E])}}}null===a&&(a=zr.alloc(0)),null===u&&(u=new Map),s.buffer=a,s.compile=o,s.meta=u,n.set(i,s)}this.cache=n.get(i),this.cachePath=i,this.dirPath=e,this.options=r,this.range=t}clone(){var e=this.options,t=e.cjs,r=Pn({__proto__:Hc.prototype},this),i=Pn({},e);return i.cjs=Pn({},t),r.options=i,r}static get(e,t){"."===e&&(e=H());var r=Pc.state.package,i=r.cache;""!==e||i.has("")||i.set("",new Hc("",Dc,{cache:!1,cjs:{topLevelReturn:!0}}));var n=(function e(t,r){var i=Pc.state.package,n=i.cache,s=i.default,a=null;if(n.has(t)&&(a=n.get(t),null!==a||void 0===r.forceOptions))return a;if("node_modules"===me(t))return n.set(t,null),null;if(a=s&&s.options.force?s.clone():(function(t,r){var i,n=t+Ee+Bc,s=Ac(n)?Ri(n,"utf8"):null,a=null!==s;a?s=Ei(s):n=$o(n,Hn,!1,Wc);var o=r.forceOptions;if(r.forceOptions=void 0,""!==n&&!a)if(a=!0,Ic(n))s=Cc(n);else{var u=Pc.state.package.cache,l=R.moduleState,c=l.parsing;i=new Hc(t,jc,{cache:Hc.createOptions(o).cache}),l.parsing=!1,u.set(t,i);try{i.options=Hc.createOptions(_c(n,null).module.exports)}finally{u.set(t,null),l.parsing=c}}var p,h=t+Ee+Uc,f=Ac(h)?Ri(h,"utf8"):null;if(void 0===o&&null===f){if(!a)return null;p=e(ge(t),r)}var d=0;null===f||a||(f=fn(f),d=null===f?-1:1,1===d&&!a&&M(f,"esm")&&(a=!0,s=f.esm));var m=null;if(void 0!==o)m=jc;else if(p)m=p.range;else if(0===d&&null!==f&&(f=fn(f),d=null===f?-1:1),1===d&&(m=$c(f,"dependencies")||$c(f,"peerDependencies")),null===m){if(!a&&!$c(f,"devDependencies"))return null;m=jc}return void 0!==i?(i.range=m,i):(void 0===o||a||(a=!0,s=o),!0!==s&&a||(a=!0,s=Lc),1!==d&&null===f&&(t=(function(e){var t=R.package.root,r=t.get(e);return void 0===r&&(r=(function e(t){if("node_modules"===me(t)||Ac(t+Ee+Uc))return t;var r=ge(t);return r===t?"":"node_modules"===me(r)?t:e(r)})(e)||e,t.set(e,r)),r})(t)),new Hc(t,m,s))})(t,r),null===a){var o=ge(t);o!==t&&(a=e(o,r))}return n.set(t,a),a})(e,{__proto__:null,forceOptions:t,type:void 0});return null===n?r.default:n}static from(e,t){var r;return r="string"==typeof e?ki.has(e)?"":ge(e):Gn(e),Hc.get(r,t)}static set(e,t){Pc.state.package.cache.set(e,t)}}function $c(e,t){"use strict";if(M(e,t)){var r=e[t];if(M(r,"esm"))return Object(Tc.validRange)(r.esm)}return null}function Kc(e){"use strict";return"dedefault"===e||"topLevelReturn"===e}function Jc(e){"use strict";return"boolean"==typeof e||0===e||1===e}Hc.createOptions=function(e){"use strict";var t=Hc.defaultOptions,r=[],i={};if("string"==typeof e)r.push("mode"),i.mode=e;else for(var n=T(e),s=0,a=null==n?0:n.length;s<a;s++){var o=n[s];if(M(t,o))r.push(o),i[o]=e[o];else{if("sourcemap"!==o||-1!==n.indexOf("sourceMap"))throw new Gc(o);i.sourceMap=e.sourcemap}}-1===r.indexOf("cjs")&&(i.cjs=zc.cjs),-1===r.indexOf("mode")&&(i.mode=zc.mode);var u=(function(e){var t=Hc.defaultOptions.cjs,r={};if(void 0===e)return Pn(r,t);if(!D(e)){for(var i=T(t),n=!!e,s=0,a=null==i?0:i.length;s<a;s++){var o=i[s];r[o]=!Kc(o)&&n}return r}for(var u=[],l=T(e),c=0,p=null==l?0:l.length;c<p;c++){var h=l[c];if(M(t,h))u.push(h),r[h]=e[h];else{if("interop"!==h||-1!==l.indexOf("esModule"))throw new Gc("cjs["+Dr(h,39)+"]");r.esModule=e.interop}}for(var f=!0,d=0,m=null==u?0:u.length;d<m;d++){var v=u[d],g=r[v];if(!Jc(g))throw new Vc("cjs["+Dr(v,39)+"]",g,!0);var y=!!g;y&&!Kc(v)&&(f=!1),r[v]=y}var x=f?zc.cjs:t;return hr(r,x)})(i.cjs);hr(i,t),i.cjs=u;var l=i.await;if(!Jc(l))throw new Vc("await",l);i.await=!!l;var c=i.cache;if(Jc(c))i.cache=!!c;else if("string"!=typeof c)throw new Vc("cache",c);var p=i.debug;if(!Jc(p))throw new Vc("debug",p);i.debug=!!p;var h=i.force;if(!Jc(h))throw new Vc("force",c);i.force=!!h;var f=t.mainFields,d=i.mainFields;Array.isArray(d)||(d=[d]),d=d===f?[f[0]]:Array.from(d,(function(e){if("string"!=typeof e)throw new Vc("mainFields",d);return e})),-1===d.indexOf("main")&&d.push("main"),i.mainFields=d;var m=i.mode;if(3===m||"all"===m)i.mode=3;else if(2===m||"auto"===m)i.mode=2;else{if(1!==m&&"strict"!==m)throw new Vc("mode",m);i.mode=1}var v=i.sourceMap;if(Jc(v))i.sourceMap=!!v;else if(void 0!==v)throw new Vc("sourceMap",v);var g=i.wasm;if(!Jc(g))throw new Vc("wasm",g);return i.wasm=!!g,i},Hc.defaultOptions=qc,Hc.state=null,B(Hc.prototype,null);var Yc=Hc,Xc=R.inited?R.module.utilGetCacheStateHash:R.module.utilGetCacheStateHash=(function(){"use strict";return function(e){return"string"==typeof e?e.slice(-11,-3):""}})(),Qc=R.inited?R.module.GenericDate:R.module.GenericDate=(function(){"use strict";return{getTime:P(Date.prototype.getTime)}})(),Zc=R.inited?R.module.fsGetStatTimestamp:R.module.fsGetStatTimestamp=(function(){"use strict";return function(e,t){if(!D(e))return-1;var r=e[t+"Ms"];return"number"==typeof r?Math.round(r+.5):Qc.getTime(e[t])}})(),ep=R.inited?R.module.utilIsCalledFromStrictCode:R.module.utilIsCalledFromStrictCode=function(){for(var e=el(So(Error,Hn)),t=0,r=null==e?0:e.length;t<r;t++){var i=e[t],n=i.getFileName();if(n&&!Ni(n)&&!i.isNative())return void 0===i.getFunction()}return!1},tp=R.inited?R.module.utilIsDescriptorMatch:R.module.utilIsDescriptorMatch=(function(){"use strict";return function(e,t){if(!D(e))return!D(t);for(var r in t)if(!Object.is(e[r],t[r]))return!1;return!0}})(),rp=R.inited?R.module.utilIsEnumerable:R.module.utilIsEnumerable=(function(){"use strict";var e=Object.prototype.propertyIsEnumerable;return function(t,r){return null!=t&&e.call(t,r)}})(),ip=R.inited?R.module.shimPuppeteerExecutionContextPrototypeEvaluateHandle:R.module.shimPuppeteerExecutionContextPrototypeEvaluateHandle=(function(){"use strict";var e={enable(e){var t=R.memoize.shimPuppeteerExecutionContextPrototypeEvaluateHandle;if((function(e,t){var r=A(e)?e.ExecutionContext:void 0,i="function"==typeof r?r.prototype:void 0,n=A(i)?i.evaluateHandle:void 0;if("function"!=typeof n)return!0;var s=t.get(i);return void 0!==s?s:(s=Kn(n),t.set(i,s),s)})(e,t))return e;var r=e.ExecutionContext.prototype,i=ks(r.evaluateHandle,(function(e,t){var r=t[0];if("function"==typeof r){var i=new ue(r,{get:(e,t,r)=>"toString"!==t||M(e,"toString")?(r===i&&(r=e),Reflect.get(e,t,r)):n}),n=new ue(r.toString,{apply:zn((function(e,t,n){t===i&&(t=r);var s=Reflect.apply(e,t,n);return"string"==typeof s?ps(s):s}))});t[0]=i}return Reflect.apply(e,this,t)}));return Reflect.defineProperty(r,"evaluateHandle",{configurable:!0,value:i,writable:!0})&&t.set(r,!0),e}};return e})(),np=69,sp=Pe,ap=_e,op=1,up=2,lp={},cp=1,pp=0,hp=-1,fp=1,dp=0,mp=1,vp=2,gp=3,yp=4,xp=0,bp=4,wp=3,Ep=1,Sp=3,Rp=4,Pp=2,_p=5,kp=1,Ip=3,Ap=2,Np=ko.ERR_EXPORT_STAR_CONFLICT,Cp=ko.ERR_NS_ASSIGNMENT,Op=ko.ERR_NS_DEFINITION,Tp=ko.ERR_NS_DELETION,Mp=ko.ERR_NS_EXTENSION,Lp=ko.ERR_NS_REDEFINITION,Dp=ko.ERR_UNDEFINED_IDENTIFIER,Fp=Ee+"lib"+Ee+"ExecutionContext.js",jp=Ee+"puppeteer"+Ee,Vp=-19,Gp={value:!0};class Bp{constructor(e){this.initialize(e)}static get(e){if(!D(e))return null;var t=R.entry.cache,r=t.get(e);if(void 0===r)r=new Bp(e);else if(r.type===Ep&&r._loaded===cp){var i=R.bridged,n=r.module.exports,s=i.get(n);void 0!==s&&(r=s,i.delete(n))}return void 0!==r&&Bp.set(e,r),r}static has(e){return R.entry.cache.has(e)}static set(e,t){D(e)&&R.entry.cache.set(e,t)}addGetter(e,t){M(t,"id")||(t.id=e),M(t,"owner")||(t.owner=this),M(t,"type")||(t.type=op);var r=this.type;if(r!==Ep&&r!==Pp&&"default"===e){var i=Qp(t);"function"==typeof i&&i.name===this.runtimeName+"anonymous"&&Reflect.defineProperty(i,"name",{configurable:!0,value:"default"})}return this.getters[e]=t,this}addGetters(e){for(var t=0,r=null==e?0:e.length;t<r;t++){var i=e[t],n=i[0],s=i[1];this.addGetter(n,s)}return this}addGetterFrom(e,t,r=t){var i=this;if("*"===t)return this.addGetter(r,(function(){return e.getExportByName("*",i)}));var n=e.getters,s=n[t];return e.type!==Sp&&".mjs"===this.extname&&(s=function(){return e.partialNamespace[t]},s.owner=e),void 0===s&&(s=function(){return e.getters[t]()},s.deferred=!0,s.id=t,s.owner=e),this.addGetter(r,s)}addSetter(e,t,r,i){r.last=lp,r.localNames=t,r.owner=i,M(r,"exportedName")||(r.exportedName=null),M(r,"type")||(r.type=mp);var n=this.setters;M(n,e)||(n[e]=[]),n[e].push(r);for(var s=i.importedBindings,a=0,o=null==t?0:t.length;a<o;a++){var u=t[a];s.has(u)||s.set(u,!1)}return this}addSetters(e,t){for(var r=0,i=null==e?0:e.length;r<i;r++){var n=e[r],s=n[0],a=n[1],o=n[2];this.addSetter(s,a,o,t)}return this}finalizeNamespace(){if(this._namespaceFinalized===fp)return this;this._namespaceFinalized=fp;for(var e=this.getters,t=T(e).sort(),r=0,i=null==t?0:t.length;r<i;r++){var n=t[r];e[n].type!==up&&(this._completeMutableNamespace[n]=lp,this._completeNamespace[n]=lp)}Object.seal(this._completeNamespace);var s=this.type;if(s===Sp||s===_p)return this;if(this.builtin){for(var a=["default"],o=T(this.exports),u=0,l=null==o?0:o.length;u<l;u++){var c=o[u];tl(c)&&a.push(c)}a.sort(),Reflect.deleteProperty(this._partialMutableNamespace,"default"),Reflect.deleteProperty(this._partialNamespace,"default");for(var p=0,h=null==a?0:a.length;p<h;p++){var f=a[p];this._partialMutableNamespace[f]=lp,this._partialNamespace[f]=lp}}return Object.seal(this._partialNamespace),this}getExportByName(e,t){var r=this.type;return r===Sp||r===_p?(function(e,t,r){if("*"!==t){var i=e.getters[t];return void 0===i?sp:Qp(i)}var n=r.package.options.cjs.mutableNamespace&&".mjs"!==r.extname,s=!n||".mjs"===e.extname;return s?e.completeNamespace:e.completeMutableNamespace})(this,e,t):(function(e,t,r){var i=".mjs"===r.extname,n=e.type;if("*"!==t){if(e._loaded!==cp)return sp;if(n===Pp&&i&&"default"===t)return e.exports;var s=e.getters[t];return void 0===s?sp:s()}var a=r.package.options.cjs,o=a.namedExports&&!i,u=a.mutableNamespace&&!i,l=!u||".mjs"===e.extname,c=!o&&n!==Sp;return l?c?e.partialNamespace:e.completeNamespace:c?e.partialMutableNamespace:e.completeMutableNamespace})(this,e,t)}initialize(e=this.module){var t=this;this._changed=!1,this._completeMutableNamespace=bs(),this._completeNamespace=bs(),this._finalize=null,this._lastChild=null,this._loaded=pp,this._namespaceFinalized=dp,this._partialMutableNamespace=bs({default:lp}),this._partialNamespace=bs({default:lp}),this._passthruCompile=!1,this._passthruRequire=!1,this._ranthruCompile=!1,this._validation=new Map([["*",!0]]),this.basename=null,this.builtin=!1,this.children={__proto__:null},this.circular=!1,this.dirname=null,this.exports=e.exports,this.extname=null,this.filename=null,this.getters={__proto__:null},this.id=e.id,this.importedBindings=new Map,this.module=e,this.name=null,this.parent=e.parent,this.running=!1,this.runtime=null,this.setters={__proto__:null},this.setters["*"]=[],this.state=xp,this.type=Ep,f(this,"cacheName",(function(){var e=t.package;return Ol(t.mtime,{cachePath:e.cachePath,filename:t.filename,packageOptions:e.options})})),f(this,"compileData",(function(){var e=yn.from(t);if(null!==e&&0!==e.transforms){var r=Ri(t.package.cachePath+Ee+t.cacheName,"utf8");null!==r&&(e.code=r)}return e})),f(this,"completeMutableNamespace",(function(){return $p(t,t._completeMutableNamespace)})),f(this,"completeNamespace",(function(){return Hp(t,t._completeNamespace)})),f(this,"mtime",(function(){var e=t.filename;if(xi(e)){var r=tn(e);if(null!==r)return Zc(r,"mtime")}return-1})),f(this,"package",(function(){return Yc.from(t.module)})),f(this,"partialMutableNamespace",(function(){return $p(t,t._partialMutableNamespace)})),f(this,"partialNamespace",(function(){return Hp(t,t._partialNamespace)})),f(this,"runtimeName",(function(){return a("_"+Xc(t.cacheName).slice(0,3))})),this.updateFilename(!0)}loaded(){var e=this;if(this._loaded!==pp)return this._loaded;var t=this.module;if(!t.loaded)return this._loaded=pp;this._loaded=hp;var r=this.children;for(var i in r)if(!r[i].module.loaded)return this._loaded=pp;var n=this.package.options.cjs,s=t.exports;if(this.type===Ep){n.esModule&&null!=s&&s.__esModule&&(this.type=Pp);for(var a=Kp(this,s),o=function(t){e.addGetter(t,(function(){return e.exports[t]}))},u=0,l=null==a?0:a.length;u<l;u++){var c=a[u];o(c)}if(this.type===Ep){var p=this.filename;"string"==typeof p&&p.charCodeAt(p.length+Vp)===np&&p.endsWith(Fp)&&-1!==p.indexOf(jp)&&ip.enable(s),this.addGetter("default",(function(){return e.exports})),s=lo(this)}this.exports=s}else if(this.type===Rp)s=lo(this),t.exports=s,this.exports=s;else if(".mjs"===this.extname)t.exports=zp(this,s);else{var h=Kp(this);n.dedefault&&1===h.length&&"default"===h[0]?t.exports=s.default:(n.esModule&&!M(this.getters,"__esModule")&&Reflect.defineProperty(s,"__esModule",Gp),t.exports=n.mutableNamespace?(function(e,t){var r=Jp(),i=new ue(t,r);for(var n in Up(r,e,i),qp(r,e,i),Reflect.deleteProperty(r,"has"),r)oe(r[n]);return i})(this,s):zp(this,s))}return this.finalizeNamespace(),this._loaded=cp}resumeChildren(){var e=this.children;for(var t in e){var r=e[t];if(!r.running){var i=r.runtime,n=null===i?void 0:i.runResult,s=!0;try{void 0!==n&&r.state<wp&&(r.state=wp,r.running=!0,n.next(),r.module.loaded=!0,r.running=!1),"function"==typeof r._finalize?r._finalize():(r.loaded(),r.updateBindings(null,Ip),Au(r,this)),s=!1}finally{r.state=s?xp:bp}}}}updateBindings(e,t=kp,r){var i,n=this.circular||t===Ap||t===Ip;if(n&&void 0!==r&&r.has(this))return this;if("string"==typeof e&&(e=[e]),this._changed=!1,(function(e,t){if(e.type===Sp)if(Array.isArray(t))for(var r=0,i=null==t?0:t.length;r<i;r++){var n=t[r];Yp(e,n)}else for(var s in e.getters)Yp(e,s)})(this,e),(function(e,t,r,i){if(Array.isArray(t))for(var n=0,s=null==t?0:t.length;n<s;n++){var a=t[n];Xp(e,a,r,i)}else for(var o in e.setters)Xp(e,o,r,i)})(this,e,(function(e){var t=e.owner,r=t.importedBindings;if(e.last!==sp)for(var s=0,a=e.localNames,o=null==a?0:a.length;s<o;s++){var u=a[s];r.set(u,!0)}n&&(void 0===i&&(i=new Set),i.add(t))}),t),this._changed=!1,void 0===i)return this;var s=t;return s!==kp&&(s=Ap),void 0===r&&(r=new Set),r.add(this),i.forEach((function(e){e.loaded(),e.updateBindings(null,s,r)})),this}updateFilename(e,t){var r=this.module;if("boolean"==typeof e&&(t=e,e=void 0),void 0!==e&&(r.filename=e),!t&&this.filename===r.filename)return this;var i=Gn(r),n=r.filename;return this.dirname=i,this.filename=n,this.name=Po(r),""===i?(this.basename=n,this.extname=""):"string"!=typeof n?(this.basename="",this.extname=""):(this.basename="."===i?me(n):n.slice(i.length+1),this.extname=ye(n)),this}}function Up(e,t,r){"use strict";e.get=function(i,n,s){var a,o=t.getters,u=o[n],l=void 0!==u,c=!1;if("string"==typeof n&&M(i,n)&&rp(i,n)){var p=t._namespaceFinalized!==fp;if(!p&&l&&(c=!0,a=u(),p=a===sp),p)throw new Dp(n,e.get)}return t.type===Pp&&"default"===n&&i===t._partialNamespace?t.exports:l?c?a:u():(s===r&&(s=i),Reflect.get(i,n,s))},e.getOwnPropertyDescriptor=function(t,r){var i=Reflect.getOwnPropertyDescriptor(t,r);return void 0!==i&&(i.value=e.get(t,r)),i},e.has=function(e,t){return t===R.symbol.namespace||Reflect.has(e,t)},e.preventExtensions=function(e){return t._namespaceFinalized===fp&&Reflect.preventExtensions(e)}}function Wp(e,t){e.defineProperty=function(e,r,i){if(t._namespaceFinalized===fp&&M(e,r)&&tp(Reflect.getOwnPropertyDescriptor(e,r),i))return Reflect.defineProperty(e,r,i);if(!ep())return!1;throw M(e,r)?new Lp(t.module,r):new Op(t.module,r)},e.deleteProperty=function(e,r){if(Reflect.deleteProperty(e,r))return!0;if(!ep())return!1;throw new Tp(t.module,r)},e.set=function(e,r){if(!ep())return!1;if(M(e,r))throw new Cp(t.module,r);throw new Mp(t.module,r)}}function qp(e,t,r){"use strict";e.defineProperty=function(e,r,i){return t._namespaceFinalized===fp&&(Rn.defineProperty(t.exports,r,i),M(e,r)&&(t.addGetter(r,(function(){return t.exports[r]})),t.updateBindings(r)),Reflect.isExtensible(e)||Reflect.defineProperty(e,r,i))},e.deleteProperty=function(e,r){return!!Reflect.deleteProperty(t.exports,r)&&(M(e,r)&&(t.addGetter(r,(function(){return t.exports[r]})),t.updateBindings(r)),Reflect.isExtensible(e))};var i=e.get;"function"==typeof i&&(e.get=function(e,r,n){var s=t.exports,a=i(e,r,n);if(M(s,r)){var o=Reflect.get(s,r,n),u=t.type;if(o!==a&&(u!==Ep&&u!==Rp||"default"!==r)&&ys(e,r))return o}return a}),e.getOwnPropertyDescriptor=function(r,i){var n=Reflect.getOwnPropertyDescriptor(r,i);if(void 0===n?!Reflect.isExtensible(r):!gs(n))return n;var s=t.exports;if(M(s,i)){var a,o=Reflect.getOwnPropertyDescriptor(s,i);if(M(o,"value"))a=o.value;else if("function"==typeof o.get&&(a=Qp(o.get),a===sp))return n;if(void 0===n)return{configurable:!0,enumerable:o.enumerable,value:a,writable:!0===o.writable||"function"==typeof o.set};n.value=a}else void 0!==n&&(n.value=e.get(r,i));return n},e.set=function(e,i,n,s){if(!uo(e,i))return!1;var a=t.exports;return s===r&&(s=a),!!Reflect.set(a,i,n,s)&&(M(e,i)&&(t.addGetter(i,(function(){return t.exports[i]})),t.updateBindings(i)),!0)}}function zp(e,t){"use strict";var r=Jp(),i=new ue(t,r);for(var n in Up(r,e,i),Wp(r,e),Reflect.deleteProperty(r,"has"),r)oe(r[n]);return Object.seal(t),i}function Hp(e,t){"use strict";var r=Jp(),i=new ue(t,r);for(var n in Up(r,e,i),Wp(r,e),r)oe(r[n]);return i}function $p(e,t){"use strict";var r=Jp(),i=new ue(t,r);for(var n in Up(r,e,i),qp(r,e,i),r)oe(r[n]);return i}function Kp(e,t=e.exports){var r,i=e.type;if(i===Ep||i===Pp){var n="function"==typeof t,s=xs(t),a=ae(t);r=[];for(var o=0,u=null==s?0:s.length;o<u;o++){var l=s[o];!rp(t,l)&&("__esModule"===l||n&&"prototype"===l||M(a,l)&&!rp(a,l))||r.push(l)}}else r=T(t);for(var c=[],p=0,h=r,f=null==h?0:h.length;p<f;p++){var d=h[p];tl(d)&&c.push(d)}return c}function Jp(){"use strict";return{defineProperty:null,deleteProperty:null,get:null,getOwnPropertyDescriptor:null,has:null,set:null}}function Yp(e,t){"use strict";var r=e.getters[t];if(void 0!==r&&r.type!==up){var i=e.exports,n=Qp(r);M(i,t)&&Object.is(i[t],n)||(e._changed=!0,i[t]=n)}}function Xp(e,t,r,i){"use strict";var n=e.setters[t];if(void 0!==n)for(var s=e._loaded===cp,a=e._changed,o=n.length;o--;){var u=n[o],l=e.getExportByName(t,u.owner);if(l===ap)throw n.splice(o,1),new Np(e.module,t);var c=u.type,p=c!==vp&&!Object.is(u.last,l),h=s&&c===vp,f=c===gp,d=a&&c===yp,m=i===Ip;if(p||h||f||d||m){u.last=l;var v=l===sp?void 0:l;u(v,e)&&n.splice(o,1),!p&&f||r(u)}}}function Qp(e){"use strict";try{return e()}catch(e){}return sp}B(Bp.prototype,null);var Zp=Bp,eh=R.inited?R.module.utilIsInstalled:R.module.utilIsInstalled=(function(){"use strict";var e=en.WIN32,t=e?/[\\\/]node_modules[\\\/]/:/\/node_modules\//;return function({filename:e}){return"string"==typeof e&&t.test(e)}})(),th=R.inited?R.module.utilIsOwnModule:R.module.utilIsOwnModule=(function(){"use strict";var e=b.PACKAGE_DIRNAME;return function({filename:t}){return"string"==typeof t&&t.startsWith(e)}})(),rh=k.resolve,ih=rh&&rh.paths,nh=R.symbol,sh=new Map([[nh.entry,Zp],[nh.realGetProxyDetails,ce],[nh.realRequire,k],[nh.runtime,Ku],[nh.shared,R]]),ah=function(e,t,r){"use strict";var i=th(e),n=function(r){var n=i?(function(e){if("symbol"==typeof e)return sh.get(e)})(r):void 0;return void 0===n?t.call(e,r):n};function s(t,i){return Jo(t,"request"),r.call(e,t,i)}function a(t){return Jo(t,"request"),bc._resolveLookupPaths(t,e,!0)}return"function"!=typeof t&&(t=function(t){return e.require(t)}),"function"!=typeof r&&(r=function(t,r){return bc._resolveFilename(t,e,!1,r)}),n.cache=bc._cache,n.extensions=bc._extensions,n.main=I.mainModule,n.resolve=s,s.paths=a,eh(e)||(s.paths=Xn(a,ih),n.resolve=Xn(s,rh),n=Xn(n,k)),n};R.inited||(R.module.utilPrepareContext=(function(){"use strict";var e=["Array","ArrayBuffer","Atomics","BigInt","BigInt64Array","BigUint64Array","Boolean","DataView","Date","Error","EvalError","Float32Array","Float64Array","Function","Int16Array","Int32Array","Int8Array","Map","Number","Object","Promise","Proxy","RangeError","ReferenceError","Reflect","RegExp","Set","SharedArrayBuffer","String","Symbol","SyntaxError","TypeError","URIError","Uint16Array","Uint32Array","Uint8Array","Uint8ClampedArray","WeakMap","WeakSet"],t=["Buffer","URL","URLSearchParams","clearImmediate","clearInterval","clearTimeout","console","global","process","setImmediate","setInterval","setTimeout"];function r(e,t){var r="'"+e+"' is deprecated, use 'global'";return{configurable:!0,get:ai((function(){return t}),r,"DEP0016"),set:ai((function(t){Reflect.defineProperty(this,e,{configurable:!0,value:t,writable:!0})}),r,"DEP0016")}}return function(i){var n=R.defaultGlobal;if(i===n)return i;for(var s=F(n),a=0,o=null==s?0:s.length;a<o;a++){var u=s[a],l=void 0;"global"===u?l={configurable:!0,enumerable:!0,value:i,writable:!0}:"GLOBAL"===u||"root"===u?l=r(u,i):M(i,u)||(l=Reflect.getOwnPropertyDescriptor(n,u)),void 0!==l&&Reflect.defineProperty(i,u,l)}for(var c=0,p=null==t?0:t.length;c<p;c++){var h=t[c],f=Reflect.getOwnPropertyDescriptor(i,h);void 0!==f&&Reflect.deleteProperty(i,h)&&Reflect.defineProperty(i,h,f)}for(var d=new Map,m=0,v=null==e?0:e.length;m<v;m++){var g=e[m];M(i,g)&&(d.set(g,Reflect.getOwnPropertyDescriptor(i,g)),Reflect.deleteProperty(i,g))}if(0===d.size)return i;var y=new La("({"+(function(){var e,t,r,i=d.keys(),n="";do{e=i.next(),n+=(t=e.value,r=void 0,r=t+":",r+="Array"===t?"[].constructor":"BigInt"===t?"1n.constructor":"Boolean"===t?"true.constructor":"Function"===t?"(function () {}).constructor":"Number"===t?"1..constructor":"Object"===t?"({}).constructor":"RegExp"===t?"/./.constructor":"String"===t?'"".constructor':"this."+t,r+(e.done?"":","))}while(!e.done);return n})()+"})").runInContext(i);return d.forEach((function(e,t){Reflect.defineProperty(i,t,e);var r=i[t],n=y[t];if(r!==n&&A(r)&&A(n)&&("Error"===t?n.prepareStackTrace=function(...e){return Reflect.apply(r.prepareStackTrace,r,e)}:"Object"===t&&Reflect.defineProperty(r,Symbol.hasInstance,{configurable:!0,value:function(e){return this===r?e instanceof n||za(e,r):za(e,this)}}),"function"==typeof n&&(B(n,ae(r)),M(n,"prototype")))){var s=n.prototype;if(A(s)){var a=r.prototype;B(s,a),M(a,"constructor")&&Reflect.defineProperty(s,"constructor",Reflect.getOwnPropertyDescriptor(a,"constructor"))}}})),i}})());var oh=R.inited?R.module.utilSatisfies:R.module.utilSatisfies=(function(){"use strict";var e={includePrerelease:!0};return function(t,r){if("string"!=typeof t||"string"!=typeof r)return!1;var i=t+"\0"+r,n=R.memoize.utilSatisfies,s=n.get(i);return void 0===s&&(s=Object(Tc.satisfies)(t,r,e),n.set(i,s)),s}})(),uh=R.inited?R.module.envHasLoaderValue:R.module.envHasLoaderValue=(function(){"use strict";return function e(t){if("string"==typeof t){if(xi(t)){var r=t;if(""===ye(r)&&(r+=Ee+"index.js"),Ni(Co(r)))return!0}else if(45!==t.charCodeAt(0)&&Ni((function(e,t,r){var i,n=R.entry,s=n.cache,a=Pc.state.package,o=a.cache;n.cache=new WeakMap,a.cache=new Map;var u=!0;try{i=Eu(e,t,!1),u=!1}catch(e){}return n.cache=s,a.cache=o,u?"":i})(t,Fi)))return!0}else if(A(t))for(var i=T(t),n=0,s=null==i?0:i.length;n<s;n++){var a=i[n];if(e(t[a]))return!0}return!1}})(),lh=R.inited?R.module.envHasLoaderArg:R.module.envHasLoaderArg=(function(){"use strict";return function(e){return hi(e,(function(e){return 123===e.charCodeAt(0)?uh(fn(e)):uh(e)}))}})(),ch=R.inited?R.module.envIsSideloaded:R.module.envIsSideloaded=(function(){"use strict";return function(){if(Hi()||Ki())return!0;var e=q.slice(2);if(0===e.length)return!1;var t=Co(q[1]),r=t.lastIndexOf(Ee+"node_modules"+Ee);if(-1===r||!lh(e))return!1;var i=R.entry,n=i.cache,s=Pc.state.package,a=s.cache;i.cache=new WeakMap,s.cache=new Map;var o=!1;return null===Yc.get(H())&&null===Yc.get(t.slice(0,r+1))||(o=!0),i.cache=n,s.cache=a,o}})(),ph=R.inited?R.module.utilMaxSatisfying:R.module.utilMaxSatisfying=(function(){"use strict";return function(e,t){if(!Array.isArray(e)||"string"!=typeof t)return null;var r=(1===e.length?e[0]:bn.join(e))+"\0"+t,i=R.memoize.utilMaxSatisfying,n=i.get(r);return void 0===n&&(n=Object(Tc.maxSatisfying)(e,t),i.set(r,n)),n}})(),hh=R.inited?R.module.utilSetSilent:R.module.utilSetSilent=(function(){"use strict";return function(e,t,r){C((function(){try{e[t]=r}catch(e){}}))}})(),fh=R.inited?R.module.Wrapper:R.module.Wrapper=(function(){"use strict";var e=b.PACKAGE_RANGE,t={find(e,t,i){var n=r(e,t);if(null!==n){var s=ph(n.versions,i);if(null!==s){var a=n.wrappers.get(s);if(void 0!==a)return a}}return null},manage(e,r,i){var n=t.unwrap(e,r),s=ks(n,(function(e,t){var r=new.target;return void 0===r?Reflect.apply(i,this,[s,e,t]):Reflect.construct(i,[s,e,t],r)}));Reflect.defineProperty(s,R.symbol.wrapper,{configurable:!0,value:n}),hh(e,r,s)},unwrap(e,t){var r=C((function(){return e[t]})),i=R.symbol.wrapper;return M(r,i)?r[i]:r},wrap(n,s,a){var o=(function(e,n){var s=r(e,n);return null===s?(function(e,r){var n=(function(e){var t=i(e);return null===t?(function(e){var t=new Map;return Reflect.defineProperty(e,R.symbol.wrapper,{configurable:!0,value:t}),t})(e):t})(e),s={raw:t.unwrap(e,r),versions:[],wrappers:new Map};return n.set(r,s),s})(e,n):s})(n,s);void 0===o.wrappers.get(e)&&(bn.push(o.versions,e),o.wrappers.set(e,oe(a)))}};function r(e,t){var r,n=i(e);return null!==n&&(r=n.get(t)),void 0===r?null:r}function i(e){var t=R.symbol.wrapper;return M(e,t)?e[t]:null}return t})(),dh=R.inited?R.module.utilRelaxRange:R.module.utilRelaxRange=(function(){"use strict";return function(e){if("string"!=typeof e)return"*";var t=e.charCodeAt(0);if(94!==t){if(t>=48&&t<=57)return"^"+e;if(126===t||118===t||61===t)return"^"+e.slice(1)}return e}})(),mh=4,vh=3,gh=0,yh=en.OPTIONS,xh=b.PACKAGE_VERSION,bh=ko.ERR_REQUIRE_ESM,wh=[".js",".json",".mjs",".cjs",".wasm"],Eh=/^.*?\b(?:im|ex)port\b/,Sh=En._extensions[".js"];function Rh(e,t){"use strict";throw new bh(t)}function Ph(e,t,r){"use strict";var i;try{return Reflect.apply(e,this,t)}catch(e){i=e}if(Pc.state.package.default.options.debug||!is(i))throw fs(i),i;var n=un(i,"name"),s=t[1];if("SyntaxError"===n){var a=Tr(un(i,"message")),o=r.range;if(Eh.test(a)&&!oh(xh,o)){var u="Expected esm@"+o+". Using esm@"+xh+": "+s;Reflect.defineProperty(i,"message",{configurable:!0,value:u,writable:!0});var l=un(i,"stack");"string"==typeof l&&Reflect.defineProperty(i,"stack",{configurable:!0,value:l.replace(a,(function(){return u})),writable:!0})}r.cache.dirty=!0}var c=Ro(i);throw null!==c&&(s=c.filename),ds(i,{filename:s}),i}Reflect.defineProperty(Rh,R.symbol.mjs,{value:!0});var _h=function(e,t){"use strict";var r=e._extensions,i=new Map,n=Yc.from(t);null===n&&(n=Yc.from(t,yh||!0));var s=n.clone(),a=s.options;s.range="*",a.force||3!==a.mode||(a.mode=2),Pc.state.package.default=s,bc._extensions=r;var o=function(e,t,i){var n=i[1],s=Yc.from(n),a=fh.find(r,".js",dh(s.range));return null===a?Ph.call(this,t,i,s):Reflect.apply(a,this,[e,t,i])};function u(e,t,r){var n=this,s=r[0],a=r[1],o=!Zp.has(s),u=Zp.get(s),l=u.extname,c=u.package,p=function(e){if(u.state=vh,"string"==typeof e){var i=s._compile,a=M(s,"_compile");N(s,"_compile",oe((function(t,r){return a?N(this,"_compile",i):Reflect.deleteProperty(this,"_compile"),Reflect.apply(i,this,[e,r])})))}var o,l=!0;try{o=Ph.call(n,t,r,c),l=!1}finally{u.state=l?gh:mh}return o};if(o&&B(s,bc.prototype),u._passthruCompile||o&&".mjs"===l)return u._passthruCompile=!1,p();var h=u.compileData;if(null!==h&&null!==h.code||".json"===l||".wasm"===l)return u._ranthruCompile=!0,void kl(e,u,null,a,p);if(this===Pc.state.module.extensions)return u._ranthruCompile=!0,void kl(e,u,Ri(a,"utf8"),a,p);var f=s._compile,d=o&&M(s,"_compile"),m=oe((function(t,r){o&&(d?N(this,"_compile",f):Reflect.deleteProperty(this,"_compile"));var i=M(this,R.symbol._compile)?this[R.symbol._compile]:null;"function"==typeof i?(Reflect.deleteProperty(this,R.symbol._compile),Reflect.apply(i,this,[t,r])):kl(e,u,t,r,p)}));if(o?N(s,"_compile",m):(u._ranthruCompile=!0,Reflect.defineProperty(s,R.symbol._compile,{configurable:!0,value:m})),(null===h||0===h.transforms)&&i.get(t))return Ph.call(this,t,r,c);s._compile(Ri(a,"utf8"),a)}for(var l=0,c=null==wh?0:wh.length;l<c;l++){var p=wh[l],h=".mjs"===p;h&&!M(r,p)&&(r[p]=Xn(Rh,Sh));var f=".wasm"===p;if(!f||R.support.wasm){M(r,p)||(r[p]=Sh);var d=fh.unwrap(r,p),m="function"==typeof d&&!M(d,R.symbol.mjs);if(h&&m)try{d()}catch(e){Wn(e)&&"ERR_REQUIRE_ESM"===e.code&&(m=!1)}fh.manage(r,p,o),fh.wrap(r,p,u),i.set(d,m),Pc.state.module.extensions[p]=r[p]}}},kh=en.FLAGS,Ih=function(e){"use strict";var t=bc._cache;for(var r in t)if(r.endsWith(Ee+".pnp.js")){Reflect.deleteProperty(t,r);break}for(var i=0,n=kh.preloadModules,s=null==n?0:n.length;i<s;i++){var a=n[i];if(a.endsWith(Ee+".pnp.js")){bc._preloadModules([a]),e._resolveFilename=bc._resolveFilename;break}}},Ah=b.PACKAGE_RANGE,Nh=function(e){"use strict";fh.manage(e,"_fatalException",(function(t,r,i){var n=fh.find(e,"_fatalException",Ah);return null===n?Reflect.apply(r,this,i):Reflect.apply(n,this,[t,r,i])})),fh.wrap(e,"_fatalException",(function(e,t,r){var i=r[0];return!Pc.state.package.default.options.debug&&is(i)?ds(i):fs(i),Reflect.apply(t,this,r)})),fh.manage(e,"emitWarning",(function(t,r,i){var n=fh.find(e,"emitWarning",Ah);return null===n?Reflect.apply(r,this,i):Reflect.apply(n,this,[t,r,i])})),fh.wrap(e,"emitWarning",(function(e,t,r){var i=r[0];return"string"==typeof i&&(r[0]=hs(i)),Reflect.apply(t,this,r)}))},Ch=ko.ERR_INVALID_ARG_VALUE,Oh=R.inited?R.module.shimProcessBindingUtilGetProxyDetails:R.module.shimProcessBindingUtilGetProxyDetails=(function(){"use strict";var e={enable(e){var t,r,i=R.memoize.shimProcessBindingUtilGetProxyDetails;if(C((function(){try{r=e.process.binding("util"),t=r.getProxyDetails}catch(e){}})),(function(e,t,r){if(!A(e)||"function"!=typeof t)return!0;var i=r.get(e);if(void 0!==i)return i;i=!0;try{i=void 0===t(new ue($n,$n))}catch(e){}return r.set(e,i),i})(r,t,i))return e;var n=zn((function(e,...t){var i=t[t.length-1],n=i[0];if(!Kn(n))return Reflect.apply(e,r,[n])}));return N(r,"getProxyDetails",new ue(t,{apply:n,construct:n}))&&i.set(r,!0),e}};return e})(),Th=R.inited?R.module.realREPL:R.module.realREPL=he(k("repl")),Mh=R.inited?R.module.safeREPL:R.module.safeREPL=U(Th),Lh=Mh.REPLServer,Dh=R.inited?R.module.acornAcornParse:R.module.acornAcornParse=(function(){"use strict";var e=2,t=1,r={enable(e){e.parse=i}};function i(r,i){var n,s,a=!0;i=hr({sourceType:e,strict:!1},i);try{n=fr.parse(r,i),a=!1}catch(e){s=e}if(a){i.sourceType=t;try{n=fr.parse(r,i),a=!1}catch(e){}}if(a)throw s;return n}return r})(),Fh=R.inited?R.module.acornInternalAcorn:R.module.acornInternalAcorn=(function(){"use strict";var e=en.INTERNAL,t={enable(){if(e){var t=le("internal/deps/acorn/acorn/dist/acorn");A(t)&&Dh.enable(t)}}};return t})(),jh=R.inited?R.module.acornWalkDynamicImport:R.module.acornWalkDynamicImport=(function(){"use strict";var e={enable:e=>(e.base.Import=L,e)};return e})(),Vh=R.inited?R.module.acornInternalWalk:R.module.acornInternalWalk=(function(){"use strict";var e=en.INTERNAL,t={enable(){if(e){var t=le("internal/deps/acorn/acorn-walk/dist/walk");A(t)&&jh.enable(t)}}};return t})(),Gh=en.CHECK,Bh=en.EVAL,Uh=en.FLAGS,Wh=en.HAS_INSPECTOR,qh=en.INTERNAL,zh=en.REPL,Hh=ko.ERR_INVALID_ARG_TYPE;function $h(e,t,r){"use strict";Reflect.defineProperty(e,t,{configurable:!0,value:r,writable:!0})}function Kh(e,t,r){"use strict";var i;try{return Reflect.apply(e,this,t)}catch(e){i=e}throw!Pc.state.package.default.options.debug&&is(i)?ds(i,{content:r}):fs(i),i}var Jh,Yh=function(e){"use strict";var t;function r(e){B(e,bc.prototype),t=Zp.get(e),t.addBuiltinModules=(function(e){var t=["assert","async_hooks","buffer","child_process","cluster","crypto","dgram","dns","domain","events","fs","http","http2","https","net","os","path","perf_hooks","punycode","querystring","readline","repl","stream","string_decoder","tls","tty","url","util","v8","vm","zlib"],r=t.length;return Wh&&t.push("inspector"),Uh.experimentalWorker&&t.push("worker_threads"),t.length!==r&&t.sort(),function(r){var i=e.require;$h(r,"console",i("console")),$h(r,"process",i("process"));for(var n=function(e){var t=oe((function(t){Reflect.defineProperty(this,e,{configurable:!0,value:t,writable:!0})}));Reflect.defineProperty(r,e,{configurable:!0,get:oe((function(){this[e]=void 0;var r=i(e);return Reflect.defineProperty(this,e,{configurable:!0,get:function(){return r},set:t}),r})),set:t})},s=0,a=null==t?0:t.length;s<a;s++){var o=t[s];n(o)}}})(t),t.package=Yc.get(""),t.require=ah(e),t.runtime=null,t.runtimeName=R.runtimeName,Ku.enable(t,wn.create())}fh.manage(e,"createScript",(function(t,r,i){var n=fh.find(e,"createScript","*");return Reflect.apply(n,this,[t,r,i])})),fh.wrap(e,"createScript",(function(r,i,[n,s]){s=Pn({},s),s.produceCachedData=!0;var a=Ol(n),o=t.package.cache.compile,u=t,l=u.runtimeName,c=o.get(a);if(void 0===c&&(c=null),t.state=1,null===c){var p={cjsPaths:!0,cjsVars:!0,generateVarDeclarations:!0,pragmas:!1,runtimeName:l,sourceType:3,strict:!1};c=Kh(yn.compile,[n,p],n),o.set(a,c)}else null!==c.scriptData&&s.produceCachedData&&!M(s,"cachedData")&&(s.cachedData=c.scriptData);t.state=2;var h='(()=>{var g=Function("return this")(),m=g.module,e=m&&m.exports,n="'+l+'";if(e&&!g[n]){m.exports=e.entry.exports;require=e.entry.require;e.entry.addBuiltinModules(g);Reflect.defineProperty(g,n,{__proto__:null,value:e})}})();'+c.code,f=Kh.call(e,i,[h,s],n);f.cachedDataProduced&&(c.scriptData=f.cachedData);var d=function(e,r){t._validation.clear(),t.cacheName=a,t.compileData=c,t.state=3,t.type=2===c.sourceType?3:1;var i=Kh.call(this,e,r,n);return t.state=4,i};return f.runInContext=Kt(f.runInContext,d),f.runInThisContext=Kt(f.runInThisContext,d),f})),Gh?e.Script=ks(e.Script,(function(t,[i,n]){e.Script=t;var s=O(bc,"wrapper");if(Array.isArray(s)){var a=s[0],o=s[1];"string"==typeof a&&"string"==typeof o&&(i=i.slice(a.length,-o.length))}return r(Fi),e.createScript(i,n)})):Bh?(e.runInThisContext=ks(e.runInThisContext,(function(t,[i,n]){return e.runInThisContext=t,r(R.unsafeGlobal.module),e.createScript(i,n).runInThisContext(n)})),En.prototype._compile=bc.prototype._compile):zh&&(function(){var t=Lh.prototype.createContext;if("<repl>"===Fi.id?r(Fi):"function"==typeof t&&(Lh.prototype.createContext=ks(t,(function(){Lh.prototype.createContext=t,Reflect.defineProperty(this,"writer",{configurable:!0,enumerable:!0,get(){},set(e){var t=Xn((function(e){return Ns(e,t.options)}),e);return t.options=e.options,t.options.colors=this.useColors,Reflect.defineProperty(Ns,"replDefaults",{configurable:!0,enumerable:!0,get:()=>t.options,set(e){if(!D(e))throw new Hh("options","Object",e);return Pn(t.options,e)}}),N(this,"writer",t),N(Th,"writer",t),t}});var e=Reflect.apply(t,this,[]),i=e.module;return Reflect.defineProperty(R.unsafeGlobal,"module",{configurable:!0,get:()=>i,set(e){i=e,r(i)}}),r(i),e}))),Fa.createScript=e.createScript,qh&&Uh.experimentalREPLAwait&&(Fh.enable(),Vh.enable()),R.support.replShowProxy)N(ni,"inspect",Ns);else{var i=ni.inspect;u(ni,"inspect",oe((function(){return this.inspect=Ns,i}))),c(ni,"inspect",oe((function(e){N(this,"inspect",e)})))}})()},Xh=en.CHECK,Qh=en.CLI,Zh=en.EVAL,ef=en.INTERNAL,tf=en.PRELOADED,rf=en.REPL,nf=en.YARN_PNP,sf=ko.ERR_INVALID_ARG_TYPE,af=R.safeGlobal,of=R.unsafeGlobal;R.inited&&!R.reloaded?(Yn.enable(of),Oh.enable(of),Jh=function(e,t){"use strict";if(!D(e))throw new sf("module","object");var r,i,n;if(void 0===t){var s=Yc.from(e);null!==s&&(r=JSON.stringify(s.options))}else t=Yc.createOptions(t),r=JSON.stringify({name:Po(e),options:t});return void 0!==r&&Pc.init(r),void 0!==t&&Yc.from(e,t),_h(bc,e),eh(e)||Nh(I),nf&&Ih(Ko),i=e,n=ah(i,(function(e){if(Jo(e,"request"),""===e)throw new Ch("request",e,"must be a non-empty string");var t=Eu(e,i),r=Pc.state.package.default,n=ge(t);Yc.get(n)===r&&Yc.set(n,r.clone());var s=_c(e,i),a=s.module.exports;return 1!==s.type&&R.bridged.set(a,s),a}),(function(e,t){return Eu(e,i,!1,t)})),n.main=Pc.state.module.mainModule,n}):(Jh=R,Jh.inited=!0,Jh.reloaded=!1,Yn.enable(af),Oh.enable(af),Yn.enable(of),Oh.enable(of),Xh?Yh(Ta):Zh||rf?(_h(bc),Nh(I),Yh(Ta)):(Qh||ef||ch())&&(_h(En),(function(e){"use strict";fh.manage(e,"runMain",(function(t,r,i){var n=I.argv,s=n[1],a=Eu(s,null,!0),o=Yc.from(a),u=fh.find(e,"runMain",dh(o.range));return null===u?Reflect.apply(r,this,i):Reflect.apply(u,this,[t,r,i])})),fh.wrap(e,"runMain",(function(){var e,t=I.argv,r=t[1],i=Eu(r,null,!0),n=Pc.state.package.default,s=ge(i);Yc.get(s)===n&&Yc.set(s,n.clone());try{_c(r,null,!0)}catch(e){throw!n.options.debug&&is(e)?ds(e,{filename:i}):fs(e),e}e=O(I,"_tickCallback"),"function"==typeof e&&Reflect.apply(e,I,[])})),bc.runMain=e.runMain})(En),Nh(I)),ef&&(function(e){"use strict";e.console=xo.console.module.exports,e.process=xo.process.module.exports})(of),tf&&nf&&Ih(Ko)),n.default=Jh})]).default;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

/testbed/test/css-presence-selector/index.js:1
ReferenceError: describe is not defined
    at Object.<anonymous> [90m(/testbed/[39mtest/css-presence-selector/index.js:4:1[90m)[39m
    at Generator.next (<anonymous>)
[?2004l
2025-11-11 00:01:48,383 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_gKOUFW3LhOcQ0nCBNMI8MtyI', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/css-presence-selector/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 167, 'prompt_tokens': 106022, 'total_tokens': 106189, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--2ac31f3d-fd5b-4876-97cc-1475b9a50d10-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/css-presence-selector/index.js"}, 'id': 'call_gKOUFW3LhOcQ0nCBNMI8MtyI', 'type': 'tool_call'}] usage_metadata={'input_tokens': 106022, 'output_tokens': 167, 'total_tokens': 106189, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:01:48,386 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/css-presence-selector/index.js
2025-11-11 00:01:48,488 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:48,488 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import { svelte } from '../helpers.js';

describe('css', () => {
	it('does not throw for presence selector when attribute has a value', () => {
		// Reproduces: button[foo] should match even when foo has a value
		const input = `
			<button foo="bar"></button>
			<style>
				button[foo] {}
			</style>
		`;

		assert.doesNotThrow(() => {
			svelte.compile(input, { format: 'iife', name: 'SvelteComponent' });
		});
	});
})
[?2004l
2025-11-11 00:01:54,801 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2Q4K14JfPh51A5uGn4mH4fjD', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 106206, 'total_tokens': 106235, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--0c3304fe-90d4-4eb8-b5a8-84f2326425a0-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_2Q4K14JfPh51A5uGn4mH4fjD', 'type': 'tool_call'}] usage_metadata={'input_tokens': 106206, 'output_tokens': 29, 'total_tokens': 106235, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:01:54,806 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-11 00:01:54,908 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:54,908 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-11 00:01:59,699 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_U2APRoh8njZ4eTxFrLgIuZHo', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 107503, 'total_tokens': 107532, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--0c7d499f-03ab-44d9-ba9d-a004ac71704c-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/helpers.js"}, 'id': 'call_U2APRoh8njZ4eTxFrLgIuZHo', 'type': 'tool_call'}] usage_metadata={'input_tokens': 107503, 'output_tokens': 29, 'total_tokens': 107532, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:01:59,702 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/helpers.js
2025-11-11 00:01:59,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:01:59,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:02:06,405 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_o54tCnHTdNLHIHvaJWRHvshH', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 218, 'prompt_tokens': 107822, 'total_tokens': 108040, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--7b260825-302a-48f7-8f03-a818accb4517-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_o54tCnHTdNLHIHvaJWRHvshH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 107822, 'output_tokens': 218, 'total_tokens': 108040, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:02:06,409 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:02:06,510 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:02:06,510 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 772
drwxr-xr-x 1 root root   4096 Nov 10 23:59 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:01 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:01 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:01 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 471421 Nov 11 00:01 package-lock.json
-rw-r--r-- 1 root root   2341 Nov 11 00:01 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 10 23:54 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:01 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 138364 Nov 11 00:01 yarn.lock
[?2004l
2025-11-11 00:02:15,223 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LYTyjGBcXC7CHXNfrFUmQlG3', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 108645, 'total_tokens': 108735, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--49ebf890-d46f-4353-8542-f57e4cc55a5f-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_LYTyjGBcXC7CHXNfrFUmQlG3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 108645, 'output_tokens': 90, 'total_tokens': 108735, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:02:15,226 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:02:15,328 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:02:15,328 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  },
  "dependencies": {
    "esm": "^3.2.25"
  }
}
[?2004l
2025-11-11 00:02:22,223 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_IKnuu7lOyCxf03opixodCiKz', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 109518, 'total_tokens': 109608, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5da86c26-267b-4029-8d8b-b3a43218c368-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_IKnuu7lOyCxf03opixodCiKz', 'type': 'tool_call'}] usage_metadata={'input_tokens': 109518, 'output_tokens': 90, 'total_tokens': 109608, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:02:22,227 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:02:22,329 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:02:22,329 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:02:35,143 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_7jlOpprj2utwVtfROvCLdXru', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha -r esm test/css-presence-selector/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 488, 'prompt_tokens': 109561, 'total_tokens': 110049, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5bcf8598-fe67-473f-90e3-7c784e476bde-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha -r esm test/css-presence-selector/index.js'}, 'id': 'call_7jlOpprj2utwVtfROvCLdXru', 'type': 'tool_call'}] usage_metadata={'input_tokens': 109561, 'output_tokens': 488, 'total_tokens': 110049, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:02:35,146 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha -r esm test/css-presence-selector/index.js
2025-11-11 00:02:36,241 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:02:36,241 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha -r esm test/css-presence-se
elector/index.js
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m does not throw for presence selector when attribute has a value[0m[33m (38ms)[0m


[92m [0m[32m 1 passing[0m[90m (49ms)[0m

[?2004l
2025-11-11 00:02:38,855 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='  css\n    ✓ does not throw for presence selector when attribute has a value (38ms)\n\n\n  1 passing (49ms)' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 32, 'prompt_tokens': 109736, 'total_tokens': 109768, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 105984}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--3feba6f2-3c76-403d-b048-04777cd0fca3-0' usage_metadata={'input_tokens': 109736, 'output_tokens': 32, 'total_tokens': 109768, 'input_token_details': {'audio': 0, 'cache_read': 105984}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:03:01,081 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log='Initial attempt (running the test file directly without mocha):\n\n(node:393) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.\n(Use `node --trace-warnings ...` to show where the warning was created)\n/testbed/test/css-presence-selector/index.js:1\nimport assert from \'assert\';\n^^^^^^\n\nSyntaxError: Cannot use import statement outside a module\n\nAfter running with mocha and esm preloader:\n\n$ ./node_modules/.bin/mocha -r esm test/css-presence-selector/index.js\n\n  css\n    ✓ does not throw for presence selector when attribute has a value (38ms)\n\n  1 passing (49ms)\n\nExplanation: The test passed, but it should fail to demonstrate the unfixed bug described in the issue. The issue reports that compiling a component with `<button foo="bar"></button>` and CSS `button[foo] {}` throws `TypeError: operators[operator] is not a function`. The current test asserts `assert.doesNotThrow(...)`, which expects correct behavior and will pass if the bug is fixed or not present. To reproduce the bug correctly (and fail as described), the test should assert that compilation throws the reported TypeError (e.g., using `assert.throws` matching the error message).' reproduced_bug_commands=['./node_modules/.bin/mocha -r esm test/css-presence-selector/index.js']
2025-11-11 00:03:01,083 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-11-11 00:03:01,085 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-11-11 00:03:01,086 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:03:01,119 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Your previous test case failed to reproduce the bug. Here is the failure log:\nInitial attempt (running the test file directly without mocha):\n\n(node:393) Warning: To load an ES module, set "type": "module" in the package.json or use the .mjs extension.\n(Use `node --trace-warnings ...` to show where the warning was created)\n/testbed/test/css-presence-selector/index.js:1\nimport assert from \'assert\';\n^^^^^^\n\nSyntaxError: Cannot use import statement outside a module\n\nAfter running with mocha and esm preloader:\n\n$ ./node_modules/.bin/mocha -r esm test/css-presence-selector/index.js\n\n  css\n    ✓ does not throw for presence selector when attribute has a value (38ms)\n\n  1 passing (49ms)\n\nExplanation: The test passed, but it should fail to demonstrate the unfixed bug described in the issue. The issue reports that compiling a component with `<button foo="bar"></button>` and CSS `button[foo] {}` throws `TypeError: operators[operator] is not a function`. The current test asserts `assert.doesNotThrow(...)`, which expects correct behavior and will pass if the bug is fixed or not present. To reproduce the bug correctly (and fail as described), the test should assert that compilation throws the reported TypeError (e.g., using `assert.throws` matching the error message).\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:03:13,502 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'throws TypeError for presence selector when attribute has a value\', () => {\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.throws(\n\t\t\t() => svelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' }),\n\t\t\terr => err instanceof TypeError && /operators\\[operator\\] is not a function/.test(err.message),\n\t\t\t\'should throw the specific TypeError described in the issue\'\n\t\t);\n\t});\n})' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1371, 'prompt_tokens': 7441, 'total_tokens': 8812, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1216, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--e807f1e7-3a42-4265-a538-aa978af09e6a-0' usage_metadata={'input_tokens': 7441, 'output_tokens': 1371, 'total_tokens': 8812, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1216}}
2025-11-11 00:03:16,257 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_jW3jimntoENKaNxvWDCxl7TC', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 92, 'prompt_tokens': 22620, 'total_tokens': 22712, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--07fe5771-e241-4dd9-a053-b8bb4198ec10-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_jW3jimntoENKaNxvWDCxl7TC', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22620, 'output_tokens': 92, 'total_tokens': 22712, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:03:19,837 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_sUIihRvLvOyTwV7mVm84dnrj', 'function': {'arguments': '{"relative_path":"test/test.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 91, 'prompt_tokens': 23987, 'total_tokens': 24078, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--af054b77-6dd2-4d92-934d-88e588af4c97-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/test.js'}, 'id': 'call_sUIihRvLvOyTwV7mVm84dnrj', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23987, 'output_tokens': 91, 'total_tokens': 24078, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:03:42,202 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_or4suXlz03ujNuGyUf4UQoUC', 'function': {'arguments': '{"relative_path":"test/helpers.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1435, 'prompt_tokens': 24113, 'total_tokens': 25548, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1408, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--73b03eda-b98b-47f5-ac98-62b3c412997e-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/helpers.js'}, 'id': 'call_or4suXlz03ujNuGyUf4UQoUC', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24113, 'output_tokens': 1435, 'total_tokens': 25548, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1408}}
2025-11-11 00:03:57,698 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_XBiDDQfEpkEwAd9VijOgfHtI', 'function': {'arguments': '{"relative_path":"test/js/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 732, 'prompt_tokens': 26236, 'total_tokens': 26968, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--4f8cadef-ef6b-4e69-8ec0-1b7507f58502-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/js/index.js'}, 'id': 'call_XBiDDQfEpkEwAd9VijOgfHtI', 'type': 'tool_call'}] usage_metadata={'input_tokens': 26236, 'output_tokens': 732, 'total_tokens': 26968, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-11 00:04:14,566 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_tu88Haib18QP0OETl82wmQtB', 'function': {'arguments': '{"relative_path":"test/css-errors/index.js","content":"import assert from \'assert\';\\nimport { svelte } from \'../helpers.js\';\\n\\ndescribe(\'css\', () => {\\n\\tit(\'throws TypeError for presence selector when attribute has a value\', () => {\\n\\t\\tconst input = `\\n\\t\\t\\t<button foo=\\"bar\\"></button>\\n\\t\\t\\t<style>\\n\\t\\t\\t\\tbutton[foo] {}\\n\\t\\t\\t</style>\\n\\t\\t`;\\n\\n\\t\\tassert.throws(\\n\\t\\t\\t() => svelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' }),\\n\\t\\t\\terr => err instanceof TypeError && /operators\\\\[operator\\\\] is not a function/.test(err.message),\\n\\t\\t\\t\'should throw the specific TypeError described in the issue\'\\n\\t\\t);\\n\\t});\\n})\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1564, 'prompt_tokens': 27017, 'total_tokens': 28581, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1344, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--45fb1300-8712-4a3c-a513-e2c596abdf23-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/css-errors/index.js', 'content': 'import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'throws TypeError for presence selector when attribute has a value\', () => {\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.throws(\n\t\t\t() => svelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' }),\n\t\t\terr => err instanceof TypeError && /operators\\[operator\\] is not a function/.test(err.message),\n\t\t\t\'should throw the specific TypeError described in the issue\'\n\t\t);\n\t});\n})\n'}, 'id': 'call_tu88Haib18QP0OETl82wmQtB', 'type': 'tool_call'}] usage_metadata={'input_tokens': 27017, 'output_tokens': 1564, 'total_tokens': 28581, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1344}}
2025-11-11 00:04:16,015 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='test/css-errors/index.js' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 9, 'prompt_tokens': 27252, 'total_tokens': 27261, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 24064}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--e6dc09df-98c5-42e9-8bc5-d5a3e7564d9f-0' usage_metadata={'input_tokens': 27252, 'output_tokens': 9, 'total_tokens': 27261, 'input_token_details': {'audio': 0, 'cache_read': 24064}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:04:16,053 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/test/css-errors/index.js b/test/css-errors/index.js
new file mode 100644
index 000000000..4b37d1128
--- /dev/null
+++ b/test/css-errors/index.js
@@ -0,0 +1,19 @@
+import assert from 'assert';
+import { svelte } from '../helpers.js';
+
+describe('css', () => {
+	it('throws TypeError for presence selector when attribute has a value', () => {
+		const input = `
+			<button foo="bar"></button>
+			<style>
+				button[foo] {}
+			</style>
+		`;
+
+		assert.throws(
+			() => svelte.compile(input, { format: 'iife', name: 'SvelteComponent' }),
+			err => err instanceof TypeError && /operators\[operator\] is not a function/.test(err.message),
+			'should throw the specific TypeError described in the issue'
+		);
+	});
+})

2025-11-11 00:04:16,055 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:04:16,087 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:04:16,087 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:04:16,188 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:04:16,189 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:04:16,189 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:04:16,290 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:04:16,291 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
Removing test/css-presence-selector/
[?2004l
2025-11-11 00:04:16,291 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:04:16,291 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory test/css-errors in the container
2025-11-11 00:04:16,291 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p test/css-errors
2025-11-11 00:04:16,393 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:04:16,393 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:04:16,393 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/css-errors/index.js in the container
2025-11-11 00:04:16,401 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:04:18,981 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Qucs5s9yF9F3nzZM5RKi1rTX', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 577, 'total_tokens': 731, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5661d0a9-5347-4675-bbc8-c75366f1d27e-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_Qucs5s9yF9F3nzZM5RKi1rTX', 'type': 'tool_call'}] usage_metadata={'input_tokens': 577, 'output_tokens': 154, 'total_tokens': 731, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:04:18,985 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:04:19,086 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:04:19,086 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:04 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:04 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:04 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:01 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 471421 Nov 11 00:01 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:04 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 10 23:54 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:04 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:04 yarn.lock
[?2004l
2025-11-11 00:09:22,824 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LkcOZFll0A0xvpvaBNLRHfeh', 'function': {'arguments': '{"command":"ls -la test && sed -n \'1,200p\' test/css-errors/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 170, 'prompt_tokens': 1400, 'total_tokens': 1570, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e3feb342-d328-4c8f-8d41-62407106db78-0' tool_calls=[{'name': 'run_command', 'args': {'command': "ls -la test && sed -n '1,200p' test/css-errors/index.js"}, 'id': 'call_LkcOZFll0A0xvpvaBNLRHfeh', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1400, 'output_tokens': 170, 'total_tokens': 1570, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:09:22,828 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test && sed -n '1,200p' test/css-errors/index.js
2025-11-11 00:09:22,930 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:09:22,930 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ls -la test && sed -n '1,200p' test/css-errors/index.
.js
[?2004l
total 116
drwxrwxr-x 1 root root 4096 Nov 11 00:04 [0m[01;34m.[0m
drwxr-xr-x 1 root root 4096 Nov 11 00:04 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcreate[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcss[0m
drwxr-xr-x 2 root root 4096 Nov 11 00:04 [01;34mcss-errors[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcustom-elements[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mformats[0m
-rw-r--r-- 1 root root 5474 Nov 10 23:59 helpers.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mhydration[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mjs[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mparser[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mruntime[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mserver-side-rendering[0m
-rw-r--r-- 1 root root 1077 Nov 10 23:59 setup.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34msourcemaps[0m
-rw-r--r-- 1 root root  247 Nov 10 23:59 test.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mvalidator[0m
import assert from 'assert';
import { svelte } from '../helpers.js';

describe('css', () => {
	it('throws TypeError for presence selector when attribute has a value', () => {
		const input = `
			<button foo="bar"></button>
			<style>
				button[foo] {}
			</style>
		`;

		assert.throws(
			() => svelte.compile(input, { format: 'iife', name: 'SvelteComponent' }),
			err => err instanceof TypeError && /operators\[operator\] is not a function/.test(err.message),
			'should throw the specific TypeError described in the issue'
		);
	});
})
[?2004l
2025-11-11 00:09:25,220 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_kdGqAXIEODge2FBLg9e4hjP3', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 2171, 'total_tokens': 2261, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--9c6765b2-54df-4e03-b3fb-5fa224fc76db-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_kdGqAXIEODge2FBLg9e4hjP3', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2171, 'output_tokens': 90, 'total_tokens': 2261, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:09:25,224 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:09:25,326 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:09:25,326 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:09:29,514 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_83f9sNDChwBQUKsxAi0O8HQ1', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 291, 'prompt_tokens': 3026, 'total_tokens': 3317, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f973f82b-99f6-41b4-9f56-91b8a5c6b80a-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_83f9sNDChwBQUKsxAi0O8HQ1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3026, 'output_tokens': 291, 'total_tokens': 3317, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:09:29,518 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-11 00:09:29,619 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:09:29,619 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-11 00:09:30,721 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_UVOx2w87ygExwBx6YZg1rTzW', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 4323, 'total_tokens': 4352, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--744f5a5b-c3a7-4b2b-8f62-fa56380072dc-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/helpers.js"}, 'id': 'call_UVOx2w87ygExwBx6YZg1rTzW', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4323, 'output_tokens': 29, 'total_tokens': 4352, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:09:30,724 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/helpers.js
2025-11-11 00:09:30,825 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:09:30,825 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:09:33,748 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hQ9PoResBnmEhcPre5SYL2gC', 'function': {'arguments': '{"command":"ls -la compiler | sed -n \'1,200p\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 229, 'prompt_tokens': 4642, 'total_tokens': 4871, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--06471bbf-7d84-4541-a3b4-be04f97040f8-0' tool_calls=[{'name': 'run_command', 'args': {'command': "ls -la compiler | sed -n '1,200p'"}, 'id': 'call_hQ9PoResBnmEhcPre5SYL2gC', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4642, 'output_tokens': 229, 'total_tokens': 4871, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:09:33,752 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la compiler | sed -n '1,200p'
2025-11-11 00:09:33,854 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:09:33,854 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 1956
drwxr-xr-x 2 root root    4096 Nov 10 23:54 .
drwxr-xr-x 1 root root    4096 Nov 11 00:04 ..
-rw-r--r-- 1 root root  687379 Nov 10 23:54 svelte.js
-rw-r--r-- 1 root root 1300784 Nov 10 23:54 svelte.js.map
[?2004l
2025-11-11 00:09:38,532 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_UvFP4qFowulZf0KawnrJ4UGj', 'function': {'arguments': '{"command":"npx mocha --opts mocha.opts test/css-errors/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 355, 'prompt_tokens': 4796, 'total_tokens': 5151, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5662e410-f979-4d66-9948-5f68bf1000f0-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --opts mocha.opts test/css-errors/index.js'}, 'id': 'call_UvFP4qFowulZf0KawnrJ4UGj', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4796, 'output_tokens': 355, 'total_tokens': 5151, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-11-11 00:09:38,535 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --opts mocha.opts test/css-errors/index.js
2025-11-11 00:10:45,760 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 9
2025-11-11 00:10:45,760 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[A]0;root@ucl-research: /testbedroot@ucl-research:/testbed# npx mocha --opts mocha.opts test/css-errors/index.j[Ks
[?2004l

[0m[0m
[0m  create[0m
  [32m  ✓[0m[90m should return a component constructor[0m
  [32m  ✓[0m[90m should throw error when source is invalid [0m
  [32m  ✓[0m[90m should return undefined when source is invalid [0m

[0m  css[0m
  [31m  1) throws TypeError for presence selector when attribute has a value[0m

[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m cascade-false[0m
  [32m  ✓[0m[90m cascade-false-global[0m
  [32m  ✓[0m[90m cascade-false-global-keyframes[0m
  [32m  ✓[0m[90m cascade-false-keyframes[0m
  [32m  ✓[0m[90m cascade-false-keyframes-from-to[0m
  [32m  ✓[0m[90m cascade-false-pseudo-element[0m
  [32m  ✓[0m[90m cascade-false-universal-selector[0m
  [32m  ✓[0m[90m combinator-child[0m
  [32m  ✓[0m[90m css-vars[0m
  [32m  ✓[0m[90m descendant-selector-non-top-level-outer[0m
  [32m  ✓[0m[90m keyframes[0m
  [32m  ✓[0m[90m media-query[0m
  [32m  ✓[0m[90m media-query-word[0m
  [32m  ✓[0m[90m omit-scoping-attribute[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-pipe-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-word-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-class-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-class-static[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner-class[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner-multiple[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-outer[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-outer-multiple[0m
  [32m  ✓[0m[90m omit-scoping-attribute-global[0m
  [32m  ✓[0m[90m omit-scoping-attribute-id[0m
  [32m  ✓[0m[90m omit-scoping-attribute-whitespace[0m
  [32m  ✓[0m[90m omit-scoping-attribute-whitespace-multiple[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m refs-qualified[0m
  [32m  ✓[0m[90m universal-selector[0m
  [32m  ✓[0m[90m unknown-at-rule[0m
  [32m  ✓[0m[90m unused-selector[0m
  [32m  ✓[0m[90m unused-selector-leading[0m
  [32m  ✓[0m[90m unused-selector-ternary[0m

[0m  custom-elements[0m
  [31m  2) escaped-css[0m
  [31m  3) html[0m
  [31m  4) html-slots[0m
  [31m  5) new[0m
  [31m  6) new-styled[0m

[0m  formats[0m
[0m    amd[0m
    [32m  ✓[0m[90m generates an AMD module[0m
[0m    cjs[0m
    [32m  ✓[0m[90m generates a CommonJS module[0m
[0m    iife[0m
    [32m  ✓[0m[90m generates a self-executing script[0m
[0m    umd[0m
    [32m  ✓[0m[90m generates a UMD build[0m
[0m    eval[0m
    [32m  ✓[0m[90m generates a self-executing script that returns the component on eval[0m

[0m  hydration[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m binding-input[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-in-element[0m
  [32m  ✓[0m[90m dynamic-text[0m
  [32m  ✓[0m[90m dynamic-text-changed[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m element-attribute-added[0m
  [32m  ✓[0m[90m element-attribute-changed[0m
  [32m  ✓[0m[90m element-attribute-removed[0m
  [32m  ✓[0m[90m element-attribute-unchanged[0m
  [32m  ✓[0m[90m element-nested[0m
  [32m  ✓[0m[90m element-ref[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-anchor[0m
  [32m  ✓[0m[90m if-block-false[0m
  [32m  ✓[0m[90m if-block-update[0m
  [36m  - raw[0m
  [32m  ✓[0m[90m top-level-text[0m

[0m  js[0m
  [32m  ✓[0m[90m collapses-text-around-comments[0m[33m (67ms)[0m
  [32m  ✓[0m[90m component-static[0m[33m (43ms)[0m
  [32m  ✓[0m[90m computed-collapsed-if[0m[33m (40ms)[0m
  [32m  ✓[0m[90m css-media-query[0m[33m (42ms)[0m
  [32m  ✓[0m[90m css-shadow-dom-keyframes[0m
  [32m  ✓[0m[90m each-block-changed-check[0m[33m (65ms)[0m
  [32m  ✓[0m[90m event-handlers-custom[0m
  [32m  ✓[0m[90m if-block-no-update[0m
  [32m  ✓[0m[90m if-block-simple[0m[33m (40ms)[0m
  [32m  ✓[0m[90m inline-style-optimized[0m
  [32m  ✓[0m[90m inline-style-optimized-multiple[0m
  [32m  ✓[0m[90m inline-style-optimized-url[0m
  [32m  ✓[0m[90m inline-style-unoptimized[0m
  [32m  ✓[0m[90m input-without-blowback-guard[0m[33m (44ms)[0m
  [32m  ✓[0m[90m legacy-input-type[0m
  [32m  ✓[0m[90m legacy-quote-class[0m
  [32m  ✓[0m[90m media-bindings[0m
'Imported.html' is imported by test/js/samples/non-imported-component/_actual.js, but could not be resolved – treating it as an external dependency
  [32m  ✓[0m[90m non-imported-component[0m
(4:2) – 'onrender' has been deprecated in favour of 'oncreate', and will cause an error in Svelte 2.x
(5:2) – 'onteardown' has been deprecated in favour of 'ondestroy', and will cause an error in Svelte 2.x
  [32m  ✓[0m[90m onrender-onteardown-rewritten[0m[33m (43ms)[0m
  [32m  ✓[0m[90m setup-method[0m
  [32m  ✓[0m[90m ssr-no-oncreate-etc[0m
  [32m  ✓[0m[90m use-elements-as-anchors[0m[33m (50ms)[0m

[0m  parse[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-dynamic-boolean[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved[0m
  [32m  ✓[0m[90m attribute-escaped[0m
  [32m  ✓[0m[90m attribute-multiple[0m
  [32m  ✓[0m[90m attribute-shorthand[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m attribute-static-boolean[0m
  [32m  ✓[0m[90m attribute-unique-error[0m
  [32m  ✓[0m[90m attribute-unquoted[0m
  [32m  ✓[0m[90m binding[0m
  [32m  ✓[0m[90m binding-shorthand[0m
  [32m  ✓[0m[90m comment[0m
  [32m  ✓[0m[90m convert-entities[0m
  [32m  ✓[0m[90m convert-entities-in-element[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-ref-selector[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m each-block-destructured[0m
  [32m  ✓[0m[90m each-block-else[0m
  [32m  ✓[0m[90m each-block-indexed[0m
  [32m  ✓[0m[90m each-block-keyed[0m
  [32m  ✓[0m[90m element-with-mustache[0m
  [32m  ✓[0m[90m element-with-text[0m
  [32m  ✓[0m[90m elements[0m
  [32m  ✓[0m[90m error-binding-mustaches[0m
  [32m  ✓[0m[90m error-binding-rvalue[0m
  [32m  ✓[0m[90m error-css[0m[31m (164ms)[0m
  [32m  ✓[0m[90m error-event-handler[0m
  [32m  ✓[0m[90m error-illegal-expression[0m
  [32m  ✓[0m[90m error-multiple-styles[0m
  [32m  ✓[0m[90m error-script-unclosed[0m
  [32m  ✓[0m[90m error-self-reference[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-b[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-c[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-d[0m
  [32m  ✓[0m[90m error-unmatched-closing-tag[0m
  [32m  ✓[0m[90m error-void-closing[0m
  [32m  ✓[0m[90m error-window-children[0m
  [32m  ✓[0m[90m error-window-duplicate[0m
  [32m  ✓[0m[90m error-window-inside-block[0m
  [32m  ✓[0m[90m error-window-inside-element[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-else[0m
  [32m  ✓[0m[90m if-block-elseif[0m
  [32m  ✓[0m[90m implicitly-closed-li[0m
  [32m  ✓[0m[90m nbsp[0m
  [32m  ✓[0m[90m raw-mustaches[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m script[0m
  [32m  ✓[0m[90m script-comment-only[0m
  [32m  ✓[0m[90m script-comment-trailing[0m
  [32m  ✓[0m[90m script-comment-trailing-multiline[0m
  [32m  ✓[0m[90m self-closing-element[0m
  [32m  ✓[0m[90m self-reference[0m
  [32m  ✓[0m[90m space-between-mustaches[0m
  [32m  ✓[0m[90m textarea-children[0m
  [32m  ✓[0m[90m transition-intro[0m
  [32m  ✓[0m[90m transition-intro-no-params[0m
  [32m  ✓[0m[90m whitespace-leading-trailing[0m
  [32m  ✓[0m[90m whitespace-normal[0m
  [32m  ✓[0m[90m yield[0m
  [32m  ✓[0m[90m handles errors with options.onerror[0m
  [32m  ✓[0m[90m throws without options.onerror[0m
  [32m  ✓[0m[90m includes AST in svelte.compile output[0m

[0m  runtime[0m
  [32m  ✓[0m[90m attribute-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (inline helpers)[0m
  [32m  ✓[0m[90m attribute-empty (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty (inline helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (inline helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (shared helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (shared helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (inline helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (shared helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (shared helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (inline helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (shared helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (shared helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (inline helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (shared helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (shared helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (inline helpers)[0m
  [36m  - binding-audio-currenttime-duration (shared helpers)[0m
  [36m  - binding-audio-currenttime-duration (shared helpers)[0m
  [36m  - binding-audio-currenttime-duration (inline helpers)[0m
  [32m  ✓[0m[90m binding-indirect (shared helpers)[0m
  [32m  ✓[0m[90m binding-indirect (shared helpers)[0m
  [32m  ✓[0m[90m binding-indirect (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-number (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-number (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-number (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-range (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (inline helpers)[0m

>> [36m[1mmain.html[22m[39m
[90m    1: [39m/* main.html generated by Svelte v1.41.1 */
[90m    2: [39mimport { addListener as addListener$, appendNode as appendNode$, assign as assign$, callAll as callAll$, createElement as createElement$, createText as createText$, detachNode as detachNode$, init as init$, insertNode as insertNode$, proto as proto$, removeListener as removeListener$ } from "/testbed/shared.js";
[90m    3: [39m
[90m    4: [39mfunction create_main_fragment$(state, component$) {
[90m    5: [39m    var p$, text$, text$_1, text$_2, select$, option$, option$_1, option$_2, select$_1$_updating = false, text$_6, p$_1, text$_7, text$_8;
[90m    6: [39m
[90m    7: [39m    function select$_change_handler$() {
[90m    8: [39m        select$_1$_updating = true;
[90m    9: [39m        var selectedOption = select$.querySelector(':checked') || select$.options[0];
[90m   10: [39m        component$.set({ selected: selectedOption && selectedOption.__value });
[90m   11: [39m        select$_1$_updating = false;
[90m   12: [39m    }
[90m   13: [39m
[90m   14: [39m    return {
[90m   15: [39m        c: function create() {
[90m   16: [39m            p$ = createElement$("p");
[90m   17: [39m            text$ = createText$("selected: ");
[90m   18: [39m            text$_1 = createText$(state.selected);
[90m   19: [39m            text$_2 = createText$("\n\n");
[90m   20: [39m            select$ = createElement$("select");
[90m   21: [39m            option$ = createElement$("option");
[90m   22: [39m            option$.textContent = "one";
[90m   23: [39m            option$_1 = createElement$("option");
[90m   24: [39m            option$_1.textContent = "two";
[90m   25: [39m            option$_2 = createElement$("option");
[90m   26: [39m            option$_2.textContent = "three";
[90m   27: [39m            text$_6 = createText$("\n\n");
[90m   28: [39m            p$_1 = createElement$("p");
[90m   29: [39m            text$_7 = createText$("selected: ");
[90m   30: [39m            text$_8 = createText$(state.selected);
[90m   31: [39m            this.h();
[90m   32: [39m        },
[90m   33: [39m
[90m   34: [39m        h: function hydrate() {
[90m   35: [39m            if (!('selected' in state)) component$._root._beforecreate.push(select$_change_handler$);
[90m   36: [39m
[90m   37: [39m            addListener$(select$, "change", select$_change_handler$);
[90m   38: [39m        },
[90m   39: [39m
[90m   40: [39m        m: function mount(target$, anchor) {
[90m   41: [39m            insertNode$(p$, target$, anchor);
[90m   42: [39m            appendNode$(text$, p$);
[90m   43: [39m            appendNode$(text$_1, p$);
[90m   44: [39m            insertNode$(text$_2, target$, anchor);
[90m   45: [39m            insertNode$(select$, target$, anchor);
[90m   46: [39m            appendNode$(option$, select$);
[90m   47: [39m
[90m   48: [39m            option$.__value = option$.textContent;
[90m   49: [39m
[90m   50: [39m            appendNode$(option$_1, select$);
[90m   51: [39m
[90m   52: [39m            option$_1.__value = option$_1.textContent;
[90m   53: [39m
[90m   54: [39m            appendNode$(option$_2, select$);
[90m   55: [39m
[90m   56: [39m            option$_2.__value = option$_2.textContent;
[90m   57: [39m
[90m   58: [39m            var value$ = state.selected;
[90m   59: [39m            for (var i$ = 0; i$ < select$.options.length; i$ += 1) {
[90m   60: [39m                var option$_3 = select$.options[i$];
[90m   61: [39m
[90m   62: [39m                if (option$_3.__value === value$) {
[90m   63: [39m                    option$_3.selected = true;
[90m   64: [39m                    break;
[90m   65: [39m                }
[90m   66: [39m            }
[90m   67: [39m
[90m   68: [39m            insertNode$(text$_6, target$, anchor);
[90m   69: [39m            insertNode$(p$_1, target$, anchor);
[90m   70: [39m            appendNode$(text$_7, p$_1);
[90m   71: [39m            appendNode$(text$_8, p$_1);
[90m   72: [39m        },
[90m   73: [39m
[90m   74: [39m        p: function update(changed, state) {
[90m   75: [39m            if (changed.selected) {
[90m   76: [39m                text$_1.data = state.selected;
[90m   77: [39m            }
[90m   78: [39m
[90m   79: [39m            option$.__value = option$.textContent;
[90m   80: [39m            option$_1.__value = option$_1.textContent;
[90m   81: [39m            option$_2.__value = option$_2.textContent;
[90m   82: [39m
[90m   83: [39m            if (!select$_1$_updating) {
[90m   84: [39m                var value$ = state.selected;
[90m   85: [39m                for (var i$ = 0; i$ < select$.options.length; i$ += 1) {
[90m   86: [39m                    var option$_3 = select$.options[i$];
[90m   87: [39m
[90m   88: [39m                    if (option$_3.__value === value$) {
[90m   89: [39m                        option$_3.selected = true;
[90m   90: [39m                        break;
[90m   91: [39m                    }
[90m   92: [39m                }
[90m   93: [39m            }
[90m   94: [39m
[90m   95: [39m            if (changed.selected) {
[90m   96: [39m                text$_8.data = state.selected;
[90m   97: [39m            }
[90m   98: [39m        },
[90m   99: [39m
[90m  100: [39m        u: function unmount() {
[90m  101: [39m            detachNode$(p$);
[90m  102: [39m            detachNode$(text$_2);
[90m  103: [39m            detachNode$(select$);
[90m  104: [39m            detachNode$(text$_6);
[90m  105: [39m            detachNode$(p$_1);
[90m  106: [39m        },
[90m  107: [39m
[90m  108: [39m        d: function destroy() {
[90m  109: [39m            removeListener$(select$, "change", select$_change_handler$);
[90m  110: [39m        }
[90m  111: [39m    };
[90m  112: [39m}
[90m  113: [39m
[90m  114: [39mfunction Main$(options) {
[90m  115: [39m    init$(this, options);
[90m  116: [39m    this._state = assign$({}, options.data);
[90m  117: [39m
[90m  118: [39m    if (!options._root) {
[90m  119: [39m        this._oncreate = [];
[90m  120: [39m        this._beforecreate = [];
[90m  121: [39m    }
[90m  122: [39m
[90m  123: [39m    this._fragment = create_main_fragment$(this._state, this);
[90m  124: [39m
[90m  125: [39m    if (options.target) {
[90m  126: [39m        this._fragment.c();
[90m  127: [39m        this._fragment.m(options.target, options.anchor || null);
[90m  128: [39m
[90m  129: [39m        callAll$(this._beforecreate);
[90m  130: [39m    }
[90m  131: [39m}
[90m  132: [39m
[90m  133: [39massign$(Main$.prototype, proto$);
[90m  134: [39mexport default Main$;
<< [36m[1mmain.html[22m[39m
  [31m  7) binding-select (shared helpers)[0m
  [31m  8) binding-select (shared helpers)[0m
  [31m  9) binding-select (inline helpers)[0m
  [36m  - binding-select-in-each-block (shared helpers)[0m
  [36m  - binding-select-in-each-block (shared helpers)[0m
  [36m  - binding-select-in-each-block (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-late (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-late (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-late (inline helpers)[0m
  [36m  - binding-select-multiple (shared helpers)[0m
  [36m  - binding-select-multiple (shared helpers)[0m
  [36m  - binding-select-multiple (inline helpers)[0m
  [32m  ✓[0m[90m binding-textarea (shared helpers)[0m
  [32m  ✓[0m[90m binding-textarea (shared helpers)[0m
  [32m  ✓[0m[90m binding-textarea (inline helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (inline helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (shared helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (shared helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (inline helpers)[0m
  [32m  ✓[0m[90m component (shared helpers)[0m
  [32m  ✓[0m[90m component (shared helpers)[0m
  [32m  ✓[0m[90m component (inline helpers)[0m
  [32m  ✓[0m[90m component-binding (shared helpers)[0m
  [32m  ✓[0m[90m component-binding (shared helpers)[0m
  [32m  ✓[0m[90m component-binding (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (inline helpers)[0m
  [36m  - component-binding-conditional-b (shared helpers)[0m
  [36m  - component-binding-conditional-b (shared helpers)[0m
  [36m  - component-binding-conditional-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (inline helpers)[0m
  [36m  - component-binding-deep-b (shared helpers)[0m
  [36m  - component-binding-deep-b (shared helpers)[0m
  [36m  - component-binding-deep-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (inline helpers)[0m[33m (45ms)[0m
  [32m  ✓[0m[90m component-binding-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m component-data-empty (shared helpers)[0m
  [32m  ✓[0m[90m component-data-empty (shared helpers)[0m
  [32m  ✓[0m[90m component-data-empty (inline helpers)[0m
  [32m  ✓[0m[90m component-data-static (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static (inline helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (inline helpers)[0m
  [32m  ✓[0m[90m component-events (shared helpers)[0m
  [32m  ✓[0m[90m component-events (shared helpers)[0m
  [32m  ✓[0m[90m component-events (inline helpers)[0m
  [32m  ✓[0m[90m component-events-data (shared helpers)[0m
  [32m  ✓[0m[90m component-events-data (shared helpers)[0m
  [32m  ✓[0m[90m component-events-data (inline helpers)[0m
  [32m  ✓[0m[90m component-events-each (shared helpers)[0m
  [32m  ✓[0m[90m component-events-each (shared helpers)[0m
  [32m  ✓[0m[90m component-events-each (inline helpers)[0m
  [32m  ✓[0m[90m component-if-placement (shared helpers)[0m
  [32m  ✓[0m[90m component-if-placement (shared helpers)[0m
  [32m  ✓[0m[90m component-if-placement (inline helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (inline helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (inline helpers)[0m
  [32m  ✓[0m[90m component-not-void (shared helpers)[0m
  [32m  ✓[0m[90m component-not-void (shared helpers)[0m
  [32m  ✓[0m[90m component-not-void (inline helpers)[0m
  [32m  ✓[0m[90m component-ref (shared helpers)[0m
  [32m  ✓[0m[90m component-ref (shared helpers)[0m
  [32m  ✓[0m[90m component-ref (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-default (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-default (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-default (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-named (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-named (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-named (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (inline helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (inline helpers)[0m
  [32m  ✓[0m[90m component-yield (shared helpers)[0m
  [32m  ✓[0m[90m component-yield (shared helpers)[0m
  [32m  ✓[0m[90m component-yield (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (inline helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode (/testbed/shared.js:25:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:65:4)
    at Modal$.destroy (/testbed/shared.js:382:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:27:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (shared helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode (/testbed/shared.js:25:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:90:4)
    at Modal$.destroy (/testbed/shared.js:382:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:30:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (shared helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode$ (/testbed/test/runtime/samples/component-yield-placement/Modal.html:124:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:50:4)
    at Modal$.destroy$ (/testbed/test/runtime/samples/component-yield-placement/Modal.html:164:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:12:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-static (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-static (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-static (inline helpers)[0m
  [32m  ✓[0m[90m computed-empty (shared helpers)[0m
  [32m  ✓[0m[90m computed-empty (shared helpers)[0m
  [32m  ✓[0m[90m computed-empty (inline helpers)[0m
  [32m  ✓[0m[90m computed-function (shared helpers)[0m
  [32m  ✓[0m[90m computed-function (shared helpers)[0m
  [32m  ✓[0m[90m computed-function (inline helpers)[0m
  [32m  ✓[0m[90m computed-values (shared helpers)[0m
  [32m  ✓[0m[90m computed-values (shared helpers)[0m
  [32m  ✓[0m[90m computed-values (inline helpers)[0m
  [32m  ✓[0m[90m computed-values-default (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-default (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-default (inline helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (inline helpers)[0m
  [32m  ✓[0m[90m css (shared helpers)[0m
  [32m  ✓[0m[90m css (shared helpers)[0m
  [32m  ✓[0m[90m css (inline helpers)[0m
  [32m  ✓[0m[90m css-comments (shared helpers)[0m
  [32m  ✓[0m[90m css-comments (shared helpers)[0m
  [32m  ✓[0m[90m css-comments (inline helpers)[0m
  [32m  ✓[0m[90m css-false (shared helpers)[0m
  [32m  ✓[0m[90m css-false (shared helpers)[0m
  [32m  ✓[0m[90m css-false (inline helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (shared helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (shared helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (inline helpers)[0m
  [32m  ✓[0m[90m custom-method (shared helpers)[0m
  [32m  ✓[0m[90m custom-method (shared helpers)[0m
  [32m  ✓[0m[90m custom-method (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-self (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-self (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-self (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (inline helpers)[0m
  [32m  ✓[0m[90m default-data (shared helpers)[0m
  [32m  ✓[0m[90m default-data (shared helpers)[0m
  [32m  ✓[0m[90m default-data (inline helpers)[0m
  [32m  ✓[0m[90m default-data-function (shared helpers)[0m
  [32m  ✓[0m[90m default-data-function (shared helpers)[0m
  [32m  ✓[0m[90m default-data-function (inline helpers)[0m
  [32m  ✓[0m[90m default-data-override (shared helpers)[0m
  [32m  ✓[0m[90m default-data-override (shared helpers)[0m
  [32m  ✓[0m[90m default-data-override (inline helpers)[0m
  [32m  ✓[0m[90m destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m destroy-twice (inline helpers)[0m
  [32m  ✓[0m[90m destructuring (shared helpers)[0m
  [32m  ✓[0m[90m destructuring (shared helpers)[0m
  [32m  ✓[0m[90m destructuring (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (inline helpers)[0m
  [32m  ✓[0m[90m each-block (shared helpers)[0m
  [32m  ✓[0m[90m each-block (shared helpers)[0m
  [32m  ✓[0m[90m each-block (inline helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (inline helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (inline helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (shared helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (shared helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (inline helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (inline helpers)[0m
  [32m  ✓[0m[90m each-block-else (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else (inline helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (inline helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (shared helpers)[0m[33m (55ms)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (shared helpers)[0m[31m (179ms)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (inline helpers)[0m[33m (44ms)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (inline helpers)[0m
  [32m  ✓[0m[90m each-block-random-permute (shared helpers)[0m
  [32m  ✓[0m[90m each-block-random-permute (shared helpers)[0m[33m (39ms)[0m
  [32m  ✓[0m[90m each-block-random-permute (inline helpers)[0m
  [32m  ✓[0m[90m each-block-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-static (inline helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (shared helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (shared helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (inline helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (shared helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (shared helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (inline helpers)[0m
  [32m  ✓[0m[90m empty-style-block (shared helpers)[0m
  [32m  ✓[0m[90m empty-style-block (shared helpers)[0m
  [32m  ✓[0m[90m empty-style-block (inline helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (shared helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (shared helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (inline helpers)[0m
  [32m  ✓[0m[90m escaped-text (shared helpers)[0m
  [32m  ✓[0m[90m escaped-text (shared helpers)[0m
  [32m  ✓[0m[90m escaped-text (inline helpers)[0m
  [32m  ✓[0m[90m event-handler (shared helpers)[0m
  [32m  ✓[0m[90m event-handler (shared helpers)[0m
  [32m  ✓[0m[90m event-handler (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (inline helpers)[0m
  [32m  ✓[0m[90m events-custom (shared helpers)[0m
  [32m  ✓[0m[90m events-custom (shared helpers)[0m
  [32m  ✓[0m[90m events-custom (inline helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (shared helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (shared helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (inline helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (shared helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (shared helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (inline helpers)[0m
  [32m  ✓[0m[90m function-in-expression (shared helpers)[0m
  [32m  ✓[0m[90m function-in-expression (shared helpers)[0m
  [32m  ✓[0m[90m function-in-expression (inline helpers)[0m
  [32m  ✓[0m[90m get-state (shared helpers)[0m
  [32m  ✓[0m[90m get-state (shared helpers)[0m
  [32m  ✓[0m[90m get-state (inline helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (shared helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (shared helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (inline helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (shared helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (shared helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (inline helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (inline helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (inline helpers)[0m
  [32m  ✓[0m[90m hello-world (shared helpers)[0m
  [32m  ✓[0m[90m hello-world (shared helpers)[0m
  [32m  ✓[0m[90m hello-world (inline helpers)[0m
  [32m  ✓[0m[90m helpers (shared helpers)[0m
  [32m  ✓[0m[90m helpers (shared helpers)[0m
  [32m  ✓[0m[90m helpers (inline helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (shared helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (shared helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (inline helpers)[0m
  [32m  ✓[0m[90m html-entities (shared helpers)[0m
  [32m  ✓[0m[90m html-entities (shared helpers)[0m
  [32m  ✓[0m[90m html-entities (inline helpers)[0m
  [32m  ✓[0m[90m if-block (shared helpers)[0m
  [32m  ✓[0m[90m if-block (shared helpers)[0m
  [32m  ✓[0m[90m if-block (inline helpers)[0m
  [32m  ✓[0m[90m if-block-else (shared helpers)[0m
  [32m  ✓[0m[90m if-block-else (shared helpers)[0m
  [32m  ✓[0m[90m if-block-else (inline helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (inline helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (inline helpers)[0m
  [32m  ✓[0m[90m if-block-expression (shared helpers)[0m
  [32m  ✓[0m[90m if-block-expression (shared helpers)[0m
  [32m  ✓[0m[90m if-block-expression (inline helpers)[0m
  [32m  ✓[0m[90m if-block-or (shared helpers)[0m
  [32m  ✓[0m[90m if-block-or (shared helpers)[0m
  [32m  ✓[0m[90m if-block-or (inline helpers)[0m
  [32m  ✓[0m[90m if-block-widget (shared helpers)[0m
  [32m  ✓[0m[90m if-block-widget (shared helpers)[0m
  [32m  ✓[0m[90m if-block-widget (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (inline helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (shared helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (shared helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (inline helpers)[0m
  [32m  ✓[0m[90m inline-expressions (shared helpers)[0m
  [32m  ✓[0m[90m inline-expressions (shared helpers)[0m
  [32m  ✓[0m[90m inline-expressions (inline helpers)[0m
  [32m  ✓[0m[90m input-list (shared helpers)[0m
  [32m  ✓[0m[90m input-list (shared helpers)[0m
  [32m  ✓[0m[90m input-list (inline helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (shared helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (shared helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (inline helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (inline helpers)[0m
  [32m  ✓[0m[90m nbsp (shared helpers)[0m
  [32m  ✓[0m[90m nbsp (shared helpers)[0m
  [32m  ✓[0m[90m nbsp (inline helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (shared helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (shared helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (inline helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (shared helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (shared helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (inline helpers)[0m
  [32m  ✓[0m[90m observe-deferred (shared helpers)[0m
  [32m  ✓[0m[90m observe-deferred (shared helpers)[0m
  [32m  ✓[0m[90m observe-deferred (inline helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (inline helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (shared helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (shared helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (inline helpers)[0m
  [32m  ✓[0m[90m onrender-chain (shared helpers)[0m
  [32m  ✓[0m[90m onrender-chain (shared helpers)[0m
  [32m  ✓[0m[90m onrender-chain (inline helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (inline helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (inline helpers)[0m
  [32m  ✓[0m[90m options (shared helpers)[0m
  [32m  ✓[0m[90m options (shared helpers)[0m
  [32m  ✓[0m[90m options (inline helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (shared helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (shared helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (inline helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (inline helpers)[0m
  [32m  ✓[0m[90m refs (shared helpers)[0m
  [32m  ✓[0m[90m refs (shared helpers)[0m
  [32m  ✓[0m[90m refs (inline helpers)[0m
  [32m  ✓[0m[90m refs-unset (shared helpers)[0m
  [32m  ✓[0m[90m refs-unset (shared helpers)[0m
  [32m  ✓[0m[90m refs-unset (inline helpers)[0m
  [32m  ✓[0m[90m select (shared helpers)[0m
  [32m  ✓[0m[90m select (shared helpers)[0m
  [32m  ✓[0m[90m select (inline helpers)[0m
  [32m  ✓[0m[90m select-bind-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-array (inline helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (inline helpers)[0m
  [32m  ✓[0m[90m select-change-handler (shared helpers)[0m
  [32m  ✓[0m[90m select-change-handler (shared helpers)[0m
  [32m  ✓[0m[90m select-change-handler (inline helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (inline helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (inline helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (inline helpers)[0m
  [32m  ✓[0m[90m select-props (shared helpers)[0m
  [32m  ✓[0m[90m select-props (shared helpers)[0m
  [32m  ✓[0m[90m select-props (inline helpers)[0m
  [32m  ✓[0m[90m self-reference (shared helpers)[0m
  [32m  ✓[0m[90m self-reference (shared helpers)[0m
  [32m  ✓[0m[90m self-reference (inline helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (shared helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (shared helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (inline helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (shared helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (shared helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (inline helpers)[0m
  [32m  ✓[0m[90m set-clones-input (shared helpers)[0m
  [32m  ✓[0m[90m set-clones-input (shared helpers)[0m
  [32m  ✓[0m[90m set-clones-input (inline helpers)[0m
  [32m  ✓[0m[90m set-in-observe (shared helpers)[0m
  [32m  ✓[0m[90m set-in-observe (shared helpers)[0m
  [32m  ✓[0m[90m set-in-observe (inline helpers)[0m
  [36m  - set-in-observe-dedupes-renders (shared helpers)[0m
  [36m  - set-in-observe-dedupes-renders (shared helpers)[0m
  [36m  - set-in-observe-dedupes-renders (inline helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (inline helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (shared helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (shared helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (inline helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (shared helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (shared helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (inline helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (inline helpers)[0m
  [32m  ✓[0m[90m setup (shared helpers)[0m
  [32m  ✓[0m[90m setup (shared helpers)[0m
  [32m  ✓[0m[90m setup (inline helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (inline helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (inline helpers)[0m
  [32m  ✓[0m[90m single-static-element (shared helpers)[0m
  [32m  ✓[0m[90m single-static-element (shared helpers)[0m
  [32m  ✓[0m[90m single-static-element (inline helpers)[0m
  [32m  ✓[0m[90m single-text-node (shared helpers)[0m
  [32m  ✓[0m[90m single-text-node (shared helpers)[0m
  [32m  ✓[0m[90m single-text-node (inline helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (shared helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (shared helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (inline helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m svg (shared helpers)[0m
  [32m  ✓[0m[90m svg (shared helpers)[0m
  [32m  ✓[0m[90m svg (inline helpers)[0m
  [32m  ✓[0m[90m svg-attributes (shared helpers)[0m
  [32m  ✓[0m[90m svg-attributes (shared helpers)[0m
  [32m  ✓[0m[90m svg-attributes (inline helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m svg-class (shared helpers)[0m
  [32m  ✓[0m[90m svg-class (shared helpers)[0m
  [32m  ✓[0m[90m svg-class (inline helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (inline helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-multiple (shared helpers)[0m
  [32m  ✓[0m[90m svg-multiple (shared helpers)[0m
  [32m  ✓[0m[90m svg-multiple (inline helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-xlink (shared helpers)[0m
  [32m  ✓[0m[90m svg-xlink (shared helpers)[0m
  [32m  ✓[0m[90m svg-xlink (inline helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (shared helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (shared helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (inline helpers)[0m
  [32m  ✓[0m[90m textarea-children (shared helpers)[0m
  [32m  ✓[0m[90m textarea-children (shared helpers)[0m
  [32m  ✓[0m[90m textarea-children (inline helpers)[0m
  [32m  ✓[0m[90m textarea-value (shared helpers)[0m
  [32m  ✓[0m[90m textarea-value (shared helpers)[0m
  [32m  ✓[0m[90m textarea-value (inline helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-events (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-events (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-events (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (inline helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (inline helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (inline helpers)[0m
  [36m  - window-bind-scroll-update (shared helpers)[0m
  [36m  - window-bind-scroll-update (shared helpers)[0m
  [36m  - window-bind-scroll-update (inline helpers)[0m
  [36m  - window-binding-resize (shared helpers)[0m
  [36m  - window-binding-resize (shared helpers)[0m
  [36m  - window-binding-resize (inline helpers)[0m
  [36m  - window-event (shared helpers)[0m
  [36m  - window-event (shared helpers)[0m
  [36m  - window-event (inline helpers)[0m
  [32m  ✓[0m[90m window-event-context (shared helpers)[0m
  [32m  ✓[0m[90m window-event-context (shared helpers)[0m
  [32m  ✓[0m[90m window-event-context (inline helpers)[0m
  [32m  ✓[0m[90m fails if options.target is missing in dev mode[0m
  [32m  ✓[0m[90m fails if options.hydrate is true but the component is non-hydratable[0m

[0m  ssr[0m
  [32m  ✓[0m[90m attribute-boolean[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m comment[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-binding[0m
  [32m  ✓[0m[90m component-binding-renamed[0m
  [32m  ✓[0m[90m component-data-dynamic[0m
  [32m  ✓[0m[90m component-data-empty[0m
  [32m  ✓[0m[90m component-data-static[0m
  [32m  ✓[0m[90m component-refs[0m
  [32m  ✓[0m[90m component-refs-and-attributes[0m
  [32m  ✓[0m[90m component-yield[0m
  [32m  ✓[0m[90m computed[0m
  [32m  ✓[0m[90m default-data[0m
  [32m  ✓[0m[90m default-data-override[0m
  [32m  ✓[0m[90m directives[0m
  [32m  ✓[0m[90m dynamic-text[0m
  [32m  ✓[0m[90m dynamic-text-escaped[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m empty-elements-closed[0m
  [32m  ✓[0m[90m entities[0m
  [32m  ✓[0m[90m helpers[0m
  [32m  ✓[0m[90m if-block-false[0m
  [32m  ✓[0m[90m if-block-true[0m
  [32m  ✓[0m[90m import-non-component[0m
  [32m  ✓[0m[90m raw-mustaches[0m
  [32m  ✓[0m[90m static-div[0m
  [32m  ✓[0m[90m static-text[0m
  [32m  ✓[0m[90m styles[0m
  [32m  ✓[0m[90m styles-nested[0m
  [32m  ✓[0m[90m textarea-children[0m
  [32m  ✓[0m[90m textarea-value[0m
  [32m  ✓[0m[90m triple[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand[0m
  [32m  ✓[0m[90m attribute-empty[0m
  [32m  ✓[0m[90m attribute-empty-svg[0m
  [32m  ✓[0m[90m attribute-namespaced[0m
  [32m  ✓[0m[90m attribute-partial-number[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m attribute-static-at-symbol[0m
  [32m  ✓[0m[90m attribute-static-boolean[0m
  [32m  ✓[0m[90m attribute-static-quotemarks[0m
  [32m  ✓[0m[90m autofocus[0m
  [36m  - binding-audio-currenttime-duration[0m
  [32m  ✓[0m[90m binding-input-checkbox[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual[0m
  [32m  ✓[0m[90m binding-input-number[0m
  [32m  ✓[0m[90m binding-input-range[0m
  [32m  ✓[0m[90m binding-input-range-change[0m
  [32m  ✓[0m[90m binding-input-text[0m
  [32m  ✓[0m[90m binding-input-text-contextual[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted[0m
  [32m  ✓[0m[90m binding-input-text-deep[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic[0m
  [32m  ✓[0m[90m binding-input-with-event[0m
  [32m  ✓[0m[90m binding-select[0m
  [36m  - binding-select-in-each-block[0m
  [32m  ✓[0m[90m binding-select-in-yield[0m
  [32m  ✓[0m[90m binding-select-initial-value[0m
  [32m  ✓[0m[90m binding-select-late[0m
  [36m  - binding-select-multiple[0m
  [32m  ✓[0m[90m binding-textarea[0m
  [32m  ✓[0m[90m bindings-before-oncreate[0m
  [32m  ✓[0m[90m bindings-coalesced[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-binding-blowback[0m
  [32m  ✓[0m[90m component-binding-computed[0m
  [32m  ✓[0m[90m component-binding-deep[0m
  [36m  - component-binding-deep-b[0m
  [32m  ✓[0m[90m component-binding-each[0m
  [32m  ✓[0m[90m component-binding-each-nested[0m
  [32m  ✓[0m[90m component-binding-each-object[0m
  [32m  ✓[0m[90m component-binding-infinite-loop[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child[0m
  [32m  ✓[0m[90m component-data-dynamic[0m
  [32m  ✓[0m[90m component-data-dynamic-late[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand[0m
  [32m  ✓[0m[90m component-data-empty[0m
  [32m  ✓[0m[90m component-data-static[0m
  [32m  ✓[0m[90m component-data-static-boolean[0m
  [32m  ✓[0m[90m component-events[0m
  [32m  ✓[0m[90m component-events-data[0m
  [32m  ✓[0m[90m component-events-each[0m
  [32m  ✓[0m[90m component-if-placement[0m
  [32m  ✓[0m[90m component-nested-deep[0m
  [32m  ✓[0m[90m component-nested-deeper[0m
  [32m  ✓[0m[90m component-not-void[0m
  [32m  ✓[0m[90m component-ref[0m
  [32m  ✓[0m[90m component-slot-default[0m
  [32m  ✓[0m[90m component-slot-fallback[0m
  [32m  ✓[0m[90m component-slot-if-block[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node[0m
  [32m  ✓[0m[90m component-slot-named[0m
  [32m  ✓[0m[90m component-slot-nested[0m
  [32m  ✓[0m[90m component-slot-nested-component[0m
  [32m  ✓[0m[90m component-static-at-symbol[0m
  [32m  ✓[0m[90m component-yield[0m
  [32m  ✓[0m[90m component-yield-follows-element[0m
  [32m  ✓[0m[90m component-yield-if[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if[0m
  [32m  ✓[0m[90m component-yield-nested-if[0m
  [32m  ✓[0m[90m component-yield-parent[0m
  [32m  ✓[0m[90m component-yield-placement[0m
  [32m  ✓[0m[90m component-yield-static[0m
  [32m  ✓[0m[90m computed-empty[0m
  [32m  ✓[0m[90m computed-function[0m
  [32m  ✓[0m[90m computed-values[0m
  [32m  ✓[0m[90m computed-values-default[0m
  [32m  ✓[0m[90m computed-values-function-dependency[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-comments[0m
  [32m  ✓[0m[90m css-false[0m
  [32m  ✓[0m[90m css-space-in-attribute[0m
  [32m  ✓[0m[90m custom-method[0m
  [32m  ✓[0m[90m deconflict-builtins[0m
  [32m  ✓[0m[90m deconflict-contexts[0m
  [32m  ✓[0m[90m deconflict-non-helpers[0m
  [32m  ✓[0m[90m deconflict-self[0m
  [32m  ✓[0m[90m deconflict-template-1[0m
  [32m  ✓[0m[90m deconflict-template-2[0m
  [32m  ✓[0m[90m deconflict-vars[0m
  [32m  ✓[0m[90m default-data[0m
  [32m  ✓[0m[90m default-data-function[0m
  [32m  ✓[0m[90m default-data-override[0m
  [32m  ✓[0m[90m destroy-twice[0m
  [32m  ✓[0m[90m destructuring[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice[0m
  [32m  ✓[0m[90m dev-warning-helper[0m
  [32m  ✓[0m[90m dev-warning-missing-data[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if[0m
  [32m  ✓[0m[90m each-block-containing-if[0m
  [32m  ✓[0m[90m each-block-destructured-array[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static[0m
  [32m  ✓[0m[90m each-block-else[0m
  [32m  ✓[0m[90m each-block-else-starts-empty[0m
  [32m  ✓[0m[90m each-block-indexed[0m
  [32m  ✓[0m[90m each-block-keyed[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute[0m
  [32m  ✓[0m[90m each-block-keyed-unshift[0m
  [32m  ✓[0m[90m each-block-random-permute[0m
  [32m  ✓[0m[90m each-block-static[0m
  [32m  ✓[0m[90m each-block-text-node[0m
  [32m  ✓[0m[90m each-blocks-expression[0m
  [32m  ✓[0m[90m each-blocks-nested[0m
  [32m  ✓[0m[90m each-blocks-nested-b[0m
  [32m  ✓[0m[90m element-invalid-name[0m
  [32m  ✓[0m[90m empty-style-block[0m
  [32m  ✓[0m[90m escape-template-literals[0m
  [32m  ✓[0m[90m escaped-text[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m event-handler-console-log[0m
  [32m  ✓[0m[90m event-handler-custom[0m
  [32m  ✓[0m[90m event-handler-custom-context[0m
  [32m  ✓[0m[90m event-handler-custom-each[0m
  [32m  ✓[0m[90m event-handler-destroy[0m
  [32m  ✓[0m[90m event-handler-each[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted[0m
  [32m  ✓[0m[90m event-handler-event-methods[0m
  [32m  ✓[0m[90m event-handler-hoisted[0m
  [32m  ✓[0m[90m event-handler-removal[0m
  [32m  ✓[0m[90m event-handler-sanitize[0m
  [32m  ✓[0m[90m event-handler-shorthand[0m
  [32m  ✓[0m[90m event-handler-shorthand-component[0m
  [32m  ✓[0m[90m event-handler-this-methods[0m
  [32m  ✓[0m[90m events-custom[0m
  [32m  ✓[0m[90m events-lifecycle[0m
  [32m  ✓[0m[90m function-in-expression[0m
  [32m  ✓[0m[90m get-state[0m
  [32m  ✓[0m[90m globals-accessible-directly[0m
  [32m  ✓[0m[90m globals-not-dereferenced[0m
  [32m  ✓[0m[90m globals-shadowed-by-data[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers[0m
  [32m  ✓[0m[90m hello-world[0m
  [32m  ✓[0m[90m helpers[0m
  [32m  ✓[0m[90m helpers-not-call-expression[0m
  [32m  ✓[0m[90m html-entities[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-else[0m
  [32m  ✓[0m[90m if-block-elseif[0m
  [32m  ✓[0m[90m if-block-elseif-text[0m
  [32m  ✓[0m[90m if-block-expression[0m
  [32m  ✓[0m[90m if-block-or[0m
  [32m  ✓[0m[90m if-block-widget[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound[0m
  [32m  ✓[0m[90m ignore-unchanged-raw[0m
  [32m  ✓[0m[90m ignore-unchanged-tag[0m
  [32m  ✓[0m[90m imported-renamed-components[0m
  [32m  ✓[0m[90m inline-expressions[0m
  [32m  ✓[0m[90m input-list[0m
  [32m  ✓[0m[90m lifecycle-events[0m
  [32m  ✓[0m[90m names-deconflicted[0m
  [32m  ✓[0m[90m names-deconflicted-nested[0m
  [32m  ✓[0m[90m nbsp[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes[0m
  [32m  ✓[0m[90m observe-prevents-loop[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup[0m
  [32m  ✓[0m[90m paren-wrapped-expressions[0m
  [32m  ✓[0m[90m raw-anchor-first-child[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child[0m
  [32m  ✓[0m[90m raw-anchor-last-child[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m refs-unset[0m
  [32m  ✓[0m[90m select[0m
  [32m  ✓[0m[90m select-change-handler[0m
  [32m  ✓[0m[90m select-no-whitespace[0m
  [32m  ✓[0m[90m select-props[0m
  [32m  ✓[0m[90m self-reference[0m
  [32m  ✓[0m[90m self-reference-tree[0m
  [32m  ✓[0m[90m set-after-destroy[0m
  [32m  ✓[0m[90m set-clones-input[0m
  [36m  - set-in-observe-dedupes-renders[0m
  [32m  ✓[0m[90m set-mutated-data[0m
  [32m  ✓[0m[90m set-prevents-loop[0m
  [32m  ✓[0m[90m setup[0m
  [32m  ✓[0m[90m sigil-static-#[0m
  [32m  ✓[0m[90m sigil-static-@[0m
  [32m  ✓[0m[90m single-static-element[0m
  [32m  ✓[0m[90m single-text-node[0m
  [32m  ✓[0m[90m slot-in-custom-element[0m
  [32m  ✓[0m[90m state-deconflicted[0m
  [32m  ✓[0m[90m svg[0m
  [32m  ✓[0m[90m svg-attributes[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand[0m
  [32m  ✓[0m[90m svg-class[0m
  [32m  ✓[0m[90m svg-each-block-anchor[0m
  [32m  ✓[0m[90m svg-each-block-namespace[0m
  [32m  ✓[0m[90m svg-multiple[0m
  [32m  ✓[0m[90m svg-no-whitespace[0m
  [32m  ✓[0m[90m svg-xlink[0m
  [32m  ✓[0m[90m transition-css-delay[0m
  [32m  ✓[0m[90m transition-js-delay[0m
  [32m  ✓[0m[90m transition-js-delay-in-out[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi[0m
  [32m  ✓[0m[90m transition-js-each-block-intro[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-outro[0m
  [32m  ✓[0m[90m transition-js-events[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3[0m
  [32m  ✓[0m[90m transition-js-if-block-intro[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro[0m
  [32m  ✓[0m[90m transition-js-initial[0m
  [32m  ✓[0m[90m whitespace-each-block[0m
  [32m  ✓[0m[90m whitespace-normal[0m
  [36m  - window-bind-scroll-update[0m

[0m  sourcemaps[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m binding[0m
  [32m  ✓[0m[90m binding-shorthand[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-cascade-false[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m script[0m
  [32m  ✓[0m[90m static-no-script[0m

[0m  validate[0m
  [32m  ✓[0m[90m a11y-alt-text[0m
  [32m  ✓[0m[90m a11y-anchor-has-content[0m
  [32m  ✓[0m[90m a11y-anchor-is-valid[0m
  [32m  ✓[0m[90m a11y-aria-props[0m
  [32m  ✓[0m[90m a11y-aria-role[0m
  [32m  ✓[0m[90m a11y-aria-unsupported-element[0m
  [32m  ✓[0m[90m a11y-figcaption-wrong-place[0m
  [32m  ✓[0m[90m a11y-heading-has-content[0m
  [32m  ✓[0m[90m a11y-html-has-lang[0m
  [32m  ✓[0m[90m a11y-iframe-has-title[0m
  [32m  ✓[0m[90m a11y-no-access-key[0m
  [32m  ✓[0m[90m a11y-no-autofocus[0m
  [32m  ✓[0m[90m a11y-no-distracting-elements[0m
  [32m  ✓[0m[90m a11y-scope[0m
  [32m  ✓[0m[90m a11y-tabindex-no-positive[0m
  [32m  ✓[0m[90m binding-input-checked[0m
  [32m  ✓[0m[90m binding-input-static-type[0m
  [32m  ✓[0m[90m binding-invalid[0m
  [32m  ✓[0m[90m binding-invalid-on-element[0m
  [32m  ✓[0m[90m component-cannot-be-called-state[0m
  [36m  - component-slot-default-duplicate.skip[0m
  [32m  ✓[0m[90m component-slot-default-reserved[0m
  [32m  ✓[0m[90m component-slot-dynamic[0m
  [32m  ✓[0m[90m component-slot-dynamic-attribute[0m
  [32m  ✓[0m[90m component-slot-each-block[0m
  [36m  - component-slot-named-duplicate.skip[0m
  [32m  ✓[0m[90m component-slotted-each-block[0m
  [32m  ✓[0m[90m component-slotted-if-block[0m
  [32m  ✓[0m[90m css-invalid-global[0m
  [32m  ✓[0m[90m css-invalid-global-placement[0m
  [32m  ✓[0m[90m event-handler-ref[0m
  [32m  ✓[0m[90m event-handler-ref-invalid[0m
  [32m  ✓[0m[90m export-default-duplicated[0m
  [32m  ✓[0m[90m export-default-must-be-object[0m
  [32m  ✓[0m[90m helper-clash-context[0m
  [32m  ✓[0m[90m helper-purity-check-needs-arguments[0m
  [32m  ✓[0m[90m helper-purity-check-no-this[0m
  [32m  ✓[0m[90m helper-purity-check-this-get[0m
  [32m  ✓[0m[90m helper-purity-check-uses-arguments[0m
  [32m  ✓[0m[90m method-arrow-no-this[0m
  [32m  ✓[0m[90m method-arrow-this[0m
  [32m  ✓[0m[90m method-nonexistent[0m
  [32m  ✓[0m[90m method-nonexistent-helper[0m
  [32m  ✓[0m[90m missing-component[0m
  [32m  ✓[0m[90m named-export[0m
  [32m  ✓[0m[90m namespace-invalid[0m
  [32m  ✓[0m[90m oncreate-arrow-no-this[0m
  [32m  ✓[0m[90m oncreate-arrow-this[0m
  [32m  ✓[0m[90m ondestroy-arrow-no-this[0m
  [32m  ✓[0m[90m ondestroy-arrow-this[0m
  [32m  ✓[0m[90m properties-components-should-be-capitalised[0m
  [32m  ✓[0m[90m properties-computed-must-be-an-object[0m
  [32m  ✓[0m[90m properties-computed-must-be-functions[0m
  [32m  ✓[0m[90m properties-computed-no-destructuring[0m
  [32m  ✓[0m[90m properties-computed-values-needs-arguments[0m
  [32m  ✓[0m[90m properties-data-must-be-function[0m
  [32m  ✓[0m[90m properties-duplicated[0m
  [32m  ✓[0m[90m properties-methods-getters-setters[0m
  [32m  ✓[0m[90m properties-unexpected[0m
  [32m  ✓[0m[90m properties-unexpected-b[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace[0m
  [32m  ✓[0m[90m svg-child-component-undeclared-namespace[0m
  [32m  ✓[0m[90m textarea-value-children[0m
  [32m  ✓[0m[90m transition-duplicate-in[0m
  [32m  ✓[0m[90m transition-duplicate-in-transition[0m
  [32m  ✓[0m[90m transition-duplicate-out[0m
  [32m  ✓[0m[90m transition-duplicate-out-transition[0m
  [32m  ✓[0m[90m transition-duplicate-transition[0m
  [32m  ✓[0m[90m transition-duplicate-transition-in[0m
  [32m  ✓[0m[90m transition-duplicate-transition-out[0m
  [32m  ✓[0m[90m transition-missing[0m
  [32m  ✓[0m[90m transition-on-component[0m
  [32m  ✓[0m[90m window-binding-invalid[0m
  [32m  ✓[0m[90m window-binding-invalid-innerwidth[0m
  [32m  ✓[0m[90m window-binding-invalid-value[0m
  [32m  ✓[0m[90m window-binding-invalid-width[0m
  [32m  ✓[0m[90m window-event-invalid[0m
  [32m  ✓[0m[90m errors if options.name is illegal[0m
  [32m  ✓[0m[90m warns if options.name is not capitalised[0m


[92m [0m[32m 1318 passing[0m[90m (1m)[0m
[36m [0m[36m 36 pending[0m
[31m  9 failing[0m

[0m  1) css throws TypeError for presence selector when attribute has a value:
[0m[31m     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Missing expected exception: should throw the specific TypeError described in the issue[0m[90m
      at Context.<anonymous> (test/css-errors/index.js:13:10)
      at processImmediate (node:internal/timers:466:21)
[0m
[0m  2) custom-elements escaped-css:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  3) custom-elements html:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  4) custom-elements html-slots:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  5) custom-elements new:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  6) custom-elements new-styled:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  7) runtime binding-select (shared helpers):
[0m[31m     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Expected values to be loosely deep-equal:

[
  <ref *8> HTMLOptionElement {
    [Symbol(SameObject caches)]: [Object: null prototype] {
      attributes: <ref *33> NamedNodeMap {
        [Symbol(NamedNodeMap internal)]: {
          attributeList: [],
          attributesByNameMap: Map(0) {},
          element: <ref *12> HTMLOptionElementImpl {
            [Symbol(DOM SymbolTree)]: [SymbolTreeNode],
            [Symbol(wrapper)]: [Circular *8],
            _attached: true,
            _attributes: [Circular *33],
            _childNodesList: [Node...

should loosely deep-equal

<ref *30> HTMLCollection {
  '0': <ref *8> HTMLOptionElement {
    [Symbol(SameObject caches)]: [Object: null prototype] {
      attributes: <ref *34> NamedNodeMap {
        [Symbol(NamedNodeMap internal)]: {
          attributeList: [],
          attributesByNameMap: Map(0) {},
          element: <ref *12> HTMLOptionElementImpl {
            [Symbol(DOM SymbolTree)]: [SymbolTreeNode],
            [Symbol(wrapper)]: [Circular *8],
            _attached: true,
            _attributes: [Circular *34],
    ...[0m[90m
      at Object.test (test/runtime/samples/binding-select/_config.js:22:10)
      at Context.<anonymous> (test/runtime/index.js:181:13)
      at processImmediate (node:internal/timers:466:21)
[0m
[0m  8) runtime binding-select (shared helpers):
[0m[31m     Error: skipping test, already failed[0m[90m
      at Context.<anonymous> (test/runtime/index.js:57:11)
      at processImmediate (node:internal/timers:466:21)
[0m
[0m  9) runtime binding-select (inline helpers):
[0m[31m     Error: skipping test, already failed[0m[90m
      at Context.<anonymous> (test/runtime/index.js:57:11)
      at processImmediate (node:internal/timers:466:21)
[0m


[?2004l
2025-11-11 00:10:49,433 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_MO5dnI6mdePm01FppI0WMnnc', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 49980, 'total_tokens': 50070, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--4d62b5b0-886d-4b84-a98f-5b58d483bd6f-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_MO5dnI6mdePm01FppI0WMnnc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 49980, 'output_tokens': 90, 'total_tokens': 50070, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:10:49,437 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:10:49,538 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:10:49,538 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:10:59,337 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_tGLz3VnDxZZpTBI3dTxTPRdr', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 419, 'prompt_tokens': 50023, 'total_tokens': 50442, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--68c4d981-d2b9-4cea-bb7a-d772a54c5079-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/test.js"}, 'id': 'call_tGLz3VnDxZZpTBI3dTxTPRdr', 'type': 'tool_call'}] usage_metadata={'input_tokens': 50023, 'output_tokens': 419, 'total_tokens': 50442, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:10:59,341 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/test.js
2025-11-11 00:10:59,443 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:10:59,443 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-11 00:11:07,897 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_4QSGxH7QDk5HbEBAGp4ICRjE', 'function': {'arguments': '{"command":"sed -n \'1,200p\' mocha.coverage.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 484, 'prompt_tokens': 50143, 'total_tokens': 50627, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5371ca5a-9c4d-4a56-a8e6-ff6ebb509b6f-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' mocha.coverage.opts"}, 'id': 'call_4QSGxH7QDk5HbEBAGp4ICRjE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 50143, 'output_tokens': 484, 'total_tokens': 50627, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:11:07,901 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' mocha.coverage.opts
2025-11-11 00:11:08,003 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:11:08,003 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
--require babel-register
--recursive
./**/__test__.js
test/*/index.js
[?2004l
2025-11-11 00:11:17,941 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_IJMeRKtmSpRkQyiZetxy6g44', 'function': {'arguments': '{"command":"npx mocha test/css-errors/index.js -R spec --no-timeouts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 806, 'prompt_tokens': 50217, 'total_tokens': 51023, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 50048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--91c4bbc6-43d8-41a9-b0eb-4963a782f869-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha test/css-errors/index.js -R spec --no-timeouts'}, 'id': 'call_IJMeRKtmSpRkQyiZetxy6g44', 'type': 'tool_call'}] usage_metadata={'input_tokens': 50217, 'output_tokens': 806, 'total_tokens': 51023, 'input_token_details': {'audio': 0, 'cache_read': 50048}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:11:17,946 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha test/css-errors/index.js -R spec --no-timeouts
2025-11-11 00:11:18,555 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:11:18,555 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npx mocha test/css-errors/index.js -R spec --no-timeo
outs
[?2004l
/testbed/test/css-errors/index.js:1
import assert from 'assert';
^^^^^^

SyntaxError: Cannot use import statement outside a module
[90m    at Object.compileFunction (node:vm:360:18)[39m
[90m    at wrapSafe (node:internal/modules/cjs/loader:1126:15)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1162:27)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Module.require (node:internal/modules/cjs/loader:1100:19)[39m
[90m    at require (node:internal/modules/cjs/helpers:119:18)[39m
    at [90m/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:230:27
    at Array.forEach (<anonymous>)
    at Mocha.loadFiles [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:227:14[90m)[39m
    at Mocha.run [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:513:10[90m)[39m
    at Object.<anonymous> [90m(/testbed/[39mnode_modules/[4mmocha[24m/bin/_mocha:480:18[90m)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1198:14)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:22:47[39m
[?2004l
2025-11-11 00:11:25,585 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LEYXzdRmIfx9UioLj9z2vXRM', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/setup.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 547, 'prompt_tokens': 50907, 'total_tokens': 51454, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 49920}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--05665588-8685-4112-86cd-6af73614de3c-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/setup.js"}, 'id': 'call_LEYXzdRmIfx9UioLj9z2vXRM', 'type': 'tool_call'}] usage_metadata={'input_tokens': 50907, 'output_tokens': 547, 'total_tokens': 51454, 'input_token_details': {'audio': 0, 'cache_read': 49920}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-11-11 00:11:25,589 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/setup.js
2025-11-11 00:11:25,691 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:11:25,691 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const fs = require('fs');
const path = require('path');

require('console-group').install();
require('source-map-support').install();

require.extensions['.js'] = function(module, filename) {
	const exports = [];

	var code = fs.readFileSync(filename, 'utf-8')
		.replace(/^import (?:\* as )?(\w+) from ['"]([^'"]+)['"];?/gm, 'var $1 = require("$2");')
		.replace(/^import {([^}]+)} from ['"](.+)['"];?/gm, 'var {$1} = require("$2");')
		.replace(/^export default /gm, 'module.exports = ')
		.replace(/^export (const|let|var|class|function) (\w+)/gm, (match, type, name) => {
			exports.push(name);
			return `${type} ${name}`;
		})
		.replace(/^export \{([^}]+)\}/gm, (match, names) => {
			names.split(',').filter(Boolean).forEach(name => {
				exports.push(name);
			});

			return '';
		})
		.replace(/^export function (\w+)/gm, 'exports.$1 = function $1');

	exports.forEach(name => {
		code += `\nexports.${name} = ${name};`;
	});

	try {
		return module._compile(code, filename);
	} catch (err) {
		console.log(code); // eslint-disable-line no-console
		throw err;
	}
[?2004l
2025-11-11 00:11:45,307 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_TchhPvvPn5jcF4iuRqa3RvXq', 'function': {'arguments': '{"command":"npx mocha --require test/setup.js test/css-errors/index.js -R spec"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1319, 'prompt_tokens': 51277, 'total_tokens': 52596, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--aa4eaba9-665d-4036-b121-fdeeb7ccbe73-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --require test/setup.js test/css-errors/index.js -R spec'}, 'id': 'call_TchhPvvPn5jcF4iuRqa3RvXq', 'type': 'tool_call'}] usage_metadata={'input_tokens': 51277, 'output_tokens': 1319, 'total_tokens': 52596, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-11 00:11:45,310 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --require test/setup.js test/css-errors/index.js -R spec
2025-11-11 00:11:46,306 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:11:46,306 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npx mocha --require test/setup.js test/css-errors/ind
dex.js -R spec
[?2004l

[0m[0m
[0m  css[0m
  [31m  1) throws TypeError for presence selector when attribute has a value[0m


[92m [0m[32m 0 passing[0m[90m (37ms)[0m
[31m  1 failing[0m

[0m  1) css throws TypeError for presence selector when attribute has a value:
[0m[31m     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Missing expected exception: should throw the specific TypeError described in the issue[0m[90m
      at Context.<anonymous> (test/css-errors/index.js:13:10)
      at processImmediate (node:internal/timers:466:21)
[0m


[?2004l
2025-11-11 00:11:56,655 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content=' npx mocha --require test/setup.js test/css-errors/ind\ndex.js -R spec\n\x1b[?2004l\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[31m  1) throws TypeError for presence selector when attribute has a value\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 0 passing\x1b[0m\x1b[90m (37ms)\x1b[0m\n\x1b[31m  1 failing\x1b[0m\n\n\x1b[0m  1) css throws TypeError for presence selector when attribute has a value:\n\x1b[0m\x1b[31m     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Missing expected exception: should throw the specific TypeError described in the issue\x1b[0m\x1b[90m\n      at Context.<anonymous> (test/css-errors/index.js:13:10)\n      at processImmediate (node:internal/timers:466:21)\n\x1b[0m\n\n\n\x1b[?2004l' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1069, 'prompt_tokens': 51547, 'total_tokens': 52616, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 832, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--eff6ffbb-7191-49dd-a540-c7ddadd1f43a-0' usage_metadata={'input_tokens': 51547, 'output_tokens': 1069, 'total_tokens': 52616, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 832}}
2025-11-11 00:12:27,543 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_structured_node - DEBUG - reproduced_bug=False reproduced_bug_failure_log='Running: npx mocha --require test/setup.js test/css-errors/index.js -R spec\n\n  css\n    1) throws TypeError for presence selector when attribute has a value\n\n\n  0 passing (37ms)\n  1 failing\n\n  1) css throws TypeError for presence selector when attribute has a value:\n     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Missing expected exception: should throw the specific TypeError described in the issue\n      at Context.<anonymous> (test/css-errors/index.js:13:10)\n      at processImmediate (node:internal/timers:466:21)\n\nTest fails with an AssertionError indicating that no exception was thrown. The issue reports a TypeError: "operators[operator] is not a function" during compile when using a presence selector [foo] on an element where the attribute has a value (foo="bar"). Because the test failure is "Missing expected exception" rather than the reported TypeError, the bug was not reproduced as described. The input example in the test matches the issue example, but the underlying behavior differs (no error thrown).' reproduced_bug_commands=['npx mocha --require test/setup.js test/css-errors/index.js -R spec']
2025-11-11 00:12:27,545 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_file_messages in state.
2025-11-11 00:12:27,546 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting bug_reproducing_execute_messages in state.
2025-11-11 00:12:27,548 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:12:27,578 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_message_node - DEBUG - Sending message to BugReproducingWriteNode:
content='Your previous test case failed to reproduce the bug. Here is the failure log:\nRunning: npx mocha --require test/setup.js test/css-errors/index.js -R spec\n\n  css\n    1) throws TypeError for presence selector when attribute has a value\n\n\n  0 passing (37ms)\n  1 failing\n\n  1) css throws TypeError for presence selector when attribute has a value:\n     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Missing expected exception: should throw the specific TypeError described in the issue\n      at Context.<anonymous> (test/css-errors/index.js:13:10)\n      at processImmediate (node:internal/timers:466:21)\n\nTest fails with an AssertionError indicating that no exception was thrown. The issue reports a TypeError: "operators[operator] is not a function" during compile when using a presence selector [foo] on an element where the attribute has a value (foo="bar"). Because the test failure is "Missing expected exception" rather than the reported TypeError, the bug was not reproduced as described. The input example in the test matches the issue example, but the underlying behavior differs (no error thrown).\n\nNow think about what went wrong and generate the complete self-contained test case that reproduces the bug with the same error/exception again.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:13:08,000 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_write_node - DEBUG - content='import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'throws TypeError "operators[operator] is not a function" for presence selector on valued attribute\', () => {\n\t\t// Issue reproduction: presence selector [foo] applied to element with foo="bar"\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.throws(\n\t\t\t() => {\n\t\t\t\t// Try both DOM and SSR to trigger the selector application path\n\t\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\n\t\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\', generate: \'ssr\' });\n\t\t\t},\n\t\t\terr => err instanceof TypeError && /operators\\[operator\\] is not a function/.test(err.message)\n\t\t);\n\t});\n})' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 4182, 'prompt_tokens': 7867, 'total_tokens': 12049, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 3968, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--419d7371-f1a3-49ac-b4c2-02b20ef4b057-0' usage_metadata={'input_tokens': 7867, 'output_tokens': 4182, 'total_tokens': 12049, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 3968}}
2025-11-11 00:13:14,552 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_rsjRuA2ZHQ78kfNbz0vvQs7S', 'function': {'arguments': '{"relative_path":"test/css/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 220, 'prompt_tokens': 22679, 'total_tokens': 22899, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b445bba1-58d4-4894-907f-45716a296254-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/css/index.js'}, 'id': 'call_rsjRuA2ZHQ78kfNbz0vvQs7S', 'type': 'tool_call'}] usage_metadata={'input_tokens': 22679, 'output_tokens': 220, 'total_tokens': 22899, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:13:19,066 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_bwEuWHuoLUc8VcrXuHchimPb', 'function': {'arguments': '{"relative_path":"test/test.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 91, 'prompt_tokens': 24046, 'total_tokens': 24137, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b0deee09-5c8c-48be-9f31-93db9fff7a61-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/test.js'}, 'id': 'call_bwEuWHuoLUc8VcrXuHchimPb', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24046, 'output_tokens': 91, 'total_tokens': 24137, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:13:28,380 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_3fejmzFw24Z4YrXRurxvPlFR', 'function': {'arguments': '{"relative_path":"test/formats/index.js"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 669, 'prompt_tokens': 24172, 'total_tokens': 24841, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6937bdfa-b681-430b-b299-0b82c23486da-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'test/formats/index.js'}, 'id': 'call_3fejmzFw24Z4YrXRurxvPlFR', 'type': 'tool_call'}] usage_metadata={'input_tokens': 24172, 'output_tokens': 669, 'total_tokens': 24841, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-11-11 00:13:42,380 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_lkQTkM8SpOqJ8CQM5hoLrhrg', 'function': {'arguments': '{"relative_path":"test/regressions/index.js","content":"import assert from \'assert\';\\nimport { svelte } from \'../helpers.js\';\\n\\ndescribe(\'css\', () => {\\n\\tit(\'throws TypeError \\"operators[operator] is not a function\\" for presence selector on valued attribute\', () => {\\n\\t\\t// Issue reproduction: presence selector [foo] applied to element with foo=\\"bar\\"\\n\\t\\tconst input = `\\n\\t\\t\\t<button foo=\\"bar\\"></button>\\n\\t\\t\\t<style>\\n\\t\\t\\t\\tbutton[foo] {}\\n\\t\\t\\t</style>\\n\\t\\t`;\\n\\n\\t\\tassert.throws(\\n\\t\\t\\t() => {\\n\\t\\t\\t\\t// Try both DOM and SSR to trigger the selector application path\\n\\t\\t\\t\\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\\n\\t\\t\\t\\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\', generate: \'ssr\' });\\n\\t\\t\\t},\\n\\t\\t\\terr => err instanceof TypeError && /operators\\\\[operator\\\\] is not a function/.test(err.message)\\n\\t\\t);\\n\\t});\\n})\\n"}', 'name': 'create_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1572, 'prompt_tokens': 25959, 'total_tokens': 27531, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--528214df-aa6f-40ff-bce4-b41ed2e7503d-0' tool_calls=[{'name': 'create_file', 'args': {'relative_path': 'test/regressions/index.js', 'content': 'import assert from \'assert\';\nimport { svelte } from \'../helpers.js\';\n\ndescribe(\'css\', () => {\n\tit(\'throws TypeError "operators[operator] is not a function" for presence selector on valued attribute\', () => {\n\t\t// Issue reproduction: presence selector [foo] applied to element with foo="bar"\n\t\tconst input = `\n\t\t\t<button foo="bar"></button>\n\t\t\t<style>\n\t\t\t\tbutton[foo] {}\n\t\t\t</style>\n\t\t`;\n\n\t\tassert.throws(\n\t\t\t() => {\n\t\t\t\t// Try both DOM and SSR to trigger the selector application path\n\t\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\' });\n\t\t\t\tsvelte.compile(input, { format: \'iife\', name: \'SvelteComponent\', generate: \'ssr\' });\n\t\t\t},\n\t\t\terr => err instanceof TypeError && /operators\\[operator\\] is not a function/.test(err.message)\n\t\t);\n\t});\n})\n'}, 'id': 'call_lkQTkM8SpOqJ8CQM5hoLrhrg', 'type': 'tool_call'}] usage_metadata={'input_tokens': 25959, 'output_tokens': 1572, 'total_tokens': 27531, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-11 00:13:45,013 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_file_node - DEBUG - content='test/regressions/index.js' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 10, 'prompt_tokens': 26267, 'total_tokens': 26277, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--adfab9c0-d13b-43d9-81b5-416dd0f0200b-0' usage_metadata={'input_tokens': 26267, 'output_tokens': 10, 'total_tokens': 26277, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:13:45,049 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/test/regressions/index.js b/test/regressions/index.js
new file mode 100644
index 000000000..ee5bc14e5
--- /dev/null
+++ b/test/regressions/index.js
@@ -0,0 +1,23 @@
+import assert from 'assert';
+import { svelte } from '../helpers.js';
+
+describe('css', () => {
+	it('throws TypeError "operators[operator] is not a function" for presence selector on valued attribute', () => {
+		// Issue reproduction: presence selector [foo] applied to element with foo="bar"
+		const input = `
+			<button foo="bar"></button>
+			<style>
+				button[foo] {}
+			</style>
+		`;
+
+		assert.throws(
+			() => {
+				// Try both DOM and SSR to trigger the selector application path
+				svelte.compile(input, { format: 'iife', name: 'SvelteComponent' });
+				svelte.compile(input, { format: 'iife', name: 'SvelteComponent', generate: 'ssr' });
+			},
+			err => err instanceof TypeError && /operators\[operator\] is not a function/.test(err.message)
+		);
+	});
+})

2025-11-11 00:13:45,052 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:13:45,081 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:13:45,082 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:13:45,183 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:45,183 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:13:45,183 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:13:45,285 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:45,285 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
Removing test/css-errors/
[?2004l
2025-11-11 00:13:45,285 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:13:45,286 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory test/regressions in the container
2025-11-11 00:13:45,286 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p test/regressions
2025-11-11 00:13:45,387 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:45,387 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:13:45,388 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating test/regressions/index.js in the container
2025-11-11 00:13:45,394 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:13:48,297 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_U6mQZwAlEmtG2ldEdiQC4y4Q', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 578, 'total_tokens': 732, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--4b1913d3-baab-49ab-ab54-486f9053be49-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_U6mQZwAlEmtG2ldEdiQC4y4Q', 'type': 'tool_call'}] usage_metadata={'input_tokens': 578, 'output_tokens': 154, 'total_tokens': 732, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:13:48,301 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:13:48,403 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:48,403 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:04 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:13 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:13 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:01 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 471421 Nov 11 00:01 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:04 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 10 23:54 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:13 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:04 yarn.lock
[?2004l
2025-11-11 00:13:50,437 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_oKExJyprTbZ1c3rdkdNgAozl', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 1401, 'total_tokens': 1491, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--10d9c613-5c7e-4707-b344-c648dae4d736-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_oKExJyprTbZ1c3rdkdNgAozl', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1401, 'output_tokens': 90, 'total_tokens': 1491, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:13:50,441 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:13:50,543 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:50,543 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:13:54,376 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_qSwbMqgVXcSlC9zYr2HeOXk5', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 218, 'prompt_tokens': 2256, 'total_tokens': 2474, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--98e0d8c4-76a1-407b-b216-91deb38dbf8c-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_qSwbMqgVXcSlC9zYr2HeOXk5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2256, 'output_tokens': 218, 'total_tokens': 2474, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:13:54,380 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:13:54,482 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:54,482 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:13:56,964 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hbh8cOP5RHxcARqxQH5iAodJ', 'function': {'arguments': '{"command":"cat mocha.coverage.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 156, 'prompt_tokens': 2299, 'total_tokens': 2455, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d9f0e817-418a-4bea-babb-9ed44b47048d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.coverage.opts'}, 'id': 'call_hbh8cOP5RHxcARqxQH5iAodJ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2299, 'output_tokens': 156, 'total_tokens': 2455, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:13:56,968 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.coverage.opts
2025-11-11 00:13:57,070 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:13:57,070 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
--require babel-register
--recursive
./**/__test__.js
test/*/index.js
[?2004l
2025-11-11 00:14:00,531 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_aHSxrqD88fuiJvzukkbBx18H', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/regressions/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 230, 'prompt_tokens': 2365, 'total_tokens': 2595, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--abf6e91e-8a3d-42b4-8400-2c3296e0b83f-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/regressions/index.js"}, 'id': 'call_aHSxrqD88fuiJvzukkbBx18H', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2365, 'output_tokens': 230, 'total_tokens': 2595, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:14:00,535 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/regressions/index.js
2025-11-11 00:14:00,636 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:00,636 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import { svelte } from '../helpers.js';

describe('css', () => {
	it('throws TypeError "operators[operator] is not a function" for presence selector on valued attribute', () => {
		// Issue reproduction: presence selector [foo] applied to element with foo="bar"
		const input = `
			<button foo="bar"></button>
			<style>
				button[foo] {}
			</style>
		`;

		assert.throws(
			() => {
				// Try both DOM and SSR to trigger the selector application path
				svelte.compile(input, { format: 'iife', name: 'SvelteComponent' });
				svelte.compile(input, { format: 'iife', name: 'SvelteComponent', generate: 'ssr' });
			},
			err => err instanceof TypeError && /operators\[operator\] is not a function/.test(err.message)
		);
	});
})
[?2004l
2025-11-11 00:14:03,253 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_PWAyKEEHXk3I2a65ohrmgokW', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 163, 'prompt_tokens': 2624, 'total_tokens': 2787, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2304}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6e6a2aca-6b05-420b-8668-49fd722876f1-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_PWAyKEEHXk3I2a65ohrmgokW', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2624, 'output_tokens': 163, 'total_tokens': 2787, 'input_token_details': {'audio': 0, 'cache_read': 2304}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:14:03,256 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-11 00:14:03,358 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:03,358 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-11 00:14:04,333 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_8nYdKP4hOUQI3jZ47AiL5rAH', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 3921, 'total_tokens': 3950, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c0f621bb-f1f9-4443-ade1-7873de25e3ad-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/helpers.js"}, 'id': 'call_8nYdKP4hOUQI3jZ47AiL5rAH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3921, 'output_tokens': 29, 'total_tokens': 3950, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:14:04,336 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/helpers.js
2025-11-11 00:14:04,437 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:04,437 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:14:08,673 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_5XTSeWSYHIg19YLxT1SbJ1ve', 'function': {'arguments': '{"command":"ls -la compiler"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 219, 'prompt_tokens': 4240, 'total_tokens': 4459, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f90dc012-a07d-4f24-be99-54c661a7aa11-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la compiler'}, 'id': 'call_5XTSeWSYHIg19YLxT1SbJ1ve', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4240, 'output_tokens': 219, 'total_tokens': 4459, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:14:08,677 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la compiler
2025-11-11 00:14:08,779 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:08,779 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 1956
drwxr-xr-x 2 root root    4096 Nov 10 23:54 [0m[01;34m.[0m
drwxr-xr-x 1 root root    4096 Nov 11 00:04 [01;34m..[0m
-rw-r--r-- 1 root root  687379 Nov 10 23:54 svelte.js
-rw-r--r-- 1 root root 1300784 Nov 10 23:54 svelte.js.map
[?2004l
2025-11-11 00:14:13,125 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_1I1GNFAKOtlBQgHUIGxHjUGr', 'function': {'arguments': '{"command":"ls -la test"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 283, 'prompt_tokens': 4412, 'total_tokens': 4695, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6e506f6e-792c-4fab-ac51-1a89648cf8ea-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test'}, 'id': 'call_1I1GNFAKOtlBQgHUIGxHjUGr', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4412, 'output_tokens': 283, 'total_tokens': 4695, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:14:13,135 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test
2025-11-11 00:14:13,249 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:13,249 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 116
drwxrwxr-x 1 root root 4096 Nov 11 00:13 [0m[01;34m.[0m
drwxr-xr-x 1 root root 4096 Nov 11 00:04 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcreate[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcss[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcustom-elements[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mformats[0m
-rw-r--r-- 1 root root 5474 Nov 10 23:59 helpers.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mhydration[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mjs[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mparser[0m
drwxr-xr-x 2 root root 4096 Nov 11 00:13 [01;34mregressions[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mruntime[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mserver-side-rendering[0m
-rw-r--r-- 1 root root 1077 Nov 10 23:59 setup.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34msourcemaps[0m
-rw-r--r-- 1 root root  247 Nov 10 23:59 test.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mvalidator[0m
[?2004l
2025-11-11 00:14:16,475 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Gt3io3GI1PtC4GtGSVCzuSl7', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 163, 'prompt_tokens': 5003, 'total_tokens': 5166, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ecde5cd3-b068-4ce7-9af6-44991d602a7f-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/test.js"}, 'id': 'call_Gt3io3GI1PtC4GtGSVCzuSl7', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5003, 'output_tokens': 163, 'total_tokens': 5166, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:14:16,478 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/test.js
2025-11-11 00:14:16,579 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:16,579 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-11 00:14:21,361 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_bZmMlAq0gxDrKODxLoT2rJY6', 'function': {'arguments': '{"command":"npx mocha test/regressions/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 416, 'prompt_tokens': 5123, 'total_tokens': 5539, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b908dc72-8845-4ce0-aa78-1d7b7eb6b6f5-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha test/regressions/index.js'}, 'id': 'call_bZmMlAq0gxDrKODxLoT2rJY6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5123, 'output_tokens': 416, 'total_tokens': 5539, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:14:21,365 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha test/regressions/index.js
2025-11-11 00:14:21,944 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:14:21,944 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
/testbed/test/regressions/index.js:1
import assert from 'assert';
^^^^^^

SyntaxError: Cannot use import statement outside a module
[90m    at Object.compileFunction (node:vm:360:18)[39m
[90m    at wrapSafe (node:internal/modules/cjs/loader:1126:15)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1162:27)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Module.require (node:internal/modules/cjs/loader:1100:19)[39m
[90m    at require (node:internal/modules/cjs/helpers:119:18)[39m
    at [90m/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:230:27
    at Array.forEach (<anonymous>)
    at Mocha.loadFiles [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:227:14[90m)[39m
    at Mocha.run [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:513:10[90m)[39m
    at Object.<anonymous> [90m(/testbed/[39mnode_modules/[4mmocha[24m/bin/_mocha:480:18[90m)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1198:14)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:22:47[39m
[?2004l
2025-11-11 00:14:34,113 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2YQk9RE7IYYrpmTzsf729OFP', 'function': {'arguments': '{"command":"npm i esm --no-audit --no-fund --silent"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1316, 'prompt_tokens': 5790, 'total_tokens': 7106, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--700d3e93-d06e-4341-80ba-02574b8f643b-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm i esm --no-audit --no-fund --silent'}, 'id': 'call_2YQk9RE7IYYrpmTzsf729OFP', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5790, 'output_tokens': 1316, 'total_tokens': 7106, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-11 00:14:34,117 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm i esm --no-audit --no-fund --silent
2025-11-11 00:14:35,611 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:14:35,611 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?25l[[100;90m..................[0m] | idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] / idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] / idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] / idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] / idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[107;97m#########[0m[100;90m.........[0m] / idealTree: [32;40mtiming[0m [35midealTree[0m Completed in 711ms[0m[K
[[107;97m#########[0m[100;90m.........[0m] / idealTree: [32;40mtiming[0m [35midealTree[0m Completed in 711ms[0m[K
[[107;97m##################[0m] / reify:fsevents: [7msill[0m [35mreify[0m mark deleted [ '/testbed/node[0m[K
[[107;97m##################[0m] - reify:fsevents: [7msill[0m [35mreify[0m mark deleted [ '/testbed/node[0m[K

[?2004l
2025-11-11 00:14:37,701 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_9eRoMGLNzRQ9dxyOXVk7CbS6', 'function': {'arguments': '{"command":"node -e \\"require(\'esm\')(module); require(\'./node_modules/mocha/bin/_mocha\');\\" test/regressions/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 45, 'prompt_tokens': 6347, 'total_tokens': 6392, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d9c40e8c-d354-4fd0-a282-c0845b15cff7-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'node -e "require(\'esm\')(module); require(\'./node_modules/mocha/bin/_mocha\');" test/regressions/index.js'}, 'id': 'call_9eRoMGLNzRQ9dxyOXVk7CbS6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6347, 'output_tokens': 45, 'total_tokens': 6392, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:14:37,705 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: node -e "require('esm')(module); require('./node_modules/mocha/bin/_mocha');" test/regressions/index.js
2025-11-11 00:14:37,859 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:14:37,859 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 node -e "require('esm')(module); require('./node_modu
ules/mocha/bin/_mocha');" test/regressions/index.js
[?2004l
/testbed/node_modules/mocha/bin/_mocha:1
(function (exports, require, module, __filename, __dirname) { #!/usr/bin/env node

SyntaxError: Invalid or unexpected token
[90m    at new Script (node:vm:100:7)[39m
[90m    at createScript (node:vm:265:10)[39m
[90m    at Object.runInThisContext (node:vm:313:10)[39m
[90m    at wrapSafe (node:internal/modules/cjs/loader:1114:15)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1162:27)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Module.require (node:internal/modules/cjs/loader:1100:19)[39m
[90m    at require (node:internal/modules/cjs/helpers:119:18)[39m
[?2004l
2025-11-11 00:14:46,219 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ROUEMXtTcbPVkuSgrhMYsrQK', 'function': {'arguments': '{"command":"npx mocha --require esm test/regressions/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 675, 'prompt_tokens': 6758, 'total_tokens': 7433, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4992}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ff7055d5-9ebd-4ddb-a725-5bf2c169ad1d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --require esm test/regressions/index.js'}, 'id': 'call_ROUEMXtTcbPVkuSgrhMYsrQK', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6758, 'output_tokens': 675, 'total_tokens': 7433, 'input_token_details': {'audio': 0, 'cache_read': 4992}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-11-11 00:14:46,223 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --require esm test/regressions/index.js
2025-11-11 00:14:47,717 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:14:47,717 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

[0m[0m
[0m  css[0m
  [31m  1) throws TypeError "operators[operator] is not a function" for presence selector on valued attribute[0m


[92m [0m[32m 0 passing[0m[90m (50ms)[0m
[31m  1 failing[0m

[0m  1) css throws TypeError "operators[operator] is not a function" for presence selector on valued attribute:
[0m[31m     AssertionError [ERR_ASSERTION]: Missing expected exception.[0m[90m
      at Context.<anonymous> (test/regressions/index.js:14:10)
      at processImmediate (node:internal/timers:466:21)
[0m


[?2004l
2025-11-11 00:14:56,336 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproducing_execute_node - DEBUG - content='\x1b[?2004l\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[31m  1) throws TypeError "operators[operator] is not a function" for presence selector on valued attribute\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 0 passing\x1b[0m\x1b[90m (50ms)\x1b[0m\n\x1b[31m  1 failing\x1b[0m\n\n\x1b[0m  1) css throws TypeError "operators[operator] is not a function" for presence selector on valued attribute:\n\x1b[0m\x1b[31m     AssertionError [ERR_ASSERTION]: Missing expected exception.\x1b[0m\x1b[90m\n      at Context.<anonymous> (test/regressions/index.js:14:10)\n      at processImmediate (node:internal/timers:466:21)\n\x1b[0m\n\n\n\x1b[?2004l' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 859, 'prompt_tokens': 7006, 'total_tokens': 7865, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--d83b2f98-c8f4-49e0-8ed2-592593744e09-0' usage_metadata={'input_tokens': 7006, 'output_tokens': 859, 'total_tokens': 7865, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-11-11 00:14:56,338 - thread-133013312636608.prometheus.lang_graph.nodes.bug_reproduction_subgraph_node - INFO - Recursion limit reached, returning reproduced_bug=False
2025-11-11 00:14:56,371 - thread-133013312636608.prometheus.lang_graph.nodes.issue_not_verified_bug_subgraph_node - INFO - Enter IssueNotVerifiedBugSubgraphNode
2025-11-11 00:14:56,374 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_context_message_node - DEBUG - Sending query to context provider:
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

2025-11-11 00:14:56,375 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Enter context retrieval subgraph
2025-11-11 00:14:56,378 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

--- END ORIGINAL QUERY ---



All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-11 00:15:13,288 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The file tree is available but no source content. The stack trace pinpoints Selector.ts (attributeMatches, applySelector), Stylesheet.ts (Rule.apply, Stylesheet.apply), and generators/dom/preprocess.ts (Element visitor) as the key components. To understand and fix the attribute selector bug, I need the actual implementations and any operator mapping logic used during attribute matching, plus how stylesheets and selectors are constructed and applied during DOM preprocessing.' query='Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.' extra_requirements='If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.' purpose='This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.'
2025-11-11 00:15:13,289 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
2025-11-11 00:15:13,684 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: []
2025-11-11 00:15:13,684 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 memories from memory
2025-11-11 00:15:13,684 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 contexts from memory
2025-11-11 00:15:13,684 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 0 contexts from memory
2025-11-11 00:15:13,686 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-11-11 00:15:13,687 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-11-11 00:15:13,687 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
Extra requirements: If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
Purpose: This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.
2025-11-11 00:15:24,072 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_svzc1SAKjgdoIjVZ7tkF3Vsh', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 930, 'prompt_tokens': 2213, 'total_tokens': 3143, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 896, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--548b0501-3fe6-46a0-8d4d-9304751fd131-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_svzc1SAKjgdoIjVZ7tkF3Vsh', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2213, 'output_tokens': 930, 'total_tokens': 3143, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 896}}
2025-11-11 00:15:26,659 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_taS4vT3EQeJdAmN67a8t1c14', 'function': {'arguments': '{"relative_path":"src/css/Stylesheet.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 99, 'prompt_tokens': 6052, 'total_tokens': 6151, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--05b40b9c-97ed-47c1-ba26-4850fcfe4663-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Stylesheet.ts'}, 'id': 'call_taS4vT3EQeJdAmN67a8t1c14', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6052, 'output_tokens': 99, 'total_tokens': 6151, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:15:27,821 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_KYrjrzbqp5sJviIGECdbvFv5', 'function': {'arguments': '{"relative_path":"src/generators/dom/preprocess.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 31, 'prompt_tokens': 11231, 'total_tokens': 11262, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--98510d0f-0c7e-4d4d-9cb6-fa86b68c3980-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/generators/dom/preprocess.ts'}, 'id': 'call_KYrjrzbqp5sJviIGECdbvFv5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11231, 'output_tokens': 31, 'total_tokens': 11262, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:15:29,677 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_KHexpRzWbT1N9srR5fuPYLcr', 'function': {'arguments': '{"relative_path":"src/generators/dom/preprocess.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 31, 'prompt_tokens': 17569, 'total_tokens': 17600, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--685bdfcb-06fa-445e-8ca8-d0cb2de6948d-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/generators/dom/preprocess.ts'}, 'id': 'call_KHexpRzWbT1N9srR5fuPYLcr', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17569, 'output_tokens': 31, 'total_tokens': 17600, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:15:40,124 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hzniqWxEKMEHWJsjx8wAHOj9', 'function': {'arguments': '{"relative_path":"src/generators/dom/preprocess.ts","start_line":501,"end_line":2000}', 'name': 'read_code_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1070, 'prompt_tokens': 23907, 'total_tokens': 24977, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1024, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--887f59ab-cb2a-4f69-b32c-138a13a66e6e-0' tool_calls=[{'name': 'read_code_with_relative_path', 'args': {'relative_path': 'src/generators/dom/preprocess.ts', 'start_line': 501, 'end_line': 2000}, 'id': 'call_hzniqWxEKMEHWJsjx8wAHOj9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 23907, 'output_tokens': 1070, 'total_tokens': 24977, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1024}}
2025-11-11 00:15:54,024 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='I retrieved the full contents of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts. In Selector.ts, the operators map and attributeMatches function are present, showing how attribute selectors are matched (including handling of boolean attributes and regex per operator). In Stylesheet.ts, the Rule class is defined and Stylesheet.apply is implemented, including the cascade behavior. In preprocess.ts, I located where Stylesheet is used: within the Element preprocessor it calls generator.stylesheet.apply(node, elementStack), and I included the remainder of the file showing the preprocess function that constructs the main Block and kicks off preprocessing.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 910, 'prompt_tokens': 24453, 'total_tokens': 25363, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--af6aa632-4619-4214-a0c1-ae7b4ee36590-0' usage_metadata={'input_tokens': 24453, 'output_tokens': 910, 'total_tokens': 25363, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:15:54,028 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: src/css/Selector.ts
Line number range: 1 - 302
Content:
1. import MagicString from 'magic-string';
2. import { gatherPossibleValues, UNKNOWN } from './gatherPossibleValues';
3. import { Validator } from '../validate/index';
4. import { Node } from '../interfaces';
5. 
6. export default class Selector {
7. 	node: Node;
8. 	blocks: Block[];
9. 	localBlocks: Block[];
10. 	used: boolean;
11. 
12. 	constructor(node: Node) {
13. 		this.node = node;
14. 
15. 		this.blocks = groupSelectors(node);
16. 
17. 		// take trailing :global(...) selectors out of consideration
18. 		let i = this.blocks.length;
19. 		while (i > 0) {
20. 			if (!this.blocks[i - 1].global) break;
21. 			i -= 1;
22. 		}
23. 
24. 		this.localBlocks = this.blocks.slice(0, i);
25. 		this.used = this.blocks[0].global;
26. 	}
27. 
28. 	apply(node: Node, stack: Node[]) {
29. 		const toEncapsulate: Node[] = [];
30. 		applySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);
31. 
32. 		if (toEncapsulate.length > 0) {
33. 			toEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {
34. 				node._needsCssAttribute = true;
35. 				block.shouldEncapsulate = true;
36. 			});
37. 
38. 			this.used = true;
39. 		}
40. 	}
41. 
42. 	minify(code: MagicString) {
43. 		let c: number = null;
44. 		this.blocks.forEach((block, i) => {
45. 			if (i > 0) {
46. 				if (block.start - c > 1) {
47. 					code.overwrite(c, block.start, block.combinator.name || ' ');
48. 				}
49. 			}
50. 
51. 			c = block.end;
52. 		});
53. 	}
54. 
55. 	transform(code: MagicString, attr: string) {
56. 		function encapsulateBlock(block: Block) {
57. 			let i = block.selectors.length;
58. 			while (i--) {
59. 				const selector = block.selectors[i];
60. 				if (selector.type === 'PseudoElementSelector' || selector.type === 'PseudoClassSelector') continue;
61. 
62. 				if (selector.type === 'TypeSelector' && selector.name === '*') {
63. 					code.overwrite(selector.start, selector.end, attr);
64. 				} else {
65. 					code.appendLeft(selector.end, attr);
66. 				}
67. 
68. 				break;
69. 			}
70. 
71. 			i = block.selectors.length;
72. 			while (i--) {
73. 				const selector = block.selectors[i];
74. 
75. 				if (selector.type === 'RefSelector') {
76. 					code.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {
77. 						contentOnly: true,
78. 						storeName: false
79. 					});
80. 				}
81. 			}
82. 		}
83. 
84. 		this.blocks.forEach((block, i) => {
85. 			if (block.global) {
86. 				const selector = block.selectors[0];
87. 				const first = selector.children[0];
88. 				const last = selector.children[selector.children.length - 1];
89. 				code.remove(selector.start, first.start).remove(last.end, selector.end);
90. 			}
91. 
92. 			if (block.shouldEncapsulate) encapsulateBlock(block);
93. 		});
94. 	}
95. 
96. 	validate(validator: Validator) {
97. 		this.blocks.forEach((block) => {
98. 			let i = block.selectors.length;
99. 			while (i-- > 1) {
100. 				const selector = block.selectors[i];
101. 				if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
102. 					validator.error(`:global(...) must be the first element in a compound selector`, selector.start);
103. 				}
104. 			}
105. 		});
106. 
107. 		let start = 0;
108. 		let end = this.blocks.length;
109. 
110. 		for (; start < end; start += 1) {
111. 			if (!this.blocks[start].global) break;
112. 		}
113. 
114. 		for (; end > start; end -= 1) {
115. 			if (!this.blocks[end - 1].global) break;
116. 		}
117. 
118. 		for (let i = start; i < end; i += 1) {
119. 			if (this.blocks[i].global) {
120. 				validator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);
121. 			}
122. 		}
123. 	}
124. }
125. 
126. function isDescendantSelector(selector: Node) {
127. 	return selector.type === 'WhiteSpace' || selector.type === 'Combinator';
128. }
129. 
130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {
131. 	const block = blocks.pop();
132. 	if (!block) return false;
133. 
134. 	if (!node) {
135. 		return blocks.every(block => block.global);
136. 	}
137. 
138. 	let i = block.selectors.length;
139. 	let j = stack.length;
140. 
141. 	while (i--) {
142. 		const selector = block.selectors[i];
143. 
144. 		if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
145. 			// TODO shouldn't see this here... maybe we should enforce that :global(...)
146. 			// cannot be sandwiched between non-global selectors?
147. 			return false;
148. 		}
149. 
150. 		if (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {
151. 			continue;
152. 		}
153. 
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}
169. 
170. 		else if (selector.type === 'RefSelector') {
171. 			if (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {
172. 				node._cssRefAttribute = selector.name;
173. 				toEncapsulate.push({ node, block });
174. 				return true;
175. 			}
176. 			return;
177. 		}
178. 
179. 		else {
180. 			// bail. TODO figure out what these could be
181. 			toEncapsulate.push({ node, block });
182. 			return true;
183. 		}
184. 	}
185. 
186. 	if (block.combinator) {
187. 		if (block.combinator.type === 'WhiteSpace') {
188. 			while (stack.length) {
189. 				if (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {
190. 					toEncapsulate.push({ node, block });
191. 					return true;
192. 				}
193. 			}
194. 
195. 			return false;
196. 		} else if (block.combinator.name === '>') {
197. 			if (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {
198. 				toEncapsulate.push({ node, block });
199. 				return true;
200. 			}
201. 			return false;
202. 		}
203. 
204. 		// TODO other combinators
205. 		toEncapsulate.push({ node, block });
206. 		return true;
207. 	}
208. 
209. 	toEncapsulate.push({ node, block });
210. 	return true;
211. }
212. 
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };
221. 
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }
243. 
244. function isDynamic(value: Node) {
245. 	return value.length > 1 || value[0].type !== 'Text';
246. }
247. 
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }
256. 
257. class Block {
258. 	global: boolean;
259. 	combinator: Node;
260. 	selectors: Node[]
261. 	start: number;
262. 	end: number;
263. 	shouldEncapsulate: boolean;
264. 
265. 	constructor(combinator: Node) {
266. 		this.combinator = combinator;
267. 		this.global = false;
268. 		this.selectors = [];
269. 
270. 		this.start = null;
271. 		this.end = null;
272. 
273. 		this.shouldEncapsulate = false;
274. 	}
275. 
276. 	add(selector: Node) {
277. 		if (this.selectors.length === 0) {
278. 			this.start = selector.start;
279. 			this.global = selector.type === 'PseudoClassSelector' && selector.name === 'global';
280. 		}
281. 
282. 		this.selectors.push(selector);
283. 		this.end = selector.end;
284. 	}
285. }
286. 
287. function groupSelectors(selector: Node) {
288. 	let block: Block = new Block(null);
289. 
290. 	const blocks = [block];
291. 
292. 	selector.children.forEach((child: Node, i: number) => {
293. 		if (child.type === 'WhiteSpace' || child.type === 'Combinator') {
294. 			block = new Block(child);
295. 			blocks.push(block);
296. 		} else {
297. 			block.add(child);
298. 		}
299. 	});
300. 
301. 	return blocks;
302. }


File: src/css/Stylesheet.ts
Line number range: 1 - 422
Content:
1. import MagicString from 'magic-string';
2. import { walk } from 'estree-walker';
3. import { getLocator } from 'locate-character';
4. import Selector from './Selector';
5. import getCodeFrame from '../utils/getCodeFrame';
6. import { Validator } from '../validate/index';
7. import { Node, Parsed, Warning } from '../interfaces';
8. 
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }
114. 
115. class Declaration {
116. 	node: Node;
117. 
118. 	constructor(node: Node) {
119. 		this.node = node;
120. 	}
121. 
122. 	transform(code: MagicString, keyframes: Map<string, string>) {
123. 		const property = this.node.property && this.node.property.toLowerCase();
124. 		if (property === 'animation' || property === 'animation-name') {
125. 			this.node.value.children.forEach((block: Node) => {
126. 				if (block.type === 'Identifier') {
127. 					const name = block.name;
128. 					if (keyframes.has(name)) {
129. 						code.overwrite(block.start, block.end, keyframes.get(name));
130. 					}
131. 				}
132. 			});
133. 		}
134. 	}
135. 
136. 	minify(code: MagicString) {
137. 		if (!this.node.property) return; // @apply, and possibly other weird cases?
138. 
139. 		const c = this.node.start + this.node.property.length;
140. 		const first = this.node.value.children  ?
141. 			this.node.value.children[0] :
142. 			this.node.value;
143. 
144. 		let start = first.start;
145. 		while (/\s/.test(code.original[start])) start += 1;
146. 
147. 		if (start - c > 1) {
148. 			code.overwrite(c, start, ':');
149. 		}
150. 	}
151. }
152. 
153. class Atrule {
154. 	node: Node;
155. 	children: (Atrule|Rule)[];
156. 
157. 	constructor(node: Node) {
158. 		this.node = node;
159. 		this.children = [];
160. 	}
161. 
162. 	apply(node: Node, stack: Node[]) {
163. 		if (this.node.name === 'media') {
164. 			this.children.forEach(child => {
165. 				child.apply(node, stack);
166. 			});
167. 		}
168. 
169. 		else if (this.node.name === 'keyframes') {
170. 			this.children.forEach((rule: Rule) => {
171. 				rule.selectors.forEach(selector => {
172. 					selector.used = true;
173. 				});
174. 			});
175. 		}
176. 	}
177. 
178. 	isUsed() {
179. 		return true; // TODO
180. 	}
181. 
182. 	minify(code: MagicString, cascade: boolean) {
183. 		if (this.node.name === 'media') {
184. 			const expressionChar = code.original[this.node.expression.start];
185. 			let c = this.node.start + (expressionChar === '(' ? 6 : 7);
186. 			if (this.node.expression.start > c) code.remove(c, this.node.expression.start);
187. 
188. 			this.node.expression.children.forEach((query: Node) => {
189. 				// TODO minify queries
190. 				c = query.end;
191. 			});
192. 
193. 			code.remove(c, this.node.block.start);
194. 		} else if (this.node.name === 'keyframes') {
195. 			let c = this.node.start + 10;
196. 			if (this.node.expression.start - c > 1) code.overwrite(c, this.node.expression.start, ' ');
197. 			c = this.node.expression.end;
198. 			if (this.node.block.start - c > 0) code.remove(c, this.node.block.start);
199. 		}
200. 
201. 		// TODO other atrules
202. 
203. 		if (this.node.block) {
204. 			let c = this.node.block.start + 1;
205. 
206. 			this.children.forEach(child => {
207. 				if (cascade || child.isUsed()) {
208. 					code.remove(c, child.node.start);
209. 					child.minify(code, cascade);
210. 					c = child.node.end;
211. 				}
212. 			});
213. 
214. 			code.remove(c, this.node.block.end - 1);
215. 		}
216. 	}
217. 
218. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
219. 		if (this.node.name === 'keyframes') {
220. 			this.node.expression.children.forEach(({ type, name, start, end }: Node) => {
221. 				if (type === 'Identifier') {
222. 					if (name.startsWith('-global-')) {
223. 						code.remove(start, start + 8);
224. 					} else {
225. 						code.overwrite(start, end, keyframes.get(name));
226. 					}
227. 				}
228. 			});
229. 		}
230. 
231. 		this.children.forEach(child => {
232. 			child.transform(code, id, keyframes, cascade);
233. 		})
234. 	}
235. 
236. 	validate(validator: Validator) {
237. 		this.children.forEach(child => {
238. 			child.validate(validator);
239. 		});
240. 	}
241. 
242. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
243. 		if (this.node.name !== 'media') return;
244. 
245. 		this.children.forEach(child => {
246. 			child.warnOnUnusedSelector(handler);
247. 		});
248. 	}
249. }
250. 
251. const keys = {};
252. 
253. export default class Stylesheet {
254. 	source: string;
255. 	parsed: Parsed;
256. 	cascade: boolean;
257. 	filename: string;
258. 
259. 	hasStyles: boolean;
260. 	id: string;
261. 
262. 	children: (Rule|Atrule)[];
263. 	keyframes: Map<string, string>;
264. 
265. 	constructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {
266. 		this.source = source;
267. 		this.parsed = parsed;
268. 		this.cascade = cascade;
269. 		this.filename = filename;
270. 
271. 		this.id = `svelte-${parsed.hash}`;
272. 
273. 		this.children = [];
274. 		this.keyframes = new Map();
275. 
276. 		if (parsed.css && parsed.css.children.length) {
277. 			this.hasStyles = true;
278. 
279. 			const stack: (Rule | Atrule)[] = [];
280. 			let currentAtrule: Atrule = null;
281. 
282. 			walk(this.parsed.css, {
283. 				enter: (node: Node) => {
284. 					if (node.type === 'Atrule') {
285. 						const last = stack[stack.length - 1];
286. 
287. 						const atrule = new Atrule(node);
288. 						stack.push(atrule);
289. 
290. 						// this is an awkward special case — @apply (and
291. 						// possibly other future constructs)
292. 						if (last && !(last instanceof Atrule)) return;
293. 
294. 						if (currentAtrule) {
295. 							currentAtrule.children.push(atrule);
296. 						} else {
297. 							this.children.push(atrule);
298. 						}
299. 
300. 						if (node.name === 'keyframes') {
301. 							node.expression.children.forEach((expression: Node) => {
302. 								if (expression.type === 'Identifier' && !expression.name.startsWith('-global-')) {
303. 									this.keyframes.set(expression.name, `${this.id}-${expression.name}`);
304. 								}
305. 							});
306. 						}
307. 
308. 						currentAtrule = atrule;
309. 					}
310. 
311. 					if (node.type === 'Rule') {
312. 						const rule = new Rule(node, currentAtrule);
313. 						stack.push(rule);
314. 
315. 						if (currentAtrule) {
316. 							currentAtrule.children.push(rule);
317. 						} else {
318. 							this.children.push(rule);
319. 						}
320. 					}
321. 				},
322. 
323. 				leave: (node: Node) => {
324. 					if (node.type === 'Rule' || node.type === 'Atrule') stack.pop();
325. 					if (node.type === 'Atrule') currentAtrule = stack[stack.length - 1];
326. 				}
327. 			});
328. 		} else {
329. 			this.hasStyles = false;
330. 		}
331. 	}
332. 
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}
346. 
347. 	render(cssOutputFilename: string, shouldTransformSelectors: boolean) {
348. 		if (!this.hasStyles) {
349. 			return { css: null, cssMap: null };
350. 		}
351. 
352. 		const code = new MagicString(this.source);
353. 
354. 		walk(this.parsed.css, {
355. 			enter: (node: Node) => {
356. 				code.addSourcemapLocation(node.start);
357. 				code.addSourcemapLocation(node.end);
358. 			}
359. 		});
360. 
361. 		if (shouldTransformSelectors) {
362. 			this.children.forEach((child: (Atrule|Rule)) => {
363. 				child.transform(code, this.id, this.keyframes, this.cascade);
364. 			});
365. 		}
366. 
367. 		let c = 0;
368. 		this.children.forEach(child => {
369. 			if (this.cascade || child.isUsed()) {
370. 				code.remove(c, child.node.start);
371. 				child.minify(code, this.cascade);
372. 				c = child.node.end;
373. 			}
374. 		});
375. 
376. 		code.remove(c, this.source.length);
377. 
378. 		return {
379. 			css: code.toString(),
380. 			cssMap: code.generateMap({
381. 				includeContent: true,
382. 				source: this.filename,
383. 				file: cssOutputFilename
384. 			})
385. 		};
386. 	}
387. 
388. 	validate(validator: Validator) {
389. 		this.children.forEach(child => {
390. 			child.validate(validator);
391. 		});
392. 	}
393. 
394. 	warnOnUnusedSelectors(onwarn: (warning: Warning) => void) {
395. 		if (this.cascade) return;
396. 
397. 		let locator;
398. 
399. 		const handler = (selector: Selector) => {
400. 			const pos = selector.node.start;
401. 
402. 			if (!locator) locator = getLocator(this.source);
403. 			const { line, column } = locator(pos);
404. 
405. 			const frame = getCodeFrame(this.source, line, column);
406. 			const message = `Unused CSS selector`;
407. 
408. 			onwarn({
409. 				message,
410. 				frame,
411. 				loc: { line: line + 1, column },
412. 				pos,
413. 				filename: this.filename,
414. 				toString: () => `${message} (${line + 1}:${column})\n${frame}`,
415. 			});
416. 		};
417. 
418. 		this.children.forEach(child => {
419. 			child.warnOnUnusedSelector(handler);
420. 		});
421. 	}
422. }


File: src/generators/dom/preprocess.ts
Line number range: 1 - 500
Content:
1. import Block from './Block';
2. import { trimStart, trimEnd } from '../../utils/trim';
3. import { assign } from '../../shared/index.js';
4. import getStaticAttributeValue from '../../utils/getStaticAttributeValue';
5. import isChildOfComponent from '../shared/utils/isChildOfComponent';
6. import { DomGenerator } from './index';
7. import { Node } from '../../interfaces';
8. import { State } from './interfaces';
9. 
10. function isElseIf(node: Node) {
11. 	return (
12. 		node && node.children.length === 1 && node.children[0].type === 'IfBlock'
13. 	);
14. }
15. 
16. function getChildState(parent: State, child = {}) {
17. 	return assign(
18. 		{},
19. 		parent,
20. 		{ parentNode: null, parentNodes: 'nodes' },
21. 		child || {}
22. 	);
23. }
24. 
25. function createDebuggingComment(node: Node, generator: DomGenerator) {
26. 	const { locate, source } = generator;
27. 
28. 	let c = node.start;
29. 	if (node.type === 'ElseBlock') {
30. 		while (source[c] !== '{') c -= 1;
31. 		c -= 1;
32. 	}
33. 
34. 	let d = node.expression ? node.expression.end : c;
35. 	while (source[d] !== '}') d += 1;
36. 	d += 2;
37. 
38. 	const start = locate(c);
39. 	const loc = `(${start.line + 1}:${start.column})`;
40. 
41. 	return `${loc} ${source.slice(c, d)}`.replace(/\n/g, ' ');
42. }
43. 
44. function cannotUseInnerHTML(node: Node) {
45. 	while (node && node.canUseInnerHTML) {
46. 		node.canUseInnerHTML = false;
47. 		node = node.parent;
48. 	}
49. }
50. 
51. // Whitespace inside one of these elements will not result in
52. // a whitespace node being created in any circumstances. (This
53. // list is almost certainly very incomplete)
54. const elementsWithoutText = new Set([
55. 	'audio',
56. 	'datalist',
57. 	'dl',
58. 	'ol',
59. 	'optgroup',
60. 	'select',
61. 	'ul',
62. 	'video',
63. ]);
64. 
65. const preprocessors = {
66. 	MustacheTag: (
67. 		generator: DomGenerator,
68. 		block: Block,
69. 		state: State,
70. 		node: Node,
71. 		elementStack: Node[],
72. 		componentStack: Node[],
73. 		stripWhitespace: boolean
74. 	) => {
75. 		cannotUseInnerHTML(node);
76. 		node.var = block.getUniqueName('text');
77. 
78. 		const dependencies = block.findDependencies(node.expression);
79. 		block.addDependencies(dependencies);
80. 	},
81. 
82. 	RawMustacheTag: (
83. 		generator: DomGenerator,
84. 		block: Block,
85. 		state: State,
86. 		node: Node,
87. 		elementStack: Node[],
88. 		componentStack: Node[],
89. 		stripWhitespace: boolean
90. 	) => {
91. 		cannotUseInnerHTML(node);
92. 		node.var = block.getUniqueName('raw');
93. 
94. 		const dependencies = block.findDependencies(node.expression);
95. 		block.addDependencies(dependencies);
96. 	},
97. 
98. 	Text: (
99. 		generator: DomGenerator,
100. 		block: Block,
101. 		state: State,
102. 		node: Node,
103. 		elementStack: Node[],
104. 		componentStack: Node[],
105. 		stripWhitespace: boolean
106. 	) => {
107. 		if (!/\S/.test(node.data) && (state.namespace || elementsWithoutText.has(state.parentNodeName))) {
108. 			node.shouldSkip = true;
109. 			return;
110. 		}
111. 
112. 		node.var = block.getUniqueName(`text`);
113. 	},
114. 
115. 	IfBlock: (
116. 		generator: DomGenerator,
117. 		block: Block,
118. 		state: State,
119. 		node: Node,
120. 		inEachBlock: boolean,
121. 		elementStack: Node[],
122. 		componentStack: Node[],
123. 		stripWhitespace: boolean,
124. 		nextSibling: Node
125. 	) => {
126. 		cannotUseInnerHTML(node);
127. 
128. 		const blocks: Block[] = [];
129. 		let dynamic = false;
130. 		let hasIntros = false;
131. 		let hasOutros = false;
132. 
133. 		function attachBlocks(node: Node) {
134. 			node.var = block.getUniqueName(`if_block`);
135. 
136. 			const dependencies = block.findDependencies(node.expression);
137. 			block.addDependencies(dependencies);
138. 
139. 			node._block = block.child({
140. 				comment: createDebuggingComment(node, generator),
141. 				name: generator.getUniqueName(`create_if_block`),
142. 			});
143. 
144. 			node._state = getChildState(state);
145. 
146. 			blocks.push(node._block);
147. 			preprocessChildren(generator, node._block, node._state, node, inEachBlock, elementStack, componentStack, stripWhitespace, nextSibling);
148. 
149. 			if (node._block.dependencies.size > 0) {
150. 				dynamic = true;
151. 				block.addDependencies(node._block.dependencies);
152. 			}
153. 
154. 			if (node._block.hasIntroMethod) hasIntros = true;
155. 			if (node._block.hasOutroMethod) hasOutros = true;
156. 
157. 			if (isElseIf(node.else)) {
158. 				attachBlocks(node.else.children[0]);
159. 			} else if (node.else) {
160. 				node.else._block = block.child({
161. 					comment: createDebuggingComment(node.else, generator),
162. 					name: generator.getUniqueName(`create_if_block`),
163. 				});
164. 
165. 				node.else._state = getChildState(state);
166. 
167. 				blocks.push(node.else._block);
168. 				preprocessChildren(
169. 					generator,
170. 					node.else._block,
171. 					node.else._state,
172. 					node.else,
173. 					inEachBlock,
174. 					elementStack,
175. 					componentStack,
176. 					stripWhitespace,
177. 					nextSibling
178. 				);
179. 
180. 				if (node.else._block.dependencies.size > 0) {
181. 					dynamic = true;
182. 					block.addDependencies(node.else._block.dependencies);
183. 				}
184. 			}
185. 		}
186. 
187. 		attachBlocks(node);
188. 
189. 		blocks.forEach(block => {
190. 			block.hasUpdateMethod = dynamic;
191. 			block.hasIntroMethod = hasIntros;
192. 			block.hasOutroMethod = hasOutros;
193. 		});
194. 
195. 		generator.blocks.push(...blocks);
196. 	},
197. 
198. 	EachBlock: (
199. 		generator: DomGenerator,
200. 		block: Block,
201. 		state: State,
202. 		node: Node,
203. 		inEachBlock: boolean,
204. 		elementStack: Node[],
205. 		componentStack: Node[],
206. 		stripWhitespace: boolean,
207. 		nextSibling: Node
208. 	) => {
209. 		cannotUseInnerHTML(node);
210. 		node.var = block.getUniqueName(`each`);
211. 
212. 		const dependencies = block.findDependencies(node.expression);
213. 		block.addDependencies(dependencies);
214. 
215. 		const indexNames = new Map(block.indexNames);
216. 		const indexName =
217. 			node.index || block.getUniqueName(`${node.context}_index`);
218. 		indexNames.set(node.context, indexName);
219. 
220. 		const listNames = new Map(block.listNames);
221. 		const listName = block.getUniqueName(
222. 			(node.expression.type === 'MemberExpression' && !node.expression.computed) ? node.expression.property.name :
223. 			node.expression.type === 'Identifier' ? node.expression.name :
224. 			`each_value`
225. 		);
226. 		listNames.set(node.context, listName);
227. 
228. 		const context = generator.getUniqueName(node.context);
229. 		const contexts = new Map(block.contexts);
230. 		contexts.set(node.context, context);
231. 
232. 		const indexes = new Map(block.indexes);
233. 		if (node.index) indexes.set(node.index, node.context);
234. 
235. 		const changeableIndexes = new Map(block.changeableIndexes);
236. 		if (node.index) changeableIndexes.set(node.index, node.key);
237. 
238. 		const contextDependencies = new Map(block.contextDependencies);
239. 		contextDependencies.set(node.context, dependencies);
240. 
241. 		if (node.destructuredContexts) {
242. 			for (const i = 0; i < node.destructuredContexts.length; i++) {
243. 				contexts.set(node.destructuredContexts[i], `${context}[${i}]`);
244. 				contextDependencies.set(node.destructuredContexts[i], dependencies);
245. 			}
246. 		}
247. 
248. 		node._block = block.child({
249. 			comment: createDebuggingComment(node, generator),
250. 			name: generator.getUniqueName('create_each_block'),
251. 			expression: node.expression,
252. 			context: node.context,
253. 			key: node.key,
254. 
255. 			contextDependencies,
256. 			contexts,
257. 			indexes,
258. 			changeableIndexes,
259. 
260. 			listName,
261. 			indexName,
262. 
263. 			indexNames,
264. 			listNames,
265. 			params: block.params.concat(listName, context, indexName),
266. 		});
267. 
268. 		node._state = getChildState(state, {
269. 			inEachBlock: true,
270. 		});
271. 
272. 		generator.blocks.push(node._block);
273. 		preprocessChildren(generator, node._block, node._state, node, true, elementStack, componentStack, stripWhitespace, nextSibling);
274. 		block.addDependencies(node._block.dependencies);
275. 		node._block.hasUpdateMethod = node._block.dependencies.size > 0;
276. 
277. 		if (node.else) {
278. 			node.else._block = block.child({
279. 				comment: createDebuggingComment(node.else, generator),
280. 				name: generator.getUniqueName(`${node._block.name}_else`),
281. 			});
282. 
283. 			node.else._state = getChildState(state);
284. 
285. 			generator.blocks.push(node.else._block);
286. 			preprocessChildren(
287. 				generator,
288. 				node.else._block,
289. 				node.else._state,
290. 				node.else,
291. 				inEachBlock,
292. 				elementStack,
293. 				componentStack,
294. 				stripWhitespace,
295. 				nextSibling
296. 			);
297. 			node.else._block.hasUpdateMethod = node.else._block.dependencies.size > 0;
298. 		}
299. 	},
300. 
301. 	Element: (
302. 		generator: DomGenerator,
303. 		block: Block,
304. 		state: State,
305. 		node: Node,
306. 		inEachBlock: boolean,
307. 		elementStack: Node[],
308. 		componentStack: Node[],
309. 		stripWhitespace: boolean,
310. 		nextSibling: Node
311. 	) => {
312. 		if (node.name === 'slot') {
313. 			cannotUseInnerHTML(node);
314. 		}
315. 
316. 		node.attributes.forEach((attribute: Node) => {
317. 			if (attribute.type === 'Attribute' && attribute.value !== true) {
318. 				attribute.value.forEach((chunk: Node) => {
319. 					if (chunk.type !== 'Text') {
320. 						if (node.parent) cannotUseInnerHTML(node.parent);
321. 
322. 						const dependencies = block.findDependencies(chunk.expression);
323. 						block.addDependencies(dependencies);
324. 
325. 						// special case — <option value='{{foo}}'> — see below
326. 						if (
327. 							node.name === 'option' &&
328. 							attribute.name === 'value' &&
329. 							state.selectBindingDependencies
330. 						) {
331. 							state.selectBindingDependencies.forEach(prop => {
332. 								dependencies.forEach((dependency: string) => {
333. 									generator.indirectDependencies.get(prop).add(dependency);
334. 								});
335. 							});
336. 						}
337. 					}
338. 				});
339. 			} else {
340. 				if (node.parent) cannotUseInnerHTML(node.parent);
341. 
342. 				if (attribute.type === 'EventHandler' && attribute.expression) {
343. 					attribute.expression.arguments.forEach((arg: Node) => {
344. 						const dependencies = block.findDependencies(arg);
345. 						block.addDependencies(dependencies);
346. 					});
347. 				} else if (attribute.type === 'Binding') {
348. 					const dependencies = block.findDependencies(attribute.value);
349. 					block.addDependencies(dependencies);
350. 				} else if (attribute.type === 'Transition') {
351. 					if (attribute.intro)
352. 						generator.hasIntroTransitions = block.hasIntroMethod = true;
353. 					if (attribute.outro) {
354. 						generator.hasOutroTransitions = block.hasOutroMethod = true;
355. 						block.outros += 1;
356. 					}
357. 				}
358. 			}
359. 		});
360. 
361. 		// special case — in a case like this...
362. 		//
363. 		//   <select bind:value='foo'>
364. 		//     <option value='{{bar}}'>bar</option>
365. 		//     <option value='{{baz}}'>baz</option>
366. 		//   </option>
367. 		//
368. 		// ...we need to know that `foo` depends on `bar` and `baz`,
369. 		// so that if `foo.qux` changes, we know that we need to
370. 		// mark `bar` and `baz` as dirty too
371. 		if (node.name === 'select') {
372. 			cannotUseInnerHTML(node);
373. 
374. 			const value = node.attributes.find(
375. 				(attribute: Node) => attribute.name === 'value'
376. 			);
377. 			if (value) {
378. 				// TODO does this also apply to e.g. `<input type='checkbox' bind:group='foo'>`?
379. 				const dependencies = block.findDependencies(value.value);
380. 				state.selectBindingDependencies = dependencies;
381. 				dependencies.forEach((prop: string) => {
382. 					generator.indirectDependencies.set(prop, new Set());
383. 				});
384. 			} else {
385. 				state.selectBindingDependencies = null;
386. 			}
387. 		}
388. 
389. 		const isComponent =
390. 			generator.components.has(node.name) || node.name === ':Self';
391. 
392. 		if (isComponent) {
393. 			cannotUseInnerHTML(node);
394. 
395. 			node.var = block.getUniqueName(
396. 				(node.name === ':Self' ? generator.name : node.name).toLowerCase()
397. 			);
398. 
399. 			node._state = getChildState(state, {
400. 				parentNode: `${node.var}._slotted.default`
401. 			});
402. 		} else {
403. 			const slot = getStaticAttributeValue(node, 'slot');
404. 			if (slot && isChildOfComponent(node, generator)) {
405. 				cannotUseInnerHTML(node);
406. 				node.slotted = true;
407. 				// TODO validate slots — no nesting, no dynamic names...
408. 				const component = componentStack[componentStack.length - 1];
409. 				component._slots.add(slot);
410. 			}
411. 
412. 			node.var = block.getUniqueName(
413. 				node.name.replace(/[^a-zA-Z0-9_$]/g, '_')
414. 			);
415. 
416. 			node._state = getChildState(state, {
417. 				isTopLevel: false,
418. 				parentNode: node.var,
419. 				parentNodes: block.getUniqueName(`${node.var}_nodes`),
420. 				parentNodeName: node.name,
421. 				namespace: node.name === 'svg'
422. 					? 'http://www.w3.org/2000/svg'
423. 					: state.namespace,
424. 				allUsedContexts: [],
425. 			});
426. 
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}
439. 	},
440. };
441. 
442. function preprocessChildren(
443. 	generator: DomGenerator,
444. 	block: Block,
445. 	state: State,
446. 	node: Node,
447. 	inEachBlock: boolean,
448. 	elementStack: Node[],
449. 	componentStack: Node[],
450. 	stripWhitespace: boolean,
451. 	nextSibling: Node
452. ) {
453. 	// glue text nodes together
454. 	const cleaned: Node[] = [];
455. 	let lastChild: Node;
456. 
457. 	node.children.forEach((child: Node) => {
458. 		if (child.type === 'Comment') return;
459. 
460. 		if (child.type === 'Text' && lastChild && lastChild.type === 'Text') {
461. 			lastChild.data += child.data;
462. 			lastChild.end = child.end;
463. 		} else {
464. 			if (child.type === 'Text' && stripWhitespace && cleaned.length === 0) {
465. 				child.data = trimStart(child.data);
466. 				if (child.data) cleaned.push(child);
467. 			} else {
468. 				cleaned.push(child);
469. 			}
470. 		}
471. 
472. 		lastChild = child;
473. 	});
474. 
475. 	lastChild = null;
476. 
477. 	cleaned.forEach((child: Node, i: number) => {
478. 		child.parent = node;
479. 		child.canUseInnerHTML = !generator.hydratable;
480. 
481. 		const preprocessor = preprocessors[child.type];
482. 		if (preprocessor) preprocessor(generator, block, state, child, inEachBlock, elementStack, componentStack, stripWhitespace, cleaned[i + 1] || nextSibling);
483. 
484. 		if (child.shouldSkip) return;
485. 
486. 		if (lastChild) lastChild.next = child;
487. 		child.prev = lastChild;
488. 
489. 		lastChild = child;
490. 	});
491. 
492. 	// We want to remove trailing whitespace inside an element/component/block,
493. 	// *unless* there is no whitespace between this node and its next sibling
494. 	if (stripWhitespace && lastChild && lastChild.type === 'Text') {
495. 		const shouldTrim = (
496. 			nextSibling ?  (nextSibling.type === 'Text' && /^\s/.test(nextSibling.data)) : !inEachBlock
497. 		);
498. 
499. 		if (shouldTrim) {
500. 			lastChild.data = trimEnd(lastChild.data);


File: src/generators/dom/preprocess.ts
Line number range: 501 - 2000
Content:
501. 			if (!lastChild.data) {
502. 				cleaned.pop();
503. 				lastChild = cleaned[cleaned.length - 1];
504. 				lastChild.next = null;
505. 			}
506. 		}
507. 	}
508. 
509. 	node.children = cleaned;
510. }
511. 
512. export default function preprocess(
513. 	generator: DomGenerator,
514. 	namespace: string,
515. 	node: Node
516. ) {
517. 	const block = new Block({
518. 		generator,
519. 		name: '@create_main_fragment',
520. 		key: null,
521. 
522. 		contexts: new Map(),
523. 		indexes: new Map(),
524. 		changeableIndexes: new Map(),
525. 		contextDependencies: new Map(),
526. 
527. 		params: ['state'],
528. 		indexNames: new Map(),
529. 		listNames: new Map(),
530. 
531. 		dependencies: new Set(),
532. 	});
533. 
534. 	const state: State = {
535. 		namespace,
536. 		parentNode: null,
537. 		parentNodes: 'nodes'
538. 	};
539. 
540. 	generator.blocks.push(block);
541. 	preprocessChildren(generator, block, state, node, false, [], [], true, null);
542. 	block.hasUpdateMethod = true;
543. 
544. 	return { block, state };
545. }

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-11-11 00:16:22,212 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis: The bug relates to attribute selector parsing and matching; the operators map defines how matchers work. 2. Extended relevance: The operators are used by attributeMatches to build regex patterns for matching attribute values, critical to diagnosing [foo] behavior.', relative_path='src/css/Selector.ts', start_line=213, end_line=220), ContextOutput(reasoning='1. Query requirement analysis: Direct implementation of attribute selector matching logic, including handling of boolean attributes and building patterns via operators. 2. Extended relevance: Shows how dynamic values and UNKNOWN are treated, which influences why [foo] with a value may fail.', relative_path='src/css/Selector.ts', start_line=222, end_line=242), ContextOutput(reasoning='1. Query requirement analysis: Demonstrates where attribute selectors are evaluated and how attributeMatches is invoked with name, value (via unquote), matcher, and flags. 2. Extended relevance: Provides the call site context so we know operator can be null and how flags are passed.', relative_path='src/css/Selector.ts', start_line=154, end_line=168), ContextOutput(reasoning='1. Query requirement analysis: attribute selector value is unquoted before matching; this function explains how string or identifier values are normalized. 2. Extended relevance: Necessary for understanding expectedValue passed into attributeMatches.', relative_path='src/css/Selector.ts', start_line=248, end_line=255), ContextOutput(reasoning='1. Query requirement analysis: The Rule class applies selectors to nodes, which is part of how styles are used. 2. Extended relevance: Knowing Rule.apply and isUsed is needed to understand when matching affects stylesheet usage.', relative_path='src/css/Stylesheet.ts', start_line=9, end_line=113), ContextOutput(reasoning='1. Query requirement analysis: Stylesheet.apply is specifically requested and controls when selectors are applied across nodes. 2. Extended relevance: Shows cascade behavior and how child rules/at-rules invoke apply, affecting whether attribute selectors run.', relative_path='src/css/Stylesheet.ts', start_line=333, end_line=345), ContextOutput(reasoning='1. Query requirement analysis: The code where Stylesheet is applied within DOM preprocessing is requested; this exact call wires element nodes to stylesheet matching. 2. Extended relevance: Establishes the connection between generated DOM nodes and CSS selector application.', relative_path='src/generators/dom/preprocess.ts', start_line=427, end_line=438)]
2025-11-11 00:16:22,216 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Storing 7 contexts to memory for query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
2025-11-11 00:16:22,559 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-11-11 00:16:22,560 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 7 new contexts to 0 existing contexts
2025-11-11 00:16:22,560 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 7 total contexts (removed 0 duplicates)
2025-11-11 00:16:22,561 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
Extra Requirements: If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
Purpose: This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: src/css/Selector.ts
Line number range: 154 - 168
Content:
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}


File: src/css/Selector.ts
Line number range: 213 - 220
Content:
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };


File: src/css/Selector.ts
Line number range: 222 - 242
Content:
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }


File: src/css/Selector.ts
Line number range: 248 - 255
Content:
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }


File: src/css/Stylesheet.ts
Line number range: 9 - 113
Content:
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }


File: src/css/Stylesheet.ts
Line number range: 333 - 345
Content:
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}


File: src/generators/dom/preprocess.ts
Line number range: 427 - 438
Content:
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-11 00:16:43,408 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='We have partial snippets of Selector.ts (including attributeMatches and operators) and parts of Stylesheet.ts and preprocess.ts. However, the full Selector class implementation (including apply/transform), the complete Stylesheet class (fields, constructor, other methods), and the gatherPossibleValues.ts dependency used by attributeMatches are missing. These are essential to understand how attribute selectors are parsed and applied and to propose a precise fix for the null-operator case without side effects.' query='Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/css/gatherPossibleValues.ts.' extra_requirements='If full files are too large, include at minimum: the Selector class (constructor, apply, transform), the complete Stylesheet class definition (constructor, fields), and the implementations of gatherPossibleValues plus any UNKNOWN constant it uses.' purpose='This will allow tracing attribute selector handling end-to-end and ensure a correct fix for operator=null in button[foo] without breaking dynamic matching.'
2025-11-11 00:16:43,410 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/css/gatherPossibleValues.ts.
2025-11-11 00:16:43,764 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: [{'query_essential_query': 'Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.', 'query_extra_requirements': 'If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.', 'query_purpose': 'This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.', 'memory_context_contexts': [{'relative_path': 'src/css/Selector.ts', 'content': "213. const operators = {\n214. \t'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t'~=': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n220. };", 'start_line_number': 213, 'end_line_number': 220}, {'relative_path': 'src/css/Selector.ts', 'content': "222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === 'Text') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }", 'start_line_number': 222, 'end_line_number': 242}, {'relative_path': 'src/css/Selector.ts', 'content': "154. \t\tif (selector.type === 'ClassSelector') {\n155. \t\t\tif (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === 'IdSelector') {\n159. \t\t\tif (!attributeMatches(node, 'id', selector.name, '=', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === 'AttributeSelector') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === 'TypeSelector') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== '*') return false;\n168. \t\t}", 'start_line_number': 154, 'end_line_number': 168}, {'relative_path': 'src/css/Selector.ts', 'content': '248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }', 'start_line_number': 248, 'end_line_number': 255}, {'relative_path': 'src/css/Stylesheet.ts', 'content': "9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? ',' : '';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? ';' : '';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === 'TypeSelector') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === '*' ? '' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }", 'start_line_number': 9, 'end_line_number': 113}, {'relative_path': 'src/css/Stylesheet.ts', 'content': '333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}', 'start_line_number': 333, 'end_line_number': 345}, {'relative_path': 'src/generators/dom/preprocess.ts', 'content': "427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set(['default']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}", 'start_line_number': 427, 'end_line_number': 438}]}]
2025-11-11 00:16:43,764 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 1 memories from memory
2025-11-11 00:16:43,764 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 7 contexts from memory
2025-11-11 00:16:43,764 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 7 contexts from memory
2025-11-11 00:16:43,765 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 7 new contexts to 7 existing contexts
2025-11-11 00:16:43,766 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 7 total contexts (removed 7 duplicates)
2025-11-11 00:16:43,767 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
Extra Requirements: If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
Purpose: This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.

Previous refined query 2:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/css/gatherPossibleValues.ts.
Extra Requirements: If full files are too large, include at minimum: the Selector class (constructor, apply, transform), the complete Stylesheet class definition (constructor, fields), and the implementations of gatherPossibleValues plus any UNKNOWN constant it uses.
Purpose: This will allow tracing attribute selector handling end-to-end and ensure a correct fix for operator=null in button[foo] without breaking dynamic matching.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: src/css/Selector.ts
Line number range: 154 - 168
Content:
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}


File: src/css/Selector.ts
Line number range: 213 - 220
Content:
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };


File: src/css/Selector.ts
Line number range: 222 - 242
Content:
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }


File: src/css/Selector.ts
Line number range: 248 - 255
Content:
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }


File: src/css/Stylesheet.ts
Line number range: 9 - 113
Content:
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }


File: src/css/Stylesheet.ts
Line number range: 333 - 345
Content:
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}


File: src/generators/dom/preprocess.ts
Line number range: 427 - 438
Content:
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-11 00:17:12,635 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The stack trace points to attributeMatches, Selector.apply, Rule.apply, Stylesheet.apply, and DOM preprocess. We have only fragments of Selector.ts (attributeMatches, operators, a call site) and partial Stylesheet.ts (Rule class and apply snippet). To fully understand and fix the presence-only attribute selector bug, we need the complete Selector class (including apply/transform/validate and any helper functions around applySelector/_loop), the gatherPossibleValues.ts implementation and UNKNOWN constant referenced in attributeMatches, the full Stylesheet class (constructor, fields, children/hasStyles/cascade wiring, Declaration class), and the location where Stylesheet is instantiated in the DOM generator to see how options like cascade/id are passed.' query='Please provide the full content of src/css/Selector.ts, src/css/gatherPossibleValues.ts (including the UNKNOWN constant), the complete src/css/Stylesheet.ts, and the code where the Stylesheet instance is created in the DOM generator (likely src/generators/dom/index.ts).' extra_requirements='If full files are too large, include at minimum: the Selector class (constructor/apply/transform/validate) and any applySelector/_loop helpers, the UNKNOWN constant and gatherPossibleValues implementation, the Stylesheet class constructor/properties and Declaration class, and the snippet where generator.stylesheet is instantiated.' purpose='This will let me trace attribute selector handling end-to-end and identify a safe fix for operator=null in presence-only selectors without breaking other CSS matching behavior.'
2025-11-11 00:17:12,637 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the full content of src/css/Selector.ts, src/css/gatherPossibleValues.ts (including the UNKNOWN constant), the complete src/css/Stylesheet.ts, and the code where the Stylesheet instance is created in the DOM generator (likely src/generators/dom/index.ts).
2025-11-11 00:17:12,965 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: [{'query_essential_query': 'Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.', 'query_extra_requirements': 'If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.', 'query_purpose': 'This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.', 'memory_context_contexts': [{'relative_path': 'src/css/Selector.ts', 'content': "213. const operators = {\n214. \t'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t'~=': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n220. };", 'start_line_number': 213, 'end_line_number': 220}, {'relative_path': 'src/css/Selector.ts', 'content': "222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === 'Text') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }", 'start_line_number': 222, 'end_line_number': 242}, {'relative_path': 'src/css/Selector.ts', 'content': "154. \t\tif (selector.type === 'ClassSelector') {\n155. \t\t\tif (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === 'IdSelector') {\n159. \t\t\tif (!attributeMatches(node, 'id', selector.name, '=', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === 'AttributeSelector') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === 'TypeSelector') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== '*') return false;\n168. \t\t}", 'start_line_number': 154, 'end_line_number': 168}, {'relative_path': 'src/css/Selector.ts', 'content': '248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }', 'start_line_number': 248, 'end_line_number': 255}, {'relative_path': 'src/css/Stylesheet.ts', 'content': "9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? ',' : '';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? ';' : '';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === 'TypeSelector') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === '*' ? '' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }", 'start_line_number': 9, 'end_line_number': 113}, {'relative_path': 'src/css/Stylesheet.ts', 'content': '333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}', 'start_line_number': 333, 'end_line_number': 345}, {'relative_path': 'src/generators/dom/preprocess.ts', 'content': "427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set(['default']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}", 'start_line_number': 427, 'end_line_number': 438}]}]
2025-11-11 00:17:12,965 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 1 memories from memory
2025-11-11 00:17:12,965 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 7 contexts from memory
2025-11-11 00:17:12,966 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 7 contexts from memory
2025-11-11 00:17:12,967 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 7 new contexts to 7 existing contexts
2025-11-11 00:17:12,967 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 7 total contexts (removed 7 duplicates)
2025-11-11 00:17:12,968 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
Extra Requirements: If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
Purpose: This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.

Previous refined query 2:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/css/gatherPossibleValues.ts.
Extra Requirements: If full files are too large, include at minimum: the Selector class (constructor, apply, transform), the complete Stylesheet class definition (constructor, fields), and the implementations of gatherPossibleValues plus any UNKNOWN constant it uses.
Purpose: This will allow tracing attribute selector handling end-to-end and ensure a correct fix for operator=null in button[foo] without breaking dynamic matching.

Previous refined query 3:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/gatherPossibleValues.ts (including the UNKNOWN constant), the complete src/css/Stylesheet.ts, and the code where the Stylesheet instance is created in the DOM generator (likely src/generators/dom/index.ts).
Extra Requirements: If full files are too large, include at minimum: the Selector class (constructor/apply/transform/validate) and any applySelector/_loop helpers, the UNKNOWN constant and gatherPossibleValues implementation, the Stylesheet class constructor/properties and Declaration class, and the snippet where generator.stylesheet is instantiated.
Purpose: This will let me trace attribute selector handling end-to-end and identify a safe fix for operator=null in presence-only selectors without breaking other CSS matching behavior.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: src/css/Selector.ts
Line number range: 154 - 168
Content:
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}


File: src/css/Selector.ts
Line number range: 213 - 220
Content:
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };


File: src/css/Selector.ts
Line number range: 222 - 242
Content:
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }


File: src/css/Selector.ts
Line number range: 248 - 255
Content:
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }


File: src/css/Stylesheet.ts
Line number range: 9 - 113
Content:
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }


File: src/css/Stylesheet.ts
Line number range: 333 - 345
Content:
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}


File: src/generators/dom/preprocess.ts
Line number range: 427 - 438
Content:
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-11 00:17:34,698 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The issue arises inside attributeMatches in Selector.ts, but we only have fragments of Selector.ts and Stylesheet.apply plus a small preprocess snippet. To follow the stack and satisfy the request to include complete implementations and related code, we need the full Selector class, the full Stylesheet class (including constructor/fields and Declaration), gatherPossibleValues and UNKNOWN, and the exact place where the Stylesheet is instantiated in the DOM generator.' query='Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).' extra_requirements='If full files are too large, include at minimum: Selector constructor/apply/transform/validate, operators and attributeMatches; Stylesheet constructor/properties and apply; Declaration class; gatherPossibleValues implementation and UNKNOWN; and the snippet creating the Stylesheet instance.' purpose='This will let me trace attribute selector handling end-to-end and follow imports to the DOM preprocessing to identify and document the operator=null presence-only selector behavior and propose a precise fix.'
2025-11-11 00:17:34,699 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieving contexts from memory for query: Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).
2025-11-11 00:17:35,044 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - DEBUG - Retrieved contexts: []
2025-11-11 00:17:35,045 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 memories from memory
2025-11-11 00:17:35,045 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - Retrieved 0 contexts from memory
2025-11-11 00:17:35,045 - thread-133013312636608.prometheus.lang_graph.nodes.memory_retrieval_node - INFO - After deduplication and sorting: 0 contexts from memory
2025-11-11 00:17:35,046 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting context_provider_messages in state.
2025-11-11 00:17:35,047 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - INFO - Creating context provider message from refined query
2025-11-11 00:17:35,047 - thread-133013312636608.prometheus.lang_graph.nodes.add_context_refined_query_message_node - DEBUG - Query message: Essential query: Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).
Extra requirements: If full files are too large, include at minimum: Selector constructor/apply/transform/validate, operators and attributeMatches; Stylesheet constructor/properties and apply; Declaration class; gatherPossibleValues implementation and UNKNOWN; and the snippet creating the Stylesheet instance.
Purpose: This will let me trace attribute selector handling end-to-end and follow imports to the DOM preprocessing to identify and document the operator=null presence-only selector behavior and propose a precise fix.
2025-11-11 00:17:38,836 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_33tctxhKAT4f6WR5uqAJRGYY', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 225, 'prompt_tokens': 2251, 'total_tokens': 2476, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--10cb13b0-a0a2-44e6-ae2e-9fd5b77458e1-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_33tctxhKAT4f6WR5uqAJRGYY', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2251, 'output_tokens': 225, 'total_tokens': 2476, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:17:40,268 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Rt5O5zkOG7RVypvKScyK7h4O', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 28, 'prompt_tokens': 2326, 'total_tokens': 2354, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--cc5e420a-d56f-4a3c-a14f-aab0d041316c-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_Rt5O5zkOG7RVypvKScyK7h4O', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2326, 'output_tokens': 28, 'total_tokens': 2354, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:43,542 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LZxovJ5sYD88APJ5swmTvKZH', 'function': {'arguments': '{"relative_path":"src/css/Stylesheet.ts"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 162, 'prompt_tokens': 6165, 'total_tokens': 6327, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--34b037a0-f0fd-4480-8a2c-7a1dbbdc03bb-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'src/css/Stylesheet.ts'}, 'id': 'call_LZxovJ5sYD88APJ5swmTvKZH', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6165, 'output_tokens': 162, 'total_tokens': 6327, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:17:44,739 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_YQACF5Avs3XzZoypI1G7zG2O', 'function': {'arguments': '{"relative_path":"src/css/Stylesheet.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 6243, 'total_tokens': 6272, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6c11d159-519d-4dff-b3bc-649f9cac2305-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/Stylesheet.ts'}, 'id': 'call_YQACF5Avs3XzZoypI1G7zG2O', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6243, 'output_tokens': 29, 'total_tokens': 6272, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:46,119 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_MyhrqXcduyPcEJA9eTh14UQQ', 'function': {'arguments': '{"relative_path":"src/css/gatherPossibleValues.ts"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 11422, 'total_tokens': 11451, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a68095d7-5e6f-4a46-ba35-08f768e5feba-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'src/css/gatherPossibleValues.ts'}, 'id': 'call_MyhrqXcduyPcEJA9eTh14UQQ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11422, 'output_tokens': 29, 'total_tokens': 11451, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:47,572 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_lHSXibwQVC6vNeCJ4XCef6KW', 'function': {'arguments': '{"relative_path":"src/css/gatherPossibleValues.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 30, 'prompt_tokens': 11504, 'total_tokens': 11534, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f682c190-7bab-4b47-99f8-aad7acbcfb77-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/css/gatherPossibleValues.ts'}, 'id': 'call_lHSXibwQVC6vNeCJ4XCef6KW', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11504, 'output_tokens': 30, 'total_tokens': 11534, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:48,733 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_gz1SNekD2dSBgS8gsJOmMGqi', 'function': {'arguments': '{"relative_path":"src/generators/dom/index.ts"}', 'name': 'find_file_node_with_relative_path'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 11779, 'total_tokens': 11808, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2048}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--0fc05651-18df-4e36-acd6-a3f9254cff4c-0' tool_calls=[{'name': 'find_file_node_with_relative_path', 'args': {'relative_path': 'src/generators/dom/index.ts'}, 'id': 'call_gz1SNekD2dSBgS8gsJOmMGqi', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11779, 'output_tokens': 29, 'total_tokens': 11808, 'input_token_details': {'audio': 0, 'cache_read': 2048}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:50,210 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_UjvCGJ8uViNrTOUsYkXpfEd9', 'function': {'arguments': '{"relative_path":"src/generators/dom/index.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 30, 'prompt_tokens': 11858, 'total_tokens': 11888, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5a333b86-7f7f-49f5-af90-58a6bc5e8075-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/generators/dom/index.ts'}, 'id': 'call_UjvCGJ8uViNrTOUsYkXpfEd9', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11858, 'output_tokens': 30, 'total_tokens': 11888, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:17:59,544 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_S2BL8xoQbrnqVbA5C3OZxyf4', 'function': {'arguments': '{"basename":"index.ts"}', 'name': 'find_file_node_with_basename'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 797, 'prompt_tokens': 17786, 'total_tokens': 18583, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b1a321fd-a2af-4686-9ce1-2e8c38f3e919-0' tool_calls=[{'name': 'find_file_node_with_basename', 'args': {'basename': 'index.ts'}, 'id': 'call_S2BL8xoQbrnqVbA5C3OZxyf4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 17786, 'output_tokens': 797, 'total_tokens': 18583, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:18:07,141 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_fmUgrkkLBUsEnqLYaoexb6yz', 'function': {'arguments': '{"relative_path":"src/index.ts"}', 'name': 'read_file_with_knowledge_graph_data'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 672, 'prompt_tokens': 18001, 'total_tokens': 18673, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b451ac1d-6286-4e81-80d8-086dfc188fa2-0' tool_calls=[{'name': 'read_file_with_knowledge_graph_data', 'args': {'relative_path': 'src/index.ts'}, 'id': 'call_fmUgrkkLBUsEnqLYaoexb6yz', 'type': 'tool_call'}] usage_metadata={'input_tokens': 18001, 'output_tokens': 672, 'total_tokens': 18673, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-11-11 00:18:16,862 - thread-133013312636608.prometheus.lang_graph.nodes.context_provider_node - DEBUG - content='I located and read the full src/css/Selector.ts (including constructor, apply, transform, validate, the operators map, and attributeMatches) and src/css/Stylesheet.ts (including the Rule, Declaration, and Atrule classes, plus Stylesheet constructor/properties and apply). I also retrieved the complete src/css/gatherPossibleValues.ts with the UNKNOWN constant and its implementation. Finally, I opened src/generators/dom/index.ts to confirm how generator.stylesheet is used, and found the exact instantiation of the Stylesheet in src/index.ts (new Stylesheet(...)).' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 959, 'prompt_tokens': 18905, 'total_tokens': 19864, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 832, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 11392}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--129fba0c-2955-4fec-9dc2-82694bbad6ec-0' usage_metadata={'input_tokens': 18905, 'output_tokens': 959, 'total_tokens': 19864, 'input_token_details': {'audio': 0, 'cache_read': 11392}, 'output_token_details': {'audio': 0, 'reasoning': 832}}
2025-11-11 00:18:16,866 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - This is the query you need to answer:

--- BEGIN QUERY ---
Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).
--- END QUERY ---

--- BEGIN EXTRA REQUIREMENTS ---
If full files are too large, include at minimum: Selector constructor/apply/transform/validate, operators and attributeMatches; Stylesheet constructor/properties and apply; Declaration class; gatherPossibleValues implementation and UNKNOWN; and the snippet creating the Stylesheet instance.
--- END EXTRA REQUIREMENTS ---

--- BEGIN PURPOSE ---
This will let me trace attribute selector handling end-to-end and follow imports to the DOM preprocessing to identify and document the operator=null presence-only selector behavior and propose a precise fix.
--- END PURPOSE ---

The context or file content that you have seen so far (Some of the context may be IRRELEVANT to the query!!!):

--- BEGIN CONTEXT ---
File: src/css/Selector.ts
Line number range: 1 - 302
Content:
1. import MagicString from 'magic-string';
2. import { gatherPossibleValues, UNKNOWN } from './gatherPossibleValues';
3. import { Validator } from '../validate/index';
4. import { Node } from '../interfaces';
5. 
6. export default class Selector {
7. 	node: Node;
8. 	blocks: Block[];
9. 	localBlocks: Block[];
10. 	used: boolean;
11. 
12. 	constructor(node: Node) {
13. 		this.node = node;
14. 
15. 		this.blocks = groupSelectors(node);
16. 
17. 		// take trailing :global(...) selectors out of consideration
18. 		let i = this.blocks.length;
19. 		while (i > 0) {
20. 			if (!this.blocks[i - 1].global) break;
21. 			i -= 1;
22. 		}
23. 
24. 		this.localBlocks = this.blocks.slice(0, i);
25. 		this.used = this.blocks[0].global;
26. 	}
27. 
28. 	apply(node: Node, stack: Node[]) {
29. 		const toEncapsulate: Node[] = [];
30. 		applySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);
31. 
32. 		if (toEncapsulate.length > 0) {
33. 			toEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {
34. 				node._needsCssAttribute = true;
35. 				block.shouldEncapsulate = true;
36. 			});
37. 
38. 			this.used = true;
39. 		}
40. 	}
41. 
42. 	minify(code: MagicString) {
43. 		let c: number = null;
44. 		this.blocks.forEach((block, i) => {
45. 			if (i > 0) {
46. 				if (block.start - c > 1) {
47. 					code.overwrite(c, block.start, block.combinator.name || ' ');
48. 				}
49. 			}
50. 
51. 			c = block.end;
52. 		});
53. 	}
54. 
55. 	transform(code: MagicString, attr: string) {
56. 		function encapsulateBlock(block: Block) {
57. 			let i = block.selectors.length;
58. 			while (i--) {
59. 				const selector = block.selectors[i];
60. 				if (selector.type === 'PseudoElementSelector' || selector.type === 'PseudoClassSelector') continue;
61. 
62. 				if (selector.type === 'TypeSelector' && selector.name === '*') {
63. 					code.overwrite(selector.start, selector.end, attr);
64. 				} else {
65. 					code.appendLeft(selector.end, attr);
66. 				}
67. 
68. 				break;
69. 			}
70. 
71. 			i = block.selectors.length;
72. 			while (i--) {
73. 				const selector = block.selectors[i];
74. 
75. 				if (selector.type === 'RefSelector') {
76. 					code.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {
77. 						contentOnly: true,
78. 						storeName: false
79. 					});
80. 				}
81. 			}
82. 		}
83. 
84. 		this.blocks.forEach((block, i) => {
85. 			if (block.global) {
86. 				const selector = block.selectors[0];
87. 				const first = selector.children[0];
88. 				const last = selector.children[selector.children.length - 1];
89. 				code.remove(selector.start, first.start).remove(last.end, selector.end);
90. 			}
91. 
92. 			if (block.shouldEncapsulate) encapsulateBlock(block);
93. 		});
94. 	}
95. 
96. 	validate(validator: Validator) {
97. 		this.blocks.forEach((block) => {
98. 			let i = block.selectors.length;
99. 			while (i-- > 1) {
100. 				const selector = block.selectors[i];
101. 				if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
102. 					validator.error(`:global(...) must be the first element in a compound selector`, selector.start);
103. 				}
104. 			}
105. 		});
106. 
107. 		let start = 0;
108. 		let end = this.blocks.length;
109. 
110. 		for (; start < end; start += 1) {
111. 			if (!this.blocks[start].global) break;
112. 		}
113. 
114. 		for (; end > start; end -= 1) {
115. 			if (!this.blocks[end - 1].global) break;
116. 		}
117. 
118. 		for (let i = start; i < end; i += 1) {
119. 			if (this.blocks[i].global) {
120. 				validator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);
121. 			}
122. 		}
123. 	}
124. }
125. 
126. function isDescendantSelector(selector: Node) {
127. 	return selector.type === 'WhiteSpace' || selector.type === 'Combinator';
128. }
129. 
130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {
131. 	const block = blocks.pop();
132. 	if (!block) return false;
133. 
134. 	if (!node) {
135. 		return blocks.every(block => block.global);
136. 	}
137. 
138. 	let i = block.selectors.length;
139. 	let j = stack.length;
140. 
141. 	while (i--) {
142. 		const selector = block.selectors[i];
143. 
144. 		if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
145. 			// TODO shouldn't see this here... maybe we should enforce that :global(...)
146. 			// cannot be sandwiched between non-global selectors?
147. 			return false;
148. 		}
149. 
150. 		if (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {
151. 			continue;
152. 		}
153. 
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}
169. 
170. 		else if (selector.type === 'RefSelector') {
171. 			if (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {
172. 				node._cssRefAttribute = selector.name;
173. 				toEncapsulate.push({ node, block });
174. 				return true;
175. 			}
176. 			return;
177. 		}
178. 
179. 		else {
180. 			// bail. TODO figure out what these could be
181. 			toEncapsulate.push({ node, block });
182. 			return true;
183. 		}
184. 	}
185. 
186. 	if (block.combinator) {
187. 		if (block.combinator.type === 'WhiteSpace') {
188. 			while (stack.length) {
189. 				if (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {
190. 					toEncapsulate.push({ node, block });
191. 					return true;
192. 				}
193. 			}
194. 
195. 			return false;
196. 		} else if (block.combinator.name === '>') {
197. 			if (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {
198. 				toEncapsulate.push({ node, block });
199. 				return true;
200. 			}
201. 			return false;
202. 		}
203. 
204. 		// TODO other combinators
205. 		toEncapsulate.push({ node, block });
206. 		return true;
207. 	}
208. 
209. 	toEncapsulate.push({ node, block });
210. 	return true;
211. }
212. 
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };
221. 
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }
243. 
244. function isDynamic(value: Node) {
245. 	return value.length > 1 || value[0].type !== 'Text';
246. }
247. 
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }
256. 
257. class Block {
258. 	global: boolean;
259. 	combinator: Node;
260. 	selectors: Node[]
261. 	start: number;
262. 	end: number;
263. 	shouldEncapsulate: boolean;
264. 
265. 	constructor(combinator: Node) {
266. 		this.combinator = combinator;
267. 		this.global = false;
268. 		this.selectors = [];
269. 
270. 		this.start = null;
271. 		this.end = null;
272. 
273. 		this.shouldEncapsulate = false;
274. 	}
275. 
276. 	add(selector: Node) {
277. 		if (this.selectors.length === 0) {
278. 			this.start = selector.start;
279. 			this.global = selector.type === 'PseudoClassSelector' && selector.name === 'global';
280. 		}
281. 
282. 		this.selectors.push(selector);
283. 		this.end = selector.end;
284. 	}
285. }
286. 
287. function groupSelectors(selector: Node) {
288. 	let block: Block = new Block(null);
289. 
290. 	const blocks = [block];
291. 
292. 	selector.children.forEach((child: Node, i: number) => {
293. 		if (child.type === 'WhiteSpace' || child.type === 'Combinator') {
294. 			block = new Block(child);
295. 			blocks.push(block);
296. 		} else {
297. 			block.add(child);
298. 		}
299. 	});
300. 
301. 	return blocks;
302. }


File: src/css/Stylesheet.ts
Line number range: 1 - 422
Content:
1. import MagicString from 'magic-string';
2. import { walk } from 'estree-walker';
3. import { getLocator } from 'locate-character';
4. import Selector from './Selector';
5. import getCodeFrame from '../utils/getCodeFrame';
6. import { Validator } from '../validate/index';
7. import { Node, Parsed, Warning } from '../interfaces';
8. 
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }
114. 
115. class Declaration {
116. 	node: Node;
117. 
118. 	constructor(node: Node) {
119. 		this.node = node;
120. 	}
121. 
122. 	transform(code: MagicString, keyframes: Map<string, string>) {
123. 		const property = this.node.property && this.node.property.toLowerCase();
124. 		if (property === 'animation' || property === 'animation-name') {
125. 			this.node.value.children.forEach((block: Node) => {
126. 				if (block.type === 'Identifier') {
127. 					const name = block.name;
128. 					if (keyframes.has(name)) {
129. 						code.overwrite(block.start, block.end, keyframes.get(name));
130. 					}
131. 				}
132. 			});
133. 		}
134. 	}
135. 
136. 	minify(code: MagicString) {
137. 		if (!this.node.property) return; // @apply, and possibly other weird cases?
138. 
139. 		const c = this.node.start + this.node.property.length;
140. 		const first = this.node.value.children  ?
141. 			this.node.value.children[0] :
142. 			this.node.value;
143. 
144. 		let start = first.start;
145. 		while (/\s/.test(code.original[start])) start += 1;
146. 
147. 		if (start - c > 1) {
148. 			code.overwrite(c, start, ':');
149. 		}
150. 	}
151. }
152. 
153. class Atrule {
154. 	node: Node;
155. 	children: (Atrule|Rule)[];
156. 
157. 	constructor(node: Node) {
158. 		this.node = node;
159. 		this.children = [];
160. 	}
161. 
162. 	apply(node: Node, stack: Node[]) {
163. 		if (this.node.name === 'media') {
164. 			this.children.forEach(child => {
165. 				child.apply(node, stack);
166. 			});
167. 		}
168. 
169. 		else if (this.node.name === 'keyframes') {
170. 			this.children.forEach((rule: Rule) => {
171. 				rule.selectors.forEach(selector => {
172. 					selector.used = true;
173. 				});
174. 			});
175. 		}
176. 	}
177. 
178. 	isUsed() {
179. 		return true; // TODO
180. 	}
181. 
182. 	minify(code: MagicString, cascade: boolean) {
183. 		if (this.node.name === 'media') {
184. 			const expressionChar = code.original[this.node.expression.start];
185. 			let c = this.node.start + (expressionChar === '(' ? 6 : 7);
186. 			if (this.node.expression.start > c) code.remove(c, this.node.expression.start);
187. 
188. 			this.node.expression.children.forEach((query: Node) => {
189. 				// TODO minify queries
190. 				c = query.end;
191. 			});
192. 
193. 			code.remove(c, this.node.block.start);
194. 		} else if (this.node.name === 'keyframes') {
195. 			let c = this.node.start + 10;
196. 			if (this.node.expression.start - c > 1) code.overwrite(c, this.node.expression.start, ' ');
197. 			c = this.node.expression.end;
198. 			if (this.node.block.start - c > 0) code.remove(c, this.node.block.start);
199. 		}
200. 
201. 		// TODO other atrules
202. 
203. 		if (this.node.block) {
204. 			let c = this.node.block.start + 1;
205. 
206. 			this.children.forEach(child => {
207. 				if (cascade || child.isUsed()) {
208. 					code.remove(c, child.node.start);
209. 					child.minify(code, cascade);
210. 					c = child.node.end;
211. 				}
212. 			});
213. 
214. 			code.remove(c, this.node.block.end - 1);
215. 		}
216. 	}
217. 
218. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
219. 		if (this.node.name === 'keyframes') {
220. 			this.node.expression.children.forEach(({ type, name, start, end }: Node) => {
221. 				if (type === 'Identifier') {
222. 					if (name.startsWith('-global-')) {
223. 						code.remove(start, start + 8);
224. 					} else {
225. 						code.overwrite(start, end, keyframes.get(name));
226. 					}
227. 				}
228. 			});
229. 		}
230. 
231. 		this.children.forEach(child => {
232. 			child.transform(code, id, keyframes, cascade);
233. 		})
234. 	}
235. 
236. 	validate(validator: Validator) {
237. 		this.children.forEach(child => {
238. 			child.validate(validator);
239. 		});
240. 	}
241. 
242. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
243. 		if (this.node.name !== 'media') return;
244. 
245. 		this.children.forEach(child => {
246. 			child.warnOnUnusedSelector(handler);
247. 		});
248. 	}
249. }
250. 
251. const keys = {};
252. 
253. export default class Stylesheet {
254. 	source: string;
255. 	parsed: Parsed;
256. 	cascade: boolean;
257. 	filename: string;
258. 
259. 	hasStyles: boolean;
260. 	id: string;
261. 
262. 	children: (Rule|Atrule)[];
263. 	keyframes: Map<string, string>;
264. 
265. 	constructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {
266. 		this.source = source;
267. 		this.parsed = parsed;
268. 		this.cascade = cascade;
269. 		this.filename = filename;
270. 
271. 		this.id = `svelte-${parsed.hash}`;
272. 
273. 		this.children = [];
274. 		this.keyframes = new Map();
275. 
276. 		if (parsed.css && parsed.css.children.length) {
277. 			this.hasStyles = true;
278. 
279. 			const stack: (Rule | Atrule)[] = [];
280. 			let currentAtrule: Atrule = null;
281. 
282. 			walk(this.parsed.css, {
283. 				enter: (node: Node) => {
284. 					if (node.type === 'Atrule') {
285. 						const last = stack[stack.length - 1];
286. 
287. 						const atrule = new Atrule(node);
288. 						stack.push(atrule);
289. 
290. 						// this is an awkward special case — @apply (and
291. 						// possibly other future constructs)
292. 						if (last && !(last instanceof Atrule)) return;
293. 
294. 						if (currentAtrule) {
295. 							currentAtrule.children.push(atrule);
296. 						} else {
297. 							this.children.push(atrule);
298. 						}
299. 
300. 						if (node.name === 'keyframes') {
301. 							node.expression.children.forEach((expression: Node) => {
302. 								if (expression.type === 'Identifier' && !expression.name.startsWith('-global-')) {
303. 									this.keyframes.set(expression.name, `${this.id}-${expression.name}`);
304. 								}
305. 							});
306. 						}
307. 
308. 						currentAtrule = atrule;
309. 					}
310. 
311. 					if (node.type === 'Rule') {
312. 						const rule = new Rule(node, currentAtrule);
313. 						stack.push(rule);
314. 
315. 						if (currentAtrule) {
316. 							currentAtrule.children.push(rule);
317. 						} else {
318. 							this.children.push(rule);
319. 						}
320. 					}
321. 				},
322. 
323. 				leave: (node: Node) => {
324. 					if (node.type === 'Rule' || node.type === 'Atrule') stack.pop();
325. 					if (node.type === 'Atrule') currentAtrule = stack[stack.length - 1];
326. 				}
327. 			});
328. 		} else {
329. 			this.hasStyles = false;
330. 		}
331. 	}
332. 
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}
346. 
347. 	render(cssOutputFilename: string, shouldTransformSelectors: boolean) {
348. 		if (!this.hasStyles) {
349. 			return { css: null, cssMap: null };
350. 		}
351. 
352. 		const code = new MagicString(this.source);
353. 
354. 		walk(this.parsed.css, {
355. 			enter: (node: Node) => {
356. 				code.addSourcemapLocation(node.start);
357. 				code.addSourcemapLocation(node.end);
358. 			}
359. 		});
360. 
361. 		if (shouldTransformSelectors) {
362. 			this.children.forEach((child: (Atrule|Rule)) => {
363. 				child.transform(code, this.id, this.keyframes, this.cascade);
364. 			});
365. 		}
366. 
367. 		let c = 0;
368. 		this.children.forEach(child => {
369. 			if (this.cascade || child.isUsed()) {
370. 				code.remove(c, child.node.start);
371. 				child.minify(code, this.cascade);
372. 				c = child.node.end;
373. 			}
374. 		});
375. 
376. 		code.remove(c, this.source.length);
377. 
378. 		return {
379. 			css: code.toString(),
380. 			cssMap: code.generateMap({
381. 				includeContent: true,
382. 				source: this.filename,
383. 				file: cssOutputFilename
384. 			})
385. 		};
386. 	}
387. 
388. 	validate(validator: Validator) {
389. 		this.children.forEach(child => {
390. 			child.validate(validator);
391. 		});
392. 	}
393. 
394. 	warnOnUnusedSelectors(onwarn: (warning: Warning) => void) {
395. 		if (this.cascade) return;
396. 
397. 		let locator;
398. 
399. 		const handler = (selector: Selector) => {
400. 			const pos = selector.node.start;
401. 
402. 			if (!locator) locator = getLocator(this.source);
403. 			const { line, column } = locator(pos);
404. 
405. 			const frame = getCodeFrame(this.source, line, column);
406. 			const message = `Unused CSS selector`;
407. 
408. 			onwarn({
409. 				message,
410. 				frame,
411. 				loc: { line: line + 1, column },
412. 				pos,
413. 				filename: this.filename,
414. 				toString: () => `${message} (${line + 1}:${column})\n${frame}`,
415. 			});
416. 		};
417. 
418. 		this.children.forEach(child => {
419. 			child.warnOnUnusedSelector(handler);
420. 		});
421. 	}
422. }


File: src/css/gatherPossibleValues.ts
Line number range: 1 - 18
Content:
1. import { Node } from '../interfaces';
2. 
3. export const UNKNOWN = {};
4. 
5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {
6. 	if (node.type === 'Literal') {
7. 		set.add(node.value);
8. 	}
9. 
10. 	else if (node.type === 'ConditionalExpression') {
11. 		gatherPossibleValues(node.consequent, set);
12. 		gatherPossibleValues(node.alternate, set);
13. 	}
14. 
15. 	else {
16. 		set.add(UNKNOWN);
17. 	}
18. }


File: src/generators/dom/index.ts
Line number range: 1 - 437
Content:
1. import MagicString from 'magic-string';
2. import { parseExpressionAt } from 'acorn';
3. import annotateWithScopes from '../../utils/annotateWithScopes';
4. import isReference from '../../utils/isReference';
5. import { walk } from 'estree-walker';
6. import deindent from '../../utils/deindent';
7. import { stringify, escape } from '../../utils/stringify';
8. import CodeBuilder from '../../utils/CodeBuilder';
9. import reservedNames from '../../utils/reservedNames';
10. import visit from './visit';
11. import shared from './shared';
12. import Generator from '../Generator';
13. import Stylesheet from '../../css/Stylesheet';
14. import preprocess from './preprocess';
15. import Block from './Block';
16. import { version } from '../../../package.json';
17. import { Parsed, CompileOptions, Node } from '../../interfaces';
18. 
19. const test = typeof global !== 'undefined' && global.__svelte_test;
20. 
21. export class DomGenerator extends Generator {
22. 	blocks: (Block|string)[];
23. 	readonly: Set<string>;
24. 	metaBindings: string[];
25. 
26. 	hydratable: boolean;
27. 	legacy: boolean;
28. 
29. 	hasIntroTransitions: boolean;
30. 	hasOutroTransitions: boolean;
31. 	hasComplexBindings: boolean;
32. 
33. 	needsEncapsulateHelper: boolean;
34. 
35. 	constructor(
36. 		parsed: Parsed,
37. 		source: string,
38. 		name: string,
39. 		stylesheet: Stylesheet,
40. 		options: CompileOptions
41. 	) {
42. 		super(parsed, source, name, stylesheet, options, true);
43. 		this.blocks = [];
44. 
45. 		this.readonly = new Set();
46. 
47. 		this.hydratable = options.hydratable;
48. 		this.legacy = options.legacy;
49. 		this.needsEncapsulateHelper = false;
50. 
51. 		// initial values for e.g. window.innerWidth, if there's a <:Window> meta tag
52. 		this.metaBindings = [];
53. 	}
54. 
55. 	getUniqueNameMaker(params: string[]) {
56. 		const localUsedNames = new Set(params);
57. 
58. 		function add(name: string) {
59. 			localUsedNames.add(name);
60. 		}
61. 
62. 		reservedNames.forEach(add);
63. 		this.userVars.forEach(add);
64. 		for (const name in shared) {
65. 			localUsedNames.add(test ? `${name}$` : name);
66. 		}
67. 
68. 		return (name: string) => {
69. 			if (test) name = `${name}$`;
70. 			let alias = name;
71. 			for (
72. 				let i = 1;
73. 				this.usedNames.has(alias) ||
74. 				localUsedNames.has(alias);
75. 				alias = `${name}_${i++}`
76. 			);
77. 			localUsedNames.add(alias);
78. 			return alias;
79. 		};
80. 	}
81. }
82. 
83. export default function dom(
84. 	parsed: Parsed,
85. 	source: string,
86. 	stylesheet: Stylesheet,
87. 	options: CompileOptions
88. ) {
89. 	const format = options.format || 'es';
90. 
91. 	const generator = new DomGenerator(parsed, source, options.name || 'SvelteComponent', stylesheet, options);
92. 
93. 	const {
94. 		computations,
95. 		name,
96. 		templateProperties,
97. 		namespace,
98. 	} = generator;
99. 
100. 	const { block, state } = preprocess(generator, namespace, parsed.html);
101. 
102. 	generator.stylesheet.warnOnUnusedSelectors(options.onwarn);
103. 
104. 	parsed.html.children.forEach((node: Node) => {
105. 		visit(generator, block, state, node, [], []);
106. 	});
107. 
108. 	const builder = new CodeBuilder();
109. 	const computationBuilder = new CodeBuilder();
110. 	const computationDeps = new Set();
111. 
112. 	if (computations.length) {
113. 		computations.forEach(({ key, deps }) => {
114. 			deps.forEach(dep => {
115. 				computationDeps.add(dep);
116. 			});
117. 
118. 			if (generator.readonly.has(key)) {
119. 				// <:Window> bindings
120. 				throw new Error(
121. 					`Cannot have a computed value '${key}' that clashes with a read-only property`
122. 				);
123. 			}
124. 
125. 			generator.readonly.add(key);
126. 
127. 			const condition = `${deps.map(dep => `changed.${dep}`).join(' || ')}`;
128. 
129. 			const statement = `if (@differs(state.${key}, (state.${key} = %computed-${key}(${deps
130. 				.map(dep => `state.${dep}`)
131. 				.join(', ')})))) changed.${key} = true;`;
132. 
133. 			computationBuilder.addConditional(condition, statement);
134. 		});
135. 	}
136. 
137. 	if (generator.javascript) {
138. 		builder.addBlock(generator.javascript);
139. 	}
140. 
141. 	if (generator.needsEncapsulateHelper) {
142. 		builder.addBlock(deindent`
143. 			function @encapsulateStyles(node) {
144. 				@setAttribute(node, "${generator.stylesheet.id}", "");
145. 			}
146. 		`);
147. 	}
148. 
149. 	const { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);
150. 	const styles = generator.stylesheet.hasStyles && stringify(options.dev ?
151. 		`${css}\n/*# sourceMappingURL=${cssMap.toUrl()} */` :
152. 		css, { onlyEscapeAtSymbol: true });
153. 
154. 	if (styles && generator.options.css !== false && !generator.customElement) {
155. 		builder.addBlock(deindent`
156. 			function @add_css() {
157. 				var style = @createElement("style");
158. 				style.id = '${generator.stylesheet.id}-style';
159. 				style.textContent = ${styles};
160. 				@appendNode(style, document.head);
161. 			}
162. 		`);
163. 	}
164. 
165. 	generator.blocks.forEach(block => {
166. 		builder.addBlock(block.toString());
167. 	});
168. 
169. 	const sharedPath = options.shared === true
170. 		? 'svelte/shared.js'
171. 		: options.shared;
172. 
173. 	const prototypeBase =
174. 		`${name}.prototype` +
175. 		(templateProperties.methods ? `, %methods` : '');
176. 	const proto = sharedPath
177. 		? `@proto`
178. 		: deindent`
179. 		{
180. 			${['destroy', 'get', 'fire', 'observe', 'on', 'set', 'teardown', '_set', '_mount', '_unmount']
181. 				.map(n => `${n}: @${n === 'teardown' ? 'destroy' : n}`)
182. 				.join(',\n')}
183. 		}`;
184. 
185. 	const debugName = `<${generator.customElement ? generator.tag : name}>`;
186. 
187. 	const constructorBody = deindent`
188. 		${options.dev && `this._debugName = '${debugName}';`}
189. 		${options.dev && !generator.customElement &&
190. 			`if (!options || (!options.target && !options._root)) throw new Error("'target' is a required option");`}
191. 		@init(this, options);
192. 		${generator.usesRefs && `this.refs = {};`}
193. 		this._state = @assign(${templateProperties.data ? '%data()' : '{}'}, options.data);
194. 		${generator.metaBindings}
195. 		${computations.length && `this._recompute({ ${Array.from(computationDeps).map(dep => `${dep}: 1`).join(', ')} }, this._state);`}
196. 		${options.dev &&
197. 			Array.from(generator.expectedProperties).map(
198. 				prop =>
199. 					`if (!('${prop}' in this._state)) console.warn("${debugName} was created without expected data property '${prop}'");`
200. 			)}
201. 		${generator.bindingGroups.length &&
202. 			`this._bindingGroups = [${Array(generator.bindingGroups.length).fill('[]').join(', ')}];`}
203. 
204. 		${templateProperties.ondestroy && `this._handlers.destroy = [%ondestroy]`}
205. 
206. 		${generator.slots.size && `this._slotted = options.slots || {};`}
207. 
208. 		${generator.customElement ?
209. 			deindent`
210. 				this.attachShadow({ mode: 'open' });
211. 				${css && `this.shadowRoot.innerHTML = \`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\/g, '\\\\')}${options.dev ? `\n/*# sourceMappingURL=${cssMap.toUrl()} */` : ''}</style>\`;`}
212. 			` :
213. 			(generator.stylesheet.hasStyles && options.css !== false &&
214. 			`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)
215. 		}
216. 
217. 		${templateProperties.oncreate && `var _oncreate = %oncreate.bind(this);`}
218. 
219. 		${(templateProperties.oncreate || generator.hasComponents || generator.hasComplexBindings || generator.hasIntroTransitions) && deindent`
220. 			if (!options._root) {
221. 				this._oncreate = [${templateProperties.oncreate && `_oncreate`}];
222. 				${(generator.hasComponents || generator.hasComplexBindings) && `this._beforecreate = [];`}
223. 				${(generator.hasComponents || generator.hasIntroTransitions) && `this._aftercreate = [];`}
224. 			} ${templateProperties.oncreate && deindent`
225. 				else {
226. 					this._root._oncreate.push(_oncreate);
227. 				}
228. 			`}
229. 		`}
230. 
231. 		${generator.slots.size && `this.slots = {};`}
232. 
233. 		this._fragment = @create_main_fragment(this._state, this);
234. 
235. 		${generator.customElement ? deindent`
236. 			this._fragment.c();
237. 			this._fragment.${block.hasIntroMethod ? 'i' : 'm'}(this.shadowRoot, null);
238. 
239. 			if (options.target) this._mount(options.target, options.anchor || null);
240. 		` : deindent`
241. 			if (options.target) {
242. 				${generator.hydratable
243. 					? deindent`
244. 						var nodes = @children(options.target);
245. 						options.hydrate ? this._fragment.l(nodes) : this._fragment.c();
246. 						nodes.forEach(@detachNode);
247. 					` :
248. 					deindent`
249. 						${options.dev && `if (options.hydrate) throw new Error("options.hydrate only works if the component was compiled with the \`hydratable: true\` option");`}
250. 						this._fragment.c();
251. 					`}
252. 				this._fragment.${block.hasIntroMethod ? 'i' : 'm'}(options.target, options.anchor || null);
253. 
254. 				${(generator.hasComponents || generator.hasComplexBindings || templateProperties.oncreate || generator.hasIntroTransitions) && deindent`
255. 					${generator.hasComponents && `this._lock = true;`}
256. 					${(generator.hasComponents || generator.hasComplexBindings) && `@callAll(this._beforecreate);`}
257. 					${(generator.hasComponents || templateProperties.oncreate) && `@callAll(this._oncreate);`}
258. 					${(generator.hasComponents || generator.hasIntroTransitions) && `@callAll(this._aftercreate);`}
259. 					${generator.hasComponents && `this._lock = false;`}
260. 				`}
261. 			}
262. 		`}
263. 	`;
264. 
265. 	if (generator.customElement) {
266. 		const props = generator.props || Array.from(generator.expectedProperties);
267. 
268. 		builder.addBlock(deindent`
269. 			class ${name} extends HTMLElement {
270. 				constructor(options = {}) {
271. 					super();
272. 					${constructorBody}
273. 				}
274. 
275. 				static get observedAttributes() {
276. 					return ${JSON.stringify(props)};
277. 				}
278. 
279. 				${props.map(prop => deindent`
280. 					get ${prop}() {
281. 						return this.get('${prop}');
282. 					}
283. 
284. 					set ${prop}(value) {
285. 						this.set({ ${prop}: value });
286. 					}
287. 				`).join('\n\n')}
288. 
289. 				${generator.slots.size && deindent`
290. 					connectedCallback() {
291. 						Object.keys(this._slotted).forEach(key => {
292. 							this.appendChild(this._slotted[key]);
293. 						});
294. 					}`}
295. 
296. 				attributeChangedCallback(attr, oldValue, newValue) {
297. 					this.set({ [attr]: newValue });
298. 				}
299. 			}
300. 
301. 			customElements.define("${generator.tag}", ${name});
302. 			@assign(${prototypeBase}, ${proto}, {
303. 				_mount(target, anchor) {
304. 					target.insertBefore(this, anchor);
305. 				},
306. 
307. 				_unmount() {
308. 					this.parentNode.removeChild(this);
309. 				}
310. 			});
311. 		`);
312. 	} else {
313. 		builder.addBlock(deindent`
314. 			function ${name}(options) {
315. 				${constructorBody}
316. 			}
317. 
318. 			@assign(${prototypeBase}, ${proto});
319. 		`);
320. 	}
321. 
322. 	builder.addBlock(deindent`
323. 		${options.dev && deindent`
324. 			${name}.prototype._checkReadOnly = function _checkReadOnly(newState) {
325. 				${Array.from(generator.readonly).map(
326. 					prop =>
327. 						`if ('${prop}' in newState && !this._updatingReadonlyProperty) throw new Error("${debugName}: Cannot set read-only property '${prop}'");`
328. 				)}
329. 			};
330. 		`}
331. 
332. 		${computations.length ? deindent`
333. 			${name}.prototype._recompute = function _recompute(changed, state) {
334. 				${computationBuilder}
335. 			}
336. 		` : (!sharedPath && `${name}.prototype._recompute = @noop;`)}
337. 
338. 		${templateProperties.setup && `%setup(${name});`}
339. 	`);
340. 
341. 	const usedHelpers = new Set();
342. 
343. 	let result = builder
344. 		.toString()
345. 		.replace(/(%+|@+)(\w*(?:-\w*)?)/g, (match: string, sigil: string, name: string) => {
346. 			if (sigil === '@') {
347. 				if (name in shared) {
348. 					if (options.dev && `${name}Dev` in shared) name = `${name}Dev`;
349. 					usedHelpers.add(name);
350. 				}
351. 
352. 				return generator.alias(name);
353. 			}
354. 
355. 			if (sigil === '%') {
356. 				return generator.templateVars.get(name);
357. 			}
358. 
359. 			return sigil.slice(1) + name;
360. 		});
361. 
362. 	let helpers;
363. 
364. 	if (sharedPath) {
365. 		if (format !== 'es' && format !== 'cjs') {
366. 			throw new Error(`Components with shared helpers must be compiled with \`format: 'es'\` or \`format: 'cjs'\``);
367. 		}
368. 		const used = Array.from(usedHelpers).sort();
369. 		helpers = used.map(name => {
370. 			const alias = generator.alias(name);
371. 			return { name, alias };
372. 		});
373. 	} else {
374. 		let inlineHelpers = '';
375. 
376. 		usedHelpers.forEach(key => {
377. 			const str = shared[key];
378. 			const code = new MagicString(str);
379. 			const expression = parseExpressionAt(str, 0);
380. 
381. 			let scope = annotateWithScopes(expression);
382. 
383. 			walk(expression, {
384. 				enter(node: Node, parent: Node) {
385. 					if (node._scope) scope = node._scope;
386. 
387. 					if (
388. 						node.type === 'Identifier' &&
389. 						isReference(node, parent) &&
390. 						!scope.has(node.name)
391. 					) {
392. 						if (node.name in shared) {
393. 							// this helper function depends on another one
394. 							const dependency = node.name;
395. 							usedHelpers.add(dependency);
396. 
397. 							const alias = generator.alias(dependency);
398. 							if (alias !== node.name)
399. 								code.overwrite(node.start, node.end, alias);
400. 						}
401. 					}
402. 				},
403. 
404. 				leave(node: Node) {
405. 					if (node._scope) scope = scope.parent;
406. 				},
407. 			});
408. 
409. 			if (key === 'transitionManager') {
410. 				// special case
411. 				const global = `_svelteTransitionManager`;
412. 
413. 				inlineHelpers += `\n\nvar ${generator.alias('transitionManager')} = window.${global} || (window.${global} = ${code});\n\n`;
414. 			} else {
415. 				const alias = generator.alias(expression.id.name);
416. 				if (alias !== expression.id.name)
417. 					code.overwrite(expression.id.start, expression.id.end, alias);
418. 
419. 				inlineHelpers += `\n\n${code}`;
420. 			}
421. 		});
422. 
423. 		result += inlineHelpers;
424. 	}
425. 
426. 	const filename = options.filename && (
427. 		typeof process !== 'undefined' ? options.filename.replace(process.cwd(), '').replace(/^[\/\\]/, '') : options.filename
428. 	);
429. 
430. 	return generator.generate(result, options, {
431. 		banner: `/* ${filename ? `${filename} ` : ``}generated by Svelte v${version} */`,
432. 		sharedPath,
433. 		helpers,
434. 		name,
435. 		format,
436. 	});
437. }


File: src/index.ts
Line number range: 1 - 78
Content:
1. import parse from './parse/index';
2. import validate from './validate/index';
3. import generate from './generators/dom/index';
4. import generateSSR from './generators/server-side-rendering/index';
5. import { assign } from './shared/index.js';
6. import { version } from '../package.json';
7. import Stylesheet from './css/Stylesheet';
8. import { Parsed, CompileOptions, Warning } from './interfaces';
9. 
10. function normalizeOptions(options: CompileOptions): CompileOptions {
11. 	let normalizedOptions = assign({ generate: 'dom' }, options);
12. 	const { onwarn, onerror } = normalizedOptions;
13. 	normalizedOptions.onwarn = onwarn
14. 		? (warning: Warning) => onwarn(warning, defaultOnwarn)
15. 		: defaultOnwarn;
16. 	normalizedOptions.onerror = onerror
17. 		? (error: Error) => onerror(error, defaultOnerror)
18. 		: defaultOnerror;
19. 	return normalizedOptions;
20. }
21. 
22. function defaultOnwarn(warning: Warning) {
23. 	if (warning.loc) {
24. 		console.warn(
25. 			`(${warning.loc.line}:${warning.loc.column}) – ${warning.message}`
26. 		); // eslint-disable-line no-console
27. 	} else {
28. 		console.warn(warning.message); // eslint-disable-line no-console
29. 	}
30. }
31. 
32. function defaultOnerror(error: Error) {
33. 	throw error;
34. }
35. 
36. export function compile(source: string, _options: CompileOptions) {
37. 	const options = normalizeOptions(_options);
38. 
39. 	let parsed: Parsed;
40. 
41. 	try {
42. 		parsed = parse(source, options);
43. 	} catch (err) {
44. 		options.onerror(err);
45. 		return;
46. 	}
47. 
48. 	const stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);
49. 
50. 	validate(parsed, source, stylesheet, options);
51. 
52. 	const compiler = options.generate === 'ssr' ? generateSSR : generate;
53. 
54. 	return compiler(parsed, source, stylesheet, options);
55. }
56. 
57. export function create(source: string, _options: CompileOptions = {}) {
58. 	_options.format = 'eval';
59. 
60. 	const compiled = compile(source, _options);
61. 
62. 	if (!compiled || !compiled.code) {
63. 		return;
64. 	}
65. 
66. 	try {
67. 		return (0,eval)(compiled.code);
68. 	} catch (err) {
69. 		if (_options.onerror) {
70. 			_options.onerror(err);
71. 			return;
72. 		} else {
73. 			throw err;
74. 		}
75. 	}
76. }
77. 
78. export { parse, validate, version as VERSION };

--- END CONTEXT ---

REMEMBER: Your task is to summarize the relevant contexts to the given query and return it in the specified format!

2025-11-11 00:18:45,978 - thread-133013312636608.prometheus.lang_graph.nodes.context_extraction_node - DEBUG - Model response: context=[ContextOutput(reasoning='1. Query requirement analysis: Selector constructor is explicitly requested; it sets up blocks, localBlocks, and the used flag based on :global, which is essential for understanding selector application.\n2. Extended relevance: It depends on groupSelectors and establishes the subset of blocks that will be considered for encapsulation.', relative_path='src/css/Selector.ts', start_line=12, end_line=26), ContextOutput(reasoning='1. Query requirement analysis: Selector.apply is requested and is the entry point that triggers matching logic and marking blocks for encapsulation.\n2. Extended relevance: It calls applySelector, which performs attribute selector handling.', relative_path='src/css/Selector.ts', start_line=28, end_line=40), ContextOutput(reasoning='1. Query requirement analysis: Selector.transform is requested; it shows how encapsulation attributes are applied to matched blocks.\n2. Extended relevance: Demonstrates how selectors are rewritten, and handles :global stripping.', relative_path='src/css/Selector.ts', start_line=55, end_line=94), ContextOutput(reasoning='1. Query requirement analysis: Selector.validate is requested; validates :global placement.\n2. Extended relevance: Ensures correctness of selector sequences for understanding processing.', relative_path='src/css/Selector.ts', start_line=96, end_line=123), ContextOutput(reasoning='1. Query requirement analysis: Attribute selector handling is central; applySelector performs the per-block matching including combinators.\n2. Extended relevance: It calls attributeMatches for ClassSelector, IdSelector, and AttributeSelector, and handles RefSelector and TypeSelector cases.', relative_path='src/css/Selector.ts', start_line=130, end_line=211), ContextOutput(reasoning='1. Query requirement analysis: Operators object is explicitly requested; it defines the regex patterns used for attribute matching.\n2. Extended relevance: Necessary for attributeMatches to construct match patterns.', relative_path='src/css/Selector.ts', start_line=213, end_line=220), ContextOutput(reasoning='1. Query requirement analysis: attributeMatches is explicitly requested and is crucial to trace presence-only selectors (operator === null) and case-insensitive flags.\n2. Extended relevance: Shows behavior when attr.value === true returning operator === null, multi-part values, dynamic expressions via gatherPossibleValues and UNKNOWN.', relative_path='src/css/Selector.ts', start_line=222, end_line=242), ContextOutput(reasoning='1. Query requirement analysis: unquote is used in attributeMatches to normalize expectedValue from selector.\n2. Extended relevance: Essential dependency to correctly match attribute values.', relative_path='src/css/Selector.ts', start_line=248, end_line=255), ContextOutput(reasoning='1. Query requirement analysis: Selector constructor relies on groupSelectors; including it provides the block grouping logic.\n2. Extended relevance: Explains how combinators split compound selectors into blocks for matching.', relative_path='src/css/Selector.ts', start_line=287, end_line=302), ContextOutput(reasoning='1. Query requirement analysis: Declaration class is explicitly requested; needed to understand CSS property transformation and minification.\n2. Extended relevance: It rewrites animation names via keyframes map and normalizes colon spacing.', relative_path='src/css/Stylesheet.ts', start_line=115, end_line=151), ContextOutput(reasoning='1. Query requirement analysis: Stylesheet constructor/properties are explicitly requested; shows how the stylesheet is built from parsed CSS, including id and keyframes mapping.\n2. Extended relevance: Establishes hasStyles, cascade flag, children (rules/atrules), and keyframes used by declarations.', relative_path='src/css/Stylesheet.ts', start_line=251, end_line=331), ContextOutput(reasoning='1. Query requirement analysis: Stylesheet.apply is explicitly requested; applies selectors to nodes unless cascading is enabled.\n2. Extended relevance: Shows how nodes get _needsCssAttribute when cascade is true and how child rules are applied.', relative_path='src/css/Stylesheet.ts', start_line=333, end_line=345), ContextOutput(reasoning='1. Query requirement analysis: gatherPossibleValues full implementation including UNKNOWN constant is explicitly requested.\n2. Extended relevance: attributeMatches depends on this to decide dynamic expression matches.', relative_path='src/css/gatherPossibleValues.ts', start_line=1, end_line=18), ContextOutput(reasoning='1. Query requirement analysis: The file where generator.stylesheet is used and passed in is requested; DomGenerator constructor shows how the stylesheet is injected via super.\n2. Extended relevance: Confirms that generator.stylesheet is the Stylesheet instance provided to the DOM generator.', relative_path='src/generators/dom/index.ts', start_line=35, end_line=53), ContextOutput(reasoning='1. Query requirement analysis: The dom function shows where a DomGenerator is instantiated with the stylesheet.\n2. Extended relevance: Provides the exact snippet creating the generator and passing stylesheet through.', relative_path='src/generators/dom/index.ts', start_line=83, end_line=101), ContextOutput(reasoning='1. Query requirement analysis: Shows generator.stylesheet being invoked for warnings.\n2. Extended relevance: Confirms linkage from DomGenerator to stylesheet API.', relative_path='src/generators/dom/index.ts', start_line=102, end_line=103), ContextOutput(reasoning='1. Query requirement analysis: Shows generator.stylesheet.render being called and its output used.\n2. Extended relevance: Demonstrates how transformed/minified CSS is produced and consumed by DOM generator.', relative_path='src/generators/dom/index.ts', start_line=149, end_line=153), ContextOutput(reasoning='1. Query requirement analysis: Shows CSS injection using generator.stylesheet.id.\n2. Extended relevance: Confirms presence of id used to manage style tag deduplication.', relative_path='src/generators/dom/index.ts', start_line=154, end_line=163), ContextOutput(reasoning='1. Query requirement analysis: Shows custom element branch and, in non-custom-element branch, usage of generator.stylesheet.id-style in style injection.\n2. Extended relevance: Further confirms stylesheet id usage in runtime.', relative_path='src/generators/dom/index.ts', start_line=208, end_line=215), ContextOutput(reasoning='1. Query requirement analysis: The exact instantiation of the Stylesheet is requested; compile() constructs new Stylesheet.\n2. Extended relevance: This is the source of the Stylesheet instance later passed into the DOM generator.', relative_path='src/index.ts', start_line=36, end_line=55)]
2025-11-11 00:18:45,986 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Storing 20 contexts to memory for query: Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).
2025-11-11 00:18:46,579 - thread-133013312636608.prometheus.lang_graph.nodes.memory_storage_node - INFO - Successfully stored contexts to memory
2025-11-11 00:18:46,580 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - Adding 20 new contexts to 7 existing contexts
2025-11-11 00:18:46,581 - thread-133013312636608.prometheus.lang_graph.nodes.add_result_context_node - INFO - After deduplication: 22 total contexts (removed 5 duplicates)
2025-11-11 00:18:46,583 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - This is the codebase structure:
--- BEGIN FILE TREE ---
svelte
├── .github
|   ├── ISSUE_TEMPLATE.md
|   └── PULL_REQUEST_TEMPLATE.md
├── .travis.yml
├── CHANGELOG.md
├── README.md
├── appveyor.yml
├── rollup.config.js
├── src
|   ├── css
|   |   ├── Selector.ts
|   |   ├── Stylesheet.ts
|   |   └── gatherPossibleValues.ts
|   ├── generators
|   |   ├── Generator.ts
|   |   ├── dom
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── shared
|   |   ├── server-side-rendering
|   |   |   ├── Block.ts
|   |   |   ├── index.ts
|   |   |   ├── interfaces.ts
|   |   |   ├── preprocess.ts
|   |   |   ├── visit.ts
|   |   |   └── visitors
|   |   |       ├── Comment.ts
|   |   |       ├── Component.ts
|   |   |       ├── EachBlock.ts
|   |   |       ├── Element.ts
|   |   |       ├── IfBlock.ts
|   |   |       ├── MustacheTag.ts
|   |   |       ├── RawMustacheTag.ts
|   |   |       ├── Slot.ts
|   |   |       ├── Text.ts
|   |   |       ├── index.ts
|   |   |       └── meta
|   |   └── shared
|   |       └── utils
|   |           ├── isChildOfComponent.ts
|   |           ├── walkHtml.ts
|   |           └── wrapModule.ts
|   ├── index.ts
|   ├── interfaces.ts
|   ├── parse
|   |   ├── index.ts
|   |   ├── read
|   |   |   ├── directives.ts
|   |   |   ├── expression.ts
|   |   |   ├── script.ts
|   |   |   └── style.ts
|   |   ├── state
|   |   |   ├── fragment.ts
|   |   |   ├── mustache.ts
|   |   |   ├── tag.ts
|   |   |   └── text.ts
|   |   └── utils
|   |       ├── entities.ts
|   |       ├── hash.ts
|   |       └── html.ts
|   ├── server-side-rendering
|   |   └── register.js
|   ├── shared
|   |   ├── _build.js
|   |   ├── dom.js
|   |   ├── index.js
|   |   ├── transitions.js
|   |   └── utils.js
|   ├── utils
|   |   ├── CodeBuilder.ts
|   |   ├── CompileError.ts
|   |   ├── __test__.ts
|   |   ├── annotateWithScopes.ts
|   |   ├── clone.ts
|   |   ├── deindent.ts
|   |   ├── flattenReference.ts
|   |   ├── getCodeFrame.ts
|   |   ├── getExpressionPrecedence.ts
|   |   ├── getObject.ts
|   |   ├── getStaticAttributeValue.ts
|   |   ├── getTailSnippet.ts
|   |   ├── globalWhitelist.ts
|   |   ├── isReference.ts
|   |   ├── isVoidElementName.ts
|   |   ├── namespaces.ts
|   |   ├── patterns.ts
|   |   ├── removeNode.ts
|   |   ├── repeat.ts
|   |   ├── reservedNames.ts
|   |   ├── stringify.ts
|   |   ├── trim.ts
|   |   └── validCalleeObjects.ts
|   └── validate
|       ├── html
|       |   ├── a11y.ts
|       |   ├── index.ts
|       |   ├── validateElement.ts
|       |   ├── validateEventHandler.ts
|       |   └── validateWindow.ts
|       ├── index.ts
|       ├── js
|       |   ├── index.ts
|       |   ├── propValidators
|       |   |   ├── components.ts
|       |   |   ├── computed.ts
|       |   |   ├── data.ts
|       |   |   ├── events.ts
|       |   |   ├── helpers.ts
|       |   |   ├── index.ts
|       |   |   ├── methods.ts
|       |   |   ├── namespace.ts
|       |   |   ├── oncreate.ts
|       |   |   ├── ondestroy.ts
|       |   |   ├── onrender.ts
|       |   |   ├── onteardown.ts
|       |   |   ├── props.ts
|       |   |   ├── setup.ts
|       |   |   ├── tag.ts
|       |   |   └── transitions.ts
|       |   └── utils
|       |       ├── checkForAccessors.ts
|       |       ├── checkForComputedKeys.ts
|       |       ├── checkForDupes.ts
|       |       └── usesThisOrArguments.ts
|       └── utils
|           ├── FuzzySet.ts
|           ├── fuzzymatch.ts
|           └── list.ts
└── test
    ├── create
    |   └── index.js
    ├── css
    |   ├── index.js
    |   └── samples
    |       ├── attribute-selector-unquoted
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── basic
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-global-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-keyframes-from-to
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-pseudo-element
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── cascade-false-universal-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── combinator-child
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── css-vars
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── descendant-selector-non-top-level-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── keyframes
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── media-query-word
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── omit-scoping-attribute
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-contains
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-case-insensitive
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-equals-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-pipe-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-prefix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-suffix
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-attribute-selector-word-equals
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-dynamic
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-class-static
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-class
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-inner-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-descendant-global-outer-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-global
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-id
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── omit-scoping-attribute-whitespace-multiple
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── refs-qualified
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── universal-selector
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unknown-at-rule
    |       |   ├── expected.css
    |       |   └── input.html
    |       ├── unused-selector
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       ├── unused-selector-leading
    |       |   ├── _config.js
    |       |   ├── expected.css
    |       |   ├── expected.html
    |       |   └── input.html
    |       └── unused-selector-ternary
    |           ├── _config.js
    |           ├── expected.css
    |           ├── expected.html
    |           └── input.html
    ├── custom-elements
    |   ├── assert.js
    |   ├── index.js
    |   └── samples
    |       ├── escaped-css
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── html-slots
    |       |   ├── main.html
    |       |   └── test.js
    |       ├── new
    |       |   ├── main.html
    |       |   └── test.js
    |       └── new-styled
    |           ├── main.html
    |           └── test.js
    ├── formats
    |   └── index.js
    ├── helpers.js
    ├── hydration
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-in-element
    |       |   ├── Nested.html
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dynamic-text-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-added
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-changed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-removed
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-attribute-unchanged
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-nested
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-ref
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-anchor
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-update
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw
    |       |   ├── _after.html
    |       |   ├── _before.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── top-level-text
    |           ├── _after.html
    |           ├── _before.html
    |           ├── _config.js
    |           └── main.html
    ├── js
    |   ├── README.md
    |   ├── index.js
    |   ├── samples
    |   |   ├── collapses-text-around-comments
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── component-static
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── computed-collapsed-if
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-media-query
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── css-shadow-dom-keyframes
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── each-block-changed-check
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── event-handlers-custom
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-no-update
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── if-block-simple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-multiple
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-optimized-url
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── inline-style-unoptimized
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── input-without-blowback-guard
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-input-type
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── legacy-quote-class
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── media-bindings
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── non-imported-component
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── onrender-onteardown-rewritten
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── setup-method
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   ├── ssr-no-oncreate-etc
    |   |   |   ├── _config.js
    |   |   |   ├── expected-bundle.js
    |   |   |   ├── expected.js
    |   |   |   └── input.html
    |   |   └── use-elements-as-anchors
    |   |       ├── expected-bundle.js
    |   |       ├── expected.js
    |   |       └── input.html
    |   └── update.js
    ├── parser
    |   ├── index.js
    |   ├── samples
    |   |   ├── attribute-dynamic
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-dynamic-reserved
    |   |   |   └── input.html
    |   |   ├── attribute-escaped
    |   |   |   └── input.html
    |   |   ├── attribute-multiple
    |   |   |   └── input.html
    |   |   ├── attribute-shorthand
    |   |   |   └── input.html
    |   |   ├── attribute-static
    |   |   |   └── input.html
    |   |   ├── attribute-static-boolean
    |   |   |   └── input.html
    |   |   ├── attribute-unique-error
    |   |   |   └── input.html
    |   |   ├── attribute-unquoted
    |   |   |   └── input.html
    |   |   ├── binding
    |   |   |   └── input.html
    |   |   ├── binding-shorthand
    |   |   |   └── input.html
    |   |   ├── comment
    |   |   |   └── input.html
    |   |   ├── convert-entities
    |   |   |   └── input.html
    |   |   ├── convert-entities-in-element
    |   |   |   └── input.html
    |   |   ├── css
    |   |   |   └── input.html
    |   |   ├── css-ref-selector
    |   |   |   └── input.html
    |   |   ├── each-block
    |   |   |   └── input.html
    |   |   ├── each-block-destructured
    |   |   |   └── input.html
    |   |   ├── each-block-else
    |   |   |   └── input.html
    |   |   ├── each-block-indexed
    |   |   |   └── input.html
    |   |   ├── each-block-keyed
    |   |   |   └── input.html
    |   |   ├── element-with-mustache
    |   |   |   └── input.html
    |   |   ├── element-with-text
    |   |   |   └── input.html
    |   |   ├── elements
    |   |   |   └── input.html
    |   |   ├── error-binding-mustaches
    |   |   |   └── input.html
    |   |   ├── error-binding-rvalue
    |   |   |   └── input.html
    |   |   ├── error-css
    |   |   |   └── input.html
    |   |   ├── error-event-handler
    |   |   |   └── input.html
    |   |   ├── error-illegal-expression
    |   |   |   └── input.html
    |   |   ├── error-multiple-styles
    |   |   |   └── input.html
    |   |   ├── error-script-unclosed
    |   |   |   └── input.html
    |   |   ├── error-self-reference
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-b
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-c
    |   |   |   └── input.html
    |   |   ├── error-unexpected-end-of-input-d
    |   |   |   └── input.html
    |   |   ├── error-unmatched-closing-tag
    |   |   |   └── input.html
    |   |   ├── error-void-closing
    |   |   |   └── input.html
    |   |   ├── error-window-children
    |   |   |   └── input.html
    |   |   ├── error-window-duplicate
    |   |   |   └── input.html
    |   |   ├── error-window-inside-block
    |   |   |   └── input.html
    |   |   ├── error-window-inside-element
    |   |   |   └── input.html
    |   |   ├── event-handler
    |   |   |   └── input.html
    |   |   ├── if-block
    |   |   |   └── input.html
    |   |   ├── if-block-else
    |   |   |   └── input.html
    |   |   ├── if-block-elseif
    |   |   |   └── input.html
    |   |   ├── implicitly-closed-li
    |   |   |   └── input.html
    |   |   ├── nbsp
    |   |   |   └── input.html
    |   |   ├── raw-mustaches
    |   |   |   └── input.html
    |   |   ├── refs
    |   |   |   └── input.html
    |   |   ├── script
    |   |   |   └── input.html
    |   |   ├── script-comment-only
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing
    |   |   |   └── input.html
    |   |   ├── script-comment-trailing-multiline
    |   |   |   └── input.html
    |   |   ├── self-closing-element
    |   |   |   └── input.html
    |   |   ├── self-reference
    |   |   |   └── input.html
    |   |   ├── space-between-mustaches
    |   |   |   └── input.html
    |   |   ├── textarea-children
    |   |   |   └── input.html
    |   |   ├── transition-intro
    |   |   |   └── input.html
    |   |   ├── transition-intro-no-params
    |   |   |   └── input.html
    |   |   ├── whitespace-leading-trailing
    |   |   |   └── input.html
    |   |   ├── whitespace-normal
    |   |   |   └── input.html
    |   |   └── yield
    |   |       └── input.html
    |   └── update.js
    ├── runtime
    |   ├── index.js
    |   └── samples
    |       ├── attribute-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-reserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-dynamic-type
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-empty-svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-namespaced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-partial-number
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-prefer-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-at-symbol
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-boolean
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── attribute-static-quotemarks
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── autofocus
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-audio-currenttime-duration
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-indirect
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-checkbox-group-outside-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-number
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-radio-group
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-range-change
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-text-deep-contextual-computed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-input-with-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-in-yield
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-initial-value-undefined
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-late
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-select-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── binding-textarea
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-before-oncreate
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── bindings-coalesced
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-b
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-blowback-c
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-computed
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-conditional-b
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-deep-b
    |       |   ├── ComponentSelector.html
    |       |   ├── Editor.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-nested
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-each-object
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-infinite-loop
    |       |   ├── A.html
    |       |   ├── B.html
    |       |   ├── C.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-nested
    |       |   ├── Bar.html
    |       |   ├── Baz.html
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-binding-parent-supercedes-child
    |       |   ├── Counter.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-late
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-dynamic-shorthand
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-data-static-boolean
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-data
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-events-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-if-placement
    |       |   ├── Component.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deep
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-nested-deeper
    |       |   ├── Level1.html
    |       |   ├── Level2.html
    |       |   ├── Level3.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-not-void
    |       |   ├── Link.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-ref
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-default
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-fallback
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-if-else-block-before-node
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-named
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-slot-nested-component
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-static-at-symbol
    |       |   ├── Email.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-follows-element
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-each
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-multiple-in-if
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-nested-if
    |       |   ├── Inner.html
    |       |   ├── Outer.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-parent
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-placement
    |       |   ├── Modal.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── component-yield-static
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-default
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── computed-values-function-dependency
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-comments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-false
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── css-space-in-attribute
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── custom-method
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-builtins
    |       |   ├── _config.js
    |       |   ├── get.js
    |       |   └── main.html
    |       ├── deconflict-contexts
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-non-helpers
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-self
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── nested
    |       ├── deconflict-template-1
    |       |   ├── _config.js
    |       |   ├── main.html
    |       |   └── module.js
    |       ├── deconflict-template-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── deconflict-vars
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-function
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── destructuring
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-bad-observe-arguments
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-not-teardown
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-destroy-twice
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-helper
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-missing-data-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-computed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── dev-warning-readonly-window-binding
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-component-in-if
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-containing-if
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-destructured-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-dynamic-else-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-else-starts-empty
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-indexed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-dynamic
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-keyed-unshift
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-random-permute
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-static
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-block-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── each-blocks-nested-b
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── element-invalid-name
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── empty-style-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escape-template-literals
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── escaped-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-console-log
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-custom-node-context
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-each-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-event-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-hoisted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-removal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-sanitize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-shorthand-component
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── event-handler-this-methods
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-custom
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── events-lifecycle
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── flush-before-bindings
    |       |   ├── Nested.html
    |       |   ├── Visibility.html
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── function-in-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── get-state
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-accessible-directly
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-not-dereferenced
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── globals-shadowed-by-helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── hello-world
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── helpers-not-call-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── html-entities
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-else
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-elseif-text
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-expression
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-or
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── if-block-widget
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-attribute-compound
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-raw
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── ignore-unchanged-tag
    |       |   ├── _config.js
    |       |   ├── counter.js
    |       |   └── main.html
    |       ├── imported-renamed-components
    |       |   ├── ComponentOne.html
    |       |   ├── ComponentTwo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── inline-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── input-list
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── lifecycle-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── names-deconflicted-nested
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── nbsp
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-binding-ignores-unchanged
    |       |   ├── Nested.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-component-ignores-irrelevant-changes
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-deferred
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── observe-prevents-loop
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── ondestroy-before-cleanup
    |       |   ├── Top.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-chain
    |       |   ├── Item.html
    |       |   ├── List.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── onrender-fires-when-ready-nested
    |       |   ├── ParentWidget.html
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── options
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── paren-wrapped-expressions
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-first-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-last-child
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-next-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-anchor-previous-sibling
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── raw-mustaches-preserved
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── refs-unset
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-bind-in-array
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-change-handler
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-one-way-bind-object
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── select-props
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── self-reference-tree
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-after-destroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-clones-input
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-observe-dedupes-renders
    |       |   ├── Widget.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-oncreate
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-in-ondestroy
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-mutated-data
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── set-prevents-loop
    |       |   ├── Foo.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── setup
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-#
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── sigil-static-@
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-static-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── single-text-node
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── slot-in-custom-element
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── state-deconflicted
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-attributes
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-child-component-declared-namespace-shorthand
    |       |   ├── Rect.html
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-class
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-anchor
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-each-block-namespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-multiple
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-no-whitespace
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xlink
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── svg-xmlns
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-css-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-delay-in-out
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-dynamic-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-keyed-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-each-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-events
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-2
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-in-each-block-bidi-3
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-block-intro-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-dynamic-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-intro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-else-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-if-elseif-block-outro
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── transition-js-initial
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-each-block
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── whitespace-normal
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-bind-scroll-update
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-binding-resize
    |       |   ├── _config.js
    |       |   └── main.html
    |       ├── window-event
    |       |   ├── _config.js
    |       |   └── main.html
    |       └── window-event-context
    |           ├── _config.js
    |           └── main.html
    ├── server-side-rendering
    |   ├── index.js
    |   └── samples
    |       ├── attribute-boolean
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-dynamic
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── attribute-static
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── comment
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-binding-renamed
    |       |   ├── Foo.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-dynamic
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-empty
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-data-static
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-refs-and-attributes
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── component-yield
    |       |   ├── Widget.html
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── computed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── default-data-override
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── directives
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── dynamic-text-escaped
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── each-block
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── empty-elements-closed
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── entities
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── helpers
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-false
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── if-block-true
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── import-non-component
    |       |   ├── _expected.html
    |       |   ├── answer.js
    |       |   ├── main.html
    |       |   └── problems.js
    |       ├── raw-mustaches
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-div
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── static-text
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── styles-nested
    |       |   ├── One.html
    |       |   ├── Two.html
    |       |   ├── _expected.css
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-children
    |       |   ├── _expected.html
    |       |   └── main.html
    |       ├── textarea-value
    |       |   ├── _expected.html
    |       |   └── main.html
    |       └── triple
    |           ├── _expected.html
    |           └── main.html
    ├── setup.js
    ├── sourcemaps
    |   ├── index.js
    |   └── samples
    |       ├── basic
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── binding-shorthand
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── css
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── css-cascade-false
    |       |   ├── _config.js
    |       |   ├── input.html
    |       |   ├── output.css
    |       |   └── test.js
    |       ├── each-block
    |       |   ├── input.html
    |       |   └── test.js
    |       ├── script
    |       |   ├── input.html
    |       |   └── test.js
    |       └── static-no-script
    |           ├── input.html
    |           └── test.js
    ├── test.js
    └── validator
        ├── index.js
        └── samples
            ├── a11y-alt-text
            |   └── input.html
            ├── a11y-anchor-has-content
            |   └── input.html
            ├── a11y-anchor-is-valid
            |   └── input.html
            ├── a11y-aria-props
            |   └── input.html
            ├── a11y-aria-role
            |   └── input.html
            ├── a11y-aria-unsupported-element
            |   └── input.html
            ├── a11y-figcaption-wrong-place
            |   └── input.html
            ├── a11y-heading-has-content
            |   └── input.html
            ├── a11y-html-has-lang
            |   └── input.html
            ├── a11y-iframe-has-title
            |   └── input.html
            ├── a11y-no-access-key
            |   └── input.html
            ├── a11y-no-autofocus
            |   └── input.html
            ├── a11y-no-distracting-elements
            |   └── input.html
            ├── a11y-scope
            |   └── input.html
            ├── a11y-tabindex-no-positive
            |   └── input.html
            ├── binding-input-checked
            |   └── input.html
            ├── binding-input-static-type
            |   └── input.html
            ├── binding-invalid
            |   └── input.html
            ├── binding-invalid-on-element
            |   └── input.html
            ├── component-cannot-be-called-state
            |   └── input.html
            ├── component-slot-default-duplicate.skip
            |   └── input.html
            ├── component-slot-default-reserved
            |   └── input.html
            ├── component-slot-dynamic
            |   └── input.html
            ├── component-slot-dynamic-attribute
            |   └── input.html
            ├── component-slot-each-block
            |   └── input.html
            ├── component-slot-named-duplicate.skip
            |   └── input.html
            ├── component-slotted-each-block
            |   └── input.html
            ├── component-slotted-if-block
            |   └── input.html
            ├── css-invalid-global
            |   └── input.html
            ├── css-invalid-global-placement
            |   └── input.html
            ├── event-handler-ref
            |   └── input.html
            ├── event-handler-ref-invalid
            |   └── input.html
            ├── export-default-duplicated
            |   └── input.html
            ├── export-default-must-be-object
            |   └── input.html
            ├── helper-clash-context
            |   └── input.html
            ├── helper-purity-check-needs-arguments
            |   └── input.html
            ├── helper-purity-check-no-this
            |   └── input.html
            ├── helper-purity-check-this-get
            |   └── input.html
            ├── helper-purity-check-uses-arguments
            |   └── input.html
            ├── method-arrow-no-this
            |   └── input.html
            ├── method-arrow-this
            |   └── input.html
            ├── method-nonexistent
            |   └── input.html
            ├── method-nonexistent-helper
            |   └── input.html
            ├── missing-component
            |   └── input.html
            ├── named-export
            |   └── input.html
            ├── namespace-invalid
            |   └── input.html
            ├── oncreate-arrow-no-this
            |   └── input.html
            ├── oncreate-arrow-this
            |   └── input.html
            ├── ondestroy-arrow-no-this
            |   └── input.html
            ├── ondestroy-arrow-this
            |   └── input.html
            ├── properties-components-should-be-capitalised
            |   └── input.html
            ├── properties-computed-must-be-an-object
            |   └── input.html
            ├── properties-computed-must-be-functions
            |   └── input.html
            ├── properties-computed-no-destructuring
            |   └── input.html
            ├── properties-computed-values-needs-arguments
            |   └── input.html
            ├── properties-data-must-be-function
            |   └── input.html
            ├── properties-duplicated
            |   └── input.html
            ├── properties-methods-getters-setters
            |   └── input.html
            ├── properties-unexpected
            |   └── input.html
            ├── properties-unexpected-b
            |   └── input.html
            ├── svg-child-component-declared-namespace
            |   └── input.html
            ├── svg-child-component-undeclared-namespace
            |   └── input.html
            ├── textarea-value-children
            |   └── input.html
            ├── transition-duplicate-in
            |   └── input.html
            ├── transition-duplicate-in-transition
            |   └── input.html
            ├── transition-duplicate-out
            |   └── input.html
            ├── transition-duplicate-out-transition
            |   └── input.html
            ├── transition-duplicate-transition
            |   └── input.html
            ├── transition-duplicate-transition-in
            |   └── input.html
            ├── transition-duplicate-transition-out
            |   └── input.html
            ├── transition-missing
            |   └── input.html
            ├── transition-on-component
            |   └── input.html
            ├── window-binding-invalid
            |   └── input.html
            ├── window-binding-invalid-innerwidth
            |   └── input.html
            ├── window-binding-invalid-value
            |   └── input.html
            ├── window-binding-invalid-width
            |   └── input.html
            └── window-event-invalid
                └── input.html
--- END FILE TREE ---
    
This is the original user query:
--- BEGIN ORIGINAL QUERY ---
Issue title:
Attribute name only (no value) CSS selector throws if html attribute has a value.

Issue description: 
This is fine:

```html
<button foo></button>

<style>
button[foo] {}
</style>
```

But this throws `TypeError: operators[operator] is not a function`:

```html
<button foo="bar"></button>

<style>
button[foo] {}
</style>
```

[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)

<details>
  <summary>Stack trace</summary>
    TypeError: operators[operator] is not a function
      at attributeMatches (Selector.ts:228)
      at _loop_1 (Selector.ts:163)
      at applySelector (Selector.ts:141)
      at Selector.apply (Selector.ts:30)
      at Stylesheet.ts:23
      at Array.forEach (<anonymous>)
      at Rule.apply (Stylesheet.ts:23)
      at Stylesheet.apply (Stylesheet.ts:343)
      at Element (preprocess.ts:427)
      at preprocess.ts:482
</details>

Issue comments:


Find all relevant source code context and documentation needed to understand and fix this issue.
Focus on production code (ignore test files) and follow these steps:
1. Identify key components mentioned in the issue, especially from the error message(functions, classes, types, etc.)
2. Find their complete implementations and class definitions
3. Include related code from the same module that affects the behavior
4. Follow imports to find dependent code that directly impacts the issue

Skip any test files

--- END ORIGINAL QUERY ---

These are the previously asked refined queries:
--- BEGIN PREVIOUS QUERY ---
Previous refined query 1:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/generators/dom/preprocess.ts.
Extra Requirements: If full files are too large, include at minimum: attributeMatches and any operator map in Selector.ts, the Rule class and Stylesheet.apply in Stylesheet.ts, and the code where Stylesheet is constructed/applied in preprocess.ts.
Purpose: This will let me trace attribute selector parsing and matching to identify why button[foo] fails when the attribute has a value and propose a precise fix.

Previous refined query 2:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/Stylesheet.ts, and src/css/gatherPossibleValues.ts.
Extra Requirements: If full files are too large, include at minimum: the Selector class (constructor, apply, transform), the complete Stylesheet class definition (constructor, fields), and the implementations of gatherPossibleValues plus any UNKNOWN constant it uses.
Purpose: This will allow tracing attribute selector handling end-to-end and ensure a correct fix for operator=null in button[foo] without breaking dynamic matching.

Previous refined query 3:
Essential Query: Please provide the full content of src/css/Selector.ts, src/css/gatherPossibleValues.ts (including the UNKNOWN constant), the complete src/css/Stylesheet.ts, and the code where the Stylesheet instance is created in the DOM generator (likely src/generators/dom/index.ts).
Extra Requirements: If full files are too large, include at minimum: the Selector class (constructor/apply/transform/validate) and any applySelector/_loop helpers, the UNKNOWN constant and gatherPossibleValues implementation, the Stylesheet class constructor/properties and Declaration class, and the snippet where generator.stylesheet is instantiated.
Purpose: This will let me trace attribute selector handling end-to-end and identify a safe fix for operator=null in presence-only selectors without breaking other CSS matching behavior.

Previous refined query 4:
Essential Query: Please provide the missing portions of src/css/Selector.ts and src/css/Stylesheet.ts (full files if easier), the full src/css/gatherPossibleValues.ts including the UNKNOWN constant, and the file where generator.stylesheet is instantiated (likely src/generators/dom/index.ts).
Extra Requirements: If full files are too large, include at minimum: Selector constructor/apply/transform/validate, operators and attributeMatches; Stylesheet constructor/properties and apply; Declaration class; gatherPossibleValues implementation and UNKNOWN; and the snippet creating the Stylesheet instance.
Purpose: This will let me trace attribute selector handling end-to-end and follow imports to the DOM preprocessing to identify and document the operator=null presence-only selector behavior and propose a precise fix.
--- END PREVIOUS QUERY ---

All aggregated context for the queries:
--- BEGIN AGGREGATED CONTEXT ---
File: src/css/Selector.ts
Line number range: 12 - 26
Content:
12. 	constructor(node: Node) {
13. 		this.node = node;
14. 
15. 		this.blocks = groupSelectors(node);
16. 
17. 		// take trailing :global(...) selectors out of consideration
18. 		let i = this.blocks.length;
19. 		while (i > 0) {
20. 			if (!this.blocks[i - 1].global) break;
21. 			i -= 1;
22. 		}
23. 
24. 		this.localBlocks = this.blocks.slice(0, i);
25. 		this.used = this.blocks[0].global;
26. 	}


File: src/css/Selector.ts
Line number range: 28 - 40
Content:
28. 	apply(node: Node, stack: Node[]) {
29. 		const toEncapsulate: Node[] = [];
30. 		applySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);
31. 
32. 		if (toEncapsulate.length > 0) {
33. 			toEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {
34. 				node._needsCssAttribute = true;
35. 				block.shouldEncapsulate = true;
36. 			});
37. 
38. 			this.used = true;
39. 		}
40. 	}


File: src/css/Selector.ts
Line number range: 55 - 94
Content:
55. 	transform(code: MagicString, attr: string) {
56. 		function encapsulateBlock(block: Block) {
57. 			let i = block.selectors.length;
58. 			while (i--) {
59. 				const selector = block.selectors[i];
60. 				if (selector.type === 'PseudoElementSelector' || selector.type === 'PseudoClassSelector') continue;
61. 
62. 				if (selector.type === 'TypeSelector' && selector.name === '*') {
63. 					code.overwrite(selector.start, selector.end, attr);
64. 				} else {
65. 					code.appendLeft(selector.end, attr);
66. 				}
67. 
68. 				break;
69. 			}
70. 
71. 			i = block.selectors.length;
72. 			while (i--) {
73. 				const selector = block.selectors[i];
74. 
75. 				if (selector.type === 'RefSelector') {
76. 					code.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {
77. 						contentOnly: true,
78. 						storeName: false
79. 					});
80. 				}
81. 			}
82. 		}
83. 
84. 		this.blocks.forEach((block, i) => {
85. 			if (block.global) {
86. 				const selector = block.selectors[0];
87. 				const first = selector.children[0];
88. 				const last = selector.children[selector.children.length - 1];
89. 				code.remove(selector.start, first.start).remove(last.end, selector.end);
90. 			}
91. 
92. 			if (block.shouldEncapsulate) encapsulateBlock(block);
93. 		});
94. 	}


File: src/css/Selector.ts
Line number range: 96 - 123
Content:
96. 	validate(validator: Validator) {
97. 		this.blocks.forEach((block) => {
98. 			let i = block.selectors.length;
99. 			while (i-- > 1) {
100. 				const selector = block.selectors[i];
101. 				if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
102. 					validator.error(`:global(...) must be the first element in a compound selector`, selector.start);
103. 				}
104. 			}
105. 		});
106. 
107. 		let start = 0;
108. 		let end = this.blocks.length;
109. 
110. 		for (; start < end; start += 1) {
111. 			if (!this.blocks[start].global) break;
112. 		}
113. 
114. 		for (; end > start; end -= 1) {
115. 			if (!this.blocks[end - 1].global) break;
116. 		}
117. 
118. 		for (let i = start; i < end; i += 1) {
119. 			if (this.blocks[i].global) {
120. 				validator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);
121. 			}
122. 		}
123. 	}


File: src/css/Selector.ts
Line number range: 130 - 211
Content:
130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {
131. 	const block = blocks.pop();
132. 	if (!block) return false;
133. 
134. 	if (!node) {
135. 		return blocks.every(block => block.global);
136. 	}
137. 
138. 	let i = block.selectors.length;
139. 	let j = stack.length;
140. 
141. 	while (i--) {
142. 		const selector = block.selectors[i];
143. 
144. 		if (selector.type === 'PseudoClassSelector' && selector.name === 'global') {
145. 			// TODO shouldn't see this here... maybe we should enforce that :global(...)
146. 			// cannot be sandwiched between non-global selectors?
147. 			return false;
148. 		}
149. 
150. 		if (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {
151. 			continue;
152. 		}
153. 
154. 		if (selector.type === 'ClassSelector') {
155. 			if (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;
156. 		}
157. 
158. 		else if (selector.type === 'IdSelector') {
159. 			if (!attributeMatches(node, 'id', selector.name, '=', false)) return false;
160. 		}
161. 
162. 		else if (selector.type === 'AttributeSelector') {
163. 			if (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;
164. 		}
165. 
166. 		else if (selector.type === 'TypeSelector') {
167. 			if (node.name !== selector.name && selector.name !== '*') return false;
168. 		}
169. 
170. 		else if (selector.type === 'RefSelector') {
171. 			if (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {
172. 				node._cssRefAttribute = selector.name;
173. 				toEncapsulate.push({ node, block });
174. 				return true;
175. 			}
176. 			return;
177. 		}
178. 
179. 		else {
180. 			// bail. TODO figure out what these could be
181. 			toEncapsulate.push({ node, block });
182. 			return true;
183. 		}
184. 	}
185. 
186. 	if (block.combinator) {
187. 		if (block.combinator.type === 'WhiteSpace') {
188. 			while (stack.length) {
189. 				if (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {
190. 					toEncapsulate.push({ node, block });
191. 					return true;
192. 				}
193. 			}
194. 
195. 			return false;
196. 		} else if (block.combinator.name === '>') {
197. 			if (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {
198. 				toEncapsulate.push({ node, block });
199. 				return true;
200. 			}
201. 			return false;
202. 		}
203. 
204. 		// TODO other combinators
205. 		toEncapsulate.push({ node, block });
206. 		return true;
207. 	}
208. 
209. 	toEncapsulate.push({ node, block });
210. 	return true;
211. }


File: src/css/Selector.ts
Line number range: 213 - 220
Content:
213. const operators = {
214. 	'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),
215. 	'~=': (value: string, flags: string) => new RegExp(`\\b${value}\\b`, flags),
216. 	'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),
217. 	'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),
218. 	'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),
219. 	'*=': (value: string, flags: string) => new RegExp(value, flags)
220. };


File: src/css/Selector.ts
Line number range: 222 - 242
Content:
222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
223. 	const attr = node.attributes.find((attr: Node) => attr.name === name);
224. 	if (!attr) return false;
225. 	if (attr.value === true) return operator === null;
226. 	if (attr.value.length > 1) return true;
227. 
228. 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
229. 	const value = attr.value[0];
230. 
231. 	if (value.type === 'Text') return pattern.test(value.data);
232. 
233. 	const possibleValues = new Set();
234. 	gatherPossibleValues(value.expression, possibleValues);
235. 	if (possibleValues.has(UNKNOWN)) return true;
236. 
237. 	for (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS
238. 		if (pattern.test(x)) return true;
239. 	}
240. 
241. 	return false;
242. }


File: src/css/Selector.ts
Line number range: 248 - 255
Content:
248. function unquote(value: Node) {
249. 	if (value.type === 'Identifier') return value.name;
250. 	const str = value.value;
251. 	if (str[0] === str[str.length - 1] && str[0] === "'" || str[0] === '"') {
252. 		return str.slice(1, str.length - 1);
253. 	}
254. 	return str;
255. }


File: src/css/Selector.ts
Line number range: 287 - 302
Content:
287. function groupSelectors(selector: Node) {
288. 	let block: Block = new Block(null);
289. 
290. 	const blocks = [block];
291. 
292. 	selector.children.forEach((child: Node, i: number) => {
293. 		if (child.type === 'WhiteSpace' || child.type === 'Combinator') {
294. 			block = new Block(child);
295. 			blocks.push(block);
296. 		} else {
297. 			block.add(child);
298. 		}
299. 	});
300. 
301. 	return blocks;
302. }


File: src/css/Stylesheet.ts
Line number range: 9 - 113
Content:
9. class Rule {
10. 	selectors: Selector[];
11. 	declarations: Declaration[];
12. 	node: Node;
13. 	parent: Atrule;
14. 
15. 	constructor(node: Node, parent?: Atrule) {
16. 		this.node = node;
17. 		this.parent = parent;
18. 		this.selectors = node.selector.children.map((node: Node) => new Selector(node));
19. 		this.declarations = node.block.children.map((node: Node) => new Declaration(node));
20. 	}
21. 
22. 	apply(node: Node, stack: Node[]) {
23. 		this.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?
24. 	}
25. 
26. 	isUsed() {
27. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
28. 		return this.selectors.some(s => s.used);
29. 	}
30. 
31. 	minify(code: MagicString, cascade: boolean) {
32. 		let c = this.node.start;
33. 		let started = false;
34. 
35. 		this.selectors.forEach((selector, i) => {
36. 			if (cascade || selector.used) {
37. 				const separator = started ? ',' : '';
38. 				if ((selector.node.start - c) > separator.length) {
39. 					code.overwrite(c, selector.node.start, separator);
40. 				}
41. 
42. 				if (!cascade) selector.minify(code);
43. 				c = selector.node.end;
44. 
45. 				started = true;
46. 			}
47. 		});
48. 
49. 		code.remove(c, this.node.block.start);
50. 
51. 		c = this.node.block.start + 1;
52. 		this.declarations.forEach((declaration, i) => {
53. 			const separator = i > 0 ? ';' : '';
54. 			if ((declaration.node.start - c) > separator.length) {
55. 				code.overwrite(c, declaration.node.start, separator);
56. 			}
57. 
58. 			declaration.minify(code);
59. 
60. 			c = declaration.node.end;
61. 		});
62. 
63. 		code.remove(c, this.node.block.end - 1);
64. 	}
65. 
66. 	transform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {
67. 		if (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;
68. 
69. 		const attr = `[${id}]`;
70. 
71. 		if (cascade) {
72. 			this.selectors.forEach(selector => {
73. 				// TODO disable cascading (without :global(...)) in v2
74. 				const { start, end, children } = selector.node;
75. 
76. 				const css = code.original;
77. 				const selectorString = css.slice(start, end);
78. 
79. 				const firstToken = children[0];
80. 
81. 				let transformed;
82. 
83. 				if (firstToken.type === 'TypeSelector') {
84. 					const insert = firstToken.end;
85. 					const head = firstToken.name === '*' ? '' : css.slice(start, insert);
86. 					const tail = css.slice(insert, end);
87. 
88. 					transformed = `${head}${attr}${tail},${attr} ${selectorString}`;
89. 				} else {
90. 					transformed = `${attr}${selectorString},${attr} ${selectorString}`;
91. 				}
92. 
93. 				code.overwrite(start, end, transformed);
94. 			});
95. 		} else {
96. 			this.selectors.forEach(selector => selector.transform(code, attr));
97. 		}
98. 
99. 		this.declarations.forEach(declaration => declaration.transform(code, keyframes));
100. 	}
101. 
102. 	validate(validator: Validator) {
103. 		this.selectors.forEach(selector => {
104. 			selector.validate(validator);
105. 		});
106. 	}
107. 
108. 	warnOnUnusedSelector(handler: (selector: Selector) => void) {
109. 		this.selectors.forEach(selector => {
110. 			if (!selector.used) handler(selector);
111. 		});
112. 	}
113. }


File: src/css/Stylesheet.ts
Line number range: 115 - 151
Content:
115. class Declaration {
116. 	node: Node;
117. 
118. 	constructor(node: Node) {
119. 		this.node = node;
120. 	}
121. 
122. 	transform(code: MagicString, keyframes: Map<string, string>) {
123. 		const property = this.node.property && this.node.property.toLowerCase();
124. 		if (property === 'animation' || property === 'animation-name') {
125. 			this.node.value.children.forEach((block: Node) => {
126. 				if (block.type === 'Identifier') {
127. 					const name = block.name;
128. 					if (keyframes.has(name)) {
129. 						code.overwrite(block.start, block.end, keyframes.get(name));
130. 					}
131. 				}
132. 			});
133. 		}
134. 	}
135. 
136. 	minify(code: MagicString) {
137. 		if (!this.node.property) return; // @apply, and possibly other weird cases?
138. 
139. 		const c = this.node.start + this.node.property.length;
140. 		const first = this.node.value.children  ?
141. 			this.node.value.children[0] :
142. 			this.node.value;
143. 
144. 		let start = first.start;
145. 		while (/\s/.test(code.original[start])) start += 1;
146. 
147. 		if (start - c > 1) {
148. 			code.overwrite(c, start, ':');
149. 		}
150. 	}
151. }


File: src/css/Stylesheet.ts
Line number range: 251 - 331
Content:
251. const keys = {};
252. 
253. export default class Stylesheet {
254. 	source: string;
255. 	parsed: Parsed;
256. 	cascade: boolean;
257. 	filename: string;
258. 
259. 	hasStyles: boolean;
260. 	id: string;
261. 
262. 	children: (Rule|Atrule)[];
263. 	keyframes: Map<string, string>;
264. 
265. 	constructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {
266. 		this.source = source;
267. 		this.parsed = parsed;
268. 		this.cascade = cascade;
269. 		this.filename = filename;
270. 
271. 		this.id = `svelte-${parsed.hash}`;
272. 
273. 		this.children = [];
274. 		this.keyframes = new Map();
275. 
276. 		if (parsed.css && parsed.css.children.length) {
277. 			this.hasStyles = true;
278. 
279. 			const stack: (Rule | Atrule)[] = [];
280. 			let currentAtrule: Atrule = null;
281. 
282. 			walk(this.parsed.css, {
283. 				enter: (node: Node) => {
284. 					if (node.type === 'Atrule') {
285. 						const last = stack[stack.length - 1];
286. 
287. 						const atrule = new Atrule(node);
288. 						stack.push(atrule);
289. 
290. 						// this is an awkward special case — @apply (and
291. 						// possibly other future constructs)
292. 						if (last && !(last instanceof Atrule)) return;
293. 
294. 						if (currentAtrule) {
295. 							currentAtrule.children.push(atrule);
296. 						} else {
297. 							this.children.push(atrule);
298. 						}
299. 
300. 						if (node.name === 'keyframes') {
301. 							node.expression.children.forEach((expression: Node) => {
302. 								if (expression.type === 'Identifier' && !expression.name.startsWith('-global-')) {
303. 									this.keyframes.set(expression.name, `${this.id}-${expression.name}`);
304. 								}
305. 							});
306. 						}
307. 
308. 						currentAtrule = atrule;
309. 					}
310. 
311. 					if (node.type === 'Rule') {
312. 						const rule = new Rule(node, currentAtrule);
313. 						stack.push(rule);
314. 
315. 						if (currentAtrule) {
316. 							currentAtrule.children.push(rule);
317. 						} else {
318. 							this.children.push(rule);
319. 						}
320. 					}
321. 				},
322. 
323. 				leave: (node: Node) => {
324. 					if (node.type === 'Rule' || node.type === 'Atrule') stack.pop();
325. 					if (node.type === 'Atrule') currentAtrule = stack[stack.length - 1];
326. 				}
327. 			});
328. 		} else {
329. 			this.hasStyles = false;
330. 		}
331. 	}


File: src/css/Stylesheet.ts
Line number range: 333 - 345
Content:
333. 	apply(node: Node, stack: Node[]) {
334. 		if (!this.hasStyles) return;
335. 
336. 		if (this.cascade) {
337. 			if (stack.length === 0) node._needsCssAttribute = true;
338. 			return;
339. 		}
340. 
341. 		for (let i = 0; i < this.children.length; i += 1) {
342. 			const child = this.children[i];
343. 			child.apply(node, stack);
344. 		}
345. 	}


File: src/css/gatherPossibleValues.ts
Line number range: 1 - 18
Content:
1. import { Node } from '../interfaces';
2. 
3. export const UNKNOWN = {};
4. 
5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {
6. 	if (node.type === 'Literal') {
7. 		set.add(node.value);
8. 	}
9. 
10. 	else if (node.type === 'ConditionalExpression') {
11. 		gatherPossibleValues(node.consequent, set);
12. 		gatherPossibleValues(node.alternate, set);
13. 	}
14. 
15. 	else {
16. 		set.add(UNKNOWN);
17. 	}
18. }


File: src/generators/dom/index.ts
Line number range: 35 - 53
Content:
35. 	constructor(
36. 		parsed: Parsed,
37. 		source: string,
38. 		name: string,
39. 		stylesheet: Stylesheet,
40. 		options: CompileOptions
41. 	) {
42. 		super(parsed, source, name, stylesheet, options, true);
43. 		this.blocks = [];
44. 
45. 		this.readonly = new Set();
46. 
47. 		this.hydratable = options.hydratable;
48. 		this.legacy = options.legacy;
49. 		this.needsEncapsulateHelper = false;
50. 
51. 		// initial values for e.g. window.innerWidth, if there's a <:Window> meta tag
52. 		this.metaBindings = [];
53. 	}


File: src/generators/dom/index.ts
Line number range: 83 - 101
Content:
83. export default function dom(
84. 	parsed: Parsed,
85. 	source: string,
86. 	stylesheet: Stylesheet,
87. 	options: CompileOptions
88. ) {
89. 	const format = options.format || 'es';
90. 
91. 	const generator = new DomGenerator(parsed, source, options.name || 'SvelteComponent', stylesheet, options);
92. 
93. 	const {
94. 		computations,
95. 		name,
96. 		templateProperties,
97. 		namespace,
98. 	} = generator;
99. 
100. 	const { block, state } = preprocess(generator, namespace, parsed.html);
101. 


File: src/generators/dom/index.ts
Line number range: 102 - 103
Content:
102. 	generator.stylesheet.warnOnUnusedSelectors(options.onwarn);
103. 


File: src/generators/dom/index.ts
Line number range: 149 - 153
Content:
149. 	const { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);
150. 	const styles = generator.stylesheet.hasStyles && stringify(options.dev ?
151. 		`${css}\n/*# sourceMappingURL=${cssMap.toUrl()} */` :
152. 		css, { onlyEscapeAtSymbol: true });
153. 


File: src/generators/dom/index.ts
Line number range: 154 - 163
Content:
154. 	if (styles && generator.options.css !== false && !generator.customElement) {
155. 		builder.addBlock(deindent`
156. 			function @add_css() {
157. 				var style = @createElement("style");
158. 				style.id = '${generator.stylesheet.id}-style';
159. 				style.textContent = ${styles};
160. 				@appendNode(style, document.head);
161. 			}
162. 		`);
163. 	}


File: src/generators/dom/index.ts
Line number range: 208 - 215
Content:
208. 		${generator.customElement ?
209. 			deindent`
210. 				this.attachShadow({ mode: 'open' });
211. 				${css && `this.shadowRoot.innerHTML = \`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\/g, '\\\\')}${options.dev ? `\n/*# sourceMappingURL=${cssMap.toUrl()} */` : ''}</style>\`;`}
212. 			` :
213. 			(generator.stylesheet.hasStyles && options.css !== false &&
214. 			`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)
215. 		}


File: src/generators/dom/preprocess.ts
Line number range: 427 - 438
Content:
427. 			generator.stylesheet.apply(node, elementStack);
428. 		}
429. 
430. 		if (node.children.length) {
431. 			if (isComponent) {
432. 				if (node.children) node._slots = new Set(['default']);
433. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);
434. 			} else {
435. 				if (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;
436. 				preprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);
437. 			}
438. 		}


File: src/index.ts
Line number range: 36 - 55
Content:
36. export function compile(source: string, _options: CompileOptions) {
37. 	const options = normalizeOptions(_options);
38. 
39. 	let parsed: Parsed;
40. 
41. 	try {
42. 		parsed = parse(source, options);
43. 	} catch (err) {
44. 		options.onerror(err);
45. 		return;
46. 	}
47. 
48. 	const stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);
49. 
50. 	validate(parsed, source, stylesheet, options);
51. 
52. 	const compiler = options.generate === 'ssr' ? generateSSR : generate;
53. 
54. 	return compiler(parsed, source, stylesheet, options);
55. }

--- END AGGREGATED CONTEXT ---

Analyze if the current context is sufficient to complete the user query by considering:
1. Do you understand the full scope and requirements of the user query?
2. Do you have access to all relevant code that needs to be examined or modified?
3. Are all critical dependencies and their interfaces visible?
4. Is there enough context about the system architecture and design patterns?
5. Do you have access to relevant documentation or tests if needed?

Only request additional context if essential information is missing. Ensure you're not requesting:
- Information already provided in previous queries
- Nice-to-have but non-essential details
- Implementation details that aren't relevant to the current task

If additional context is needed:
- Be specific about what you're looking for
- Consider both code and documentation that might be relevant

IMPORTANT:
- Try to avoid asking for the SAME or very similar information as previous queries, because these queries have already been asked and satisfied.

2025-11-11 00:19:04,120 - thread-133013312636608.prometheus.lang_graph.nodes.context_refine_node - DEBUG - reasoning='The stack trace points to src/css/Selector.ts attributeMatches calling operators[operator] when operator is null for presence-only selectors ([foo]). We have the full implementations of Selector (constructor/apply/transform/validate), applySelector, operators, attributeMatches, and related utilities (gatherPossibleValues, UNKNOWN). We also have Stylesheet (constructor/apply) and its Rule class, plus where Stylesheet.apply is invoked in DOM preprocessing. This is sufficient to trace the behavior end-to-end and propose a fix without additional files or docs.' query='' extra_requirements='' purpose='Proceed to summarize relevant code, explain the root cause, and suggest a precise fix for presence-only attribute selectors.'
2025-11-11 00:19:04,123 - thread-133013312636608.prometheus.lang_graph.nodes.context_retrieval_subgraph_node - INFO - Context retrieved: [Context(relative_path='src/css/Selector.ts', content='12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}', start_line_number=12, end_line_number=26), Context(relative_path='src/css/Selector.ts', content='28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}', start_line_number=28, end_line_number=40), Context(relative_path='src/css/Selector.ts', content="55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === 'PseudoElementSelector' || selector.type === 'PseudoClassSelector') continue;\n61. \n62. \t\t\t\tif (selector.type === 'TypeSelector' && selector.name === '*') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === 'RefSelector') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}", start_line_number=55, end_line_number=94), Context(relative_path='src/css/Selector.ts', content="96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === 'PseudoClassSelector' && selector.name === 'global') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}", start_line_number=96, end_line_number=123), Context(relative_path='src/css/Selector.ts', content="130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === 'PseudoClassSelector' && selector.name === 'global') {\n145. \t\t\t// TODO shouldn't see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === 'PseudoClassSelector' || selector.type === 'PseudoElementSelector') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === 'ClassSelector') {\n155. \t\t\tif (!attributeMatches(node, 'class', selector.name, '~=', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === 'IdSelector') {\n159. \t\t\tif (!attributeMatches(node, 'id', selector.name, '=', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === 'AttributeSelector') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === 'TypeSelector') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== '*') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === 'RefSelector') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === 'Ref' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === 'WhiteSpace') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === '>') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }", start_line_number=130, end_line_number=211), Context(relative_path='src/css/Selector.ts', content="213. const operators = {\n214. \t'=' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t'~=': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t'|=': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t'^=': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t'$=': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n220. };", start_line_number=213, end_line_number=220), Context(relative_path='src/css/Selector.ts', content="222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === 'Text') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }", start_line_number=222, end_line_number=242), Context(relative_path='src/css/Selector.ts', content='248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }', start_line_number=248, end_line_number=255), Context(relative_path='src/css/Selector.ts', content="287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === 'WhiteSpace' || child.type === 'Combinator') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }", start_line_number=287, end_line_number=302), Context(relative_path='src/css/Stylesheet.ts', content="9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? ',' : '';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? ';' : '';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === 'Atrule' && this.parent.node.name === 'keyframes') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === 'TypeSelector') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === '*' ? '' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }", start_line_number=9, end_line_number=113), Context(relative_path='src/css/Stylesheet.ts', content="115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === 'animation' || property === 'animation-name') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === 'Identifier') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, ':');\n149. \t\t}\n150. \t}\n151. }", start_line_number=115, end_line_number=151), Context(relative_path='src/css/Stylesheet.ts', content="251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === 'Atrule') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === 'keyframes') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === 'Identifier' && !expression.name.startsWith('-global-')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === 'Rule') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === 'Rule' || node.type === 'Atrule') stack.pop();\n325. \t\t\t\t\tif (node.type === 'Atrule') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}", start_line_number=251, end_line_number=331), Context(relative_path='src/css/Stylesheet.ts', content='333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}', start_line_number=333, end_line_number=345), Context(relative_path='src/css/gatherPossibleValues.ts', content="1. import { Node } from '../interfaces';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === 'Literal') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === 'ConditionalExpression') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }", start_line_number=1, end_line_number=18), Context(relative_path='src/generators/dom/index.ts', content="35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there's a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}", start_line_number=35, end_line_number=53), Context(relative_path='src/generators/dom/index.ts', content="83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || 'es';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || 'SvelteComponent', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. ", start_line_number=83, end_line_number=101), Context(relative_path='src/generators/dom/index.ts', content='102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. ', start_line_number=102, end_line_number=103), Context(relative_path='src/generators/dom/index.ts', content='149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. ', start_line_number=149, end_line_number=153), Context(relative_path='src/generators/dom/index.ts', content='154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}', start_line_number=154, end_line_number=163), Context(relative_path='src/generators/dom/index.ts', content='208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}', start_line_number=208, end_line_number=215), Context(relative_path='src/generators/dom/preprocess.ts', content="427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set(['default']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === 'pre' || node.name === 'textarea') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}", start_line_number=427, end_line_number=438), Context(relative_path='src/index.ts', content="36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === 'ssr' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }", start_line_number=36, end_line_number=55)]
2025-11-11 00:19:04,126 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_message_node - DEBUG - Sending message to IssueBugAnalyzerNode:
content='I am going to share details about an issue reported to a codebase and its related bug context.\nPlease analyze this bug and provide a high-level description of what needs to be changed:\n\n1. Issue Understanding:\n- Analyze the issue title, description, and comments provided\n- Identify the reported symptoms and unexpected behaviors\n\n2. Code Analysis:\n- Identify which files, functions, or code blocks are involved\n- Explain what the problematic code is currently doing\n\n3. Root Cause:\n- Explain why the current behavior is incorrect\n- Identify which specific parts of the code are causing the issue\n\n4. Fix Suggestion:\nFor each needed change, describe in plain English:\n- Which file needs to be modified\n- Which function or code block needs changes\n- What needs to be changed (e.g., "rename variable x to y", "add null check for parameter z")\n- Why this change would fix the issue\n\nDo NOT provide actual code snippets or diffs. Focus on describing what needs to be changed.\n\nHere are the details for analysis:\n\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug Context:\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n' additional_kwargs={} response_metadata={}
2025-11-11 00:25:01,824 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_node - DEBUG - content='1) Issue Understanding\n\n- Reported symptom: Using a presence-only attribute selector [foo] works when the HTML attribute has no value (e.g., <button foo>), but throws a runtime TypeError when the attribute has a value (e.g., <button foo="bar">).\n- Unexpected behavior: For a selector like button[foo], the compiler should treat it as a presence check and not require an operator or value. Instead, it crashes with TypeError: operators[operator] is not a function.\n\n2) Code Analysis\n\nInvolved files and functions:\n- src/css/Selector.ts\n  - function attributeMatches (lines ~222–242 in the provided context)\n  - function applySelector (lines ~130–211), which calls attributeMatches for different selector types\n  - const operators mapping (lines ~213–220)\n- The stack trace points to attributeMatches (Selector.ts:228), which aligns with the call to the operators mapping.\n\nCurrent behavior in attributeMatches:\n- Finds the attribute by name on the node.\n- Special-cases boolean attributes (attr.value === true) to only match if operator is null (presence selector).\n- If attr.value has more than one chunk (dynamic/multiple tokens), it returns true (conservative match).\n- Otherwise, it attempts to build a RegExp using operators[operator](expectedValue, ...).\n- In the failing scenario, for a presence selector [foo], operator is null and expectedValue is undefined. When the target attribute has a single value (e.g., "bar"), attr.value !== true and attr.value.length is 1, so it falls through and attempts to call operators[null](...), which is undefined, causing the TypeError.\n\n3) Root Cause\n\n- The function attributeMatches treats presence-only attribute selectors as a special case only when the attribute is a boolean attribute (attr.value === true). If the attribute exists and has a value (array length 1), the code still tries to create a pattern using operators[operator], even when operator is null. This results in operators[null] being undefined and a TypeError at runtime.\n- Specifically, the incorrect behavior is in attributeMatches: it does not handle operator being null for non-boolean attributes (attributes with a value), even though presence selectors should match any attribute that exists, regardless of whether it has a value.\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- What to change:\n  - Adjust the early-return logic to properly handle presence-only selectors (operator is null or undefined) for any existing attribute, not just boolean attributes.\n  - The order of checks should be:\n    1) If the attribute is not found, return false (already present).\n    2) If the attribute is a boolean attribute (attr.value === true), return true only if operator is null; return false if an operator is provided (this preserves current correct behavior for boolean attributes).\n    3) If operator is null or undefined (presence selector), return true because the attribute exists, regardless of whether it has a value.\n    4) Keep the attr.value.length > 1 conservative true-return for complex/dynamic values.\n    5) Only after these checks, compute a pattern using the operators map and proceed with testing.\n  - Optionally add a defensive guard: if operator is not null/undefined but not a key in operators, return false instead of attempting to call it. This prevents similar TypeErrors for unexpected operator values.\n- Why this fixes the issue:\n  - Presence-only selectors [attr] should match any element with the attribute present, irrespective of the attribute having a value. By returning true early when operator is null (after confirming the attribute exists), the code avoids calling operators[operator] with a null key and prevents the TypeError. It also maintains correct semantics for boolean attributes and continues to conservatively match dynamic/unknown values as before.\n\nNo other files require changes. The issue originates from attributeMatches’ control flow and handling of presence selectors.\n\nAdditional recommendation (non-blocking):\n- In src/css/Selector.ts, attributeMatches’ parameter caseInsensitive is typed as a boolean but receives selector.flags (likely \'i\' or undefined). Consider renaming it to flags or adjusting the type to string | boolean to reflect actual usage, although this is not necessary to resolve the reported bug.\n\nTesting/validation to consider after changes:\n- Ensure button[foo] matches without error for:\n  - <button foo></button> (boolean attribute)\n  - <button foo="bar"></button> (valued attribute)\n  - <button foo={expr}></button> (dynamic attribute value)\n- Ensure selectors with operators still behave correctly, e.g.:\n  - button[foo="bar"] matches only when foo has value "bar"\n  - button[disabled] matches <button disabled> and not require a value\n  - button[disabled="disabled"] does not match boolean attribute without explicit value (preserving previous behavior)' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 4491, 'prompt_tokens': 7393, 'total_tokens': 11884, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 3456, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--ddb9b19d-4e60-4773-b310-7d2c0d5620c5-0' usage_metadata={'input_tokens': 7393, 'output_tokens': 4491, 'total_tokens': 11884, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 3456}}
2025-11-11 00:25:01,827 - thread-133013312636608.prometheus.lang_graph.nodes.edit_message_node - DEBUG - Sending message to EditNode:
content='--- BEGIN ISSUE INFO ---\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n--- END ISSUE INFO ---\n\nContext Found:\n--- BEGIN CONTEXT ---\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n--- END CONTEXT ---\nThese context should be enough to help you make the necessary code edits. Do NOT explore for more context in the codebase!\n\nAnalyzer agent has analyzed the issue and provided instruction on the issue:\n--- BEGIN ANALYZER MESSAGE ---\n1) Issue Understanding\n\n- Reported symptom: Using a presence-only attribute selector [foo] works when the HTML attribute has no value (e.g., <button foo>), but throws a runtime TypeError when the attribute has a value (e.g., <button foo="bar">).\n- Unexpected behavior: For a selector like button[foo], the compiler should treat it as a presence check and not require an operator or value. Instead, it crashes with TypeError: operators[operator] is not a function.\n\n2) Code Analysis\n\nInvolved files and functions:\n- src/css/Selector.ts\n  - function attributeMatches (lines ~222–242 in the provided context)\n  - function applySelector (lines ~130–211), which calls attributeMatches for different selector types\n  - const operators mapping (lines ~213–220)\n- The stack trace points to attributeMatches (Selector.ts:228), which aligns with the call to the operators mapping.\n\nCurrent behavior in attributeMatches:\n- Finds the attribute by name on the node.\n- Special-cases boolean attributes (attr.value === true) to only match if operator is null (presence selector).\n- If attr.value has more than one chunk (dynamic/multiple tokens), it returns true (conservative match).\n- Otherwise, it attempts to build a RegExp using operators[operator](expectedValue, ...).\n- In the failing scenario, for a presence selector [foo], operator is null and expectedValue is undefined. When the target attribute has a single value (e.g., "bar"), attr.value !== true and attr.value.length is 1, so it falls through and attempts to call operators[null](...), which is undefined, causing the TypeError.\n\n3) Root Cause\n\n- The function attributeMatches treats presence-only attribute selectors as a special case only when the attribute is a boolean attribute (attr.value === true). If the attribute exists and has a value (array length 1), the code still tries to create a pattern using operators[operator], even when operator is null. This results in operators[null] being undefined and a TypeError at runtime.\n- Specifically, the incorrect behavior is in attributeMatches: it does not handle operator being null for non-boolean attributes (attributes with a value), even though presence selectors should match any attribute that exists, regardless of whether it has a value.\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- What to change:\n  - Adjust the early-return logic to properly handle presence-only selectors (operator is null or undefined) for any existing attribute, not just boolean attributes.\n  - The order of checks should be:\n    1) If the attribute is not found, return false (already present).\n    2) If the attribute is a boolean attribute (attr.value === true), return true only if operator is null; return false if an operator is provided (this preserves current correct behavior for boolean attributes).\n    3) If operator is null or undefined (presence selector), return true because the attribute exists, regardless of whether it has a value.\n    4) Keep the attr.value.length > 1 conservative true-return for complex/dynamic values.\n    5) Only after these checks, compute a pattern using the operators map and proceed with testing.\n  - Optionally add a defensive guard: if operator is not null/undefined but not a key in operators, return false instead of attempting to call it. This prevents similar TypeErrors for unexpected operator values.\n- Why this fixes the issue:\n  - Presence-only selectors [attr] should match any element with the attribute present, irrespective of the attribute having a value. By returning true early when operator is null (after confirming the attribute exists), the code avoids calling operators[operator] with a null key and prevents the TypeError. It also maintains correct semantics for boolean attributes and continues to conservatively match dynamic/unknown values as before.\n\nNo other files require changes. The issue originates from attributeMatches’ control flow and handling of presence selectors.\n\nAdditional recommendation (non-blocking):\n- In src/css/Selector.ts, attributeMatches’ parameter caseInsensitive is typed as a boolean but receives selector.flags (likely \'i\' or undefined). Consider renaming it to flags or adjusting the type to string | boolean to reflect actual usage, although this is not necessary to resolve the reported bug.\n\nTesting/validation to consider after changes:\n- Ensure button[foo] matches without error for:\n  - <button foo></button> (boolean attribute)\n  - <button foo="bar"></button> (valued attribute)\n  - <button foo={expr}></button> (dynamic attribute value)\n- Ensure selectors with operators still behave correctly, e.g.:\n  - button[foo="bar"] matches only when foo has value "bar"\n  - button[disabled] matches <button disabled> and not require a value\n  - button[disabled="disabled"] does not match boolean attribute without explicit value (preserving previous behavior)\n--- END ANALYZER MESSAGE ---\n\nIMPORTANT INSTRUCTION:\n- The context provided above should be sufficient for you to make the required code edits. Do NOT explore for more context in the codebase!\n- Do NOT FIND, WRITE or RUN any tests, your change will be tested automatically by reproduction tests and regression tests later!!!\n- Never write any tests yourself!!! (Very important!)\n\nPlease implement these changes precisely, following the exact specifications from the analyzer.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:25:04,384 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_stZmSzt7sYnceu8g5io6TSaQ', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 93, 'prompt_tokens': 8882, 'total_tokens': 8975, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--98198611-902d-40a8-b0fa-81673b887416-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_stZmSzt7sYnceu8g5io6TSaQ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8882, 'output_tokens': 93, 'total_tokens': 8975, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:25:20,883 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_rea0wL6Omiw80stuPPVKVO0E', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n223. \\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n224. \\tif (!attr) return false;\\n225. \\tif (attr.value === true) return operator === null;\\n226. \\tif (attr.value.length > 1) return true;\\n227. \\n228. \\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n229. \\tconst value = attr.value[0];\\n230. \\n231. \\tif (value.type === \'Text\') return pattern.test(value.data);\\n232. \\n233. \\tconst possibleValues = new Set();\\n234. \\tgatherPossibleValues(value.expression, possibleValues);\\n235. \\tif (possibleValues.has(UNKNOWN)) return true;\\n236. \\n237. \\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n238. \\t\\tif (pattern.test(x)) return true;\\n239. \\t}\\n240. \\n241. \\treturn false;\\n242. }\\n","new_content":"222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n223. \\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n224. \\tif (!attr) return false;\\n225. \\n226. \\t// boolean attribute: only matches presence selectors\\n227. \\tif (attr.value === true) return operator === null;\\n228. \\n229. \\t// presence-only selector [attr]: matches if attribute exists regardless of value\\n230. \\tif (operator == null) return true;\\n231. \\n232. \\t// multiple chunks / dynamic values — conservatively return true\\n233. \\tif (attr.value.length > 1) return true;\\n234. \\n235. \\tconst op = operators[operator];\\n236. \\tif (!op) return false;\\n237. \\n238. \\tconst pattern = op(expectedValue, caseInsensitive ? \'i\' : \'\');\\n239. \\tconst value = attr.value[0];\\n240. \\n241. \\tif (value.type === \'Text\') return pattern.test(value.data);\\n242. \\n243. \\tconst possibleValues = new Set();\\n244. \\tgatherPossibleValues(value.expression, possibleValues);\\n245. \\tif (possibleValues.has(UNKNOWN)) return true;\\n246. \\n247. \\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n248. \\t\\tif (pattern.test(x)) return true;\\n249. \\t}\\n250. \\n251. \\treturn false;\\n252. }\\n"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1459, 'prompt_tokens': 11831, 'total_tokens': 13290, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e3a18e11-85c5-4054-9eec-22ceb5db2a46-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === 'Text') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n", 'new_content': "222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \n226. \t// boolean attribute: only matches presence selectors\n227. \tif (attr.value === true) return operator === null;\n228. \n229. \t// presence-only selector [attr]: matches if attribute exists regardless of value\n230. \tif (operator == null) return true;\n231. \n232. \t// multiple chunks / dynamic values — conservatively return true\n233. \tif (attr.value.length > 1) return true;\n234. \n235. \tconst op = operators[operator];\n236. \tif (!op) return false;\n237. \n238. \tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n239. \tconst value = attr.value[0];\n240. \n241. \tif (value.type === 'Text') return pattern.test(value.data);\n242. \n243. \tconst possibleValues = new Set();\n244. \tgatherPossibleValues(value.expression, possibleValues);\n245. \tif (possibleValues.has(UNKNOWN)) return true;\n246. \n247. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n248. \t\tif (pattern.test(x)) return true;\n249. \t}\n250. \n251. \treturn false;\n252. }\n"}, 'id': 'call_rea0wL6Omiw80stuPPVKVO0E', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11831, 'output_tokens': 1459, 'total_tokens': 13290, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:25:36,367 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_6uwUBX0vsmYyunpkEg67FuHE', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}\\n","new_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\n\\t// boolean attribute: only matches presence selectors\\n\\tif (attr.value === true) return operator === null;\\n\\n\\t// presence-only selector [attr]: matches if attribute exists regardless of value\\n\\tif (operator == null) return true;\\n\\n\\t// multiple chunks / dynamic values — conservatively return true\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst op = operators[operator];\\n\\tif (!op) return false;\\n\\n\\tconst pattern = op(expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}\\n"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1117, 'prompt_tokens': 12547, 'total_tokens': 13664, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--48352f54-5d63-4681-a92d-d2de4b10f462-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}\n", 'new_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\n\t// boolean attribute: only matches presence selectors\n\tif (attr.value === true) return operator === null;\n\n\t// presence-only selector [attr]: matches if attribute exists regardless of value\n\tif (operator == null) return true;\n\n\t// multiple chunks / dynamic values — conservatively return true\n\tif (attr.value.length > 1) return true;\n\n\tconst op = operators[operator];\n\tif (!op) return false;\n\n\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}\n"}, 'id': 'call_6uwUBX0vsmYyunpkEg67FuHE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 12547, 'output_tokens': 1117, 'total_tokens': 13664, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:25:38,006 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_EK15tYRCrsDjcKagbd3rUb4K', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 13100, 'total_tokens': 13123, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--2d8698bf-2ceb-4e30-9394-222da9217234-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_EK15tYRCrsDjcKagbd3rUb4K', 'type': 'tool_call'}] usage_metadata={'input_tokens': 13100, 'output_tokens': 23, 'total_tokens': 13123, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:25:40,810 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='I have implemented the fix in src/css/Selector.ts within the attributeMatches function to correctly handle presence-only attribute selectors when the attribute has a value. Specifically:\n\n- If operator is null, the function now returns true for any existing attribute (presence selector), not only for boolean attributes.\n- It retains special handling for boolean attributes (returns true only when operator is null).\n- It adds a defensive check to ensure operators[operator] exists before invoking it, returning false if not.\n- The rest of the logic remains unchanged.\n\nThis prevents the TypeError and ensures selectors like button[foo] work for both <button foo> and <button foo="bar">.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 137, 'prompt_tokens': 16138, 'total_tokens': 16275, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--1310bc54-92b5-48dd-b70e-221d9f8cd272-0' usage_metadata={'input_tokens': 16138, 'output_tokens': 137, 'total_tokens': 16275, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:25:40,848 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..05b784831 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,20 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
+
+	// boolean attribute: only matches presence selectors
 	if (attr.value === true) return operator === null;
+
+	// presence-only selector [attr]: matches if attribute exists regardless of value
+	if (operator == null) return true;
+
+	// multiple chunks / dynamic values — conservatively return true
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const op = operators[operator];
+	if (!op) return false;
+
+	const pattern = op(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:25:40,849 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:25:40,876 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting issue_bug_analyzer_messages in state.
2025-11-11 00:25:40,877 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting edit_messages in state.
2025-11-11 00:25:40,878 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_message_node - DEBUG - Sending message to IssueBugAnalyzerNode:
content='I am going to share details about an issue reported to a codebase and its related bug context.\nPlease analyze this bug and provide a high-level description of what needs to be changed:\n\n1. Issue Understanding:\n- Analyze the issue title, description, and comments provided\n- Identify the reported symptoms and unexpected behaviors\n\n2. Code Analysis:\n- Identify which files, functions, or code blocks are involved\n- Explain what the problematic code is currently doing\n\n3. Root Cause:\n- Explain why the current behavior is incorrect\n- Identify which specific parts of the code are causing the issue\n\n4. Fix Suggestion:\nFor each needed change, describe in plain English:\n- Which file needs to be modified\n- Which function or code block needs changes\n- What needs to be changed (e.g., "rename variable x to y", "add null check for parameter z")\n- Why this change would fix the issue\n\nDo NOT provide actual code snippets or diffs. Focus on describing what needs to be changed.\n\nHere are the details for analysis:\n\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug Context:\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n' additional_kwargs={} response_metadata={}
2025-11-11 00:26:10,612 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_node - DEBUG - content='1) Issue Understanding\n\n- Symptom: Using an attribute presence selector (button[foo]) works when the HTML attribute is a boolean attribute with no value (e.g., <button foo></button>), but it throws a TypeError when the attribute has an explicit value (e.g., <button foo="bar"></button>).\n- Unexpected behavior: The compiler throws TypeError: operators[operator] is not a function when attempting to match attributes for selectors like [foo] against elements where the attribute foo has a value.\n- Expected behavior: The CSS selector [foo] should match any element that has the foo attribute, regardless of whether it’s boolean (no value) or has an explicit value. It should not attempt to perform a value comparison since no operator was specified.\n\n2) Code Analysis\n\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function attributeMatches (lines 222–242)\n    - const operators mapping (lines 213–220)\n    - function applySelector (lines 130–211), specifically where AttributeSelector is handled (lines 162–165)\n- What the code is doing:\n  - applySelector calls attributeMatches for AttributeSelector selectors, passing the attribute name, value (if any), matcher (operator), and flags.\n  - attributeMatches:\n    - Looks up the attribute on the node.\n    - Special-cases boolean attributes (attr.value === true).\n    - If attr.value has length > 1, it currently returns true.\n    - Otherwise, it attempts to build a RegExp from operators[operator] and test the attribute value.\n  - operators is a map of operator strings (\'=\', \'~=\', etc.) to functions for generating regexes. There is no entry for a “presence” operator (null/undefined).\n\n3) Root Cause\n\n- The attribute presence selector [foo] has no operator; selector.matcher is absent (null or undefined).\n- attributeMatches tries to create a pattern with operators[operator](...), but when operator is null/undefined, operators[operator] is undefined, causing TypeError: operators[operator] is not a function.\n- The code incorrectly assumes an operator-specific pattern is needed for all attribute selectors, including presence-only selectors. Presence-only selectors should simply return true if the attribute exists irrespective of its value.\n- The partial special-case for boolean attributes (attr.value === true) currently returns operator === null, but it does not handle valued attributes with absent operators, which leads to the exception.\n\n4) Fix Suggestion\n\nA) src/css/Selector.ts – attributeMatches function\n- Change needed: Add an explicit early return for presence-only selectors.\n- Specifics:\n  - Function: attributeMatches\n  - Code block: Early checks after finding attr (lines 222–229 area).\n  - Modify logic so that if no operator is specified (operator is null or undefined), return true as long as the attribute exists, without attempting to build a regex pattern.\n  - Also, generalize the boolean attribute handling so it doesn’t depend strictly on operator === null; treat “operator is absent” (null or undefined) as a presence check.\n- Why this fixes the issue: Presence selectors [foo] should match any element having the attribute regardless of its value. Avoiding the attempt to call operators[operator] when operator is absent prevents the TypeError and correctly implements CSS semantics.\n\nB) src/css/Selector.ts – attributeMatches function (robustness improvement)\n- Change needed: Guard the pattern creation against unknown operators.\n- Specifics:\n  - Function: attributeMatches\n  - Code block: Where pattern is created (current line 228).\n  - Add a check that operators[operator] exists before calling it. If it doesn’t, handle gracefully (e.g., treat as non-match or as presence when operator is absent).\n- Why this fixes the issue: Prevents runtime exceptions if an unexpected operator value reaches this code path and makes the function more robust to parser variations or future changes.\n\nC) Optional safety measure in parsing/matcher handling (if applicable in your codebase)\n- Change needed: Ensure selector.matcher is consistently null for presence-only selectors rather than undefined.\n- Specifics:\n  - File: Wherever AttributeSelector nodes are constructed (not shown in the shared context). This is optional and depends on your parser.\n  - Ensure the matcher field for presence-only selectors is a consistent “absent” value.\n- Why this helps: Makes presence checks consistent and aligns with the boolean attribute check that currently compares to null. Combined with (A), it ensures consistent behavior across different attribute value representations.\n\nNo changes are needed in applySelector or the operators mapping for correctness of this specific issue; the fundamental fix is to make attributeMatches treat absent operator as a presence check and avoid calling into operators for that case.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 3742, 'prompt_tokens': 7393, 'total_tokens': 11135, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 2752, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--db2e439b-0042-4d5e-9633-be04d3fb98b9-0' usage_metadata={'input_tokens': 7393, 'output_tokens': 3742, 'total_tokens': 11135, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 2752}}
2025-11-11 00:26:10,617 - thread-133013312636608.prometheus.lang_graph.nodes.edit_message_node - DEBUG - Sending message to EditNode:
content='--- BEGIN ISSUE INFO ---\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n--- END ISSUE INFO ---\n\nContext Found:\n--- BEGIN CONTEXT ---\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n--- END CONTEXT ---\nThese context should be enough to help you make the necessary code edits. Do NOT explore for more context in the codebase!\n\nAnalyzer agent has analyzed the issue and provided instruction on the issue:\n--- BEGIN ANALYZER MESSAGE ---\n1) Issue Understanding\n\n- Symptom: Using an attribute presence selector (button[foo]) works when the HTML attribute is a boolean attribute with no value (e.g., <button foo></button>), but it throws a TypeError when the attribute has an explicit value (e.g., <button foo="bar"></button>).\n- Unexpected behavior: The compiler throws TypeError: operators[operator] is not a function when attempting to match attributes for selectors like [foo] against elements where the attribute foo has a value.\n- Expected behavior: The CSS selector [foo] should match any element that has the foo attribute, regardless of whether it’s boolean (no value) or has an explicit value. It should not attempt to perform a value comparison since no operator was specified.\n\n2) Code Analysis\n\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function attributeMatches (lines 222–242)\n    - const operators mapping (lines 213–220)\n    - function applySelector (lines 130–211), specifically where AttributeSelector is handled (lines 162–165)\n- What the code is doing:\n  - applySelector calls attributeMatches for AttributeSelector selectors, passing the attribute name, value (if any), matcher (operator), and flags.\n  - attributeMatches:\n    - Looks up the attribute on the node.\n    - Special-cases boolean attributes (attr.value === true).\n    - If attr.value has length > 1, it currently returns true.\n    - Otherwise, it attempts to build a RegExp from operators[operator] and test the attribute value.\n  - operators is a map of operator strings (\'=\', \'~=\', etc.) to functions for generating regexes. There is no entry for a “presence” operator (null/undefined).\n\n3) Root Cause\n\n- The attribute presence selector [foo] has no operator; selector.matcher is absent (null or undefined).\n- attributeMatches tries to create a pattern with operators[operator](...), but when operator is null/undefined, operators[operator] is undefined, causing TypeError: operators[operator] is not a function.\n- The code incorrectly assumes an operator-specific pattern is needed for all attribute selectors, including presence-only selectors. Presence-only selectors should simply return true if the attribute exists irrespective of its value.\n- The partial special-case for boolean attributes (attr.value === true) currently returns operator === null, but it does not handle valued attributes with absent operators, which leads to the exception.\n\n4) Fix Suggestion\n\nA) src/css/Selector.ts – attributeMatches function\n- Change needed: Add an explicit early return for presence-only selectors.\n- Specifics:\n  - Function: attributeMatches\n  - Code block: Early checks after finding attr (lines 222–229 area).\n  - Modify logic so that if no operator is specified (operator is null or undefined), return true as long as the attribute exists, without attempting to build a regex pattern.\n  - Also, generalize the boolean attribute handling so it doesn’t depend strictly on operator === null; treat “operator is absent” (null or undefined) as a presence check.\n- Why this fixes the issue: Presence selectors [foo] should match any element having the attribute regardless of its value. Avoiding the attempt to call operators[operator] when operator is absent prevents the TypeError and correctly implements CSS semantics.\n\nB) src/css/Selector.ts – attributeMatches function (robustness improvement)\n- Change needed: Guard the pattern creation against unknown operators.\n- Specifics:\n  - Function: attributeMatches\n  - Code block: Where pattern is created (current line 228).\n  - Add a check that operators[operator] exists before calling it. If it doesn’t, handle gracefully (e.g., treat as non-match or as presence when operator is absent).\n- Why this fixes the issue: Prevents runtime exceptions if an unexpected operator value reaches this code path and makes the function more robust to parser variations or future changes.\n\nC) Optional safety measure in parsing/matcher handling (if applicable in your codebase)\n- Change needed: Ensure selector.matcher is consistently null for presence-only selectors rather than undefined.\n- Specifics:\n  - File: Wherever AttributeSelector nodes are constructed (not shown in the shared context). This is optional and depends on your parser.\n  - Ensure the matcher field for presence-only selectors is a consistent “absent” value.\n- Why this helps: Makes presence checks consistent and aligns with the boolean attribute check that currently compares to null. Combined with (A), it ensures consistent behavior across different attribute value representations.\n\nNo changes are needed in applySelector or the operators mapping for correctness of this specific issue; the fundamental fix is to make attributeMatches treat absent operator as a presence check and avoid calling into operators for that case.\n--- END ANALYZER MESSAGE ---\n\nIMPORTANT INSTRUCTION:\n- The context provided above should be sufficient for you to make the required code edits. Do NOT explore for more context in the codebase!\n- Do NOT FIND, WRITE or RUN any tests, your change will be tested automatically by reproduction tests and regression tests later!!!\n- Never write any tests yourself!!! (Very important!)\n\nPlease implement these changes precisely, following the exact specifications from the analyzer.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:26:25,673 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_TcpWGdYqpTWX6itVgtqXGs1t', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1437, 'prompt_tokens': 8837, 'total_tokens': 10274, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1408, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--13b2f61f-3453-4211-aba1-3c13d82a312e-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_TcpWGdYqpTWX6itVgtqXGs1t', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8837, 'output_tokens': 1437, 'total_tokens': 10274, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1408}}
2025-11-11 00:26:45,266 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_oc9kGZuEVl6nHq9ZbKOvQM4a', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"\\tif (!attr) return false;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];","new_content":"\\tif (!attr) return false;\\n\\t// presence-only selector ([attr]) — matches if attribute exists regardless of value\\n\\tif (operator == null) return true;\\n\\t// boolean attributes can only be matched by presence selectors\\n\\tif (attr.value === true) return false;\\n\\t// if the value is dynamic or contains multiple chunks, assume it could match\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst make = operators[operator];\\n\\tif (!make) return false;\\n\\tconst pattern = make(expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2040, 'prompt_tokens': 11786, 'total_tokens': 13826, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1792, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f496f622-d91b-4024-ba96-5f6416c54448-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "\tif (!attr) return false;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];", 'new_content': "\tif (!attr) return false;\n\t// presence-only selector ([attr]) — matches if attribute exists regardless of value\n\tif (operator == null) return true;\n\t// boolean attributes can only be matched by presence selectors\n\tif (attr.value === true) return false;\n\t// if the value is dynamic or contains multiple chunks, assume it could match\n\tif (attr.value.length > 1) return true;\n\n\tconst make = operators[operator];\n\tif (!make) return false;\n\tconst pattern = make(expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];"}, 'id': 'call_oc9kGZuEVl6nHq9ZbKOvQM4a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11786, 'output_tokens': 2040, 'total_tokens': 13826, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1792}}
2025-11-11 00:26:46,893 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_NqraDp9io70VfeZAvCVJWUhL', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 12046, 'total_tokens': 12069, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--7f77ca97-baeb-4c75-88f9-15788848c970-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_NqraDp9io70VfeZAvCVJWUhL', 'type': 'tool_call'}] usage_metadata={'input_tokens': 12046, 'output_tokens': 23, 'total_tokens': 12069, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:26:49,304 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='I have implemented the fix in src/css/Selector.ts to correctly handle presence-only attribute selectors.\n\nChanges made:\n- In attributeMatches, added an early return for presence-only selectors when operator is null or undefined, so elements with the attribute are matched regardless of value.\n- Adjusted boolean attribute handling: boolean attributes now only match presence selectors and will not attempt value comparison.\n- Added a guard to ensure operators[operator] exists before calling it to avoid TypeError.\n- Kept existing behavior for dynamic/multi-chunk attribute values.\n\nThis resolves the TypeError and makes [foo] correctly match both <button foo></button> and <button foo="bar"></button>.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 139, 'prompt_tokens': 15077, 'total_tokens': 15216, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--23c05a2a-0199-4277-b0ae-988c0a9d3a3e-0' usage_metadata={'input_tokens': 15077, 'output_tokens': 139, 'total_tokens': 15216, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:26:49,343 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..0b8632018 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,16 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// presence-only selector ([attr]) — matches if attribute exists regardless of value
+	if (operator == null) return true;
+	// boolean attributes can only be matched by presence selectors
+	if (attr.value === true) return false;
+	// if the value is dynamic or contains multiple chunks, assume it could match
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const make = operators[operator];
+	if (!make) return false;
+	const pattern = make(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:26:49,345 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:26:49,373 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting issue_bug_analyzer_messages in state.
2025-11-11 00:26:49,374 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting edit_messages in state.
2025-11-11 00:26:49,376 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_message_node - DEBUG - Sending message to IssueBugAnalyzerNode:
content='I am going to share details about an issue reported to a codebase and its related bug context.\nPlease analyze this bug and provide a high-level description of what needs to be changed:\n\n1. Issue Understanding:\n- Analyze the issue title, description, and comments provided\n- Identify the reported symptoms and unexpected behaviors\n\n2. Code Analysis:\n- Identify which files, functions, or code blocks are involved\n- Explain what the problematic code is currently doing\n\n3. Root Cause:\n- Explain why the current behavior is incorrect\n- Identify which specific parts of the code are causing the issue\n\n4. Fix Suggestion:\nFor each needed change, describe in plain English:\n- Which file needs to be modified\n- Which function or code block needs changes\n- What needs to be changed (e.g., "rename variable x to y", "add null check for parameter z")\n- Why this change would fix the issue\n\nDo NOT provide actual code snippets or diffs. Focus on describing what needs to be changed.\n\nHere are the details for analysis:\n\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug Context:\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n' additional_kwargs={} response_metadata={}
2025-11-11 00:27:38,990 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_node - DEBUG - content='1) Issue Understanding\n\n- Reported symptom: Using a CSS attribute presence selector [foo] on an element that has the attribute with a value (e.g., <button foo="bar">) throws a runtime error “TypeError: operators[operator] is not a function”.\n- Expected behavior: In CSS, [foo] should match any element that has an attribute named foo, regardless of whether it’s a boolean attribute (no explicit value) or has an explicit value.\n- Observed behavior: [foo] works when the attribute is boolean (e.g., <button foo>), but throws when the attribute has a value (e.g., <button foo="bar">).\n\n\n2) Code Analysis\n\n- In src/css/Selector.ts, applySelector (lines ~130–211) handles different selector types. For AttributeSelector (lines 162–164), it calls attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags).\n  - For a presence-only selector [foo], selector.matcher is null/undefined and selector.value is unset.\n- The attributeMatches function (src/css/Selector.ts, lines 222–242) attempts to build a regex pattern using operators[operator](...). The operators map (lines 213–220) only defines functions for \'=\', \'~=\', \'|=\', \'^=\', \'$=\', \'*=\'; there is no handler for a presence-only selector (operator being null/undefined).\n- attributeMatches has a special-case early return for boolean attributes: if (attr.value === true) return operator === null. This covers the <button foo> case when operator is null, but does not cover <button foo="bar"> with operator null because attr.value is not true (it’s an array containing a text node), so it continues and tries to call operators[operator] with operator === null, causing the TypeError.\n\n\n3) Root Cause\n\n- Presence-only attribute selectors ([attr]) are not treated as a special case when the attribute has an explicit value. The function attributeMatches assumes there is a matcher operator and attempts to retrieve a corresponding function from operators, but for presence-only selectors operator is null/undefined, resulting in operators[operator] being undefined and the subsequent function call throwing a TypeError.\n- The bug specifically arises because attributeMatches only handles the boolean attribute presence case and then proceeds to build a regex based on a null operator for attributes with a text value, which is incorrect.\n\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches (lines 222–242)\n- Change: Add an early guard to handle presence-only selectors. After finding the attribute (post “const attr = node.attributes.find(...)” and “if (!attr) return false”), check if the operator is null/undefined and, if so, return true immediately (because [attr] matches any element where the attribute is present, irrespective of its value type).\n- Why: This prevents attempting operators[operator](...) with a null/undefined operator and aligns the behavior with CSS semantics: presence-only selectors match based solely on attribute existence, not value.\n\nChange 2:\n- File: src/css/Selector.ts\n- Function: attributeMatches (lines 222–242)\n- Change: Keep the existing boolean attribute handling (“if (attr.value === true) return operator === null”) to ensure selectors with an explicit comparison (e.g., [foo=bar]) do not match boolean attributes without values. This check should occur after the new presence-only guard so that boolean presence with operator null still returns true, and boolean with a non-null operator returns false.\n- Why: Preserves correct behavior for boolean attributes and value-based comparisons while ensuring presence-only selectors are handled properly.\n\nChange 3:\n- File: src/css/Selector.ts\n- Function: attributeMatches signature (line 222)\n- Change: Update the type of the operator parameter to accept null/undefined (e.g., allow a union type instead of only string) to match AttributeSelector.matcher in presence-only cases and avoid TypeScript type mismatches.\n- Why: Ensures the function’s signature correctly reflects the possible values passed by applySelector and avoids type-related issues.\n\nNote: No changes are needed in applySelector’s call site for AttributeSelector; it already passes selector.matcher (which is null for [attr]) and selector.value is absent for presence-only selectors. The critical fix is to guard against null/undefined operator inside attributeMatches.\n\nThis set of changes will stop the TypeError and make [foo] match elements that have the foo attribute, regardless of whether it is boolean or has a value, which is consistent with standard CSS behavior.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 4738, 'prompt_tokens': 7393, 'total_tokens': 12131, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 3776, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--0399e637-156c-48c9-8973-93f82d860da4-0' usage_metadata={'input_tokens': 7393, 'output_tokens': 4738, 'total_tokens': 12131, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 3776}}
2025-11-11 00:27:38,994 - thread-133013312636608.prometheus.lang_graph.nodes.edit_message_node - DEBUG - Sending message to EditNode:
content='--- BEGIN ISSUE INFO ---\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n--- END ISSUE INFO ---\n\nContext Found:\n--- BEGIN CONTEXT ---\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n--- END CONTEXT ---\nThese context should be enough to help you make the necessary code edits. Do NOT explore for more context in the codebase!\n\nAnalyzer agent has analyzed the issue and provided instruction on the issue:\n--- BEGIN ANALYZER MESSAGE ---\n1) Issue Understanding\n\n- Reported symptom: Using a CSS attribute presence selector [foo] on an element that has the attribute with a value (e.g., <button foo="bar">) throws a runtime error “TypeError: operators[operator] is not a function”.\n- Expected behavior: In CSS, [foo] should match any element that has an attribute named foo, regardless of whether it’s a boolean attribute (no explicit value) or has an explicit value.\n- Observed behavior: [foo] works when the attribute is boolean (e.g., <button foo>), but throws when the attribute has a value (e.g., <button foo="bar">).\n\n\n2) Code Analysis\n\n- In src/css/Selector.ts, applySelector (lines ~130–211) handles different selector types. For AttributeSelector (lines 162–164), it calls attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags).\n  - For a presence-only selector [foo], selector.matcher is null/undefined and selector.value is unset.\n- The attributeMatches function (src/css/Selector.ts, lines 222–242) attempts to build a regex pattern using operators[operator](...). The operators map (lines 213–220) only defines functions for \'=\', \'~=\', \'|=\', \'^=\', \'$=\', \'*=\'; there is no handler for a presence-only selector (operator being null/undefined).\n- attributeMatches has a special-case early return for boolean attributes: if (attr.value === true) return operator === null. This covers the <button foo> case when operator is null, but does not cover <button foo="bar"> with operator null because attr.value is not true (it’s an array containing a text node), so it continues and tries to call operators[operator] with operator === null, causing the TypeError.\n\n\n3) Root Cause\n\n- Presence-only attribute selectors ([attr]) are not treated as a special case when the attribute has an explicit value. The function attributeMatches assumes there is a matcher operator and attempts to retrieve a corresponding function from operators, but for presence-only selectors operator is null/undefined, resulting in operators[operator] being undefined and the subsequent function call throwing a TypeError.\n- The bug specifically arises because attributeMatches only handles the boolean attribute presence case and then proceeds to build a regex based on a null operator for attributes with a text value, which is incorrect.\n\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches (lines 222–242)\n- Change: Add an early guard to handle presence-only selectors. After finding the attribute (post “const attr = node.attributes.find(...)” and “if (!attr) return false”), check if the operator is null/undefined and, if so, return true immediately (because [attr] matches any element where the attribute is present, irrespective of its value type).\n- Why: This prevents attempting operators[operator](...) with a null/undefined operator and aligns the behavior with CSS semantics: presence-only selectors match based solely on attribute existence, not value.\n\nChange 2:\n- File: src/css/Selector.ts\n- Function: attributeMatches (lines 222–242)\n- Change: Keep the existing boolean attribute handling (“if (attr.value === true) return operator === null”) to ensure selectors with an explicit comparison (e.g., [foo=bar]) do not match boolean attributes without values. This check should occur after the new presence-only guard so that boolean presence with operator null still returns true, and boolean with a non-null operator returns false.\n- Why: Preserves correct behavior for boolean attributes and value-based comparisons while ensuring presence-only selectors are handled properly.\n\nChange 3:\n- File: src/css/Selector.ts\n- Function: attributeMatches signature (line 222)\n- Change: Update the type of the operator parameter to accept null/undefined (e.g., allow a union type instead of only string) to match AttributeSelector.matcher in presence-only cases and avoid TypeScript type mismatches.\n- Why: Ensures the function’s signature correctly reflects the possible values passed by applySelector and avoids type-related issues.\n\nNote: No changes are needed in applySelector’s call site for AttributeSelector; it already passes selector.matcher (which is null for [attr]) and selector.value is absent for presence-only selectors. The critical fix is to guard against null/undefined operator inside attributeMatches.\n\nThis set of changes will stop the TypeError and make [foo] match elements that have the foo attribute, regardless of whether it is boolean or has a value, which is consistent with standard CSS behavior.\n--- END ANALYZER MESSAGE ---\n\nIMPORTANT INSTRUCTION:\n- The context provided above should be sufficient for you to make the required code edits. Do NOT explore for more context in the codebase!\n- Do NOT FIND, WRITE or RUN any tests, your change will be tested automatically by reproduction tests and regression tests later!!!\n- Never write any tests yourself!!! (Very important!)\n\nPlease implement these changes precisely, following the exact specifications from the analyzer.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:27:55,084 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ceqkw2U2iJyfKIk7Q5N3bw9a', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2013, 'prompt_tokens': 8809, 'total_tokens': 10822, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1984, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b9f1731d-710e-4f1e-834c-98ca2ebc38b3-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_ceqkw2U2iJyfKIk7Q5N3bw9a', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8809, 'output_tokens': 2013, 'total_tokens': 10822, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1984}}
2025-11-11 00:28:15,119 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_dyIptg2UlRr42TgcSOAWmITq', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}","new_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\t// Presence-only selector [attr] should match any present attribute regardless of its value\\n\\tif (operator == null) return true;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2036, 'prompt_tokens': 11758, 'total_tokens': 13794, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1536, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--0d4d2017-1367-419b-aff4-92d06bf77f75-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}", 'new_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\t// Presence-only selector [attr] should match any present attribute regardless of its value\n\tif (operator == null) return true;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}"}, 'id': 'call_dyIptg2UlRr42TgcSOAWmITq', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11758, 'output_tokens': 2036, 'total_tokens': 13794, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1536}}
2025-11-11 00:28:16,806 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_8udQDJmy3ICGWQhvclBIHVA0', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 12270, 'total_tokens': 12293, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a000b071-d941-4659-9e1d-846b3eb3e43c-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_8udQDJmy3ICGWQhvclBIHVA0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 12270, 'output_tokens': 23, 'total_tokens': 12293, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:28:19,700 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='I reviewed the target file, implemented the precise fix, and verified the changes.\n\nSummary of changes:\n- Updated attributeMatches in src/css/Selector.ts to correctly handle presence-only selectors ([attr]) by returning true when the operator is null/undefined, regardless of attribute value type.\n- Adjusted the operator parameter type in attributeMatches to string | null to reflect possible values and avoid runtime/type issues.\n\nThis resolves the TypeError when using button[foo] with foo="bar" and ensures CSS presence selectors match any element with the attribute present.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 113, 'prompt_tokens': 15254, 'total_tokens': 15367, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1280}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--ed768694-94c5-443c-8de2-64e6fbaa827e-0' usage_metadata={'input_tokens': 15254, 'output_tokens': 113, 'total_tokens': 15367, 'input_token_details': {'audio': 0, 'cache_read': 1280}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:28:19,739 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..34dae7f99 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,9 +219,11 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
+	// Presence-only selector [attr] should match any present attribute regardless of its value
+	if (operator == null) return true;
 	if (attr.value === true) return operator === null;
 	if (attr.value.length > 1) return true;
 

2025-11-11 00:28:19,741 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:28:19,770 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting issue_bug_analyzer_messages in state.
2025-11-11 00:28:19,771 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting edit_messages in state.
2025-11-11 00:28:19,773 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_message_node - DEBUG - Sending message to IssueBugAnalyzerNode:
content='I am going to share details about an issue reported to a codebase and its related bug context.\nPlease analyze this bug and provide a high-level description of what needs to be changed:\n\n1. Issue Understanding:\n- Analyze the issue title, description, and comments provided\n- Identify the reported symptoms and unexpected behaviors\n\n2. Code Analysis:\n- Identify which files, functions, or code blocks are involved\n- Explain what the problematic code is currently doing\n\n3. Root Cause:\n- Explain why the current behavior is incorrect\n- Identify which specific parts of the code are causing the issue\n\n4. Fix Suggestion:\nFor each needed change, describe in plain English:\n- Which file needs to be modified\n- Which function or code block needs changes\n- What needs to be changed (e.g., "rename variable x to y", "add null check for parameter z")\n- Why this change would fix the issue\n\nDo NOT provide actual code snippets or diffs. Focus on describing what needs to be changed.\n\nHere are the details for analysis:\n\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug Context:\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n' additional_kwargs={} response_metadata={}
2025-11-11 00:28:51,293 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_node - DEBUG - content='1) Issue Understanding\n\n- Reported symptom: Using a CSS attribute existence selector [foo] against an element with a value-bearing attribute (e.g., <button foo="bar">) crashes the compiler with TypeError: operators[operator] is not a function.\n- Expected behavior: Per CSS, [foo] should match any element that has an attribute named foo, regardless of whether it’s a boolean attribute (<button foo>) or has a value (<button foo="bar">). It should not throw.\n- Actual behavior: The selector [foo] only works when the HTML attribute has no value (boolean-style), and throws when the attribute has a value.\n\n2) Code Analysis\n\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function applySelector (lines 130–211): Routes selector checking based on selector.type and calls attributeMatches for AttributeSelector, ClassSelector, and IdSelector.\n    - const operators (lines 213–220): Maps CSS attribute matcher operators to regex constructors.\n    - function attributeMatches (lines 222–242): Performs attribute matching for selectors against the node’s attributes.\n  - Other relevant context:\n    - unquote (lines 248–255): Extracts string values from selector value nodes.\n\n- What the problematic code is currently doing:\n  - applySelector detects an AttributeSelector and calls attributeMatches with:\n    - name = selector.name.name\n    - expectedValue = selector.value && unquote(selector.value) (undefined if no value)\n    - operator = selector.matcher (null when using [foo] without an operator)\n    - caseInsensitive = selector.flags\n  - attributeMatches attempts to handle boolean attributes with:\n    - if (attr.value === true) return operator === null;\n  - For non-boolean attributes with operator === null (existence selector), it proceeds to:\n    - const pattern = operators[operator](expectedValue, flags)\n    - Since operator is null, operators[operator] is undefined and calling it throws TypeError.\n  - There is no branch for existence selectors with non-boolean values, leading to the crash.\n\n3) Root Cause\n\n- The code treats “attribute existence” selectors [attr] as though they only apply to boolean attributes (attr.value === true) and fails to handle the general case where the attribute exists but has a value (string, expression, etc.).\n- Specifically, in attributeMatches:\n  - When operator is null (existence selector) and the attribute value is not the boolean true, the function attempts to build a regex using operators[operator], where operator is null. This results in operators[null] being undefined and causes the TypeError.\n- The operators map is only defined for actual operators (\'=\', \'~=\', \'|=\', \'^=\', \'$=\', \'*=\'). Existence selectors do not have an operator and should be handled separately.\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- Change: Add an explicit branch to handle existence selectors (operator is null or undefined). After finding the attribute (i.e., after the attr lookup), return true when operator is null/undefined, regardless of attr.value type.\n  - Concretely: Introduce an early return for operator == null to indicate a match purely based on attribute presence.\n  - Also adjust or remove the current special-case line that returns operator === null only when attr.value === true. With the new existence logic, [foo] should match both <button foo> and <button foo="bar">, so the special-case is no longer needed or should be subsumed by the broader operator-null logic.\n- Why this fixes the issue: It implements the correct CSS semantics for [attr] (match by presence), prevents attempting to index operators with a null key, and avoids the TypeError.\n\nChange 2 (defensive guard):\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- Change: Only compute the regex pattern with operators[operator] when operator is one of the supported strings. Add a guard so that pattern construction is skipped if operator is null/undefined.\n  - This is a defensive reinforcement to ensure operator-specific matching is not attempted for existence selectors.\n- Why this fixes the issue: Ensures the function never calls undefined as a function, eliminating the crash path even if other logic changes in the future.\n\nNo changes are required to:\n- applySelector in src/css/Selector.ts: It already passes selector.matcher (null for [foo]) and selector.value (undefined when no value), which is correct. The corrected attributeMatches will now handle this correctly.\n- operators map in src/css/Selector.ts: Existence selectors do not need an operator function; adding a null entry here would be a misuse of the abstraction. Handling it in attributeMatches is appropriate.\n\nThese changes will align the implementation with the CSS specification for attribute selectors, allow [foo] to match any element that has foo defined, and prevent the TypeError in the presence of value-bearing attributes.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 3594, 'prompt_tokens': 7393, 'total_tokens': 10987, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 2560, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7296}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--ec33325d-6bec-4339-894a-dd448bd02679-0' usage_metadata={'input_tokens': 7393, 'output_tokens': 3594, 'total_tokens': 10987, 'input_token_details': {'audio': 0, 'cache_read': 7296}, 'output_token_details': {'audio': 0, 'reasoning': 2560}}
2025-11-11 00:28:51,297 - thread-133013312636608.prometheus.lang_graph.nodes.edit_message_node - DEBUG - Sending message to EditNode:
content='--- BEGIN ISSUE INFO ---\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n--- END ISSUE INFO ---\n\nContext Found:\n--- BEGIN CONTEXT ---\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n--- END CONTEXT ---\nThese context should be enough to help you make the necessary code edits. Do NOT explore for more context in the codebase!\n\nAnalyzer agent has analyzed the issue and provided instruction on the issue:\n--- BEGIN ANALYZER MESSAGE ---\n1) Issue Understanding\n\n- Reported symptom: Using a CSS attribute existence selector [foo] against an element with a value-bearing attribute (e.g., <button foo="bar">) crashes the compiler with TypeError: operators[operator] is not a function.\n- Expected behavior: Per CSS, [foo] should match any element that has an attribute named foo, regardless of whether it’s a boolean attribute (<button foo>) or has a value (<button foo="bar">). It should not throw.\n- Actual behavior: The selector [foo] only works when the HTML attribute has no value (boolean-style), and throws when the attribute has a value.\n\n2) Code Analysis\n\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function applySelector (lines 130–211): Routes selector checking based on selector.type and calls attributeMatches for AttributeSelector, ClassSelector, and IdSelector.\n    - const operators (lines 213–220): Maps CSS attribute matcher operators to regex constructors.\n    - function attributeMatches (lines 222–242): Performs attribute matching for selectors against the node’s attributes.\n  - Other relevant context:\n    - unquote (lines 248–255): Extracts string values from selector value nodes.\n\n- What the problematic code is currently doing:\n  - applySelector detects an AttributeSelector and calls attributeMatches with:\n    - name = selector.name.name\n    - expectedValue = selector.value && unquote(selector.value) (undefined if no value)\n    - operator = selector.matcher (null when using [foo] without an operator)\n    - caseInsensitive = selector.flags\n  - attributeMatches attempts to handle boolean attributes with:\n    - if (attr.value === true) return operator === null;\n  - For non-boolean attributes with operator === null (existence selector), it proceeds to:\n    - const pattern = operators[operator](expectedValue, flags)\n    - Since operator is null, operators[operator] is undefined and calling it throws TypeError.\n  - There is no branch for existence selectors with non-boolean values, leading to the crash.\n\n3) Root Cause\n\n- The code treats “attribute existence” selectors [attr] as though they only apply to boolean attributes (attr.value === true) and fails to handle the general case where the attribute exists but has a value (string, expression, etc.).\n- Specifically, in attributeMatches:\n  - When operator is null (existence selector) and the attribute value is not the boolean true, the function attempts to build a regex using operators[operator], where operator is null. This results in operators[null] being undefined and causes the TypeError.\n- The operators map is only defined for actual operators (\'=\', \'~=\', \'|=\', \'^=\', \'$=\', \'*=\'). Existence selectors do not have an operator and should be handled separately.\n\n4) Fix Suggestion\n\nChange 1:\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- Change: Add an explicit branch to handle existence selectors (operator is null or undefined). After finding the attribute (i.e., after the attr lookup), return true when operator is null/undefined, regardless of attr.value type.\n  - Concretely: Introduce an early return for operator == null to indicate a match purely based on attribute presence.\n  - Also adjust or remove the current special-case line that returns operator === null only when attr.value === true. With the new existence logic, [foo] should match both <button foo> and <button foo="bar">, so the special-case is no longer needed or should be subsumed by the broader operator-null logic.\n- Why this fixes the issue: It implements the correct CSS semantics for [attr] (match by presence), prevents attempting to index operators with a null key, and avoids the TypeError.\n\nChange 2 (defensive guard):\n- File: src/css/Selector.ts\n- Function: attributeMatches\n- Change: Only compute the regex pattern with operators[operator] when operator is one of the supported strings. Add a guard so that pattern construction is skipped if operator is null/undefined.\n  - This is a defensive reinforcement to ensure operator-specific matching is not attempted for existence selectors.\n- Why this fixes the issue: Ensures the function never calls undefined as a function, eliminating the crash path even if other logic changes in the future.\n\nNo changes are required to:\n- applySelector in src/css/Selector.ts: It already passes selector.matcher (null for [foo]) and selector.value (undefined when no value), which is correct. The corrected attributeMatches will now handle this correctly.\n- operators map in src/css/Selector.ts: Existence selectors do not need an operator function; adding a null entry here would be a misuse of the abstraction. Handling it in attributeMatches is appropriate.\n\nThese changes will align the implementation with the CSS specification for attribute selectors, allow [foo] to match any element that has foo defined, and prevent the TypeError in the presence of value-bearing attributes.\n--- END ANALYZER MESSAGE ---\n\nIMPORTANT INSTRUCTION:\n- The context provided above should be sufficient for you to make the required code edits. Do NOT explore for more context in the codebase!\n- Do NOT FIND, WRITE or RUN any tests, your change will be tested automatically by reproduction tests and regression tests later!!!\n- Never write any tests yourself!!! (Very important!)\n\nPlease implement these changes precisely, following the exact specifications from the analyzer.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:29:03,427 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_HVhr8wWgkUraMKbq3s763UDE', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1309, 'prompt_tokens': 8881, 'total_tokens': 10190, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d7c8d948-3004-4e94-9a42-09d732a864fe-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_HVhr8wWgkUraMKbq3s763UDE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8881, 'output_tokens': 1309, 'total_tokens': 10190, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-11 00:29:25,471 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_KDCF17OhWjwReOPpty9dAMuQ', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}","new_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\n\\t// Existence selector [attr] matches if attribute is present, regardless of value\\n\\tif (operator == null) return true;\\n\\n\\t// Boolean attribute cannot satisfy operators like \'=\', \'~=\', etc.\\n\\tif (attr.value === true) return false;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst op = operators[operator];\\n\\tif (!op) return false;\\n\\tconst pattern = op(expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2064, 'prompt_tokens': 11830, 'total_tokens': 13894, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1536, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f3d0af53-86ab-4eac-bb86-f166908fee08-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}", 'new_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\n\t// Existence selector [attr] matches if attribute is present, regardless of value\n\tif (operator == null) return true;\n\n\t// Boolean attribute cannot satisfy operators like '=', '~=', etc.\n\tif (attr.value === true) return false;\n\tif (attr.value.length > 1) return true;\n\n\tconst op = operators[operator];\n\tif (!op) return false;\n\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}"}, 'id': 'call_KDCF17OhWjwReOPpty9dAMuQ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11830, 'output_tokens': 2064, 'total_tokens': 13894, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1536}}
2025-11-11 00:29:26,783 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_f0fNfobrCry9V0cihF4KpXyO', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 12370, 'total_tokens': 12393, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--80002f40-16fa-41ba-a93d-644b7da7e56f-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_f0fNfobrCry9V0cihF4KpXyO', 'type': 'tool_call'}] usage_metadata={'input_tokens': 12370, 'output_tokens': 23, 'total_tokens': 12393, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:29:29,133 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='I have implemented the fix as analyzed:\n\n- Updated attributeMatches in src/css/Selector.ts to correctly handle existence selectors [attr]:\n  - If operator is null/undefined, it now returns true when the attribute is present, regardless of whether it’s boolean or has a value.\n  - Added a guard to avoid calling operators[operator] when operator is null or unsupported.\n  - Adjusted boolean attribute handling to return false for operator-based matches.\n\nThis prevents the TypeError and aligns behavior with CSS semantics for attribute existence selectors.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 110, 'prompt_tokens': 15389, 'total_tokens': 15499, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8832}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--ecdf329c-2e25-4065-b54f-106aec356b3c-0' usage_metadata={'input_tokens': 15389, 'output_tokens': 110, 'total_tokens': 15499, 'input_token_details': {'audio': 0, 'cache_read': 8832}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:29:29,173 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..3c75603d1 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,17 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+
+	// Existence selector [attr] matches if attribute is present, regardless of value
+	if (operator == null) return true;
+
+	// Boolean attribute cannot satisfy operators like '=', '~=', etc.
+	if (attr.value === true) return false;
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const op = operators[operator];
+	if (!op) return false;
+	const pattern = op(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:29:29,175 - thread-133013312636608.prometheus.lang_graph.nodes.git_reset_node - DEBUG - Resetting the git repository
2025-11-11 00:29:29,203 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting issue_bug_analyzer_messages in state.
2025-11-11 00:29:29,204 - thread-133013312636608.prometheus.lang_graph.nodes.reset_messages_node - DEBUG - Resetting edit_messages in state.
2025-11-11 00:29:29,206 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_message_node - DEBUG - Sending message to IssueBugAnalyzerNode:
content='I am going to share details about an issue reported to a codebase and its related bug context.\nPlease analyze this bug and provide a high-level description of what needs to be changed:\n\n1. Issue Understanding:\n- Analyze the issue title, description, and comments provided\n- Identify the reported symptoms and unexpected behaviors\n\n2. Code Analysis:\n- Identify which files, functions, or code blocks are involved\n- Explain what the problematic code is currently doing\n\n3. Root Cause:\n- Explain why the current behavior is incorrect\n- Identify which specific parts of the code are causing the issue\n\n4. Fix Suggestion:\nFor each needed change, describe in plain English:\n- Which file needs to be modified\n- Which function or code block needs changes\n- What needs to be changed (e.g., "rename variable x to y", "add null check for parameter z")\n- Why this change would fix the issue\n\nDo NOT provide actual code snippets or diffs. Focus on describing what needs to be changed.\n\nHere are the details for analysis:\n\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n\nBug Context:\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n' additional_kwargs={} response_metadata={}
2025-11-11 00:30:01,672 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_analyzer_node - DEBUG - content='1) Issue Understanding\n- Reported symptom: Using a presence-only attribute selector (button[foo]) throws a TypeError when the corresponding HTML attribute has a value (e.g., foo="bar"). It works when the HTML attribute is a boolean/presence-only attribute (foo without a value).\n- Unexpected behavior: Presence-only CSS attribute selectors are supposed to match elements that have the attribute, regardless of whether it has a value. Instead, the compiler throws TypeError: operators[operator] is not a function.\n\n2) Code Analysis\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function applySelector (lines ~130–211): Calls attributeMatches for AttributeSelector cases.\n    - const operators (lines ~213–220): Defines functions for attribute selector operators (=, ~=, |=, ^=, $=, *=).\n    - function attributeMatches (lines ~222–242): Performs attribute matching logic; this is where the exception occurs.\n- Current behavior in attributeMatches:\n  - Finds the attribute on the node by name.\n  - If attr.value === true (boolean attribute), it returns operator === null.\n  - If attr.value.length > 1, it returns true.\n  - Otherwise, it constructs a RegExp via operators[operator](expectedValue, flags) and tests the attribute value(s).\n- Problematic path:\n  - For a presence-only selector [foo], selector.matcher is null.\n  - When the HTML has foo="bar", attr.value !== true and length is 1, so the function proceeds to construct a regex: operators[operator](...), but operator is null, so operators[null] is undefined, leading to the TypeError.\n\n3) Root Cause\n- The code does not handle presence-only attribute selectors ([attr]) when the attribute has a non-boolean value. It assumes an operator function exists and tries to call operators[operator] regardless of whether operator is null.\n- Specifically, attributeMatches assumes that operator will always be one of the defined operator keys, and attempts to create a pattern even when operator is null. Presence-only matching should short-circuit to “attribute exists” and should not attempt any regex construction.\n\n4) Fix Suggestion\n- File: src/css/Selector.ts\n  - Function: attributeMatches (lines ~222–242)\n    - Change: Add an early guard for presence-only selectors. After finding the attribute (i.e., after const attr = node.attributes.find(...)), check if operator is null (or undefined if that’s how it is represented). If operator is null, immediately return true because presence-only selectors should match any element that simply has the attribute, regardless of its value.\n    - Adjust the logic so that the regex construction (operators[operator](...)) is only executed when operator is a known operator string. Do not attempt to create a pattern when operator is null.\n    - Optionally, simplify the boolean attribute branch: Instead of special-casing attr.value === true with operator === null, rely on the new early guard for operator === null to cover both boolean attributes and attributes with values. If you keep the boolean attribute branch, ensure it does not fall through to the regex path for operator === null.\n    - Why: This avoids calling undefined as a function (operators[null]) and correctly implements CSS semantics for presence-only selectors by returning true whenever the attribute exists.\n\n- File: src/css/Selector.ts\n  - Function signature: attributeMatches\n    - Change: Update the type of the operator parameter to accept null (e.g., string | null) to reflect actual usage (selector.matcher can be null for presence-only selectors). This is a type-level adjustment to align with runtime behavior.\n    - Why: Makes the intent explicit in TypeScript and prevents incorrect assumptions in future changes.\n\n- File: src/css/Selector.ts\n  - Function: applySelector (lines ~162–165)\n    - Change: No functional change required, but ensure that passing selector.matcher (which can be null) is expected by attributeMatches after the signature/type update above.\n    - Why: The call site remains correct; the fix in attributeMatches ensures presence-only selectors are handled properly.\n\nThese changes will prevent the TypeError and make presence-only selectors behave as expected: button[foo] will match a button whether it has foo or foo="bar".' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 3326, 'prompt_tokens': 7393, 'total_tokens': 10719, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 2432, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--ebef694e-6dbf-40b4-839f-ea2231f8d7a7-0' usage_metadata={'input_tokens': 7393, 'output_tokens': 3326, 'total_tokens': 10719, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 2432}}
2025-11-11 00:30:01,677 - thread-133013312636608.prometheus.lang_graph.nodes.edit_message_node - DEBUG - Sending message to EditNode:
content='--- BEGIN ISSUE INFO ---\nIssue title:\nAttribute name only (no value) CSS selector throws if html attribute has a value.\n\nIssue description: \nThis is fine:\n\n```html\n<button foo></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\nBut this throws `TypeError: operators[operator] is not a function`:\n\n```html\n<button foo="bar"></button>\n\n<style>\nbutton[foo] {}\n</style>\n```\n\n[REPL](https://svelte.technology/repl?version=1.41.1&gist=9ba8d98eb5b84696a61aa4caca984923)\n\n<details>\n  <summary>Stack trace</summary>\n    TypeError: operators[operator] is not a function\n      at attributeMatches (Selector.ts:228)\n      at _loop_1 (Selector.ts:163)\n      at applySelector (Selector.ts:141)\n      at Selector.apply (Selector.ts:30)\n      at Stylesheet.ts:23\n      at Array.forEach (<anonymous>)\n      at Rule.apply (Stylesheet.ts:23)\n      at Stylesheet.apply (Stylesheet.ts:343)\n      at Element (preprocess.ts:427)\n      at preprocess.ts:482\n</details>\n\nIssue comments:\n\n--- END ISSUE INFO ---\n\nContext Found:\n--- BEGIN CONTEXT ---\nFile: src/css/Selector.ts\nLine number range: 12 - 26\nContent:\n12. \tconstructor(node: Node) {\n13. \t\tthis.node = node;\n14. \n15. \t\tthis.blocks = groupSelectors(node);\n16. \n17. \t\t// take trailing :global(...) selectors out of consideration\n18. \t\tlet i = this.blocks.length;\n19. \t\twhile (i > 0) {\n20. \t\t\tif (!this.blocks[i - 1].global) break;\n21. \t\t\ti -= 1;\n22. \t\t}\n23. \n24. \t\tthis.localBlocks = this.blocks.slice(0, i);\n25. \t\tthis.used = this.blocks[0].global;\n26. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 28 - 40\nContent:\n28. \tapply(node: Node, stack: Node[]) {\n29. \t\tconst toEncapsulate: Node[] = [];\n30. \t\tapplySelector(this.localBlocks.slice(), node, stack.slice(), toEncapsulate);\n31. \n32. \t\tif (toEncapsulate.length > 0) {\n33. \t\t\ttoEncapsulate.filter((_, i) => i === 0 || i === toEncapsulate.length - 1).forEach(({ node, block }) => {\n34. \t\t\t\tnode._needsCssAttribute = true;\n35. \t\t\t\tblock.shouldEncapsulate = true;\n36. \t\t\t});\n37. \n38. \t\t\tthis.used = true;\n39. \t\t}\n40. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 55 - 94\nContent:\n55. \ttransform(code: MagicString, attr: string) {\n56. \t\tfunction encapsulateBlock(block: Block) {\n57. \t\t\tlet i = block.selectors.length;\n58. \t\t\twhile (i--) {\n59. \t\t\t\tconst selector = block.selectors[i];\n60. \t\t\t\tif (selector.type === \'PseudoElementSelector\' || selector.type === \'PseudoClassSelector\') continue;\n61. \n62. \t\t\t\tif (selector.type === \'TypeSelector\' && selector.name === \'*\') {\n63. \t\t\t\t\tcode.overwrite(selector.start, selector.end, attr);\n64. \t\t\t\t} else {\n65. \t\t\t\t\tcode.appendLeft(selector.end, attr);\n66. \t\t\t\t}\n67. \n68. \t\t\t\tbreak;\n69. \t\t\t}\n70. \n71. \t\t\ti = block.selectors.length;\n72. \t\t\twhile (i--) {\n73. \t\t\t\tconst selector = block.selectors[i];\n74. \n75. \t\t\t\tif (selector.type === \'RefSelector\') {\n76. \t\t\t\t\tcode.overwrite(selector.start, selector.end, `[svelte-ref-${selector.name}]`, {\n77. \t\t\t\t\t\tcontentOnly: true,\n78. \t\t\t\t\t\tstoreName: false\n79. \t\t\t\t\t});\n80. \t\t\t\t}\n81. \t\t\t}\n82. \t\t}\n83. \n84. \t\tthis.blocks.forEach((block, i) => {\n85. \t\t\tif (block.global) {\n86. \t\t\t\tconst selector = block.selectors[0];\n87. \t\t\t\tconst first = selector.children[0];\n88. \t\t\t\tconst last = selector.children[selector.children.length - 1];\n89. \t\t\t\tcode.remove(selector.start, first.start).remove(last.end, selector.end);\n90. \t\t\t}\n91. \n92. \t\t\tif (block.shouldEncapsulate) encapsulateBlock(block);\n93. \t\t});\n94. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 96 - 123\nContent:\n96. \tvalidate(validator: Validator) {\n97. \t\tthis.blocks.forEach((block) => {\n98. \t\t\tlet i = block.selectors.length;\n99. \t\t\twhile (i-- > 1) {\n100. \t\t\t\tconst selector = block.selectors[i];\n101. \t\t\t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n102. \t\t\t\t\tvalidator.error(`:global(...) must be the first element in a compound selector`, selector.start);\n103. \t\t\t\t}\n104. \t\t\t}\n105. \t\t});\n106. \n107. \t\tlet start = 0;\n108. \t\tlet end = this.blocks.length;\n109. \n110. \t\tfor (; start < end; start += 1) {\n111. \t\t\tif (!this.blocks[start].global) break;\n112. \t\t}\n113. \n114. \t\tfor (; end > start; end -= 1) {\n115. \t\t\tif (!this.blocks[end - 1].global) break;\n116. \t\t}\n117. \n118. \t\tfor (let i = start; i < end; i += 1) {\n119. \t\t\tif (this.blocks[i].global) {\n120. \t\t\t\tvalidator.error(`:global(...) can be at the start or end of a selector sequence, but not in the middle`, this.blocks[i].selectors[0].start);\n121. \t\t\t}\n122. \t\t}\n123. \t}\n\n\nFile: src/css/Selector.ts\nLine number range: 130 - 211\nContent:\n130. function applySelector(blocks: Block[], node: Node, stack: Node[], toEncapsulate: any[]): boolean {\n131. \tconst block = blocks.pop();\n132. \tif (!block) return false;\n133. \n134. \tif (!node) {\n135. \t\treturn blocks.every(block => block.global);\n136. \t}\n137. \n138. \tlet i = block.selectors.length;\n139. \tlet j = stack.length;\n140. \n141. \twhile (i--) {\n142. \t\tconst selector = block.selectors[i];\n143. \n144. \t\tif (selector.type === \'PseudoClassSelector\' && selector.name === \'global\') {\n145. \t\t\t// TODO shouldn\'t see this here... maybe we should enforce that :global(...)\n146. \t\t\t// cannot be sandwiched between non-global selectors?\n147. \t\t\treturn false;\n148. \t\t}\n149. \n150. \t\tif (selector.type === \'PseudoClassSelector\' || selector.type === \'PseudoElementSelector\') {\n151. \t\t\tcontinue;\n152. \t\t}\n153. \n154. \t\tif (selector.type === \'ClassSelector\') {\n155. \t\t\tif (!attributeMatches(node, \'class\', selector.name, \'~=\', false)) return false;\n156. \t\t}\n157. \n158. \t\telse if (selector.type === \'IdSelector\') {\n159. \t\t\tif (!attributeMatches(node, \'id\', selector.name, \'=\', false)) return false;\n160. \t\t}\n161. \n162. \t\telse if (selector.type === \'AttributeSelector\') {\n163. \t\t\tif (!attributeMatches(node, selector.name.name, selector.value && unquote(selector.value), selector.matcher, selector.flags)) return false;\n164. \t\t}\n165. \n166. \t\telse if (selector.type === \'TypeSelector\') {\n167. \t\t\tif (node.name !== selector.name && selector.name !== \'*\') return false;\n168. \t\t}\n169. \n170. \t\telse if (selector.type === \'RefSelector\') {\n171. \t\t\tif (node.attributes.some((attr: Node) => attr.type === \'Ref\' && attr.name === selector.name)) {\n172. \t\t\t\tnode._cssRefAttribute = selector.name;\n173. \t\t\t\ttoEncapsulate.push({ node, block });\n174. \t\t\t\treturn true;\n175. \t\t\t}\n176. \t\t\treturn;\n177. \t\t}\n178. \n179. \t\telse {\n180. \t\t\t// bail. TODO figure out what these could be\n181. \t\t\ttoEncapsulate.push({ node, block });\n182. \t\t\treturn true;\n183. \t\t}\n184. \t}\n185. \n186. \tif (block.combinator) {\n187. \t\tif (block.combinator.type === \'WhiteSpace\') {\n188. \t\t\twhile (stack.length) {\n189. \t\t\t\tif (applySelector(blocks.slice(), stack.pop(), stack, toEncapsulate)) {\n190. \t\t\t\t\ttoEncapsulate.push({ node, block });\n191. \t\t\t\t\treturn true;\n192. \t\t\t\t}\n193. \t\t\t}\n194. \n195. \t\t\treturn false;\n196. \t\t} else if (block.combinator.name === \'>\') {\n197. \t\t\tif (applySelector(blocks, stack.pop(), stack, toEncapsulate)) {\n198. \t\t\t\ttoEncapsulate.push({ node, block });\n199. \t\t\t\treturn true;\n200. \t\t\t}\n201. \t\t\treturn false;\n202. \t\t}\n203. \n204. \t\t// TODO other combinators\n205. \t\ttoEncapsulate.push({ node, block });\n206. \t\treturn true;\n207. \t}\n208. \n209. \ttoEncapsulate.push({ node, block });\n210. \treturn true;\n211. }\n\n\nFile: src/css/Selector.ts\nLine number range: 213 - 220\nContent:\n213. const operators = {\n214. \t\'=\' : (value: string, flags: string) => new RegExp(`^${value}$`, flags),\n215. \t\'~=\': (value: string, flags: string) => new RegExp(`\\\\b${value}\\\\b`, flags),\n216. \t\'|=\': (value: string, flags: string) => new RegExp(`^${value}(-.+)?$`, flags),\n217. \t\'^=\': (value: string, flags: string) => new RegExp(`^${value}`, flags),\n218. \t\'$=\': (value: string, flags: string) => new RegExp(`${value}$`, flags),\n219. \t\'*=\': (value: string, flags: string) => new RegExp(value, flags)\n220. };\n\n\nFile: src/css/Selector.ts\nLine number range: 222 - 242\nContent:\n222. function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n223. \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n224. \tif (!attr) return false;\n225. \tif (attr.value === true) return operator === null;\n226. \tif (attr.value.length > 1) return true;\n227. \n228. \tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\n229. \tconst value = attr.value[0];\n230. \n231. \tif (value.type === \'Text\') return pattern.test(value.data);\n232. \n233. \tconst possibleValues = new Set();\n234. \tgatherPossibleValues(value.expression, possibleValues);\n235. \tif (possibleValues.has(UNKNOWN)) return true;\n236. \n237. \tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n238. \t\tif (pattern.test(x)) return true;\n239. \t}\n240. \n241. \treturn false;\n242. }\n\n\nFile: src/css/Selector.ts\nLine number range: 248 - 255\nContent:\n248. function unquote(value: Node) {\n249. \tif (value.type === \'Identifier\') return value.name;\n250. \tconst str = value.value;\n251. \tif (str[0] === str[str.length - 1] && str[0] === "\'" || str[0] === \'"\') {\n252. \t\treturn str.slice(1, str.length - 1);\n253. \t}\n254. \treturn str;\n255. }\n\n\nFile: src/css/Selector.ts\nLine number range: 287 - 302\nContent:\n287. function groupSelectors(selector: Node) {\n288. \tlet block: Block = new Block(null);\n289. \n290. \tconst blocks = [block];\n291. \n292. \tselector.children.forEach((child: Node, i: number) => {\n293. \t\tif (child.type === \'WhiteSpace\' || child.type === \'Combinator\') {\n294. \t\t\tblock = new Block(child);\n295. \t\t\tblocks.push(block);\n296. \t\t} else {\n297. \t\t\tblock.add(child);\n298. \t\t}\n299. \t});\n300. \n301. \treturn blocks;\n302. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 9 - 113\nContent:\n9. class Rule {\n10. \tselectors: Selector[];\n11. \tdeclarations: Declaration[];\n12. \tnode: Node;\n13. \tparent: Atrule;\n14. \n15. \tconstructor(node: Node, parent?: Atrule) {\n16. \t\tthis.node = node;\n17. \t\tthis.parent = parent;\n18. \t\tthis.selectors = node.selector.children.map((node: Node) => new Selector(node));\n19. \t\tthis.declarations = node.block.children.map((node: Node) => new Declaration(node));\n20. \t}\n21. \n22. \tapply(node: Node, stack: Node[]) {\n23. \t\tthis.selectors.forEach(selector => selector.apply(node, stack)); // TODO move the logic in here?\n24. \t}\n25. \n26. \tisUsed() {\n27. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n28. \t\treturn this.selectors.some(s => s.used);\n29. \t}\n30. \n31. \tminify(code: MagicString, cascade: boolean) {\n32. \t\tlet c = this.node.start;\n33. \t\tlet started = false;\n34. \n35. \t\tthis.selectors.forEach((selector, i) => {\n36. \t\t\tif (cascade || selector.used) {\n37. \t\t\t\tconst separator = started ? \',\' : \'\';\n38. \t\t\t\tif ((selector.node.start - c) > separator.length) {\n39. \t\t\t\t\tcode.overwrite(c, selector.node.start, separator);\n40. \t\t\t\t}\n41. \n42. \t\t\t\tif (!cascade) selector.minify(code);\n43. \t\t\t\tc = selector.node.end;\n44. \n45. \t\t\t\tstarted = true;\n46. \t\t\t}\n47. \t\t});\n48. \n49. \t\tcode.remove(c, this.node.block.start);\n50. \n51. \t\tc = this.node.block.start + 1;\n52. \t\tthis.declarations.forEach((declaration, i) => {\n53. \t\t\tconst separator = i > 0 ? \';\' : \'\';\n54. \t\t\tif ((declaration.node.start - c) > separator.length) {\n55. \t\t\t\tcode.overwrite(c, declaration.node.start, separator);\n56. \t\t\t}\n57. \n58. \t\t\tdeclaration.minify(code);\n59. \n60. \t\t\tc = declaration.node.end;\n61. \t\t});\n62. \n63. \t\tcode.remove(c, this.node.block.end - 1);\n64. \t}\n65. \n66. \ttransform(code: MagicString, id: string, keyframes: Map<string, string>, cascade: boolean) {\n67. \t\tif (this.parent && this.parent.node.type === \'Atrule\' && this.parent.node.name === \'keyframes\') return true;\n68. \n69. \t\tconst attr = `[${id}]`;\n70. \n71. \t\tif (cascade) {\n72. \t\t\tthis.selectors.forEach(selector => {\n73. \t\t\t\t// TODO disable cascading (without :global(...)) in v2\n74. \t\t\t\tconst { start, end, children } = selector.node;\n75. \n76. \t\t\t\tconst css = code.original;\n77. \t\t\t\tconst selectorString = css.slice(start, end);\n78. \n79. \t\t\t\tconst firstToken = children[0];\n80. \n81. \t\t\t\tlet transformed;\n82. \n83. \t\t\t\tif (firstToken.type === \'TypeSelector\') {\n84. \t\t\t\t\tconst insert = firstToken.end;\n85. \t\t\t\t\tconst head = firstToken.name === \'*\' ? \'\' : css.slice(start, insert);\n86. \t\t\t\t\tconst tail = css.slice(insert, end);\n87. \n88. \t\t\t\t\ttransformed = `${head}${attr}${tail},${attr} ${selectorString}`;\n89. \t\t\t\t} else {\n90. \t\t\t\t\ttransformed = `${attr}${selectorString},${attr} ${selectorString}`;\n91. \t\t\t\t}\n92. \n93. \t\t\t\tcode.overwrite(start, end, transformed);\n94. \t\t\t});\n95. \t\t} else {\n96. \t\t\tthis.selectors.forEach(selector => selector.transform(code, attr));\n97. \t\t}\n98. \n99. \t\tthis.declarations.forEach(declaration => declaration.transform(code, keyframes));\n100. \t}\n101. \n102. \tvalidate(validator: Validator) {\n103. \t\tthis.selectors.forEach(selector => {\n104. \t\t\tselector.validate(validator);\n105. \t\t});\n106. \t}\n107. \n108. \twarnOnUnusedSelector(handler: (selector: Selector) => void) {\n109. \t\tthis.selectors.forEach(selector => {\n110. \t\t\tif (!selector.used) handler(selector);\n111. \t\t});\n112. \t}\n113. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 115 - 151\nContent:\n115. class Declaration {\n116. \tnode: Node;\n117. \n118. \tconstructor(node: Node) {\n119. \t\tthis.node = node;\n120. \t}\n121. \n122. \ttransform(code: MagicString, keyframes: Map<string, string>) {\n123. \t\tconst property = this.node.property && this.node.property.toLowerCase();\n124. \t\tif (property === \'animation\' || property === \'animation-name\') {\n125. \t\t\tthis.node.value.children.forEach((block: Node) => {\n126. \t\t\t\tif (block.type === \'Identifier\') {\n127. \t\t\t\t\tconst name = block.name;\n128. \t\t\t\t\tif (keyframes.has(name)) {\n129. \t\t\t\t\t\tcode.overwrite(block.start, block.end, keyframes.get(name));\n130. \t\t\t\t\t}\n131. \t\t\t\t}\n132. \t\t\t});\n133. \t\t}\n134. \t}\n135. \n136. \tminify(code: MagicString) {\n137. \t\tif (!this.node.property) return; // @apply, and possibly other weird cases?\n138. \n139. \t\tconst c = this.node.start + this.node.property.length;\n140. \t\tconst first = this.node.value.children  ?\n141. \t\t\tthis.node.value.children[0] :\n142. \t\t\tthis.node.value;\n143. \n144. \t\tlet start = first.start;\n145. \t\twhile (/\\s/.test(code.original[start])) start += 1;\n146. \n147. \t\tif (start - c > 1) {\n148. \t\t\tcode.overwrite(c, start, \':\');\n149. \t\t}\n150. \t}\n151. }\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 251 - 331\nContent:\n251. const keys = {};\n252. \n253. export default class Stylesheet {\n254. \tsource: string;\n255. \tparsed: Parsed;\n256. \tcascade: boolean;\n257. \tfilename: string;\n258. \n259. \thasStyles: boolean;\n260. \tid: string;\n261. \n262. \tchildren: (Rule|Atrule)[];\n263. \tkeyframes: Map<string, string>;\n264. \n265. \tconstructor(source: string, parsed: Parsed, filename: string, cascade: boolean) {\n266. \t\tthis.source = source;\n267. \t\tthis.parsed = parsed;\n268. \t\tthis.cascade = cascade;\n269. \t\tthis.filename = filename;\n270. \n271. \t\tthis.id = `svelte-${parsed.hash}`;\n272. \n273. \t\tthis.children = [];\n274. \t\tthis.keyframes = new Map();\n275. \n276. \t\tif (parsed.css && parsed.css.children.length) {\n277. \t\t\tthis.hasStyles = true;\n278. \n279. \t\t\tconst stack: (Rule | Atrule)[] = [];\n280. \t\t\tlet currentAtrule: Atrule = null;\n281. \n282. \t\t\twalk(this.parsed.css, {\n283. \t\t\t\tenter: (node: Node) => {\n284. \t\t\t\t\tif (node.type === \'Atrule\') {\n285. \t\t\t\t\t\tconst last = stack[stack.length - 1];\n286. \n287. \t\t\t\t\t\tconst atrule = new Atrule(node);\n288. \t\t\t\t\t\tstack.push(atrule);\n289. \n290. \t\t\t\t\t\t// this is an awkward special case — @apply (and\n291. \t\t\t\t\t\t// possibly other future constructs)\n292. \t\t\t\t\t\tif (last && !(last instanceof Atrule)) return;\n293. \n294. \t\t\t\t\t\tif (currentAtrule) {\n295. \t\t\t\t\t\t\tcurrentAtrule.children.push(atrule);\n296. \t\t\t\t\t\t} else {\n297. \t\t\t\t\t\t\tthis.children.push(atrule);\n298. \t\t\t\t\t\t}\n299. \n300. \t\t\t\t\t\tif (node.name === \'keyframes\') {\n301. \t\t\t\t\t\t\tnode.expression.children.forEach((expression: Node) => {\n302. \t\t\t\t\t\t\t\tif (expression.type === \'Identifier\' && !expression.name.startsWith(\'-global-\')) {\n303. \t\t\t\t\t\t\t\t\tthis.keyframes.set(expression.name, `${this.id}-${expression.name}`);\n304. \t\t\t\t\t\t\t\t}\n305. \t\t\t\t\t\t\t});\n306. \t\t\t\t\t\t}\n307. \n308. \t\t\t\t\t\tcurrentAtrule = atrule;\n309. \t\t\t\t\t}\n310. \n311. \t\t\t\t\tif (node.type === \'Rule\') {\n312. \t\t\t\t\t\tconst rule = new Rule(node, currentAtrule);\n313. \t\t\t\t\t\tstack.push(rule);\n314. \n315. \t\t\t\t\t\tif (currentAtrule) {\n316. \t\t\t\t\t\t\tcurrentAtrule.children.push(rule);\n317. \t\t\t\t\t\t} else {\n318. \t\t\t\t\t\t\tthis.children.push(rule);\n319. \t\t\t\t\t\t}\n320. \t\t\t\t\t}\n321. \t\t\t\t},\n322. \n323. \t\t\t\tleave: (node: Node) => {\n324. \t\t\t\t\tif (node.type === \'Rule\' || node.type === \'Atrule\') stack.pop();\n325. \t\t\t\t\tif (node.type === \'Atrule\') currentAtrule = stack[stack.length - 1];\n326. \t\t\t\t}\n327. \t\t\t});\n328. \t\t} else {\n329. \t\t\tthis.hasStyles = false;\n330. \t\t}\n331. \t}\n\n\nFile: src/css/Stylesheet.ts\nLine number range: 333 - 345\nContent:\n333. \tapply(node: Node, stack: Node[]) {\n334. \t\tif (!this.hasStyles) return;\n335. \n336. \t\tif (this.cascade) {\n337. \t\t\tif (stack.length === 0) node._needsCssAttribute = true;\n338. \t\t\treturn;\n339. \t\t}\n340. \n341. \t\tfor (let i = 0; i < this.children.length; i += 1) {\n342. \t\t\tconst child = this.children[i];\n343. \t\t\tchild.apply(node, stack);\n344. \t\t}\n345. \t}\n\n\nFile: src/css/gatherPossibleValues.ts\nLine number range: 1 - 18\nContent:\n1. import { Node } from \'../interfaces\';\n2. \n3. export const UNKNOWN = {};\n4. \n5. export function gatherPossibleValues(node: Node, set: Set<string|{}>) {\n6. \tif (node.type === \'Literal\') {\n7. \t\tset.add(node.value);\n8. \t}\n9. \n10. \telse if (node.type === \'ConditionalExpression\') {\n11. \t\tgatherPossibleValues(node.consequent, set);\n12. \t\tgatherPossibleValues(node.alternate, set);\n13. \t}\n14. \n15. \telse {\n16. \t\tset.add(UNKNOWN);\n17. \t}\n18. }\n\n\nFile: src/generators/dom/index.ts\nLine number range: 35 - 53\nContent:\n35. \tconstructor(\n36. \t\tparsed: Parsed,\n37. \t\tsource: string,\n38. \t\tname: string,\n39. \t\tstylesheet: Stylesheet,\n40. \t\toptions: CompileOptions\n41. \t) {\n42. \t\tsuper(parsed, source, name, stylesheet, options, true);\n43. \t\tthis.blocks = [];\n44. \n45. \t\tthis.readonly = new Set();\n46. \n47. \t\tthis.hydratable = options.hydratable;\n48. \t\tthis.legacy = options.legacy;\n49. \t\tthis.needsEncapsulateHelper = false;\n50. \n51. \t\t// initial values for e.g. window.innerWidth, if there\'s a <:Window> meta tag\n52. \t\tthis.metaBindings = [];\n53. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 83 - 101\nContent:\n83. export default function dom(\n84. \tparsed: Parsed,\n85. \tsource: string,\n86. \tstylesheet: Stylesheet,\n87. \toptions: CompileOptions\n88. ) {\n89. \tconst format = options.format || \'es\';\n90. \n91. \tconst generator = new DomGenerator(parsed, source, options.name || \'SvelteComponent\', stylesheet, options);\n92. \n93. \tconst {\n94. \t\tcomputations,\n95. \t\tname,\n96. \t\ttemplateProperties,\n97. \t\tnamespace,\n98. \t} = generator;\n99. \n100. \tconst { block, state } = preprocess(generator, namespace, parsed.html);\n101. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 102 - 103\nContent:\n102. \tgenerator.stylesheet.warnOnUnusedSelectors(options.onwarn);\n103. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 149 - 153\nContent:\n149. \tconst { css, cssMap } = generator.stylesheet.render(options.filename, !generator.customElement);\n150. \tconst styles = generator.stylesheet.hasStyles && stringify(options.dev ?\n151. \t\t`${css}\\n/*# sourceMappingURL=${cssMap.toUrl()} */` :\n152. \t\tcss, { onlyEscapeAtSymbol: true });\n153. \n\n\nFile: src/generators/dom/index.ts\nLine number range: 154 - 163\nContent:\n154. \tif (styles && generator.options.css !== false && !generator.customElement) {\n155. \t\tbuilder.addBlock(deindent`\n156. \t\t\tfunction @add_css() {\n157. \t\t\t\tvar style = @createElement("style");\n158. \t\t\t\tstyle.id = \'${generator.stylesheet.id}-style\';\n159. \t\t\t\tstyle.textContent = ${styles};\n160. \t\t\t\t@appendNode(style, document.head);\n161. \t\t\t}\n162. \t\t`);\n163. \t}\n\n\nFile: src/generators/dom/index.ts\nLine number range: 208 - 215\nContent:\n208. \t\t${generator.customElement ?\n209. \t\t\tdeindent`\n210. \t\t\t\tthis.attachShadow({ mode: \'open\' });\n211. \t\t\t\t${css && `this.shadowRoot.innerHTML = \\`<style>${escape(css, { onlyEscapeAtSymbol: true }).replace(/\\\\/g, \'\\\\\\\\\')}${options.dev ? `\\n/*# sourceMappingURL=${cssMap.toUrl()} */` : \'\'}</style>\\`;`}\n212. \t\t\t` :\n213. \t\t\t(generator.stylesheet.hasStyles && options.css !== false &&\n214. \t\t\t`if (!document.getElementById("${generator.stylesheet.id}-style")) @add_css();`)\n215. \t\t}\n\n\nFile: src/generators/dom/preprocess.ts\nLine number range: 427 - 438\nContent:\n427. \t\t\tgenerator.stylesheet.apply(node, elementStack);\n428. \t\t}\n429. \n430. \t\tif (node.children.length) {\n431. \t\t\tif (isComponent) {\n432. \t\t\t\tif (node.children) node._slots = new Set([\'default\']);\n433. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack, componentStack.concat(node), stripWhitespace, nextSibling);\n434. \t\t\t} else {\n435. \t\t\t\tif (node.name === \'pre\' || node.name === \'textarea\') stripWhitespace = false;\n436. \t\t\t\tpreprocessChildren(generator, block, node._state, node, inEachBlock, elementStack.concat(node), componentStack, stripWhitespace, nextSibling);\n437. \t\t\t}\n438. \t\t}\n\n\nFile: src/index.ts\nLine number range: 36 - 55\nContent:\n36. export function compile(source: string, _options: CompileOptions) {\n37. \tconst options = normalizeOptions(_options);\n38. \n39. \tlet parsed: Parsed;\n40. \n41. \ttry {\n42. \t\tparsed = parse(source, options);\n43. \t} catch (err) {\n44. \t\toptions.onerror(err);\n45. \t\treturn;\n46. \t}\n47. \n48. \tconst stylesheet = new Stylesheet(source, parsed, options.filename, options.cascade !== false);\n49. \n50. \tvalidate(parsed, source, stylesheet, options);\n51. \n52. \tconst compiler = options.generate === \'ssr\' ? generateSSR : generate;\n53. \n54. \treturn compiler(parsed, source, stylesheet, options);\n55. }\n\n--- END CONTEXT ---\nThese context should be enough to help you make the necessary code edits. Do NOT explore for more context in the codebase!\n\nAnalyzer agent has analyzed the issue and provided instruction on the issue:\n--- BEGIN ANALYZER MESSAGE ---\n1) Issue Understanding\n- Reported symptom: Using a presence-only attribute selector (button[foo]) throws a TypeError when the corresponding HTML attribute has a value (e.g., foo="bar"). It works when the HTML attribute is a boolean/presence-only attribute (foo without a value).\n- Unexpected behavior: Presence-only CSS attribute selectors are supposed to match elements that have the attribute, regardless of whether it has a value. Instead, the compiler throws TypeError: operators[operator] is not a function.\n\n2) Code Analysis\n- Involved files and functions:\n  - src/css/Selector.ts\n    - function applySelector (lines ~130–211): Calls attributeMatches for AttributeSelector cases.\n    - const operators (lines ~213–220): Defines functions for attribute selector operators (=, ~=, |=, ^=, $=, *=).\n    - function attributeMatches (lines ~222–242): Performs attribute matching logic; this is where the exception occurs.\n- Current behavior in attributeMatches:\n  - Finds the attribute on the node by name.\n  - If attr.value === true (boolean attribute), it returns operator === null.\n  - If attr.value.length > 1, it returns true.\n  - Otherwise, it constructs a RegExp via operators[operator](expectedValue, flags) and tests the attribute value(s).\n- Problematic path:\n  - For a presence-only selector [foo], selector.matcher is null.\n  - When the HTML has foo="bar", attr.value !== true and length is 1, so the function proceeds to construct a regex: operators[operator](...), but operator is null, so operators[null] is undefined, leading to the TypeError.\n\n3) Root Cause\n- The code does not handle presence-only attribute selectors ([attr]) when the attribute has a non-boolean value. It assumes an operator function exists and tries to call operators[operator] regardless of whether operator is null.\n- Specifically, attributeMatches assumes that operator will always be one of the defined operator keys, and attempts to create a pattern even when operator is null. Presence-only matching should short-circuit to “attribute exists” and should not attempt any regex construction.\n\n4) Fix Suggestion\n- File: src/css/Selector.ts\n  - Function: attributeMatches (lines ~222–242)\n    - Change: Add an early guard for presence-only selectors. After finding the attribute (i.e., after const attr = node.attributes.find(...)), check if operator is null (or undefined if that’s how it is represented). If operator is null, immediately return true because presence-only selectors should match any element that simply has the attribute, regardless of its value.\n    - Adjust the logic so that the regex construction (operators[operator](...)) is only executed when operator is a known operator string. Do not attempt to create a pattern when operator is null.\n    - Optionally, simplify the boolean attribute branch: Instead of special-casing attr.value === true with operator === null, rely on the new early guard for operator === null to cover both boolean attributes and attributes with values. If you keep the boolean attribute branch, ensure it does not fall through to the regex path for operator === null.\n    - Why: This avoids calling undefined as a function (operators[null]) and correctly implements CSS semantics for presence-only selectors by returning true whenever the attribute exists.\n\n- File: src/css/Selector.ts\n  - Function signature: attributeMatches\n    - Change: Update the type of the operator parameter to accept null (e.g., string | null) to reflect actual usage (selector.matcher can be null for presence-only selectors). This is a type-level adjustment to align with runtime behavior.\n    - Why: Makes the intent explicit in TypeScript and prevents incorrect assumptions in future changes.\n\n- File: src/css/Selector.ts\n  - Function: applySelector (lines ~162–165)\n    - Change: No functional change required, but ensure that passing selector.matcher (which can be null) is expected by attributeMatches after the signature/type update above.\n    - Why: The call site remains correct; the fix in attributeMatches ensures presence-only selectors are handled properly.\n\nThese changes will prevent the TypeError and make presence-only selectors behave as expected: button[foo] will match a button whether it has foo or foo="bar".\n--- END ANALYZER MESSAGE ---\n\nIMPORTANT INSTRUCTION:\n- The context provided above should be sufficient for you to make the required code edits. Do NOT explore for more context in the codebase!\n- Do NOT FIND, WRITE or RUN any tests, your change will be tested automatically by reproduction tests and regression tests later!!!\n- Never write any tests yourself!!! (Very important!)\n\nPlease implement these changes precisely, following the exact specifications from the analyzer.\n' additional_kwargs={} response_metadata={}
2025-11-11 00:30:15,801 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_VO2rFjr8jRXjHR9qa2GsnG7e', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1629, 'prompt_tokens': 8741, 'total_tokens': 10370, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1600, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b30a3abb-e203-4df7-ba2d-b63cfc3773fe-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_VO2rFjr8jRXjHR9qa2GsnG7e', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8741, 'output_tokens': 1629, 'total_tokens': 10370, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1600}}
2025-11-11 00:30:30,874 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ZJYsvY11XwCnRxfEhV3WGwa6', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts","old_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\tif (attr.value === true) return operator === null;\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}","new_content":"function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\\n\\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\\n\\tif (!attr) return false;\\n\\t// Presence-only selector [attr] matches if the attribute exists, regardless of value\\n\\tif (operator === null) return true;\\n\\tif (attr.value === true) return false; // boolean attributes only match presence selectors\\n\\tif (attr.value.length > 1) return true;\\n\\n\\tconst pattern = operators[operator](expectedValue, caseInsensitive ? \'i\' : \'\');\\n\\tconst value = attr.value[0];\\n\\n\\tif (value.type === \'Text\') return pattern.test(value.data);\\n\\n\\tconst possibleValues = new Set();\\n\\tgatherPossibleValues(value.expression, possibleValues);\\n\\tif (possibleValues.has(UNKNOWN)) return true;\\n\\n\\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\\n\\t\\tif (pattern.test(x)) return true;\\n\\t}\\n\\n\\treturn false;\\n}"}', 'name': 'edit_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1849, 'prompt_tokens': 11690, 'total_tokens': 13539, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1344, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7680}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a6832872-e0ef-41fb-9e93-7fffcc41db80-0' tool_calls=[{'name': 'edit_file', 'args': {'relative_path': 'src/css/Selector.ts', 'old_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\tif (attr.value === true) return operator === null;\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}", 'new_content': "function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n\tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n\tif (!attr) return false;\n\t// Presence-only selector [attr] matches if the attribute exists, regardless of value\n\tif (operator === null) return true;\n\tif (attr.value === true) return false; // boolean attributes only match presence selectors\n\tif (attr.value.length > 1) return true;\n\n\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n\tconst value = attr.value[0];\n\n\tif (value.type === 'Text') return pattern.test(value.data);\n\n\tconst possibleValues = new Set();\n\tgatherPossibleValues(value.expression, possibleValues);\n\tif (possibleValues.has(UNKNOWN)) return true;\n\n\tfor (const x of Array.from(possibleValues)) { // TypeScript for-of is slightly unlike JS\n\t\tif (pattern.test(x)) return true;\n\t}\n\n\treturn false;\n}"}, 'id': 'call_ZJYsvY11XwCnRxfEhV3WGwa6', 'type': 'tool_call'}] usage_metadata={'input_tokens': 11690, 'output_tokens': 1849, 'total_tokens': 13539, 'input_token_details': {'audio': 0, 'cache_read': 7680}, 'output_token_details': {'audio': 0, 'reasoning': 1344}}
2025-11-11 00:30:32,366 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_qNHhlZvgUX16IejyQU1pGXKG', 'function': {'arguments': '{"relative_path":"src/css/Selector.ts"}', 'name': 'read_file'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 23, 'prompt_tokens': 12207, 'total_tokens': 12230, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--bf22e46a-2ed7-4e71-b82b-5ead81efb817-0' tool_calls=[{'name': 'read_file', 'args': {'relative_path': 'src/css/Selector.ts'}, 'id': 'call_qNHhlZvgUX16IejyQU1pGXKG', 'type': 'tool_call'}] usage_metadata={'input_tokens': 12207, 'output_tokens': 23, 'total_tokens': 12230, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:35:36,158 - thread-133013312636608.prometheus.lang_graph.nodes.edit_node - DEBUG - content='I have implemented the fix to handle presence-only attribute selectors correctly.\n\nSummary of changes:\n- Updated attributeMatches in src/css/Selector.ts to treat operator === null as a presence-only selector, returning true as long as the attribute exists.\n- Adjusted the operator parameter type to string | null to reflect actual usage when selector.matcher is null.\n- Ensured regex construction only occurs when an operator is provided, preventing the previous TypeError.\n\nThis resolves the issue where button[foo] would throw when the attribute had a value like foo="bar".' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 113, 'prompt_tokens': 15197, 'total_tokens': 15310, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--cb2dfacf-8fe1-4562-b4cd-2ebabe3d82d9-0' usage_metadata={'input_tokens': 15197, 'output_tokens': 113, 'total_tokens': 15310, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:35:36,196 - thread-133013312636608.prometheus.lang_graph.nodes.git_diff_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..220c68d90 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,10 +219,12 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// Presence-only selector [attr] matches if the attribute exists, regardless of value
+	if (operator === null) return true;
+	if (attr.value === true) return false; // boolean attributes only match presence selectors
 	if (attr.value.length > 1) return true;
 
 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');

2025-11-11 00:35:36,198 - thread-133013312636608.prometheus.lang_graph.nodes.patch_normalization_node - INFO - Starting to process 5 patches
2025-11-11 00:35:36,200 - thread-133013312636608.prometheus.lang_graph.nodes.patch_normalization_node - INFO - Deduplication complete: 5 -> 5 unique patches
2025-11-11 00:35:36,200 - thread-133013312636608.prometheus.lang_graph.nodes.patch_normalization_node - INFO - Patch processing complete, deduplicated to 5 unique patches
2025-11-11 00:35:36,202 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_subgraph_node - INFO - Enter get_pass_regression_test_patch_subgraph_node
2025-11-11 00:35:36,202 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:35:36,205 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_update_node - INFO - Applying patch: diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..05b784831 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,20 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
+
+	// boolean attribute: only matches presence selectors
 	if (attr.value === true) return operator === null;
+
+	// presence-only selector [attr]: matches if attribute exists regardless of value
+	if (operator == null) return true;
+
+	// multiple chunks / dynamic values — conservatively return true
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const op = operators[operator];
+	if (!op) return false;
+
+	const pattern = op(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:35:36,237 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:35:36,269 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:35:36,269 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:35:36,371 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:36,371 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:35:36,371 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:35:36,473 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:36,473 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
Removing test/regressions/
[?2004l
2025-11-11 00:35:36,473 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:35:36,473 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory src/css in the container
2025-11-11 00:35:36,473 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p src/css
2025-11-11 00:35:36,575 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:36,575 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:35:36,576 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating src/css/Selector.ts in the container
2025-11-11 00:35:36,584 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:35:36,586 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-11 00:35:36,586 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:35:39,386 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_RupHbeiBr8OBZ1r1PmnuxaXe', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 617, 'total_tokens': 771, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--2411c688-768b-42a6-b959-f62eb931f5f8-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_RupHbeiBr8OBZ1r1PmnuxaXe', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 154, 'total_tokens': 771, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:35:39,389 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:35:39,491 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:39,491 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:35 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:14 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 474335 Nov 11 00:14 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:35 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 10 23:54 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:35 yarn.lock
[?2004l
2025-11-11 00:35:40,785 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_keBowEX2XpEr7k2Ld6Hmidiy', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 26, 'prompt_tokens': 1440, 'total_tokens': 1466, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--04cee45b-1aed-40e8-aed7-d907a0f51f39-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_keBowEX2XpEr7k2Ld6Hmidiy', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1440, 'output_tokens': 26, 'total_tokens': 1466, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:35:40,788 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:35:40,890 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:40,890 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:35:45,221 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_b84YCqCZ0zxEIrbtUROFndQP', 'function': {'arguments': '{"command":"sed -n \'1,220p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 356, 'prompt_tokens': 2295, 'total_tokens': 2651, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d2943b4e-1974-46d7-bc6a-10f576575ece-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,220p' test/css/index.js"}, 'id': 'call_b84YCqCZ0zxEIrbtUROFndQP', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2295, 'output_tokens': 356, 'total_tokens': 2651, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-11-11 00:35:45,225 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,220p' test/css/index.js
2025-11-11 00:35:45,326 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:35:45,326 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-11 00:35:54,016 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2gu8cYd5zGGO15Vi62k22wUX', 'function': {'arguments': '{"command":"npm test -- --grep \'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 653, 'prompt_tokens': 3338, 'total_tokens': 3991, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--51cc9d7b-abe8-46da-8af2-c43d052eef4e-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test -- --grep 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix'"}, 'id': 'call_2gu8cYd5zGGO15Vi62k22wUX', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3338, 'output_tokens': 653, 'total_tokens': 3991, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:35:54,023 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test -- --grep 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix'
2025-11-11 00:36:00,553 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:00,553 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test -- --grep 'attribute-selector-unquoted|omit-
-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-s
selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-att
tribute-attribute-selector-suffix'
[?2004l

> svelte@1.41.1 pretest
> npm run build


> svelte@1.41.1 build
> node src/shared/_build.js && rollup -c

[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m24ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m39ms[22m[39m

> svelte@1.41.1 test
> mocha --opts mocha.opts --grep attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix


[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (47ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (38ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (182ms)[0m

[?2004l
2025-11-11 00:36:08,449 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2BWFSmQJOaFrctrtfiYMJuZI', 'function': {'arguments': '{"command":"npm test -- --grep \\"^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 655, 'prompt_tokens': 4130, 'total_tokens': 4785, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 3328}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--928ebd45-9f64-40d1-9a1e-cc6347aee0ef-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm test -- --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_2BWFSmQJOaFrctrtfiYMJuZI', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4130, 'output_tokens': 655, 'total_tokens': 4785, 'input_token_details': {'audio': 0, 'cache_read': 3328}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:36:08,453 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test -- --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:36:14,943 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:14,943 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test -- --grep "^(attribute-selector-unquoted|omi
it-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute
e-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-a
attribute-attribute-selector-suffix)$"
[?2004l

> svelte@1.41.1 pretest
> npm run build


> svelte@1.41.1 build
> node src/shared/_build.js && rollup -c

[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m30ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m60ms[22m[39m

> svelte@1.41.1 test
> mocha --opts mocha.opts --grep ^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$



[92m [0m[32m 0 passing[0m[90m (1ms)[0m

[?2004l
2025-11-11 00:36:27,306 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_8DskwhreEmTtxOITdGd4zZ7R', 'function': {'arguments': '{"command":"npm test -- --grep \\"(attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1235, 'prompt_tokens': 4671, 'total_tokens': 5906, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--224135f4-d34a-4c9f-8574-afdd220c7746-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm test -- --grep "(attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)"'}, 'id': 'call_8DskwhreEmTtxOITdGd4zZ7R', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4671, 'output_tokens': 1235, 'total_tokens': 5906, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-11 00:36:27,309 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test -- --grep "(attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)"
2025-11-11 00:36:33,922 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:33,922 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test -- --grep "(attribute-selector-unquoted$|omi
it-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribut
te-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scopin
ng-attribute-attribute-selector-suffix$)"
[?2004l

> svelte@1.41.1 pretest
> npm run build


> svelte@1.41.1 build
> node src/shared/_build.js && rollup -c

[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m26ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m36ms[22m[39m

> svelte@1.41.1 test
> mocha --opts mocha.opts --grep (attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)


[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (148ms)[0m

[?2004l
2025-11-11 00:36:52,472 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='Result:\n npm test -- --grep "(attribute-selector-unquoted$|omi\nit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribut\nte-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scopin\nng-attribute-attribute-selector-suffix$)"\n\x1b[?2004l\n\n> svelte@1.41.1 pretest\n> npm run build\n\n\n> svelte@1.41.1 build\n> node src/shared/_build.js && rollup -c\n\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/index.ts\x1b[22m → \x1b[1mcompiler/svelte.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mcompiler/svelte.js\x1b[22m in \x1b[1m4.3s\x1b[22m\x1b[39m\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/server-side-rendering/register.js\x1b[22m → \x1b[1mssr/register.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mssr/register.js\x1b[22m in \x1b[1m26ms\x1b[22m\x1b[39m\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/shared/index.js\x1b[22m → \x1b[1mshared.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mshared.js\x1b[22m in \x1b[1m36ms\x1b[22m\x1b[39m\n\n> svelte@1.41.1 test\n> mocha --opts mocha.opts --grep (attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)\n\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m attribute-selector-unquoted\x1b[0m\x1b[33m (48ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-contains\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-equals\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-prefix\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-suffix\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 5 passing\x1b[0m\x1b[90m (148ms)\x1b[0m\n\n\x1b[?2004l' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2193, 'prompt_tokens': 5404, 'total_tokens': 7597, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1536, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--66958f75-4871-470d-a695-9da8f8a35172-0' usage_metadata={'input_tokens': 5404, 'output_tokens': 2193, 'total_tokens': 7597, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1536}}
2025-11-11 00:36:52,475 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
Result:
 npm test -- --grep "(attribute-selector-unquoted$|omi
it-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribut
te-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scopin
ng-attribute-attribute-selector-suffix$)"
[?2004l

> svelte@1.41.1 pretest
> npm run build


> svelte@1.41.1 build
> node src/shared/_build.js && rollup -c

[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m26ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m36ms[22m[39m

> svelte@1.41.1 test
> mocha --opts mocha.opts --grep (attribute-selector-unquoted$|omit-scoping-attribute-attribute-selector-contains$|omit-scoping-attribute-attribute-selector-equals$|omit-scoping-attribute-attribute-selector-prefix$|omit-scoping-attribute-attribute-selector-suffix$)


[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (148ms)[0m

[?2004l
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-11 00:36:57,468 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-11 00:36:57,469 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:36:57,470 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-11 00:36:57,471 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - All regression tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:36:57,471 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - Current passed tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:36:57,471 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - True
2025-11-11 00:36:57,473 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_update_node - INFO - Applying patch: diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..0b8632018 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,16 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// presence-only selector ([attr]) — matches if attribute exists regardless of value
+	if (operator == null) return true;
+	// boolean attributes can only be matched by presence selectors
+	if (attr.value === true) return false;
+	// if the value is dynamic or contains multiple chunks, assume it could match
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const make = operators[operator];
+	if (!make) return false;
+	const pattern = make(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:36:57,509 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:36:57,543 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:36:57,543 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:36:57,645 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:57,645 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:36:57,645 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:36:57,747 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:57,747 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:36:57,747 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:36:57,748 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory src/css in the container
2025-11-11 00:36:57,748 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p src/css
2025-11-11 00:36:57,849 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:36:57,849 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:36:57,850 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating src/css/Selector.ts in the container
2025-11-11 00:36:57,858 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:36:57,859 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-11 00:36:57,859 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:37:08,680 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_1F4Oz8VrltNnwn1i49a1F490', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 794, 'prompt_tokens': 617, 'total_tokens': 1411, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e402b87c-c587-4496-9795-700c52e9ae65-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_1F4Oz8VrltNnwn1i49a1F490', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 794, 'total_tokens': 1411, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:37:08,683 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:37:08,785 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:08,785 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:36 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:36 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:14 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 474335 Nov 11 00:14 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:35 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 11 00:36 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:35 yarn.lock
[?2004l
2025-11-11 00:37:11,303 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Ed3ppQOLTjVIkTfxGoFbXmr1', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 218, 'prompt_tokens': 1440, 'total_tokens': 1658, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3ae3c208-6a5d-4f70-b83d-ff953ca88525-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_Ed3ppQOLTjVIkTfxGoFbXmr1', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1440, 'output_tokens': 218, 'total_tokens': 1658, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:37:11,307 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:37:11,408 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:11,409 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:37:15,375 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_XlrteVJDoqCC7st14D15YYy8', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 292, 'prompt_tokens': 2295, 'total_tokens': 2587, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--66e7d194-8b1b-4f56-8290-e6b43932b849-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/css/index.js"}, 'id': 'call_XlrteVJDoqCC7st14D15YYy8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2295, 'output_tokens': 292, 'total_tokens': 2587, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:37:15,379 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/css/index.js
2025-11-11 00:37:15,481 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:15,481 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-11 00:37:19,407 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_usuEFWNKevP0BJE381rDmdIN', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 282, 'prompt_tokens': 3338, 'total_tokens': 3620, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1408}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1c2fb2ec-398c-40a4-8523-2c3b61d1bd3d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_usuEFWNKevP0BJE381rDmdIN', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3338, 'output_tokens': 282, 'total_tokens': 3620, 'input_token_details': {'audio': 0, 'cache_read': 1408}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:37:19,410 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:37:19,512 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:19,512 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:37:21,749 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_0iaZur9LSkRx33HP7iN2Vx4p', 'function': {'arguments': '{"command":"ls -la test/css/samples"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 158, 'prompt_tokens': 3381, 'total_tokens': 3539, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--faee856b-b76d-470e-a3cc-427262e8be55-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test/css/samples'}, 'id': 'call_0iaZur9LSkRx33HP7iN2Vx4p', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3381, 'output_tokens': 158, 'total_tokens': 3539, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:37:21,752 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test/css/samples
2025-11-11 00:37:21,854 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:21,854 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 192
drwxrwxr-x 1 root root 4096 Nov 11 00:01 [0m[01;34m.[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mattribute-selector-unquoted[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mbasic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes-from-to[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-pseudo-element[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-universal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcombinator-child[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcss-vars[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mdescendant-selector-non-top-level-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mkeyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query-word[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-contains[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-case-insensitive[0m[K
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-pipe-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-prefix[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-suffix[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-word-equals[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-static[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-class[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-id[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs-qualified[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34muniversal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munknown-at-rule[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-leading[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-ternary[0m
[?2004l
2025-11-11 00:37:29,071 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_3KEXeqS7zDfXFrBVjPiJoPTR', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 611, 'prompt_tokens': 5197, 'total_tokens': 5808, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--0afaaf39-7e0e-452c-a3e6-3b65a0ccb426-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_3KEXeqS7zDfXFrBVjPiJoPTR', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5197, 'output_tokens': 611, 'total_tokens': 5808, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:37:29,074 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-11 00:37:29,175 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:29,175 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-11 00:37:30,516 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_QJ3sqfoaq3Kzd1J2nn88mQNk', 'function': {'arguments': '{"command":"sed -n \'200,500p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 6494, 'total_tokens': 6523, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--6ae4f399-5db6-4d7f-b8a3-76640d5b9341-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,500p' test/helpers.js"}, 'id': 'call_QJ3sqfoaq3Kzd1J2nn88mQNk', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6494, 'output_tokens': 29, 'total_tokens': 6523, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:37:30,519 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,500p' test/helpers.js
2025-11-11 00:37:30,629 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:30,630 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:37:38,375 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_P29ZtMCrnI4GvzebBgA0gGZR', 'function': {'arguments': '{"command":"ls -la test"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 731, 'prompt_tokens': 6813, 'total_tokens': 7544, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--517c2765-345d-4e3f-8983-7b9a049afc1c-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test'}, 'id': 'call_P29ZtMCrnI4GvzebBgA0gGZR', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6813, 'output_tokens': 731, 'total_tokens': 7544, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-11 00:37:38,378 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test
2025-11-11 00:37:38,480 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:38,480 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 112
drwxrwxr-x 1 root root 4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root 4096 Nov 11 00:35 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcreate[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcss[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcustom-elements[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mformats[0m
-rw-r--r-- 1 root root 5474 Nov 10 23:59 helpers.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mhydration[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mjs[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mparser[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mruntime[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mserver-side-rendering[0m
-rw-r--r-- 1 root root 1077 Nov 10 23:59 setup.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34msourcemaps[0m
-rw-r--r-- 1 root root  247 Nov 10 23:59 test.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mvalidator[0m
[?2004l
2025-11-11 00:37:46,859 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_3sq6aQGHculPdKzMWSJ899lV', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 611, 'prompt_tokens': 7369, 'total_tokens': 7980, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ab657058-bc8d-4486-ac11-9da519456cdd-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/test.js"}, 'id': 'call_3sq6aQGHculPdKzMWSJ899lV', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7369, 'output_tokens': 611, 'total_tokens': 7980, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:37:46,863 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/test.js
2025-11-11 00:37:46,964 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:37:46,965 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-11 00:37:57,106 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Q2Z9dZG8Rr2L4MueUirQcOB4', 'function': {'arguments': '{"command":"npm test --silent -- --grep \\"attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix\\" test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1171, 'prompt_tokens': 7489, 'total_tokens': 8660, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a91e45fd-9da0-4faf-8b9f-de0bf4d88d8c-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm test --silent -- --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix" test/css/index.js'}, 'id': 'call_Q2Z9dZG8Rr2L4MueUirQcOB4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7489, 'output_tokens': 1171, 'total_tokens': 8660, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-11-11 00:37:57,110 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix" test/css/index.js
2025-11-11 00:38:03,630 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:38:03,630 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- --grep "attribute-selector-unquo
oted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-at
ttribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-sc
coping-attribute-attribute-selector-suffix" test/css/index.js
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m25ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m37ms[22m[39m

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (190ms)[0m

[?2004l
2025-11-11 00:38:11,931 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_n7BduUybTwINmWA8v1Sbs9OK', 'function': {'arguments': '{"command":"npm test --silent -- --grep \\"^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\" test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 661, 'prompt_tokens': 8176, 'total_tokens': 8837, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a99332f9-1f50-4466-894a-8ec4a04e0e9d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm test --silent -- --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$" test/css/index.js'}, 'id': 'call_n7BduUybTwINmWA8v1Sbs9OK', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8176, 'output_tokens': 661, 'total_tokens': 8837, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:38:11,934 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$" test/css/index.js
2025-11-11 00:38:18,216 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:38:18,216 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- --grep "^(attribute-selector-unq
quoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-
-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-
-scoping-attribute-attribute-selector-suffix)$" test/css/index.js
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m24ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m37ms[22m[39m


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-11 00:38:39,772 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_KtQBXOlufLu0dymB2oR9Puz0', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --opts mocha.opts test/css/index.js --grep \'^(css\\\\s+)?(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1761, 'prompt_tokens': 8618, 'total_tokens': 10379, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1664, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--853d833b-6aab-480c-af56-2dab907ce163-0' tool_calls=[{'name': 'run_command', 'args': {'command': "./node_modules/.bin/mocha --opts mocha.opts test/css/index.js --grep '^(css\\s+)?(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'"}, 'id': 'call_KtQBXOlufLu0dymB2oR9Puz0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8618, 'output_tokens': 1761, 'total_tokens': 10379, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1664}}
2025-11-11 00:38:39,776 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --opts mocha.opts test/css/index.js --grep '^(css\s+)?(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'
2025-11-11 00:38:40,849 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:38:40,850 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --opts mocha.opts test/css/
/index.js --grep '^(css\s+)?(attribute-selector-unquoted|omit-scoping-attribute-a
attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit
t-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-se
elector-suffix)$'
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (147ms)[0m

[?2004l
2025-11-11 00:39:01,555 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content="Result:\n./node_modules/.bin/mocha --opts mocha.opts test/css/\n/index.js --grep '^(css\\s+)?(attribute-selector-unquoted|omit-scoping-attribute-a\nattribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit\nt-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-se\nelector-suffix)$'\n\n\n  css\n    ✓ attribute-selector-unquoted (48ms)\n    ✓ omit-scoping-attribute-attribute-selector-contains\n    ✓ omit-scoping-attribute-attribute-selector-equals\n    ✓ omit-scoping-attribute-attribute-selector-prefix\n    ✓ omit-scoping-attribute-attribute-selector-suffix\n\n\n  5 passing (147ms)" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 2084, 'prompt_tokens': 9025, 'total_tokens': 11109, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1920, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7296}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--0af5b236-4a47-4e12-8227-394b48e5c2ac-0' usage_metadata={'input_tokens': 9025, 'output_tokens': 2084, 'total_tokens': 11109, 'input_token_details': {'audio': 0, 'cache_read': 7296}, 'output_token_details': {'audio': 0, 'reasoning': 1920}}
2025-11-11 00:39:01,558 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
Result:
./node_modules/.bin/mocha --opts mocha.opts test/css/
/index.js --grep '^(css\s+)?(attribute-selector-unquoted|omit-scoping-attribute-a
attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit
t-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-se
elector-suffix)$'


  css
    ✓ attribute-selector-unquoted (48ms)
    ✓ omit-scoping-attribute-attribute-selector-contains
    ✓ omit-scoping-attribute-attribute-selector-equals
    ✓ omit-scoping-attribute-attribute-selector-prefix
    ✓ omit-scoping-attribute-attribute-selector-suffix


  5 passing (147ms)
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-11 00:39:08,955 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-11 00:39:08,956 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:39:08,956 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-11 00:39:08,957 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - All regression tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:39:08,957 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - Current passed tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:39:08,957 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - True
2025-11-11 00:39:08,959 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_update_node - INFO - Applying patch: diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..34dae7f99 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,9 +219,11 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
+	// Presence-only selector [attr] should match any present attribute regardless of its value
+	if (operator == null) return true;
 	if (attr.value === true) return operator === null;
 	if (attr.value.length > 1) return true;
 

2025-11-11 00:39:08,997 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:39:09,028 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:39:09,028 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:39:09,130 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:09,130 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:39:09,130 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:39:09,232 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:09,232 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:39:09,232 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:39:09,233 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory src/css in the container
2025-11-11 00:39:09,233 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p src/css
2025-11-11 00:39:09,334 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:09,334 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:39:09,335 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating src/css/Selector.ts in the container
2025-11-11 00:39:09,343 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:39:09,344 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-11 00:39:09,344 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:39:12,624 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_XDvVPDG9DOJinx8Z5ehGTWjZ', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 218, 'prompt_tokens': 617, 'total_tokens': 835, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b4dab84a-c8d7-425c-9472-109f02d03808-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_XDvVPDG9DOJinx8Z5ehGTWjZ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 218, 'total_tokens': 835, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:39:12,628 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:39:12,729 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:12,729 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:39 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:39 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:14 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 474335 Nov 11 00:14 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:35 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 11 00:38 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:35 yarn.lock
[?2004l
2025-11-11 00:39:14,907 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_NW692vsMSXRbmMmmqaaupedx', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 1440, 'total_tokens': 1594, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--7cf00283-98f1-449f-bf25-87a8f3ef6cfb-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_NW692vsMSXRbmMmmqaaupedx', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1440, 'output_tokens': 154, 'total_tokens': 1594, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:39:14,911 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:39:15,012 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:15,012 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:39:16,277 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_G3QBI5Pbdn0LPRynYOnbTuFS', 'function': {'arguments': '{"command":"sed -n \'1,220p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 36, 'prompt_tokens': 2295, 'total_tokens': 2331, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--cbd0d379-a62d-4968-93e8-52f64d694d48-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,220p' test/css/index.js"}, 'id': 'call_G3QBI5Pbdn0LPRynYOnbTuFS', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2295, 'output_tokens': 36, 'total_tokens': 2331, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:39:16,280 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,220p' test/css/index.js
2025-11-11 00:39:16,381 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:16,382 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-11 00:39:19,502 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_m3NPMXku4cLlo5ieFnVmTq6S', 'function': {'arguments': '{"command":"ls -la test/css/samples"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 158, 'prompt_tokens': 3338, 'total_tokens': 3496, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b23a9854-d77b-4835-ad5d-2b5fdaee8c34-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test/css/samples'}, 'id': 'call_m3NPMXku4cLlo5ieFnVmTq6S', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3338, 'output_tokens': 158, 'total_tokens': 3496, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:39:19,505 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test/css/samples
2025-11-11 00:39:19,606 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:19,607 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 192
drwxrwxr-x 1 root root 4096 Nov 11 00:01 [0m[01;34m.[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mattribute-selector-unquoted[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mbasic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes-from-to[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-pseudo-element[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-universal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcombinator-child[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcss-vars[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mdescendant-selector-non-top-level-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mkeyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query-word[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-contains[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-case-insensitive[0m[K
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-pipe-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-prefix[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-suffix[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-word-equals[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-static[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-class[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-id[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs-qualified[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34muniversal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munknown-at-rule[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-leading[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-ternary[0m
[?2004l
2025-11-11 00:39:23,401 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2UnLqFpBrHT6t6OC5BVYmMko', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 218, 'prompt_tokens': 5154, 'total_tokens': 5372, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 192, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 3328}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e71dad08-8076-40e6-9264-8d4611fbc7f6-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_2UnLqFpBrHT6t6OC5BVYmMko', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5154, 'output_tokens': 218, 'total_tokens': 5372, 'input_token_details': {'audio': 0, 'cache_read': 3328}, 'output_token_details': {'audio': 0, 'reasoning': 192}}
2025-11-11 00:39:23,405 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:39:23,506 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:23,506 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:39:30,698 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_k6gKwwPg5uAWcU9LJN90hu57', 'function': {'arguments': '{"command":"sed -n \'1,240p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 739, 'prompt_tokens': 5197, 'total_tokens': 5936, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--71a0a531-3e6c-42cb-8abf-6b02653466f0-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,240p' test/helpers.js"}, 'id': 'call_k6gKwwPg5uAWcU9LJN90hu57', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5197, 'output_tokens': 739, 'total_tokens': 5936, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-11 00:39:30,702 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,240p' test/helpers.js
2025-11-11 00:39:30,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:30,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:39:36,928 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_aZcJiSRApZhuoFZSM6c1HS3s', 'function': {'arguments': '{"command":"ls -la compiler"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 539, 'prompt_tokens': 6761, 'total_tokens': 7300, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 2176}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1b91e4ab-5e6a-4618-9c7d-909de817624d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la compiler'}, 'id': 'call_aZcJiSRApZhuoFZSM6c1HS3s', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6761, 'output_tokens': 539, 'total_tokens': 7300, 'input_token_details': {'audio': 0, 'cache_read': 2176}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-11-11 00:39:36,931 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la compiler
2025-11-11 00:39:37,033 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:37,033 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 1956
drwxr-xr-x 2 root root    4096 Nov 10 23:54 [0m[01;34m.[0m
drwxr-xr-x 1 root root    4096 Nov 11 00:35 [01;34m..[0m
-rw-r--r-- 1 root root  687713 Nov 11 00:38 svelte.js
-rw-r--r-- 1 root root 1301209 Nov 11 00:38 svelte.js.map
[?2004l
2025-11-11 00:39:40,647 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_WKfPCBS0qsLlD94Vjqh4U1YM', 'function': {'arguments': '{"command":"ls -la test"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 283, 'prompt_tokens': 6933, 'total_tokens': 7216, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5120}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d9145309-290d-4eec-a9f9-8c198b082325-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test'}, 'id': 'call_WKfPCBS0qsLlD94Vjqh4U1YM', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6933, 'output_tokens': 283, 'total_tokens': 7216, 'input_token_details': {'audio': 0, 'cache_read': 5120}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:39:40,650 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test
2025-11-11 00:39:40,752 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:40,753 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 112
drwxrwxr-x 1 root root 4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root 4096 Nov 11 00:35 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcreate[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcss[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mcustom-elements[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mformats[0m
-rw-r--r-- 1 root root 5474 Nov 10 23:59 helpers.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mhydration[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mjs[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mparser[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mruntime[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mserver-side-rendering[0m
-rw-r--r-- 1 root root 1077 Nov 10 23:59 setup.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34msourcemaps[0m
-rw-r--r-- 1 root root  247 Nov 10 23:59 test.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mvalidator[0m
[?2004l
2025-11-11 00:39:45,323 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_VeBXTSdZGZSV2b6mzEnD3ngf', 'function': {'arguments': '{"command":"sed -n \'1,160p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 419, 'prompt_tokens': 7489, 'total_tokens': 7908, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--806d5c29-11f3-4f40-a121-c72071c5d14d-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,160p' test/test.js"}, 'id': 'call_VeBXTSdZGZSV2b6mzEnD3ngf', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7489, 'output_tokens': 419, 'total_tokens': 7908, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:39:45,326 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,160p' test/test.js
2025-11-11 00:39:45,428 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:39:45,428 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-11 00:39:57,325 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_mCxye7NzlcDVcgSMfT9MpzPD', 'function': {'arguments': '{"command":"npm test --silent -- -g \'^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1361, 'prompt_tokens': 7609, 'total_tokens': 8970, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1280, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--e4650cb7-68bf-45bd-8c21-75276728c52b-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'"}, 'id': 'call_mCxye7NzlcDVcgSMfT9MpzPD', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7609, 'output_tokens': 1361, 'total_tokens': 8970, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1280}}
2025-11-11 00:39:57,328 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'
2025-11-11 00:40:03,861 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:40:03,862 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- -g '^(attribute-selector-unquote
ed|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attr
ribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scop
ping-attribute-attribute-selector-suffix)$'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.4s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m26ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m35ms[22m[39m


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-11 00:40:11,926 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_OoC9WxMBKkv49r07yegJ5Yp4', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --opts mocha.opts test/test.js -g \'^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 666, 'prompt_tokens': 8045, 'total_tokens': 8711, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7552}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--580e5153-cc1b-4105-876f-bf3d879234f7-0' tool_calls=[{'name': 'run_command', 'args': {'command': "./node_modules/.bin/mocha --opts mocha.opts test/test.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'"}, 'id': 'call_OoC9WxMBKkv49r07yegJ5Yp4', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8045, 'output_tokens': 666, 'total_tokens': 8711, 'input_token_details': {'audio': 0, 'cache_read': 7552}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:40:11,930 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --opts mocha.opts test/test.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'
2025-11-11 00:40:12,861 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:40:12,861 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --opts mocha.opts test/test
t.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-
-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute
e-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'
[?2004l


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-11 00:40:20,091 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_Yebb1n3hYxgRt0U5N3E6s2JK', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/setup.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 483, 'prompt_tokens': 8257, 'total_tokens': 8740, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--51ca2be2-b6cf-4724-8b6a-fa6b0ad3bd53-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/setup.js"}, 'id': 'call_Yebb1n3hYxgRt0U5N3E6s2JK', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8257, 'output_tokens': 483, 'total_tokens': 8740, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:40:20,094 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/setup.js
2025-11-11 00:40:20,196 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:40:20,196 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const fs = require('fs');
const path = require('path');

require('console-group').install();
require('source-map-support').install();

require.extensions['.js'] = function(module, filename) {
	const exports = [];

	var code = fs.readFileSync(filename, 'utf-8')
		.replace(/^import (?:\* as )?(\w+) from ['"]([^'"]+)['"];?/gm, 'var $1 = require("$2");')
		.replace(/^import {([^}]+)} from ['"](.+)['"];?/gm, 'var {$1} = require("$2");')
		.replace(/^export default /gm, 'module.exports = ')
		.replace(/^export (const|let|var|class|function) (\w+)/gm, (match, type, name) => {
			exports.push(name);
			return `${type} ${name}`;
		})
		.replace(/^export \{([^}]+)\}/gm, (match, names) => {
			names.split(',').filter(Boolean).forEach(name => {
				exports.push(name);
			});

			return '';
		})
		.replace(/^export function (\w+)/gm, 'exports.$1 = function $1');

	exports.forEach(name => {
		code += `\nexports.${name} = ${name};`;
	});

	try {
		return module._compile(code, filename);
	} catch (err) {
		console.log(code); // eslint-disable-line no-console
		throw err;
	}
[?2004l
2025-11-11 00:40:36,651 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_tY19aqOSmqUaDyj6jpyfME3Z', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/setup.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 611, 'prompt_tokens': 8627, 'total_tokens': 9238, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1725c2cf-b9d6-4817-ae28-eb123cc60966-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/setup.js"}, 'id': 'call_tY19aqOSmqUaDyj6jpyfME3Z', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8627, 'output_tokens': 611, 'total_tokens': 9238, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:40:36,654 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/setup.js
2025-11-11 00:40:36,756 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:40:36,756 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:40:50,963 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_50EVh7w0gOKC2q4TpOMjlvvn', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --require test/setup.js test/css/index.js -g \'^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 924, 'prompt_tokens': 8679, 'total_tokens': 9603, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 832, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8576}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ec6f8cf9-f8d0-4709-bb54-a2e72a117037-0' tool_calls=[{'name': 'run_command', 'args': {'command': "./node_modules/.bin/mocha --require test/setup.js test/css/index.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'"}, 'id': 'call_50EVh7w0gOKC2q4TpOMjlvvn', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8679, 'output_tokens': 924, 'total_tokens': 9603, 'input_token_details': {'audio': 0, 'cache_read': 8576}, 'output_token_details': {'audio': 0, 'reasoning': 832}}
2025-11-11 00:40:50,967 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --require test/setup.js test/css/index.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$'
2025-11-11 00:40:51,550 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:40:51,551 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --require test/setup.js tes
st/css/index.js -g '^(attribute-selector-unquoted|omit-scoping-attribute-attribut
te-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scopin
ng-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-
-suffix)$'
[?2004l


[92m [0m[32m 0 passing[0m[90m (1ms)[0m

[?2004l
2025-11-11 00:41:02,332 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_g7wcYTCBBDqnHFLNGNnAc5ff', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --require test/setup.js test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 998, 'prompt_tokens': 8897, 'total_tokens': 9895, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 960, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7936}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--bc78ef65-0bed-4e4d-8739-48172ad84e65-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha --require test/setup.js test/test.js'}, 'id': 'call_g7wcYTCBBDqnHFLNGNnAc5ff', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8897, 'output_tokens': 998, 'total_tokens': 9895, 'input_token_details': {'audio': 0, 'cache_read': 7936}, 'output_token_details': {'audio': 0, 'reasoning': 960}}
2025-11-11 00:41:02,336 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --require test/setup.js test/test.js
2025-11-11 00:42:08,856 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 8
2025-11-11 00:42:08,856 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --require test/setup.js tes
st/test.js
[?2004l

[0m[0m
[0m  create[0m
  [32m  ✓[0m[90m should return a component constructor[0m
  [32m  ✓[0m[90m should throw error when source is invalid [0m
  [32m  ✓[0m[90m should return undefined when source is invalid [0m

[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m cascade-false[0m
  [32m  ✓[0m[90m cascade-false-global[0m
  [32m  ✓[0m[90m cascade-false-global-keyframes[0m
  [32m  ✓[0m[90m cascade-false-keyframes[0m
  [32m  ✓[0m[90m cascade-false-keyframes-from-to[0m
  [32m  ✓[0m[90m cascade-false-pseudo-element[0m
  [32m  ✓[0m[90m cascade-false-universal-selector[0m
  [32m  ✓[0m[90m combinator-child[0m
  [32m  ✓[0m[90m css-vars[0m
  [32m  ✓[0m[90m descendant-selector-non-top-level-outer[0m
  [32m  ✓[0m[90m keyframes[0m
  [32m  ✓[0m[90m media-query[0m
  [32m  ✓[0m[90m media-query-word[0m
  [32m  ✓[0m[90m omit-scoping-attribute[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-pipe-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-word-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-class-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-class-static[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner-class[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-inner-multiple[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-outer[0m
  [32m  ✓[0m[90m omit-scoping-attribute-descendant-global-outer-multiple[0m
  [32m  ✓[0m[90m omit-scoping-attribute-global[0m
  [32m  ✓[0m[90m omit-scoping-attribute-id[0m
  [32m  ✓[0m[90m omit-scoping-attribute-whitespace[0m
  [32m  ✓[0m[90m omit-scoping-attribute-whitespace-multiple[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m refs-qualified[0m
  [32m  ✓[0m[90m universal-selector[0m
  [32m  ✓[0m[90m unknown-at-rule[0m
  [32m  ✓[0m[90m unused-selector[0m
  [32m  ✓[0m[90m unused-selector-leading[0m
  [32m  ✓[0m[90m unused-selector-ternary[0m

[0m  custom-elements[0m
  [31m  1) escaped-css[0m
  [31m  2) html[0m
  [31m  3) html-slots[0m
  [31m  4) new[0m
  [31m  5) new-styled[0m

[0m  formats[0m
[0m    amd[0m
    [32m  ✓[0m[90m generates an AMD module[0m
[0m    cjs[0m
    [32m  ✓[0m[90m generates a CommonJS module[0m
[0m    iife[0m
    [32m  ✓[0m[90m generates a self-executing script[0m
[0m    umd[0m
    [32m  ✓[0m[90m generates a UMD build[0m
[0m    eval[0m
    [32m  ✓[0m[90m generates a self-executing script that returns the component on eval[0m

[0m  hydration[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m binding-input[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-in-element[0m
  [32m  ✓[0m[90m dynamic-text[0m
  [32m  ✓[0m[90m dynamic-text-changed[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m element-attribute-added[0m
  [32m  ✓[0m[90m element-attribute-changed[0m
  [32m  ✓[0m[90m element-attribute-removed[0m
  [32m  ✓[0m[90m element-attribute-unchanged[0m
  [32m  ✓[0m[90m element-nested[0m
  [32m  ✓[0m[90m element-ref[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-anchor[0m
  [32m  ✓[0m[90m if-block-false[0m
  [32m  ✓[0m[90m if-block-update[0m
  [36m  - raw[0m
  [32m  ✓[0m[90m top-level-text[0m

[0m  js[0m
  [32m  ✓[0m[90m collapses-text-around-comments[0m[33m (53ms)[0m
  [32m  ✓[0m[90m component-static[0m[33m (45ms)[0m
  [32m  ✓[0m[90m computed-collapsed-if[0m[33m (57ms)[0m
  [32m  ✓[0m[90m css-media-query[0m[33m (41ms)[0m
  [32m  ✓[0m[90m css-shadow-dom-keyframes[0m[33m (44ms)[0m
  [32m  ✓[0m[90m each-block-changed-check[0m[33m (63ms)[0m
  [32m  ✓[0m[90m event-handlers-custom[0m[33m (38ms)[0m
  [32m  ✓[0m[90m if-block-no-update[0m[33m (38ms)[0m
  [32m  ✓[0m[90m if-block-simple[0m[33m (42ms)[0m
  [32m  ✓[0m[90m inline-style-optimized[0m
  [32m  ✓[0m[90m inline-style-optimized-multiple[0m
  [32m  ✓[0m[90m inline-style-optimized-url[0m
  [32m  ✓[0m[90m inline-style-unoptimized[0m
  [32m  ✓[0m[90m input-without-blowback-guard[0m
  [32m  ✓[0m[90m legacy-input-type[0m
  [32m  ✓[0m[90m legacy-quote-class[0m
  [32m  ✓[0m[90m media-bindings[0m
'Imported.html' is imported by test/js/samples/non-imported-component/_actual.js, but could not be resolved – treating it as an external dependency
  [32m  ✓[0m[90m non-imported-component[0m
(4:2) – 'onrender' has been deprecated in favour of 'oncreate', and will cause an error in Svelte 2.x
(5:2) – 'onteardown' has been deprecated in favour of 'ondestroy', and will cause an error in Svelte 2.x
  [32m  ✓[0m[90m onrender-onteardown-rewritten[0m
  [32m  ✓[0m[90m setup-method[0m[33m (49ms)[0m
  [32m  ✓[0m[90m ssr-no-oncreate-etc[0m
  [32m  ✓[0m[90m use-elements-as-anchors[0m[33m (46ms)[0m

[0m  parse[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-dynamic-boolean[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved[0m
  [32m  ✓[0m[90m attribute-escaped[0m
  [32m  ✓[0m[90m attribute-multiple[0m
  [32m  ✓[0m[90m attribute-shorthand[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m attribute-static-boolean[0m
  [32m  ✓[0m[90m attribute-unique-error[0m
  [32m  ✓[0m[90m attribute-unquoted[0m
  [32m  ✓[0m[90m binding[0m
  [32m  ✓[0m[90m binding-shorthand[0m
  [32m  ✓[0m[90m comment[0m
  [32m  ✓[0m[90m convert-entities[0m
  [32m  ✓[0m[90m convert-entities-in-element[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-ref-selector[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m each-block-destructured[0m
  [32m  ✓[0m[90m each-block-else[0m
  [32m  ✓[0m[90m each-block-indexed[0m
  [32m  ✓[0m[90m each-block-keyed[0m
  [32m  ✓[0m[90m element-with-mustache[0m
  [32m  ✓[0m[90m element-with-text[0m
  [32m  ✓[0m[90m elements[0m
  [32m  ✓[0m[90m error-binding-mustaches[0m
  [32m  ✓[0m[90m error-binding-rvalue[0m
  [32m  ✓[0m[90m error-css[0m[31m (196ms)[0m
  [32m  ✓[0m[90m error-event-handler[0m
  [32m  ✓[0m[90m error-illegal-expression[0m
  [32m  ✓[0m[90m error-multiple-styles[0m
  [32m  ✓[0m[90m error-script-unclosed[0m
  [32m  ✓[0m[90m error-self-reference[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-b[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-c[0m
  [32m  ✓[0m[90m error-unexpected-end-of-input-d[0m
  [32m  ✓[0m[90m error-unmatched-closing-tag[0m
  [32m  ✓[0m[90m error-void-closing[0m
  [32m  ✓[0m[90m error-window-children[0m
  [32m  ✓[0m[90m error-window-duplicate[0m
  [32m  ✓[0m[90m error-window-inside-block[0m
  [32m  ✓[0m[90m error-window-inside-element[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-else[0m
  [32m  ✓[0m[90m if-block-elseif[0m
  [32m  ✓[0m[90m implicitly-closed-li[0m
  [32m  ✓[0m[90m nbsp[0m
  [32m  ✓[0m[90m raw-mustaches[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m script[0m
  [32m  ✓[0m[90m script-comment-only[0m
  [32m  ✓[0m[90m script-comment-trailing[0m
  [32m  ✓[0m[90m script-comment-trailing-multiline[0m
  [32m  ✓[0m[90m self-closing-element[0m
  [32m  ✓[0m[90m self-reference[0m
  [32m  ✓[0m[90m space-between-mustaches[0m
  [32m  ✓[0m[90m textarea-children[0m
  [32m  ✓[0m[90m transition-intro[0m
  [32m  ✓[0m[90m transition-intro-no-params[0m
  [32m  ✓[0m[90m whitespace-leading-trailing[0m
  [32m  ✓[0m[90m whitespace-normal[0m
  [32m  ✓[0m[90m yield[0m
  [32m  ✓[0m[90m handles errors with options.onerror[0m
  [32m  ✓[0m[90m throws without options.onerror[0m
  [32m  ✓[0m[90m includes AST in svelte.compile output[0m

[0m  runtime[0m
  [32m  ✓[0m[90m attribute-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (shared helpers)[0m
  [32m  ✓[0m[90m attribute-dynamic-type (inline helpers)[0m
  [32m  ✓[0m[90m attribute-empty (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty (inline helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (shared helpers)[0m
  [32m  ✓[0m[90m attribute-empty-svg (inline helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (shared helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (shared helpers)[0m
  [32m  ✓[0m[90m attribute-namespaced (inline helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (shared helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (shared helpers)[0m
  [32m  ✓[0m[90m attribute-partial-number (inline helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (shared helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (shared helpers)[0m
  [32m  ✓[0m[90m attribute-prefer-expression (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-at-symbol (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-boolean (inline helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (shared helpers)[0m
  [32m  ✓[0m[90m attribute-static-quotemarks (inline helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (shared helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (shared helpers)[0m
(2:18) – A11y: Avoid using autofocus
(2:18) – A11y: Avoid using autofocus
  [32m  ✓[0m[90m autofocus (inline helpers)[0m
  [36m  - binding-audio-currenttime-duration (shared helpers)[0m
  [36m  - binding-audio-currenttime-duration (shared helpers)[0m
  [36m  - binding-audio-currenttime-duration (inline helpers)[0m
  [32m  ✓[0m[90m binding-indirect (shared helpers)[0m
  [32m  ✓[0m[90m binding-indirect (shared helpers)[0m
  [32m  ✓[0m[90m binding-indirect (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-checkbox-group-outside-each (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-number (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-number (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-number (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-radio-group (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-range (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-range-change (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (shared helpers)[0m
  [32m  ✓[0m[90m binding-input-with-event (inline helpers)[0m

>> [36m[1mmain.html[22m[39m
[90m    1: [39m/* main.html generated by Svelte v1.41.1 */
[90m    2: [39mimport { addListener as addListener$, appendNode as appendNode$, assign as assign$, callAll as callAll$, createElement as createElement$, createText as createText$, detachNode as detachNode$, init as init$, insertNode as insertNode$, proto as proto$, removeListener as removeListener$ } from "/testbed/shared.js";
[90m    3: [39m
[90m    4: [39mfunction create_main_fragment$(state, component$) {
[90m    5: [39m    var p$, text$, text$_1, text$_2, select$, option$, option$_1, option$_2, select$_1$_updating = false, text$_6, p$_1, text$_7, text$_8;
[90m    6: [39m
[90m    7: [39m    function select$_change_handler$() {
[90m    8: [39m        select$_1$_updating = true;
[90m    9: [39m        var selectedOption = select$.querySelector(':checked') || select$.options[0];
[90m   10: [39m        component$.set({ selected: selectedOption && selectedOption.__value });
[90m   11: [39m        select$_1$_updating = false;
[90m   12: [39m    }
[90m   13: [39m
[90m   14: [39m    return {
[90m   15: [39m        c: function create() {
[90m   16: [39m            p$ = createElement$("p");
[90m   17: [39m            text$ = createText$("selected: ");
[90m   18: [39m            text$_1 = createText$(state.selected);
[90m   19: [39m            text$_2 = createText$("\n\n");
[90m   20: [39m            select$ = createElement$("select");
[90m   21: [39m            option$ = createElement$("option");
[90m   22: [39m            option$.textContent = "one";
[90m   23: [39m            option$_1 = createElement$("option");
[90m   24: [39m            option$_1.textContent = "two";
[90m   25: [39m            option$_2 = createElement$("option");
[90m   26: [39m            option$_2.textContent = "three";
[90m   27: [39m            text$_6 = createText$("\n\n");
[90m   28: [39m            p$_1 = createElement$("p");
[90m   29: [39m            text$_7 = createText$("selected: ");
[90m   30: [39m            text$_8 = createText$(state.selected);
[90m   31: [39m            this.h();
[90m   32: [39m        },
[90m   33: [39m
[90m   34: [39m        h: function hydrate() {
[90m   35: [39m            if (!('selected' in state)) component$._root._beforecreate.push(select$_change_handler$);
[90m   36: [39m
[90m   37: [39m            addListener$(select$, "change", select$_change_handler$);
[90m   38: [39m        },
[90m   39: [39m
[90m   40: [39m        m: function mount(target$, anchor) {
[90m   41: [39m            insertNode$(p$, target$, anchor);
[90m   42: [39m            appendNode$(text$, p$);
[90m   43: [39m            appendNode$(text$_1, p$);
[90m   44: [39m            insertNode$(text$_2, target$, anchor);
[90m   45: [39m            insertNode$(select$, target$, anchor);
[90m   46: [39m            appendNode$(option$, select$);
[90m   47: [39m
[90m   48: [39m            option$.__value = option$.textContent;
[90m   49: [39m
[90m   50: [39m            appendNode$(option$_1, select$);
[90m   51: [39m
[90m   52: [39m            option$_1.__value = option$_1.textContent;
[90m   53: [39m
[90m   54: [39m            appendNode$(option$_2, select$);
[90m   55: [39m
[90m   56: [39m            option$_2.__value = option$_2.textContent;
[90m   57: [39m
[90m   58: [39m            var value$ = state.selected;
[90m   59: [39m            for (var i$ = 0; i$ < select$.options.length; i$ += 1) {
[90m   60: [39m                var option$_3 = select$.options[i$];
[90m   61: [39m
[90m   62: [39m                if (option$_3.__value === value$) {
[90m   63: [39m                    option$_3.selected = true;
[90m   64: [39m                    break;
[90m   65: [39m                }
[90m   66: [39m            }
[90m   67: [39m
[90m   68: [39m            insertNode$(text$_6, target$, anchor);
[90m   69: [39m            insertNode$(p$_1, target$, anchor);
[90m   70: [39m            appendNode$(text$_7, p$_1);
[90m   71: [39m            appendNode$(text$_8, p$_1);
[90m   72: [39m        },
[90m   73: [39m
[90m   74: [39m        p: function update(changed, state) {
[90m   75: [39m            if (changed.selected) {
[90m   76: [39m                text$_1.data = state.selected;
[90m   77: [39m            }
[90m   78: [39m
[90m   79: [39m            option$.__value = option$.textContent;
[90m   80: [39m            option$_1.__value = option$_1.textContent;
[90m   81: [39m            option$_2.__value = option$_2.textContent;
[90m   82: [39m
[90m   83: [39m            if (!select$_1$_updating) {
[90m   84: [39m                var value$ = state.selected;
[90m   85: [39m                for (var i$ = 0; i$ < select$.options.length; i$ += 1) {
[90m   86: [39m                    var option$_3 = select$.options[i$];
[90m   87: [39m
[90m   88: [39m                    if (option$_3.__value === value$) {
[90m   89: [39m                        option$_3.selected = true;
[90m   90: [39m                        break;
[90m   91: [39m                    }
[90m   92: [39m                }
[90m   93: [39m            }
[90m   94: [39m
[90m   95: [39m            if (changed.selected) {
[90m   96: [39m                text$_8.data = state.selected;
[90m   97: [39m            }
[90m   98: [39m        },
[90m   99: [39m
[90m  100: [39m        u: function unmount() {
[90m  101: [39m            detachNode$(p$);
[90m  102: [39m            detachNode$(text$_2);
[90m  103: [39m            detachNode$(select$);
[90m  104: [39m            detachNode$(text$_6);
[90m  105: [39m            detachNode$(p$_1);
[90m  106: [39m        },
[90m  107: [39m
[90m  108: [39m        d: function destroy() {
[90m  109: [39m            removeListener$(select$, "change", select$_change_handler$);
[90m  110: [39m        }
[90m  111: [39m    };
[90m  112: [39m}
[90m  113: [39m
[90m  114: [39mfunction Main$(options) {
[90m  115: [39m    init$(this, options);
[90m  116: [39m    this._state = assign$({}, options.data);
[90m  117: [39m
[90m  118: [39m    if (!options._root) {
[90m  119: [39m        this._oncreate = [];
[90m  120: [39m        this._beforecreate = [];
[90m  121: [39m    }
[90m  122: [39m
[90m  123: [39m    this._fragment = create_main_fragment$(this._state, this);
[90m  124: [39m
[90m  125: [39m    if (options.target) {
[90m  126: [39m        this._fragment.c();
[90m  127: [39m        this._fragment.m(options.target, options.anchor || null);
[90m  128: [39m
[90m  129: [39m        callAll$(this._beforecreate);
[90m  130: [39m    }
[90m  131: [39m}
[90m  132: [39m
[90m  133: [39massign$(Main$.prototype, proto$);
[90m  134: [39mexport default Main$;
<< [36m[1mmain.html[22m[39m
  [31m  6) binding-select (shared helpers)[0m
  [31m  7) binding-select (shared helpers)[0m
  [31m  8) binding-select (inline helpers)[0m
  [36m  - binding-select-in-each-block (shared helpers)[0m
  [36m  - binding-select-in-each-block (shared helpers)[0m
  [36m  - binding-select-in-each-block (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-in-yield (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-initial-value-undefined (inline helpers)[0m
  [32m  ✓[0m[90m binding-select-late (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-late (shared helpers)[0m
  [32m  ✓[0m[90m binding-select-late (inline helpers)[0m
  [36m  - binding-select-multiple (shared helpers)[0m
  [36m  - binding-select-multiple (shared helpers)[0m
  [36m  - binding-select-multiple (inline helpers)[0m
  [32m  ✓[0m[90m binding-textarea (shared helpers)[0m
  [32m  ✓[0m[90m binding-textarea (shared helpers)[0m
  [32m  ✓[0m[90m binding-textarea (inline helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m bindings-before-oncreate (inline helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (shared helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (shared helpers)[0m
  [32m  ✓[0m[90m bindings-coalesced (inline helpers)[0m
  [32m  ✓[0m[90m component (shared helpers)[0m
  [32m  ✓[0m[90m component (shared helpers)[0m
  [32m  ✓[0m[90m component (inline helpers)[0m
  [32m  ✓[0m[90m component-binding (shared helpers)[0m
  [32m  ✓[0m[90m component-binding (shared helpers)[0m
  [32m  ✓[0m[90m component-binding (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-blowback-c (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-computed (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-conditional (inline helpers)[0m
  [36m  - component-binding-conditional-b (shared helpers)[0m
  [36m  - component-binding-conditional-b (shared helpers)[0m
  [36m  - component-binding-conditional-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-deep (inline helpers)[0m
  [36m  - component-binding-deep-b (shared helpers)[0m
  [36m  - component-binding-deep-b (shared helpers)[0m
  [36m  - component-binding-deep-b (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-each-object (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-infinite-loop (inline helpers)[0m[33m (45ms)[0m
  [32m  ✓[0m[90m component-binding-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (shared helpers)[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-late (inline helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m component-data-empty (shared helpers)[0m
  [32m  ✓[0m[90m component-data-empty (shared helpers)[0m
  [32m  ✓[0m[90m component-data-empty (inline helpers)[0m
  [32m  ✓[0m[90m component-data-static (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static (inline helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (shared helpers)[0m
  [32m  ✓[0m[90m component-data-static-boolean (inline helpers)[0m
  [32m  ✓[0m[90m component-events (shared helpers)[0m
  [32m  ✓[0m[90m component-events (shared helpers)[0m
  [32m  ✓[0m[90m component-events (inline helpers)[0m
  [32m  ✓[0m[90m component-events-data (shared helpers)[0m
  [32m  ✓[0m[90m component-events-data (shared helpers)[0m
  [32m  ✓[0m[90m component-events-data (inline helpers)[0m
  [32m  ✓[0m[90m component-events-each (shared helpers)[0m
  [32m  ✓[0m[90m component-events-each (shared helpers)[0m
  [32m  ✓[0m[90m component-events-each (inline helpers)[0m
  [32m  ✓[0m[90m component-if-placement (shared helpers)[0m
  [32m  ✓[0m[90m component-if-placement (shared helpers)[0m
  [32m  ✓[0m[90m component-if-placement (inline helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deep (inline helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (shared helpers)[0m
  [32m  ✓[0m[90m component-nested-deeper (inline helpers)[0m
  [32m  ✓[0m[90m component-not-void (shared helpers)[0m
  [32m  ✓[0m[90m component-not-void (shared helpers)[0m
  [32m  ✓[0m[90m component-not-void (inline helpers)[0m
  [32m  ✓[0m[90m component-ref (shared helpers)[0m
  [32m  ✓[0m[90m component-ref (shared helpers)[0m
  [32m  ✓[0m[90m component-ref (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-default (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-default (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-default (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-fallback (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-named (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-named (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-named (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested (inline helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (shared helpers)[0m
  [32m  ✓[0m[90m component-slot-nested-component (inline helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (shared helpers)[0m
  [32m  ✓[0m[90m component-static-at-symbol (inline helpers)[0m
  [32m  ✓[0m[90m component-yield (shared helpers)[0m
  [32m  ✓[0m[90m component-yield (shared helpers)[0m
  [32m  ✓[0m[90m component-yield (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-follows-element (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-nested-if (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-parent (inline helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode (/testbed/shared.js:25:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:65:4)
    at Modal$.destroy (/testbed/shared.js:382:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:27:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (shared helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode (/testbed/shared.js:25:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:90:4)
    at Modal$.destroy (/testbed/shared.js:382:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:30:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (shared helpers)[0m
Error: Uncaught [TypeError: Cannot read properties of null (reading 'removeChild')]
    at reportException (/testbed/node_modules/jsdom/lib/jsdom/living/helpers/runtime-script-errors.js:63:24)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:233:9)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21) TypeError: Cannot read properties of null (reading 'removeChild')
    at detachNode$ (/testbed/test/runtime/samples/component-yield-placement/Modal.html:124:18)
    at Object.unmount [as u] (/testbed/test/runtime/samples/component-yield-placement/Modal.html:50:4)
    at Modal$.destroy$ (/testbed/test/runtime/samples/component-yield-placement/Modal.html:164:39)
    at HTMLButtonElement.click_handler$_1 (/testbed/test/runtime/samples/component-yield-placement/Modal.html:12:14)
    at invokeEventListeners (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:217:27)
    at HTMLButtonElementImpl._dispatch (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:122:9)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/events/EventTarget-impl.js:83:17)
    at HTMLButtonElementImpl.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/nodes/HTMLElement-impl.js:40:27)
    at HTMLButtonElement.dispatchEvent (/testbed/node_modules/jsdom/lib/jsdom/living/generated/EventTarget.js:123:21)
    at Object.test (/testbed/test/runtime/samples/component-yield-placement/_config.js:19:10)
    at Context.<anonymous> (/testbed/test/runtime/index.js:181:13)
    at callFn (/testbed/node_modules/mocha/lib/runnable.js:348:21)
    at Test.Runnable.run (/testbed/node_modules/mocha/lib/runnable.js:340:7)
    at Runner.runTest (/testbed/node_modules/mocha/lib/runner.js:443:10)
    at /testbed/node_modules/mocha/lib/runner.js:549:12
    at next (/testbed/node_modules/mocha/lib/runner.js:361:14)
    at /testbed/node_modules/mocha/lib/runner.js:371:7
    at next (/testbed/node_modules/mocha/lib/runner.js:295:14)
    at Immediate._onImmediate (/testbed/node_modules/mocha/lib/runner.js:339:5)
    at processImmediate (node:internal/timers:466:21)
  [32m  ✓[0m[90m component-yield-placement (inline helpers)[0m
  [32m  ✓[0m[90m component-yield-static (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-static (shared helpers)[0m
  [32m  ✓[0m[90m component-yield-static (inline helpers)[0m
  [32m  ✓[0m[90m computed-empty (shared helpers)[0m
  [32m  ✓[0m[90m computed-empty (shared helpers)[0m
  [32m  ✓[0m[90m computed-empty (inline helpers)[0m
  [32m  ✓[0m[90m computed-function (shared helpers)[0m
  [32m  ✓[0m[90m computed-function (shared helpers)[0m
  [32m  ✓[0m[90m computed-function (inline helpers)[0m
  [32m  ✓[0m[90m computed-values (shared helpers)[0m
  [32m  ✓[0m[90m computed-values (shared helpers)[0m
  [32m  ✓[0m[90m computed-values (inline helpers)[0m
  [32m  ✓[0m[90m computed-values-default (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-default (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-default (inline helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (shared helpers)[0m
  [32m  ✓[0m[90m computed-values-function-dependency (inline helpers)[0m
  [32m  ✓[0m[90m css (shared helpers)[0m
  [32m  ✓[0m[90m css (shared helpers)[0m
  [32m  ✓[0m[90m css (inline helpers)[0m
  [32m  ✓[0m[90m css-comments (shared helpers)[0m
  [32m  ✓[0m[90m css-comments (shared helpers)[0m
  [32m  ✓[0m[90m css-comments (inline helpers)[0m
  [32m  ✓[0m[90m css-false (shared helpers)[0m
  [32m  ✓[0m[90m css-false (shared helpers)[0m
  [32m  ✓[0m[90m css-false (inline helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (shared helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (shared helpers)[0m
  [32m  ✓[0m[90m css-space-in-attribute (inline helpers)[0m
  [32m  ✓[0m[90m custom-method (shared helpers)[0m
  [32m  ✓[0m[90m custom-method (shared helpers)[0m
  [32m  ✓[0m[90m custom-method (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-builtins (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-contexts (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-non-helpers (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-self (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-self (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-self (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-1 (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-template-2 (inline helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (shared helpers)[0m
  [32m  ✓[0m[90m deconflict-vars (inline helpers)[0m
  [32m  ✓[0m[90m default-data (shared helpers)[0m
  [32m  ✓[0m[90m default-data (shared helpers)[0m
  [32m  ✓[0m[90m default-data (inline helpers)[0m
  [32m  ✓[0m[90m default-data-function (shared helpers)[0m
  [32m  ✓[0m[90m default-data-function (shared helpers)[0m
  [32m  ✓[0m[90m default-data-function (inline helpers)[0m
  [32m  ✓[0m[90m default-data-override (shared helpers)[0m
  [32m  ✓[0m[90m default-data-override (shared helpers)[0m
  [32m  ✓[0m[90m default-data-override (inline helpers)[0m
  [32m  ✓[0m[90m destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m destroy-twice (inline helpers)[0m
  [32m  ✓[0m[90m destructuring (shared helpers)[0m
  [32m  ✓[0m[90m destructuring (shared helpers)[0m
  [32m  ✓[0m[90m destructuring (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-helper (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed (inline helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (shared helpers)[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding (inline helpers)[0m
  [32m  ✓[0m[90m each-block (shared helpers)[0m
  [32m  ✓[0m[90m each-block (shared helpers)[0m
  [32m  ✓[0m[90m each-block (inline helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if (inline helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (shared helpers)[0m
  [32m  ✓[0m[90m each-block-containing-if (inline helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (shared helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (shared helpers)[0m
  [32m  ✓[0m[90m each-block-destructured-array (inline helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static (inline helpers)[0m
  [32m  ✓[0m[90m each-block-else (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else (inline helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (shared helpers)[0m
  [32m  ✓[0m[90m each-block-else-starts-empty (inline helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-indexed (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic (inline helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (shared helpers)[0m[33m (53ms)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (shared helpers)[0m[31m (166ms)[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute (inline helpers)[0m[33m (44ms)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (shared helpers)[0m
  [32m  ✓[0m[90m each-block-keyed-unshift (inline helpers)[0m
  [32m  ✓[0m[90m each-block-random-permute (shared helpers)[0m
  [32m  ✓[0m[90m each-block-random-permute (shared helpers)[0m[33m (41ms)[0m
  [32m  ✓[0m[90m each-block-random-permute (inline helpers)[0m
  [32m  ✓[0m[90m each-block-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-static (shared helpers)[0m
  [32m  ✓[0m[90m each-block-static (inline helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (shared helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (shared helpers)[0m
  [32m  ✓[0m[90m each-block-text-node (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-expression (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested (inline helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (shared helpers)[0m
  [32m  ✓[0m[90m each-blocks-nested-b (inline helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (shared helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (shared helpers)[0m
  [32m  ✓[0m[90m element-invalid-name (inline helpers)[0m
  [32m  ✓[0m[90m empty-style-block (shared helpers)[0m
  [32m  ✓[0m[90m empty-style-block (shared helpers)[0m
  [32m  ✓[0m[90m empty-style-block (inline helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (shared helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (shared helpers)[0m
  [32m  ✓[0m[90m escape-template-literals (inline helpers)[0m
  [32m  ✓[0m[90m escaped-text (shared helpers)[0m
  [32m  ✓[0m[90m escaped-text (shared helpers)[0m
  [32m  ✓[0m[90m escaped-text (inline helpers)[0m
  [32m  ✓[0m[90m event-handler (shared helpers)[0m
  [32m  ✓[0m[90m event-handler (shared helpers)[0m
  [32m  ✓[0m[90m event-handler (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-console-log (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-context (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-each (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-custom-node-context (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-destroy (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-event-methods (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-hoisted (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-removal (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-sanitize (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-shorthand-component (inline helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (shared helpers)[0m
  [32m  ✓[0m[90m event-handler-this-methods (inline helpers)[0m
  [32m  ✓[0m[90m events-custom (shared helpers)[0m
  [32m  ✓[0m[90m events-custom (shared helpers)[0m
  [32m  ✓[0m[90m events-custom (inline helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (shared helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (shared helpers)[0m
  [32m  ✓[0m[90m events-lifecycle (inline helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (shared helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (shared helpers)[0m
  [32m  ✓[0m[90m flush-before-bindings (inline helpers)[0m
  [32m  ✓[0m[90m function-in-expression (shared helpers)[0m
  [32m  ✓[0m[90m function-in-expression (shared helpers)[0m
  [32m  ✓[0m[90m function-in-expression (inline helpers)[0m
  [32m  ✓[0m[90m get-state (shared helpers)[0m
  [32m  ✓[0m[90m get-state (shared helpers)[0m
  [32m  ✓[0m[90m get-state (inline helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (shared helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (shared helpers)[0m
  [32m  ✓[0m[90m globals-accessible-directly (inline helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (shared helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (shared helpers)[0m
  [32m  ✓[0m[90m globals-not-dereferenced (inline helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-data (inline helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (shared helpers)[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers (inline helpers)[0m
  [32m  ✓[0m[90m hello-world (shared helpers)[0m
  [32m  ✓[0m[90m hello-world (shared helpers)[0m
  [32m  ✓[0m[90m hello-world (inline helpers)[0m
  [32m  ✓[0m[90m helpers (shared helpers)[0m
  [32m  ✓[0m[90m helpers (shared helpers)[0m
  [32m  ✓[0m[90m helpers (inline helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (shared helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (shared helpers)[0m
  [32m  ✓[0m[90m helpers-not-call-expression (inline helpers)[0m
  [32m  ✓[0m[90m html-entities (shared helpers)[0m
  [32m  ✓[0m[90m html-entities (shared helpers)[0m
  [32m  ✓[0m[90m html-entities (inline helpers)[0m
  [32m  ✓[0m[90m if-block (shared helpers)[0m
  [32m  ✓[0m[90m if-block (shared helpers)[0m
  [32m  ✓[0m[90m if-block (inline helpers)[0m
  [32m  ✓[0m[90m if-block-else (shared helpers)[0m
  [32m  ✓[0m[90m if-block-else (shared helpers)[0m
  [32m  ✓[0m[90m if-block-else (inline helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif (inline helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (shared helpers)[0m
  [32m  ✓[0m[90m if-block-elseif-text (inline helpers)[0m
  [32m  ✓[0m[90m if-block-expression (shared helpers)[0m
  [32m  ✓[0m[90m if-block-expression (shared helpers)[0m
  [32m  ✓[0m[90m if-block-expression (inline helpers)[0m
  [32m  ✓[0m[90m if-block-or (shared helpers)[0m
  [32m  ✓[0m[90m if-block-or (shared helpers)[0m
  [32m  ✓[0m[90m if-block-or (inline helpers)[0m
  [32m  ✓[0m[90m if-block-widget (shared helpers)[0m
  [32m  ✓[0m[90m if-block-widget (shared helpers)[0m
  [32m  ✓[0m[90m if-block-widget (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-raw (inline helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (shared helpers)[0m
  [32m  ✓[0m[90m ignore-unchanged-tag (inline helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (shared helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (shared helpers)[0m
  [32m  ✓[0m[90m imported-renamed-components (inline helpers)[0m
  [32m  ✓[0m[90m inline-expressions (shared helpers)[0m
  [32m  ✓[0m[90m inline-expressions (shared helpers)[0m
  [32m  ✓[0m[90m inline-expressions (inline helpers)[0m
  [32m  ✓[0m[90m input-list (shared helpers)[0m
  [32m  ✓[0m[90m input-list (shared helpers)[0m
  [32m  ✓[0m[90m input-list (inline helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (shared helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (shared helpers)[0m
  [32m  ✓[0m[90m lifecycle-events (inline helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (shared helpers)[0m
  [32m  ✓[0m[90m names-deconflicted-nested (inline helpers)[0m
  [32m  ✓[0m[90m nbsp (shared helpers)[0m
  [32m  ✓[0m[90m nbsp (shared helpers)[0m
  [32m  ✓[0m[90m nbsp (inline helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (shared helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (shared helpers)[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged (inline helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (shared helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (shared helpers)[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes (inline helpers)[0m
  [32m  ✓[0m[90m observe-deferred (shared helpers)[0m
  [32m  ✓[0m[90m observe-deferred (shared helpers)[0m
  [32m  ✓[0m[90m observe-deferred (inline helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m observe-prevents-loop (inline helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (shared helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (shared helpers)[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup (inline helpers)[0m
  [32m  ✓[0m[90m onrender-chain (shared helpers)[0m
  [32m  ✓[0m[90m onrender-chain (shared helpers)[0m
  [32m  ✓[0m[90m onrender-chain (inline helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready (inline helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (shared helpers)[0m
  [32m  ✓[0m[90m onrender-fires-when-ready-nested (inline helpers)[0m
  [32m  ✓[0m[90m options (shared helpers)[0m
  [32m  ✓[0m[90m options (shared helpers)[0m
  [32m  ✓[0m[90m options (inline helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (shared helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (shared helpers)[0m
  [32m  ✓[0m[90m paren-wrapped-expressions (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-last-child (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (shared helpers)[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling (inline helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches (inline helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (shared helpers)[0m
  [32m  ✓[0m[90m raw-mustaches-preserved (inline helpers)[0m
  [32m  ✓[0m[90m refs (shared helpers)[0m
  [32m  ✓[0m[90m refs (shared helpers)[0m
  [32m  ✓[0m[90m refs (inline helpers)[0m
  [32m  ✓[0m[90m refs-unset (shared helpers)[0m
  [32m  ✓[0m[90m refs-unset (shared helpers)[0m
  [32m  ✓[0m[90m refs-unset (inline helpers)[0m
  [32m  ✓[0m[90m select (shared helpers)[0m
  [32m  ✓[0m[90m select (shared helpers)[0m
  [32m  ✓[0m[90m select (inline helpers)[0m
  [32m  ✓[0m[90m select-bind-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-array (inline helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (shared helpers)[0m
  [32m  ✓[0m[90m select-bind-in-array (inline helpers)[0m
  [32m  ✓[0m[90m select-change-handler (shared helpers)[0m
  [32m  ✓[0m[90m select-change-handler (shared helpers)[0m
  [32m  ✓[0m[90m select-change-handler (inline helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m select-no-whitespace (inline helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind (inline helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (shared helpers)[0m
  [32m  ✓[0m[90m select-one-way-bind-object (inline helpers)[0m
  [32m  ✓[0m[90m select-props (shared helpers)[0m
  [32m  ✓[0m[90m select-props (shared helpers)[0m
  [32m  ✓[0m[90m select-props (inline helpers)[0m
  [32m  ✓[0m[90m self-reference (shared helpers)[0m
  [32m  ✓[0m[90m self-reference (shared helpers)[0m
  [32m  ✓[0m[90m self-reference (inline helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (shared helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (shared helpers)[0m
  [32m  ✓[0m[90m self-reference-tree (inline helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (shared helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (shared helpers)[0m
  [32m  ✓[0m[90m set-after-destroy (inline helpers)[0m
  [32m  ✓[0m[90m set-clones-input (shared helpers)[0m
  [32m  ✓[0m[90m set-clones-input (shared helpers)[0m
  [32m  ✓[0m[90m set-clones-input (inline helpers)[0m
  [32m  ✓[0m[90m set-in-observe (shared helpers)[0m
  [32m  ✓[0m[90m set-in-observe (shared helpers)[0m
  [32m  ✓[0m[90m set-in-observe (inline helpers)[0m
  [36m  - set-in-observe-dedupes-renders (shared helpers)[0m
  [36m  - set-in-observe-dedupes-renders (shared helpers)[0m
  [36m  - set-in-observe-dedupes-renders (inline helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (shared helpers)[0m
  [32m  ✓[0m[90m set-in-oncreate (inline helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (shared helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (shared helpers)[0m
  [32m  ✓[0m[90m set-in-ondestroy (inline helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (shared helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (shared helpers)[0m
  [32m  ✓[0m[90m set-mutated-data (inline helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (shared helpers)[0m
  [32m  ✓[0m[90m set-prevents-loop (inline helpers)[0m
  [32m  ✓[0m[90m setup (shared helpers)[0m
  [32m  ✓[0m[90m setup (shared helpers)[0m
  [32m  ✓[0m[90m setup (inline helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-# (inline helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (shared helpers)[0m
  [32m  ✓[0m[90m sigil-static-@ (inline helpers)[0m
  [32m  ✓[0m[90m single-static-element (shared helpers)[0m
  [32m  ✓[0m[90m single-static-element (shared helpers)[0m
  [32m  ✓[0m[90m single-static-element (inline helpers)[0m
  [32m  ✓[0m[90m single-text-node (shared helpers)[0m
  [32m  ✓[0m[90m single-text-node (shared helpers)[0m
  [32m  ✓[0m[90m single-text-node (inline helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (shared helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (shared helpers)[0m
  [32m  ✓[0m[90m slot-in-custom-element (inline helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (shared helpers)[0m
  [32m  ✓[0m[90m state-deconflicted (inline helpers)[0m
  [32m  ✓[0m[90m svg (shared helpers)[0m
  [32m  ✓[0m[90m svg (shared helpers)[0m
  [32m  ✓[0m[90m svg (inline helpers)[0m
  [32m  ✓[0m[90m svg-attributes (shared helpers)[0m
  [32m  ✓[0m[90m svg-attributes (shared helpers)[0m
  [32m  ✓[0m[90m svg-attributes (inline helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (shared helpers)[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand (inline helpers)[0m
  [32m  ✓[0m[90m svg-class (shared helpers)[0m
  [32m  ✓[0m[90m svg-class (shared helpers)[0m
  [32m  ✓[0m[90m svg-class (inline helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-anchor (inline helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-each-block-namespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-multiple (shared helpers)[0m
  [32m  ✓[0m[90m svg-multiple (shared helpers)[0m
  [32m  ✓[0m[90m svg-multiple (inline helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (shared helpers)[0m
  [32m  ✓[0m[90m svg-no-whitespace (inline helpers)[0m
  [32m  ✓[0m[90m svg-xlink (shared helpers)[0m
  [32m  ✓[0m[90m svg-xlink (shared helpers)[0m
  [32m  ✓[0m[90m svg-xlink (inline helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (shared helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (shared helpers)[0m
  [32m  ✓[0m[90m svg-xmlns (inline helpers)[0m
  [32m  ✓[0m[90m textarea-children (shared helpers)[0m
  [32m  ✓[0m[90m textarea-children (shared helpers)[0m
  [32m  ✓[0m[90m textarea-children (inline helpers)[0m
  [32m  ✓[0m[90m textarea-value (shared helpers)[0m
  [32m  ✓[0m[90m textarea-value (shared helpers)[0m
  [32m  ✓[0m[90m textarea-value (inline helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-css-delay (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-delay-in-out (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-each-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-events (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-events (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-events (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2 (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3 (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro (inline helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (shared helpers)[0m
  [32m  ✓[0m[90m transition-js-initial (inline helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-each-block (inline helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (shared helpers)[0m
  [32m  ✓[0m[90m whitespace-normal (inline helpers)[0m
  [36m  - window-bind-scroll-update (shared helpers)[0m
  [36m  - window-bind-scroll-update (shared helpers)[0m
  [36m  - window-bind-scroll-update (inline helpers)[0m
  [36m  - window-binding-resize (shared helpers)[0m
  [36m  - window-binding-resize (shared helpers)[0m
  [36m  - window-binding-resize (inline helpers)[0m
  [36m  - window-event (shared helpers)[0m
  [36m  - window-event (shared helpers)[0m
  [36m  - window-event (inline helpers)[0m
  [32m  ✓[0m[90m window-event-context (shared helpers)[0m
  [32m  ✓[0m[90m window-event-context (shared helpers)[0m
  [32m  ✓[0m[90m window-event-context (inline helpers)[0m
  [32m  ✓[0m[90m fails if options.target is missing in dev mode[0m
  [32m  ✓[0m[90m fails if options.hydrate is true but the component is non-hydratable[0m

[0m  ssr[0m
  [32m  ✓[0m[90m attribute-boolean[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m comment[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-binding[0m
  [32m  ✓[0m[90m component-binding-renamed[0m
  [32m  ✓[0m[90m component-data-dynamic[0m
  [32m  ✓[0m[90m component-data-empty[0m
  [32m  ✓[0m[90m component-data-static[0m
  [32m  ✓[0m[90m component-refs[0m
  [32m  ✓[0m[90m component-refs-and-attributes[0m
  [32m  ✓[0m[90m component-yield[0m
  [32m  ✓[0m[90m computed[0m
  [32m  ✓[0m[90m default-data[0m
  [32m  ✓[0m[90m default-data-override[0m
  [32m  ✓[0m[90m directives[0m
  [32m  ✓[0m[90m dynamic-text[0m
  [32m  ✓[0m[90m dynamic-text-escaped[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m empty-elements-closed[0m
  [32m  ✓[0m[90m entities[0m
  [32m  ✓[0m[90m helpers[0m
  [32m  ✓[0m[90m if-block-false[0m
  [32m  ✓[0m[90m if-block-true[0m
  [32m  ✓[0m[90m import-non-component[0m
  [32m  ✓[0m[90m raw-mustaches[0m
  [32m  ✓[0m[90m static-div[0m
  [32m  ✓[0m[90m static-text[0m
  [32m  ✓[0m[90m styles[0m
  [32m  ✓[0m[90m styles-nested[0m
  [32m  ✓[0m[90m textarea-children[0m
  [32m  ✓[0m[90m textarea-value[0m
  [32m  ✓[0m[90m triple[0m
  [32m  ✓[0m[90m attribute-dynamic[0m
  [32m  ✓[0m[90m attribute-dynamic-multiple[0m
  [32m  ✓[0m[90m attribute-dynamic-reserved[0m
  [32m  ✓[0m[90m attribute-dynamic-shorthand[0m
  [32m  ✓[0m[90m attribute-empty[0m
  [32m  ✓[0m[90m attribute-empty-svg[0m
  [32m  ✓[0m[90m attribute-namespaced[0m
  [32m  ✓[0m[90m attribute-partial-number[0m
  [32m  ✓[0m[90m attribute-static[0m
  [32m  ✓[0m[90m attribute-static-at-symbol[0m
  [32m  ✓[0m[90m attribute-static-boolean[0m
  [32m  ✓[0m[90m attribute-static-quotemarks[0m
  [32m  ✓[0m[90m autofocus[0m
  [36m  - binding-audio-currenttime-duration[0m
  [32m  ✓[0m[90m binding-input-checkbox[0m
  [32m  ✓[0m[90m binding-input-checkbox-deep-contextual[0m
  [32m  ✓[0m[90m binding-input-number[0m
  [32m  ✓[0m[90m binding-input-range[0m
  [32m  ✓[0m[90m binding-input-range-change[0m
  [32m  ✓[0m[90m binding-input-text[0m
  [32m  ✓[0m[90m binding-input-text-contextual[0m
  [32m  ✓[0m[90m binding-input-text-deconflicted[0m
  [32m  ✓[0m[90m binding-input-text-deep[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed[0m
  [32m  ✓[0m[90m binding-input-text-deep-computed-dynamic[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual[0m
  [32m  ✓[0m[90m binding-input-text-deep-contextual-computed-dynamic[0m
  [32m  ✓[0m[90m binding-input-with-event[0m
  [32m  ✓[0m[90m binding-select[0m
  [36m  - binding-select-in-each-block[0m
  [32m  ✓[0m[90m binding-select-in-yield[0m
  [32m  ✓[0m[90m binding-select-initial-value[0m
  [32m  ✓[0m[90m binding-select-late[0m
  [36m  - binding-select-multiple[0m
  [32m  ✓[0m[90m binding-textarea[0m
  [32m  ✓[0m[90m bindings-before-oncreate[0m
  [32m  ✓[0m[90m bindings-coalesced[0m
  [32m  ✓[0m[90m component[0m
  [32m  ✓[0m[90m component-binding-blowback[0m
  [32m  ✓[0m[90m component-binding-computed[0m
  [32m  ✓[0m[90m component-binding-deep[0m
  [36m  - component-binding-deep-b[0m
  [32m  ✓[0m[90m component-binding-each[0m
  [32m  ✓[0m[90m component-binding-each-nested[0m
  [32m  ✓[0m[90m component-binding-each-object[0m
  [32m  ✓[0m[90m component-binding-infinite-loop[0m
  [32m  ✓[0m[90m component-binding-parent-supercedes-child[0m
  [32m  ✓[0m[90m component-data-dynamic[0m
  [32m  ✓[0m[90m component-data-dynamic-late[0m
  [32m  ✓[0m[90m component-data-dynamic-shorthand[0m
  [32m  ✓[0m[90m component-data-empty[0m
  [32m  ✓[0m[90m component-data-static[0m
  [32m  ✓[0m[90m component-data-static-boolean[0m
  [32m  ✓[0m[90m component-events[0m
  [32m  ✓[0m[90m component-events-data[0m
  [32m  ✓[0m[90m component-events-each[0m
  [32m  ✓[0m[90m component-if-placement[0m
  [32m  ✓[0m[90m component-nested-deep[0m
  [32m  ✓[0m[90m component-nested-deeper[0m
  [32m  ✓[0m[90m component-not-void[0m
  [32m  ✓[0m[90m component-ref[0m
  [32m  ✓[0m[90m component-slot-default[0m
  [32m  ✓[0m[90m component-slot-fallback[0m
  [32m  ✓[0m[90m component-slot-if-block[0m
  [32m  ✓[0m[90m component-slot-if-block-before-node[0m
  [32m  ✓[0m[90m component-slot-if-else-block-before-node[0m
  [32m  ✓[0m[90m component-slot-named[0m
  [32m  ✓[0m[90m component-slot-nested[0m
  [32m  ✓[0m[90m component-slot-nested-component[0m
  [32m  ✓[0m[90m component-static-at-symbol[0m
  [32m  ✓[0m[90m component-yield[0m
  [32m  ✓[0m[90m component-yield-follows-element[0m
  [32m  ✓[0m[90m component-yield-if[0m
  [32m  ✓[0m[90m component-yield-multiple-in-each[0m
  [32m  ✓[0m[90m component-yield-multiple-in-if[0m
  [32m  ✓[0m[90m component-yield-nested-if[0m
  [32m  ✓[0m[90m component-yield-parent[0m
  [32m  ✓[0m[90m component-yield-placement[0m
  [32m  ✓[0m[90m component-yield-static[0m
  [32m  ✓[0m[90m computed-empty[0m
  [32m  ✓[0m[90m computed-function[0m
  [32m  ✓[0m[90m computed-values[0m
  [32m  ✓[0m[90m computed-values-default[0m
  [32m  ✓[0m[90m computed-values-function-dependency[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-comments[0m
  [32m  ✓[0m[90m css-false[0m
  [32m  ✓[0m[90m css-space-in-attribute[0m
  [32m  ✓[0m[90m custom-method[0m
  [32m  ✓[0m[90m deconflict-builtins[0m
  [32m  ✓[0m[90m deconflict-contexts[0m
  [32m  ✓[0m[90m deconflict-non-helpers[0m
  [32m  ✓[0m[90m deconflict-self[0m
  [32m  ✓[0m[90m deconflict-template-1[0m
  [32m  ✓[0m[90m deconflict-template-2[0m
  [32m  ✓[0m[90m deconflict-vars[0m
  [32m  ✓[0m[90m default-data[0m
  [32m  ✓[0m[90m default-data-function[0m
  [32m  ✓[0m[90m default-data-override[0m
  [32m  ✓[0m[90m destroy-twice[0m
  [32m  ✓[0m[90m destructuring[0m
  [32m  ✓[0m[90m dev-warning-bad-observe-arguments[0m
  [32m  ✓[0m[90m dev-warning-destroy-not-teardown[0m
  [32m  ✓[0m[90m dev-warning-destroy-twice[0m
  [32m  ✓[0m[90m dev-warning-helper[0m
  [32m  ✓[0m[90m dev-warning-missing-data[0m
  [32m  ✓[0m[90m dev-warning-missing-data-binding[0m
  [32m  ✓[0m[90m dev-warning-readonly-computed[0m
  [32m  ✓[0m[90m dev-warning-readonly-window-binding[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m each-block-containing-component-in-if[0m
  [32m  ✓[0m[90m each-block-containing-if[0m
  [32m  ✓[0m[90m each-block-destructured-array[0m
  [32m  ✓[0m[90m each-block-dynamic-else-static[0m
  [32m  ✓[0m[90m each-block-else[0m
  [32m  ✓[0m[90m each-block-else-starts-empty[0m
  [32m  ✓[0m[90m each-block-indexed[0m
  [32m  ✓[0m[90m each-block-keyed[0m
  [32m  ✓[0m[90m each-block-keyed-dynamic[0m
  [32m  ✓[0m[90m each-block-keyed-random-permute[0m
  [32m  ✓[0m[90m each-block-keyed-unshift[0m
  [32m  ✓[0m[90m each-block-random-permute[0m
  [32m  ✓[0m[90m each-block-static[0m
  [32m  ✓[0m[90m each-block-text-node[0m
  [32m  ✓[0m[90m each-blocks-expression[0m
  [32m  ✓[0m[90m each-blocks-nested[0m
  [32m  ✓[0m[90m each-blocks-nested-b[0m
  [32m  ✓[0m[90m element-invalid-name[0m
  [32m  ✓[0m[90m empty-style-block[0m
  [32m  ✓[0m[90m escape-template-literals[0m
  [32m  ✓[0m[90m escaped-text[0m
  [32m  ✓[0m[90m event-handler[0m
  [32m  ✓[0m[90m event-handler-console-log[0m
  [32m  ✓[0m[90m event-handler-custom[0m
  [32m  ✓[0m[90m event-handler-custom-context[0m
  [32m  ✓[0m[90m event-handler-custom-each[0m
  [32m  ✓[0m[90m event-handler-destroy[0m
  [32m  ✓[0m[90m event-handler-each[0m
  [32m  ✓[0m[90m event-handler-each-deconflicted[0m
  [32m  ✓[0m[90m event-handler-event-methods[0m
  [32m  ✓[0m[90m event-handler-hoisted[0m
  [32m  ✓[0m[90m event-handler-removal[0m
  [32m  ✓[0m[90m event-handler-sanitize[0m
  [32m  ✓[0m[90m event-handler-shorthand[0m
  [32m  ✓[0m[90m event-handler-shorthand-component[0m
  [32m  ✓[0m[90m event-handler-this-methods[0m
  [32m  ✓[0m[90m events-custom[0m
  [32m  ✓[0m[90m events-lifecycle[0m
  [32m  ✓[0m[90m function-in-expression[0m
  [32m  ✓[0m[90m get-state[0m
  [32m  ✓[0m[90m globals-accessible-directly[0m
  [32m  ✓[0m[90m globals-not-dereferenced[0m
  [32m  ✓[0m[90m globals-shadowed-by-data[0m
  [32m  ✓[0m[90m globals-shadowed-by-helpers[0m
  [32m  ✓[0m[90m hello-world[0m
  [32m  ✓[0m[90m helpers[0m
  [32m  ✓[0m[90m helpers-not-call-expression[0m
  [32m  ✓[0m[90m html-entities[0m
  [32m  ✓[0m[90m if-block[0m
  [32m  ✓[0m[90m if-block-else[0m
  [32m  ✓[0m[90m if-block-elseif[0m
  [32m  ✓[0m[90m if-block-elseif-text[0m
  [32m  ✓[0m[90m if-block-expression[0m
  [32m  ✓[0m[90m if-block-or[0m
  [32m  ✓[0m[90m if-block-widget[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute[0m
  [32m  ✓[0m[90m ignore-unchanged-attribute-compound[0m
  [32m  ✓[0m[90m ignore-unchanged-raw[0m
  [32m  ✓[0m[90m ignore-unchanged-tag[0m
  [32m  ✓[0m[90m imported-renamed-components[0m
  [32m  ✓[0m[90m inline-expressions[0m
  [32m  ✓[0m[90m input-list[0m
  [32m  ✓[0m[90m lifecycle-events[0m
  [32m  ✓[0m[90m names-deconflicted[0m
  [32m  ✓[0m[90m names-deconflicted-nested[0m
  [32m  ✓[0m[90m nbsp[0m
  [32m  ✓[0m[90m observe-binding-ignores-unchanged[0m
  [32m  ✓[0m[90m observe-component-ignores-irrelevant-changes[0m
  [32m  ✓[0m[90m observe-prevents-loop[0m
  [32m  ✓[0m[90m ondestroy-before-cleanup[0m
  [32m  ✓[0m[90m paren-wrapped-expressions[0m
  [32m  ✓[0m[90m raw-anchor-first-child[0m
  [32m  ✓[0m[90m raw-anchor-first-last-child[0m
  [32m  ✓[0m[90m raw-anchor-last-child[0m
  [32m  ✓[0m[90m raw-anchor-next-previous-sibling[0m
  [32m  ✓[0m[90m raw-anchor-next-sibling[0m
  [32m  ✓[0m[90m raw-anchor-previous-sibling[0m
  [32m  ✓[0m[90m refs[0m
  [32m  ✓[0m[90m refs-unset[0m
  [32m  ✓[0m[90m select[0m
  [32m  ✓[0m[90m select-change-handler[0m
  [32m  ✓[0m[90m select-no-whitespace[0m
  [32m  ✓[0m[90m select-props[0m
  [32m  ✓[0m[90m self-reference[0m
  [32m  ✓[0m[90m self-reference-tree[0m
  [32m  ✓[0m[90m set-after-destroy[0m
  [32m  ✓[0m[90m set-clones-input[0m
  [36m  - set-in-observe-dedupes-renders[0m
  [32m  ✓[0m[90m set-mutated-data[0m
  [32m  ✓[0m[90m set-prevents-loop[0m
  [32m  ✓[0m[90m setup[0m
  [32m  ✓[0m[90m sigil-static-#[0m
  [32m  ✓[0m[90m sigil-static-@[0m
  [32m  ✓[0m[90m single-static-element[0m
  [32m  ✓[0m[90m single-text-node[0m
  [32m  ✓[0m[90m slot-in-custom-element[0m
  [32m  ✓[0m[90m state-deconflicted[0m
  [32m  ✓[0m[90m svg[0m
  [32m  ✓[0m[90m svg-attributes[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace-shorthand[0m
  [32m  ✓[0m[90m svg-class[0m
  [32m  ✓[0m[90m svg-each-block-anchor[0m
  [32m  ✓[0m[90m svg-each-block-namespace[0m
  [32m  ✓[0m[90m svg-multiple[0m
  [32m  ✓[0m[90m svg-no-whitespace[0m
  [32m  ✓[0m[90m svg-xlink[0m
  [32m  ✓[0m[90m transition-css-delay[0m
  [32m  ✓[0m[90m transition-js-delay[0m
  [32m  ✓[0m[90m transition-js-delay-in-out[0m
  [32m  ✓[0m[90m transition-js-dynamic-if-block-bidi[0m
  [32m  ✓[0m[90m transition-js-each-block-intro[0m
  [32m  ✓[0m[90m transition-js-each-block-intro-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-intro-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-keyed-outro[0m
  [32m  ✓[0m[90m transition-js-each-block-outro[0m
  [32m  ✓[0m[90m transition-js-events[0m
  [32m  ✓[0m[90m transition-js-if-block-bidi[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-2[0m
  [32m  ✓[0m[90m transition-js-if-block-in-each-block-bidi-3[0m
  [32m  ✓[0m[90m transition-js-if-block-intro[0m
  [32m  ✓[0m[90m transition-js-if-block-intro-outro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-dynamic-outro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-intro[0m
  [32m  ✓[0m[90m transition-js-if-else-block-outro[0m
  [32m  ✓[0m[90m transition-js-if-elseif-block-outro[0m
  [32m  ✓[0m[90m transition-js-initial[0m
  [32m  ✓[0m[90m whitespace-each-block[0m
  [32m  ✓[0m[90m whitespace-normal[0m
  [36m  - window-bind-scroll-update[0m

[0m  sourcemaps[0m
  [32m  ✓[0m[90m basic[0m
  [32m  ✓[0m[90m binding[0m
  [32m  ✓[0m[90m binding-shorthand[0m
  [32m  ✓[0m[90m css[0m
  [32m  ✓[0m[90m css-cascade-false[0m
  [32m  ✓[0m[90m each-block[0m
  [32m  ✓[0m[90m script[0m
  [32m  ✓[0m[90m static-no-script[0m

[0m  validate[0m
  [32m  ✓[0m[90m a11y-alt-text[0m
  [32m  ✓[0m[90m a11y-anchor-has-content[0m
  [32m  ✓[0m[90m a11y-anchor-is-valid[0m
  [32m  ✓[0m[90m a11y-aria-props[0m
  [32m  ✓[0m[90m a11y-aria-role[0m
  [32m  ✓[0m[90m a11y-aria-unsupported-element[0m
  [32m  ✓[0m[90m a11y-figcaption-wrong-place[0m
  [32m  ✓[0m[90m a11y-heading-has-content[0m
  [32m  ✓[0m[90m a11y-html-has-lang[0m
  [32m  ✓[0m[90m a11y-iframe-has-title[0m
  [32m  ✓[0m[90m a11y-no-access-key[0m
  [32m  ✓[0m[90m a11y-no-autofocus[0m
  [32m  ✓[0m[90m a11y-no-distracting-elements[0m
  [32m  ✓[0m[90m a11y-scope[0m
  [32m  ✓[0m[90m a11y-tabindex-no-positive[0m
  [32m  ✓[0m[90m binding-input-checked[0m
  [32m  ✓[0m[90m binding-input-static-type[0m
  [32m  ✓[0m[90m binding-invalid[0m
  [32m  ✓[0m[90m binding-invalid-on-element[0m
  [32m  ✓[0m[90m component-cannot-be-called-state[0m
  [36m  - component-slot-default-duplicate.skip[0m
  [32m  ✓[0m[90m component-slot-default-reserved[0m
  [32m  ✓[0m[90m component-slot-dynamic[0m
  [32m  ✓[0m[90m component-slot-dynamic-attribute[0m
  [32m  ✓[0m[90m component-slot-each-block[0m
  [36m  - component-slot-named-duplicate.skip[0m
  [32m  ✓[0m[90m component-slotted-each-block[0m
  [32m  ✓[0m[90m component-slotted-if-block[0m
  [32m  ✓[0m[90m css-invalid-global[0m
  [32m  ✓[0m[90m css-invalid-global-placement[0m
  [32m  ✓[0m[90m event-handler-ref[0m
  [32m  ✓[0m[90m event-handler-ref-invalid[0m
  [32m  ✓[0m[90m export-default-duplicated[0m
  [32m  ✓[0m[90m export-default-must-be-object[0m
  [32m  ✓[0m[90m helper-clash-context[0m
  [32m  ✓[0m[90m helper-purity-check-needs-arguments[0m
  [32m  ✓[0m[90m helper-purity-check-no-this[0m
  [32m  ✓[0m[90m helper-purity-check-this-get[0m
  [32m  ✓[0m[90m helper-purity-check-uses-arguments[0m
  [32m  ✓[0m[90m method-arrow-no-this[0m
  [32m  ✓[0m[90m method-arrow-this[0m
  [32m  ✓[0m[90m method-nonexistent[0m
  [32m  ✓[0m[90m method-nonexistent-helper[0m
  [32m  ✓[0m[90m missing-component[0m
  [32m  ✓[0m[90m named-export[0m
  [32m  ✓[0m[90m namespace-invalid[0m
  [32m  ✓[0m[90m oncreate-arrow-no-this[0m
  [32m  ✓[0m[90m oncreate-arrow-this[0m
  [32m  ✓[0m[90m ondestroy-arrow-no-this[0m
  [32m  ✓[0m[90m ondestroy-arrow-this[0m
  [32m  ✓[0m[90m properties-components-should-be-capitalised[0m
  [32m  ✓[0m[90m properties-computed-must-be-an-object[0m
  [32m  ✓[0m[90m properties-computed-must-be-functions[0m
  [32m  ✓[0m[90m properties-computed-no-destructuring[0m
  [32m  ✓[0m[90m properties-computed-values-needs-arguments[0m
  [32m  ✓[0m[90m properties-data-must-be-function[0m
  [32m  ✓[0m[90m properties-duplicated[0m
  [32m  ✓[0m[90m properties-methods-getters-setters[0m
  [32m  ✓[0m[90m properties-unexpected[0m
  [32m  ✓[0m[90m properties-unexpected-b[0m
  [32m  ✓[0m[90m svg-child-component-declared-namespace[0m
  [32m  ✓[0m[90m svg-child-component-undeclared-namespace[0m
  [32m  ✓[0m[90m textarea-value-children[0m
  [32m  ✓[0m[90m transition-duplicate-in[0m
  [32m  ✓[0m[90m transition-duplicate-in-transition[0m
  [32m  ✓[0m[90m transition-duplicate-out[0m
  [32m  ✓[0m[90m transition-duplicate-out-transition[0m
  [32m  ✓[0m[90m transition-duplicate-transition[0m
  [32m  ✓[0m[90m transition-duplicate-transition-in[0m
  [32m  ✓[0m[90m transition-duplicate-transition-out[0m
  [32m  ✓[0m[90m transition-missing[0m
  [32m  ✓[0m[90m transition-on-component[0m
  [32m  ✓[0m[90m window-binding-invalid[0m
  [32m  ✓[0m[90m window-binding-invalid-innerwidth[0m
  [32m  ✓[0m[90m window-binding-invalid-value[0m
  [32m  ✓[0m[90m window-binding-invalid-width[0m
  [32m  ✓[0m[90m window-event-invalid[0m
  [32m  ✓[0m[90m errors if options.name is illegal[0m
  [32m  ✓[0m[90m warns if options.name is not capitalised[0m


[92m [0m[32m 1318 passing[0m[90m (1m)[0m
[36m [0m[36m 36 pending[0m
[31m  8 failing[0m

[0m  1) custom-elements escaped-css:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  2) custom-elements html:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  3) custom-elements html-slots:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  4) custom-elements new:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  5) custom-elements new-styled:
[0m[31m     Error: Timeout of 10000ms exceeded. For async tests and hooks, ensure "done()" is called; if returning a Promise, ensure it resolves.[0m[90m
      at listOnTimeout (node:internal/timers:559:17)
      at processTimers (node:internal/timers:502:7)
[0m
[0m  6) runtime binding-select (shared helpers):
[0m[31m     AssertionError [ERR_ASSERTION] [ERR_ASSERTION]: Expected values to be loosely deep-equal:

[
  <ref *8> HTMLOptionElement {
    [Symbol(SameObject caches)]: [Object: null prototype] {
      attributes: <ref *33> NamedNodeMap {
        [Symbol(NamedNodeMap internal)]: {
          attributeList: [],
          attributesByNameMap: Map(0) {},
          element: <ref *12> HTMLOptionElementImpl {
            [Symbol(DOM SymbolTree)]: [SymbolTreeNode],
            [Symbol(wrapper)]: [Circular *8],
            _attached: true,
            _attributes: [Circular *33],
            _childNodesList: [Node...

should loosely deep-equal

<ref *30> HTMLCollection {
  '0': <ref *8> HTMLOptionElement {
    [Symbol(SameObject caches)]: [Object: null prototype] {
      attributes: <ref *34> NamedNodeMap {
        [Symbol(NamedNodeMap internal)]: {
          attributeList: [],
          attributesByNameMap: Map(0) {},
          element: <ref *12> HTMLOptionElementImpl {
            [Symbol(DOM SymbolTree)]: [SymbolTreeNode],
            [Symbol(wrapper)]: [Circular *8],
            _attached: true,
            _attributes: [Circular *34],
    ...[0m[90m
      at Object.test (test/runtime/samples/binding-select/_config.js:22:10)
      at Context.<anonymous> (test/runtime/index.js:181:13)
      at processImmediate (node:internal/timers:466:21)
[0m
[0m  7) runtime binding-select (shared helpers):
[0m[31m     Error: skipping test, already failed[0m[90m
      at Context.<anonymous> (test/runtime/index.js:57:11)
      at processImmediate (node:internal/timers:466:21)
[0m
[0m  8) runtime binding-select (inline helpers):
[0m[31m     Error: skipping test, already failed[0m[90m
      at Context.<anonymous> (test/runtime/index.js:57:11)
      at processImmediate (node:internal/timers:466:21)
[0m


[?2004l
2025-11-11 00:42:24,680 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_snIk8ikS7j6dTYIG1phe3SNc', 'function': {'arguments': '{"command":"npm test --silent -- -g \'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1231, 'prompt_tokens': 53945, 'total_tokens': 55176, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a922edb8-a8bf-408c-8507-602998ce4894-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- -g 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix'"}, 'id': 'call_snIk8ikS7j6dTYIG1phe3SNc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 53945, 'output_tokens': 1231, 'total_tokens': 55176, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-11 00:42:24,683 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- -g 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix'
2025-11-11 00:42:31,196 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:42:31,196 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- -g 'attribute-selector-unquoted|
|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attrib
bute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scopin
ng-attribute-attribute-selector-suffix'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m24ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m39ms[22m[39m

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (47ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (181ms)[0m

[?2004l
2025-11-11 00:42:43,840 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_aF7KA2tj3Qzox5eRuWa2kkP2', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --require test/setup.js test/test.js --grep \\"^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1051, 'prompt_tokens': 54623, 'total_tokens': 55674, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 960, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--172e13be-b056-43d5-983f-bc431caa7e73-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha --require test/setup.js test/test.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_aF7KA2tj3Qzox5eRuWa2kkP2', 'type': 'tool_call'}] usage_metadata={'input_tokens': 54623, 'output_tokens': 1051, 'total_tokens': 55674, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 960}}
2025-11-11 00:42:43,844 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --require test/setup.js test/test.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:42:44,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:42:44,804 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --require test/setup.js tes
st/test.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute
e-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping
g-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-s
suffix)$"
[?2004l


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-11 00:43:02,261 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_k2GoybJ334qn82qAa9KsOfDi', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha --require test/setup.js test/css/index.js --grep \\"^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1221, 'prompt_tokens': 54839, 'total_tokens': 56060, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b4b0fa6c-7e5a-4cef-9ebc-625a900d38c4-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha --require test/setup.js test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$"'}, 'id': 'call_k2GoybJ334qn82qAa9KsOfDi', 'type': 'tool_call'}] usage_metadata={'input_tokens': 54839, 'output_tokens': 1221, 'total_tokens': 56060, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-11 00:43:02,264 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha --require test/setup.js test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$"
2025-11-11 00:43:03,008 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:03,008 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha --require test/setup.js tes
st/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-
-attribute-selector-(contains|equals|prefix|suffix))$"
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (39ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (142ms)[0m

[?2004l
2025-11-11 00:43:17,846 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='Result:\n ./node_modules/.bin/mocha --require test/setup.js tes\nst/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-\n-attribute-selector-(contains|equals|prefix|suffix))$"\n\x1b[?2004l\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m attribute-selector-unquoted\x1b[0m\x1b[33m (48ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-contains\x1b[0m\x1b[33m (39ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-equals\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-prefix\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-suffix\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 5 passing\x1b[0m\x1b[90m (142ms)\x1b[0m\n\n\x1b[?2004l' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1386, 'prompt_tokens': 55198, 'total_tokens': 56584, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1088, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 53888}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--9ddac006-5d2a-485d-80a0-9fda2117fdb0-0' usage_metadata={'input_tokens': 55198, 'output_tokens': 1386, 'total_tokens': 56584, 'input_token_details': {'audio': 0, 'cache_read': 53888}, 'output_token_details': {'audio': 0, 'reasoning': 1088}}
2025-11-11 00:43:17,849 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
Result:
 ./node_modules/.bin/mocha --require test/setup.js tes
st/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-
-attribute-selector-(contains|equals|prefix|suffix))$"
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (39ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (142ms)[0m

[?2004l
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-11 00:43:30,779 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-11 00:43:30,781 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:43:30,781 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-11 00:43:30,782 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - All regression tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:43:30,782 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - Current passed tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:43:30,782 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - True
2025-11-11 00:43:30,784 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_update_node - INFO - Applying patch: diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..3c75603d1 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -222,10 +222,17 @@ const operators = {
 function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+
+	// Existence selector [attr] matches if attribute is present, regardless of value
+	if (operator == null) return true;
+
+	// Boolean attribute cannot satisfy operators like '=', '~=', etc.
+	if (attr.value === true) return false;
 	if (attr.value.length > 1) return true;
 
-	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');
+	const op = operators[operator];
+	if (!op) return false;
+	const pattern = op(expectedValue, caseInsensitive ? 'i' : '');
 	const value = attr.value[0];
 
 	if (value.type === 'Text') return pattern.test(value.data);

2025-11-11 00:43:30,820 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:43:30,851 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:43:30,851 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:43:30,952 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:30,952 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:43:30,953 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:43:31,054 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:31,054 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:43:31,055 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:43:31,055 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory src/css in the container
2025-11-11 00:43:31,055 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p src/css
2025-11-11 00:43:31,157 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:31,157 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:43:31,157 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating src/css/Selector.ts in the container
2025-11-11 00:43:31,165 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:43:31,166 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-11 00:43:31,166 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:43:34,560 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_suVDBmmuoCukFtQjgZRyUL2O', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 617, 'total_tokens': 771, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--81fa3468-dc60-4bba-9a4e-0cef615815b1-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_suVDBmmuoCukFtQjgZRyUL2O', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 154, 'total_tokens': 771, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:43:34,563 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:43:34,665 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:34,665 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:35 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:43 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:43 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:14 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 474335 Nov 11 00:14 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:35 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 11 00:42 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:35 yarn.lock
[?2004l
2025-11-11 00:43:36,483 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_v9fGlaaSgl9ujNsngz17eXvX', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 26, 'prompt_tokens': 1440, 'total_tokens': 1466, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b736b62e-4c19-4080-9c92-827493a1d3b7-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_v9fGlaaSgl9ujNsngz17eXvX', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1440, 'output_tokens': 26, 'total_tokens': 1466, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:43:36,486 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:43:36,588 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:36,588 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:43:40,263 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_gyVlQHNHTPGRutF74aKiQYC5', 'function': {'arguments': '{"command":"sed -n \'1,240p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 164, 'prompt_tokens': 2295, 'total_tokens': 2459, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c5b38459-43ba-43d5-89b4-5bc99b28673c-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,240p' test/css/index.js"}, 'id': 'call_gyVlQHNHTPGRutF74aKiQYC5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2295, 'output_tokens': 164, 'total_tokens': 2459, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:43:40,266 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,240p' test/css/index.js
2025-11-11 00:43:40,368 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:40,368 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-11 00:43:47,109 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hOHmplA2l5tJ4tgeHYTMQtD8', 'function': {'arguments': '{"command":"ls -la test/css/samples"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 478, 'prompt_tokens': 3338, 'total_tokens': 3816, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5b0198d2-ab84-475b-8faf-1d9118eb1dfe-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la test/css/samples'}, 'id': 'call_hOHmplA2l5tJ4tgeHYTMQtD8', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3338, 'output_tokens': 478, 'total_tokens': 3816, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:43:47,112 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test/css/samples
2025-11-11 00:43:47,214 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:47,214 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 192
drwxrwxr-x 1 root root 4096 Nov 11 00:01 [0m[01;34m.[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34m..[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34mattribute-selector-unquoted[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mbasic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-global-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-keyframes-from-to[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-pseudo-element[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcascade-false-universal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcombinator-child[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mcss-vars[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mdescendant-selector-non-top-level-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mkeyframes[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mmedia-query-word[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-contains[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-case-insensitive[0m[K
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-equals-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-pipe-equals[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-prefix[0m
drwxrwxr-x 1 root root 4096 Nov 10 23:59 [01;34momit-scoping-attribute-attribute-selector-suffix[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-attribute-selector-word-equals[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-dynamic[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-class-static[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-class[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-inner-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-descendant-global-outer-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-global[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-id[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34momit-scoping-attribute-whitespace-multiple[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34mrefs-qualified[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34muniversal-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munknown-at-rule[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-leading[0m
drwxrwxr-x 1 root root 4096 Nov 11 00:09 [01;34munused-selector-ternary[0m
[?2004l
2025-11-11 00:43:49,836 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ECvve9jqSewajdm3RIKxta60', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 154, 'prompt_tokens': 5154, 'total_tokens': 5308, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 128, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d693bbbf-789d-4b1c-b230-bf6f75fd960b-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_ECvve9jqSewajdm3RIKxta60', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5154, 'output_tokens': 154, 'total_tokens': 5308, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 128}}
2025-11-11 00:43:49,839 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:43:49,940 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:49,941 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:43:51,989 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_zqk4vPIhBiVRNDhhPjAo8eJq', 'function': {'arguments': '{"command":"cat test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 21, 'prompt_tokens': 5197, 'total_tokens': 5218, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--82afc23a-05a8-473b-8bd0-f7dca1148190-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat test/helpers.js'}, 'id': 'call_zqk4vPIhBiVRNDhhPjAo8eJq', 'type': 'tool_call'}] usage_metadata={'input_tokens': 5197, 'output_tokens': 21, 'total_tokens': 5218, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:43:51,992 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat test/helpers.js
2025-11-11 00:43:52,094 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:52,094 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:43:57,840 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_cIhDe1VxLXqzkJ3QCxgSOhXA', 'function': {'arguments': '{"command":"ls -la compiler"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 539, 'prompt_tokens': 6753, 'total_tokens': 7292, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 5120}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ce4319b1-f43f-43f7-bbc1-9c2dbdb1e9ff-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la compiler'}, 'id': 'call_cIhDe1VxLXqzkJ3QCxgSOhXA', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6753, 'output_tokens': 539, 'total_tokens': 7292, 'input_token_details': {'audio': 0, 'cache_read': 5120}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-11-11 00:43:57,844 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la compiler
2025-11-11 00:43:57,945 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:43:57,945 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 1956
drwxr-xr-x 2 root root    4096 Nov 10 23:54 [0m[01;34m.[0m
drwxr-xr-x 1 root root    4096 Nov 11 00:35 [01;34m..[0m
-rw-r--r-- 1 root root  687522 Nov 11 00:42 svelte.js
-rw-r--r-- 1 root root 1300971 Nov 11 00:42 svelte.js.map
[?2004l
2025-11-11 00:44:03,538 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_RXTG2a1CjtqJUEUPbWgAftOc', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha test/css/index.js --grep \\"^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 599, 'prompt_tokens': 6925, 'total_tokens': 7524, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 512, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c102be8b-e8c4-4491-b2a5-fc187969a1ec-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha test/css/index.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_RXTG2a1CjtqJUEUPbWgAftOc', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6925, 'output_tokens': 599, 'total_tokens': 7524, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 512}}
2025-11-11 00:44:03,541 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha test/css/index.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:44:03,746 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 1
2025-11-11 00:44:03,746 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha test/css/index.js --grep "^
^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|
|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribut
te-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
[?2004l
/testbed/test/css/index.js:1
import assert from 'assert';
^^^^^^

SyntaxError: Cannot use import statement outside a module
[90m    at Object.compileFunction (node:vm:360:18)[39m
[90m    at wrapSafe (node:internal/modules/cjs/loader:1126:15)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1162:27)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Module.require (node:internal/modules/cjs/loader:1100:19)[39m
[90m    at require (node:internal/modules/cjs/helpers:119:18)[39m
    at [90m/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:230:27
    at Array.forEach (<anonymous>)
    at Mocha.loadFiles [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:227:14[90m)[39m
    at Mocha.run [90m(/testbed/[39mnode_modules/[4mmocha[24m/lib/mocha.js:513:10[90m)[39m
    at Object.<anonymous> [90m(/testbed/[39mnode_modules/[4mmocha[24m/bin/_mocha:480:18[90m)[39m
[90m    at Module._compile (node:internal/modules/cjs/loader:1198:14)[39m
[90m    at Object.Module._extensions..js (node:internal/modules/cjs/loader:1252:10)[39m
[90m    at Module.load (node:internal/modules/cjs/loader:1076:32)[39m
[90m    at Function.Module._load (node:internal/modules/cjs/loader:911:12)[39m
[90m    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:81:12)[39m
[90m    at node:internal/main/run_main_module:22:47[39m
[?2004l
2025-11-11 00:44:12,426 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_DLdU721pla0zjlK2bJdfsy0Z', 'function': {'arguments': '{"command":"npm install esm@3.2.25 --no-audit --no-fund"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 808, 'prompt_tokens': 7713, 'total_tokens': 8521, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--596b68d3-1e60-4e53-b6c9-cfd9f360b1ab-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npm install esm@3.2.25 --no-audit --no-fund'}, 'id': 'call_DLdU721pla0zjlK2bJdfsy0Z', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7713, 'output_tokens': 808, 'total_tokens': 8521, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:44:12,430 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm install esm@3.2.25 --no-audit --no-fund
2025-11-11 00:44:13,910 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:44:13,910 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?25l[[100;90m..................[0m] | reify: [32;40mtiming[0m [35marborist:ctor[0m Completed in 1ms[0m[K
[[100;90m..................[0m] - idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] \ idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] \ idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[100;90m..................[0m] \ idealTree:testbed: [7msill[0m [35midealTree[0m buildDeps[0m[K
[[107;97m#########[0m[100;90m.........[0m] \ idealTree: [32;40mtiming[0m [35midealTree[0m Completed in 694ms[0m[K
[[107;97m##################[0m] \ reify:fsevents: [7msill[0m [35mreify[0m mark deleted [ '/testbed/node[0m[K

[K[?25h
up to date in 1s
[?2004l
2025-11-11 00:44:15,347 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_ZwR2hr9oaX7keJpO4AOn01Dy', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha -r esm test/css/index.js --grep \\"^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 84, 'prompt_tokens': 8174, 'total_tokens': 8258, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--bea80d96-a5cd-404f-92d9-8c2d00d42637-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha -r esm test/css/index.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_ZwR2hr9oaX7keJpO4AOn01Dy', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8174, 'output_tokens': 84, 'total_tokens': 8258, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:44:15,351 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha -r esm test/css/index.js --grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:44:16,787 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:44:16,787 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha -r esm test/css/index.js --
-grep "^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-co
ontains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-a
attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
[?2004l


[92m [0m[32m 0 passing[0m[90m (1ms)[0m

[?2004l
2025-11-11 00:44:24,038 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_kYk0dHb9awOI4TxzS6Ewseg5', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha -r esm test/css/index.js --grep \\"attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 665, 'prompt_tokens': 8385, 'total_tokens': 9050, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 576, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--40b37bb6-e5e0-4d0a-89ed-7bfcfac41fe4-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha -r esm test/css/index.js --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix"'}, 'id': 'call_kYk0dHb9awOI4TxzS6Ewseg5', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8385, 'output_tokens': 665, 'total_tokens': 9050, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 576}}
2025-11-11 00:44:24,042 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha -r esm test/css/index.js --grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix"
2025-11-11 00:44:25,346 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:44:25,346 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha -r esm test/css/index.js --
-grep "attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-cont
tains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-att
tribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix"
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (60ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (42ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (220ms)[0m

[?2004l
2025-11-11 00:44:36,720 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_hv5kRVDZEzp1p2lwj9ylVUqS', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha -r esm test/css/index.js --grep \\"^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1116, 'prompt_tokens': 8851, 'total_tokens': 9967, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1024, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8192}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--1dfa2bcd-ae7b-4469-80bf-47d4459b30ad-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha -r esm test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_hv5kRVDZEzp1p2lwj9ylVUqS', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8851, 'output_tokens': 1116, 'total_tokens': 9967, 'input_token_details': {'audio': 0, 'cache_read': 8192}, 'output_token_details': {'audio': 0, 'reasoning': 1024}}
2025-11-11 00:44:36,724 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha -r esm test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:44:37,942 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:44:37,942 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha -r esm test/css/index.js --
-grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selecto
or-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribu
ute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
"
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (55ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (47ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (174ms)[0m

[?2004l
2025-11-11 00:44:50,203 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_7nHIggreKPWG5LZ1D0VAVef0', 'function': {'arguments': '{"command":"./node_modules/.bin/mocha -r esm test/css/index.js --grep \\"^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$\\""}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1500, 'prompt_tokens': 9261, 'total_tokens': 10761, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1408, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8832}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f287c281-583b-438c-b454-cc63b331dfa8-0' tool_calls=[{'name': 'run_command', 'args': {'command': './node_modules/.bin/mocha -r esm test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"'}, 'id': 'call_7nHIggreKPWG5LZ1D0VAVef0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 9261, 'output_tokens': 1500, 'total_tokens': 10761, 'input_token_details': {'audio': 0, 'cache_read': 8832}, 'output_token_details': {'audio': 0, 'reasoning': 1408}}
2025-11-11 00:44:50,207 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ./node_modules/.bin/mocha -r esm test/css/index.js --grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
2025-11-11 00:44:51,411 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:44:51,411 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 ./node_modules/.bin/mocha -r esm test/css/index.js --
-grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selecto
or-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribu
ute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
"
[?2004l

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (38ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (165ms)[0m

[?2004l
2025-11-11 00:45:03,953 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='Result:\n ./node_modules/.bin/mocha -r esm test/css/index.js --\n-grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selecto\nor-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribu\nute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"\n"\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m attribute-selector-unquoted\x1b[0m\x1b[33m (48ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-contains\x1b[0m\x1b[33m (38ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-equals\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-prefix\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-suffix\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 5 passing\x1b[0m\x1b[90m (165ms)\x1b[0m' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1272, 'prompt_tokens': 9671, 'total_tokens': 10943, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 960, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6912}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--83499138-fbbd-4623-8b3a-1a753bbfa842-0' usage_metadata={'input_tokens': 9671, 'output_tokens': 1272, 'total_tokens': 10943, 'input_token_details': {'audio': 0, 'cache_read': 6912}, 'output_token_details': {'audio': 0, 'reasoning': 960}}
2025-11-11 00:45:03,956 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
Result:
 ./node_modules/.bin/mocha -r esm test/css/index.js --
-grep "^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selecto
or-contains|omit-scoping-attribute-attribute-selector-equals|omit-scoping-attribu
ute-attribute-selector-prefix|omit-scoping-attribute-attribute-selector-suffix)$"
"

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m[33m (38ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (165ms)[0m
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-11 00:45:11,428 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-11 00:45:11,430 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:45:11,430 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-11 00:45:11,431 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - All regression tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:45:11,431 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - Current passed tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:45:11,431 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - True
2025-11-11 00:45:11,433 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_update_node - INFO - Applying patch: diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..220c68d90 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,10 +219,12 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// Presence-only selector [attr] matches if the attribute exists, regardless of value
+	if (operator === null) return true;
+	if (attr.value === true) return false; // boolean attributes only match presence selectors
 	if (attr.value.length > 1) return true;
 
 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');

2025-11-11 00:45:11,469 - thread-133013312636608.prometheus.lang_graph.nodes.update_container_node - INFO - Copy over all updated files to the container
2025-11-11 00:45:11,500 - thread-133013312636608.prometheus.docker.base_container - INFO - Resetting git repository in the container
2025-11-11 00:45:11,500 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git reset --hard
2025-11-11 00:45:11,602 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:11,602 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
HEAD is now at 1dad8f193 add test for #891
[?2004l
2025-11-11 00:45:11,602 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: git clean -fd
2025-11-11 00:45:11,704 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:11,704 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:45:11,704 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating files in the container after edits.
2025-11-11 00:45:11,705 - thread-133013312636608.prometheus.docker.base_container - INFO - Creating directory src/css in the container
2025-11-11 00:45:11,705 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: mkdir -p src/css
2025-11-11 00:45:11,806 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:11,806 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:45:11,807 - thread-133013312636608.prometheus.docker.base_container - INFO - Updating src/css/Selector.ts in the container
2025-11-11 00:45:11,816 - thread-133013312636608.prometheus.docker.base_container - INFO - Files updated successfully
2025-11-11 00:45:11,817 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - Enter run_regression_tests_subgraph_node
2025-11-11 00:45:11,817 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - selected_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:45:14,241 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_fasTPkQZRDIzp3674uXOLmse', 'function': {'arguments': '{"command":"ls -la"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 90, 'prompt_tokens': 617, 'total_tokens': 707, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 64, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--b430913a-fb7b-4f7f-b3a7-066c3ad34053-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la'}, 'id': 'call_fasTPkQZRDIzp3674uXOLmse', 'type': 'tool_call'}] usage_metadata={'input_tokens': 617, 'output_tokens': 90, 'total_tokens': 707, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 64}}
2025-11-11 00:45:14,245 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la
2025-11-11 00:45:14,346 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:14,347 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 744
drwxr-xr-x 1 root root   4096 Nov 11 00:45 [0m[01;34m.[0m
drwxr-xr-x 1 root root   4096 Nov 11 00:45 [01;34m..[0m
-rw-r--r-- 1 root root    227 Nov 10 23:59 .editorconfig
-rw-r--r-- 1 root root     76 Nov 10 23:59 .eslintignore
-rw-r--r-- 1 root root   1239 Nov 10 23:59 .eslintrc.json
-rw-r--r-- 1 root root     78 Nov 10 23:59 .flowconfig
drwxrwxr-x 1 root root   4096 Nov 11 00:45 [01;34m.git[0m
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34m.github[0m
-rw-r--r-- 1 root root    263 Nov 10 23:59 .gitignore
-rw-r--r-- 1 root root     51 Nov 10 23:59 .prettierrc
-rw-r--r-- 1 root root    270 Nov 10 23:59 .travis.yml
-rw-r--r-- 1 root root  37604 Nov 10 23:59 CHANGELOG.md
-rw-r--r-- 1 root root   1114 Nov 10 23:59 LICENSE
-rw-r--r-- 1 root root   6462 Nov 10 23:59 README.md
-rw-r--r-- 1 root root    556 Nov 10 23:59 appveyor.yml
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mcompiler[0m
-rw-r--r-- 1 root root     70 Nov 10 23:59 mocha.coverage.opts
-rw-r--r-- 1 root root     12 Nov 10 23:59 mocha.opts
drwxr-xr-x 1 root root   4096 Nov 11 00:44 [01;34mnode_modules[0m
-rw-r--r-- 1 root root 474335 Nov 11 00:44 package-lock.json
-rw-r--r-- 1 root root   2295 Nov 11 00:45 package.json
-rw-r--r-- 1 root root   1668 Nov 10 23:59 rollup.config.js
-rw-r--r-- 1 root root  13810 Nov 11 00:42 shared.js
drwxrwxr-x 1 root root   4096 Nov 10 23:59 [01;34msrc[0m
drwxr-xr-x 2 root root   4096 Nov 10 23:54 [01;34mssr[0m
drwxrwxr-x 1 root root   4096 Nov 11 00:35 [01;34mtest[0m
-rw-r--r-- 1 root root    326 Nov 10 23:59 tsconfig.json
-rw-r--r-- 1 root root 109393 Nov 11 00:45 yarn.lock
[?2004l
2025-11-11 00:45:15,853 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_T0PUBrkezNYgedq1Yjjm2O3U', 'function': {'arguments': '{"command":"cat package.json"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 26, 'prompt_tokens': 1440, 'total_tokens': 1466, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--26cf990d-a27f-4705-a079-7a7cc9291e1d-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat package.json'}, 'id': 'call_T0PUBrkezNYgedq1Yjjm2O3U', 'type': 'tool_call'}] usage_metadata={'input_tokens': 1440, 'output_tokens': 26, 'total_tokens': 1466, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:45:15,856 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat package.json
2025-11-11 00:45:15,958 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:15,958 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
{
  "name": "svelte",
  "version": "1.41.1",
  "description": "The magical disappearing UI framework",
  "main": "compiler/svelte.js",
  "files": [
    "compiler",
    "ssr",
    "shared.js",
    "README.md"
  ],
  "scripts": {
    "test": "mocha --opts mocha.opts",
    "quicktest": "mocha --opts mocha.opts",
    "precoverage": "export COVERAGE=true && nyc mocha --opts mocha.coverage.opts",
    "coverage": "nyc report --reporter=text-lcov > coverage.lcov",
    "codecov": "codecov",
    "precodecov": "npm run coverage",
    "lint": "eslint src test/*.js",
    "build": "node src/shared/_build.js && rollup -c",
    "dev": "node src/shared/_build.js && rollup -c -w",
    "pretest": "npm run build",
    "prepublishOnly": "npm run lint && npm test",
    "prettier": "prettier --write \"src/**/*.ts\""
  },
  "repository": {
    "type": "git",
    "url": "https://github.com/sveltejs/svelte.git"
  },
  "keywords": [
    "UI",
    "framework",
    "templates",
    "templating"
  ],
  "author": "Rich Harris",
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/sveltejs/svelte/issues"
  },
  "homepage": "https://github.com/sveltejs/svelte#README",
  "devDependencies": {
    "@types/mocha": "^2.2.41",
    "@types/node": "^8.0.17",
    "acorn": "^5.1.1",
    "chalk": "^2.0.1",
    "codecov": "^2.2.0",
    "console-group": "^0.3.2",
    "css-tree": "1.0.0-alpha22",
    "eslint": "^4.3.0",
    "eslint-plugin-html": "^3.0.0",
    "eslint-plugin-import": "^2.2.0",
    "estree-walker": "^0.5.0",
    "glob": "^7.1.1",
    "jsdom": "^11.1.0",
    "locate-character": "^2.0.0",
    "magic-string": "^0.22.3",
    "mocha": "^3.2.0",
    "nightmare": "^2.10.0",
    "node-resolve": "^1.3.3",
    "nyc": "^11.1.0",
    "prettier": "^1.7.0",
    "rollup": "^0.48.2",
    "rollup-plugin-buble": "^0.15.0",
    "rollup-plugin-commonjs": "^8.0.2",
    "rollup-plugin-json": "^2.1.0",
    "rollup-plugin-node-resolve": "^3.0.0",
    "rollup-plugin-typescript": "^0.8.1",
    "rollup-plugin-virtual": "^1.0.1",
    "rollup-watch": "^4.3.1",
    "source-map": "^0.5.6",
    "source-map-support": "^0.4.8",
    "typescript": "^2.3.2"
  },
  "nyc": {
    "include": [
      "src/**/*.js",
      "shared.js"
    ],
    "exclude": [
      "src/**/__test__.js",
      "src/shared/**"
    ]
  }
}
[?2004l
2025-11-11 00:45:19,282 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_heRFKnOwHVIoVwJuO0xtDkOw', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/css/index.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 292, 'prompt_tokens': 2295, 'total_tokens': 2587, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 256, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--43274e4c-2288-4a9f-b577-e5ac7fcdeb03-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/css/index.js"}, 'id': 'call_heRFKnOwHVIoVwJuO0xtDkOw', 'type': 'tool_call'}] usage_metadata={'input_tokens': 2295, 'output_tokens': 292, 'total_tokens': 2587, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 256}}
2025-11-11 00:45:19,284 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/css/index.js
2025-11-11 00:45:19,386 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:19,386 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import assert from 'assert';
import * as fs from 'fs';
import { parse } from 'acorn';
import { addLineNumbers, env, normalizeHtml, svelte } from '../helpers.js';

function tryRequire(file) {
	try {
		const mod = require(file);
		return mod.default || mod;
	} catch (err) {
		if (err.code !== 'MODULE_NOT_FOUND') throw err;
		return null;
	}
}

function normalizeWarning(warning) {
	warning.frame = warning.frame
		.replace(/^\n/, '')
		.replace(/^\t+/gm, '')
		.replace(/\s+$/gm, '');
	delete warning.filename;
	delete warning.toString;
	return warning;
}

function checkCodeIsValid(code) {
	try {
		parse(code);
	} catch (err) {
		console.error(addLineNumbers(code));
		throw new Error(err.message);
	}
}

describe('css', () => {
	fs.readdirSync('test/css/samples').forEach(dir => {
		if (dir[0] === '.') return;

		// add .solo to a sample directory name to only run that test
		const solo = /\.solo/.test(dir);
		const skip = /\.skip/.test(dir);

		if (solo && process.env.CI) {
			throw new Error('Forgot to remove `solo: true` from test');
		}

		(solo ? it.only : skip ? it.skip : it)(dir, () => {
			const config = tryRequire(`./samples/${dir}/_config.js`) || {};
			const input = fs
				.readFileSync(`test/css/samples/${dir}/input.html`, 'utf-8')
				.replace(/\s+$/, '');

			const expectedWarnings = (config.warnings || []).map(normalizeWarning);
			const domWarnings = [];
			const ssrWarnings = [];

			const dom = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					name: 'SvelteComponent',
					onwarn: warning => {
						domWarnings.push(warning);
					}
				})
			);

			const ssr = svelte.compile(
				input,
				Object.assign(config, {
					format: 'iife',
					generate: 'ssr',
					name: 'SvelteComponent',
					onwarn: warning => {
						ssrWarnings.push(warning);
					}
				})
			);

			// check the code is valid
			checkCodeIsValid(dom.code);
			checkCodeIsValid(ssr.code);

			assert.equal(dom.css, ssr.css);

			assert.deepEqual(
				domWarnings.map(normalizeWarning),
				ssrWarnings.map(normalizeWarning)
			);
			assert.deepEqual(domWarnings.map(normalizeWarning), expectedWarnings);

			fs.writeFileSync(`test/css/samples/${dir}/_actual.css`, dom.css);
			const expected = {
				html: read(`test/css/samples/${dir}/expected.html`),
				css: read(`test/css/samples/${dir}/expected.css`)
			};

			assert.equal(dom.css.replace(/svelte-\d+/g, 'svelte-xyz'), expected.css);

			// verify that the right elements have scoping selectors
			if (expected.html !== null) {
				const window = env();

				// dom
				try {
					const Component = eval(
						`(function () { ${dom.code}; return SvelteComponent; }())`
					);
					const target = window.document.querySelector('main');

					new Component({ target, data: config.data });
					const html = target.innerHTML;

					fs.writeFileSync(`test/css/samples/${dir}/_actual.html`, html);

					assert.equal(
						normalizeHtml(window, html.replace(/svelte-\d+/g, 'svelte-xyz')),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(dom.code);
					throw err;
				}

				// ssr
				try {
					const component = eval(
						`(function () { ${ssr.code}; return SvelteComponent; }())`
					);

					assert.equal(
						normalizeHtml(
							window,
							component.render(config.data).replace(/svelte-\d+/g, 'svelte-xyz')
						),
						normalizeHtml(window, expected.html)
					);
				} catch (err) {
					console.log(ssr.code);
					throw err;
				}
			}
		});
	});
});

function read(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		return null;
	}
[?2004l
2025-11-11 00:45:23,860 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_XWRS3IYe0TRZLxTSDC0AE9wp', 'function': {'arguments': '{"command":"cat mocha.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 346, 'prompt_tokens': 3338, 'total_tokens': 3684, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 320, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 1408}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--5802cfe0-e278-44fb-a0a3-d2e1826414ff-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.opts'}, 'id': 'call_XWRS3IYe0TRZLxTSDC0AE9wp', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3338, 'output_tokens': 346, 'total_tokens': 3684, 'input_token_details': {'audio': 0, 'cache_read': 1408}, 'output_token_details': {'audio': 0, 'reasoning': 320}}
2025-11-11 00:45:23,864 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.opts
2025-11-11 00:45:23,965 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:23,965 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
[?2004l
2025-11-11 00:45:25,642 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_vL3HSgnva6wcIjHkEdEcVg09', 'function': {'arguments': '{"command":"ls -la test/css/samples | sed -n \'1,200p\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 40, 'prompt_tokens': 3381, 'total_tokens': 3421, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--330e241f-2603-40d8-b1d8-24943d2c5e7f-0' tool_calls=[{'name': 'run_command', 'args': {'command': "ls -la test/css/samples | sed -n '1,200p'"}, 'id': 'call_vL3HSgnva6wcIjHkEdEcVg09', 'type': 'tool_call'}] usage_metadata={'input_tokens': 3381, 'output_tokens': 40, 'total_tokens': 3421, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:45:25,645 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test/css/samples | sed -n '1,200p'
2025-11-11 00:45:25,747 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:25,747 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 192
drwxrwxr-x 1 root root 4096 Nov 11 00:01 .
drwxrwxr-x 1 root root 4096 Nov 10 23:59 ..
drwxrwxr-x 1 root root 4096 Nov 10 23:59 attribute-selector-unquoted
drwxrwxr-x 1 root root 4096 Nov 11 00:09 basic
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-global
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-global-keyframes
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-keyframes
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-keyframes-from-to
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-pseudo-element
drwxrwxr-x 1 root root 4096 Nov 11 00:09 cascade-false-universal-selector
drwxrwxr-x 1 root root 4096 Nov 11 00:09 combinator-child
drwxrwxr-x 1 root root 4096 Nov 11 00:09 css-vars
drwxrwxr-x 1 root root 4096 Nov 11 00:09 descendant-selector-non-top-level-outer
drwxrwxr-x 1 root root 4096 Nov 11 00:09 keyframes
drwxrwxr-x 1 root root 4096 Nov 11 00:09 media-query
drwxrwxr-x 1 root root 4096 Nov 11 00:09 media-query-word
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-attribute-selector
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-contains
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-equals
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-equals-case-insensitive
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-equals-dynamic
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-attribute-selector-pipe-equals
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-prefix
drwxrwxr-x 1 root root 4096 Nov 10 23:59 omit-scoping-attribute-attribute-selector-suffix
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-attribute-selector-word-equals
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-class-dynamic
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-class-static
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant-global-inner
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant-global-inner-class
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant-global-inner-multiple
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant-global-outer
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-descendant-global-outer-multiple
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-global
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-id
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-whitespace
drwxrwxr-x 1 root root 4096 Nov 11 00:09 omit-scoping-attribute-whitespace-multiple
drwxrwxr-x 1 root root 4096 Nov 11 00:09 refs
drwxrwxr-x 1 root root 4096 Nov 11 00:09 refs-qualified
drwxrwxr-x 1 root root 4096 Nov 11 00:09 universal-selector
drwxrwxr-x 1 root root 4096 Nov 11 00:09 unknown-at-rule
drwxrwxr-x 1 root root 4096 Nov 11 00:09 unused-selector
drwxrwxr-x 1 root root 4096 Nov 11 00:09 unused-selector-leading
drwxrwxr-x 1 root root 4096 Nov 11 00:09 unused-selector-ternary
[?2004l
2025-11-11 00:45:31,193 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_2YtrnX9nARyvPRY6Da5joR4y', 'function': {'arguments': '{"command":"ls -la compiler"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 475, 'prompt_tokens': 4690, 'total_tokens': 5165, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f397750e-0fd5-463c-bc71-6e7c425503eb-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'ls -la compiler'}, 'id': 'call_2YtrnX9nARyvPRY6Da5joR4y', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4690, 'output_tokens': 475, 'total_tokens': 5165, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:45:31,196 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la compiler
2025-11-11 00:45:31,298 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:31,298 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 1956
drwxr-xr-x 2 root root    4096 Nov 10 23:54 [0m[01;34m.[0m
drwxr-xr-x 1 root root    4096 Nov 11 00:45 [01;34m..[0m
-rw-r--r-- 1 root root  687522 Nov 11 00:42 svelte.js
-rw-r--r-- 1 root root 1300971 Nov 11 00:42 svelte.js.map
[?2004l
2025-11-11 00:45:40,676 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_CBSboZQtqLZvnSItLmcFIuVy', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 675, 'prompt_tokens': 4862, 'total_tokens': 5537, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 640, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--ddb13801-6a22-402d-bb9a-5730491088b1-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/helpers.js"}, 'id': 'call_CBSboZQtqLZvnSItLmcFIuVy', 'type': 'tool_call'}] usage_metadata={'input_tokens': 4862, 'output_tokens': 675, 'total_tokens': 5537, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 640}}
2025-11-11 00:45:40,679 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/helpers.js
2025-11-11 00:45:40,781 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:40,781 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
import { JSDOM } from 'jsdom';
import assert from 'assert';
import glob from 'glob';
import fs from 'fs';
import path from 'path';
import chalk from 'chalk';

// for coverage purposes, we need to test source files,
// but for sanity purposes, we need to test dist files
export function loadSvelte(test) {
	if (test) global.__svelte_test = true;

	const resolved = process.env.COVERAGE
		? require.resolve('../src/index.js')
		: require.resolve('../compiler/svelte.js');

	delete require.cache[resolved];
	return require(resolved);
}

export const svelte = loadSvelte();

export function exists(path) {
	try {
		fs.statSync(path);
		return true;
	} catch (err) {
		return false;
	}
}

export function tryToLoadJson(file) {
	try {
		return JSON.parse(fs.readFileSync(file));
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

export function tryToReadFile(file) {
	try {
		return fs.readFileSync(file, 'utf-8');
	} catch (err) {
		if (err.code !== 'ENOENT') throw err;
		return null;
	}
}

const { window } = new JSDOM('<main></main>');
global.document = window.document;

export function env() {
	window._svelteTransitionManager = null;
	window.document.body.innerHTML = '<main></main>';

	return window;
}

function cleanChildren(node) {
	let previous = null;

	// sort attributes
	const attributes = Array.from(node.attributes).sort((a, b) => {
		return a.name < b.name ? -1 : 1;
	});

	attributes.forEach(attr => {
		node.removeAttribute(attr.name);
	});

	attributes.forEach(attr => {
		node.setAttribute(attr.name, attr.value);
	});

	// recurse
	[...node.childNodes].forEach(child => {
		if (child.nodeType === 3) {
			// text
			if (
				node.namespaceURI === 'http://www.w3.org/2000/svg' &&
				node.tagName !== 'text' &&
				node.tagName !== 'tspan'
			) {
				node.removeChild(child);
			}

			child.data = child.data.replace(/\s{2,}/g, '\n');

			if (previous && previous.nodeType === 3) {
				previous.data += child.data;
				previous.data = previous.data.replace(/\s{2,}/g, '\n');

				node.removeChild(child);
				child = previous;
			}
		} else {
			cleanChildren(child);
		}

		previous = child;
	});

	// collapse whitespace
	if (node.firstChild && node.firstChild.nodeType === 3) {
		node.firstChild.data = node.firstChild.data.replace(/^\s+/, '');
		if (!node.firstChild.data) node.removeChild(node.firstChild);
	}

	if (node.lastChild && node.lastChild.nodeType === 3) {
		node.lastChild.data = node.lastChild.data.replace(/\s+$/, '');
		if (!node.lastChild.data) node.removeChild(node.lastChild);
	}
}

export function normalizeHtml(window, html) {
	try {
		const node = window.document.createElement('div');
		node.innerHTML = html
			.replace(/<!--.*?-->/g, '')
			.replace(/>[\s\r\n]+</g, '><')
			.trim();
		cleanChildren(node, '');
		return node.innerHTML.replace(/<\/?noscript\/?>/g, '');
	} catch (err) {
		throw new Error(`Failed to normalize HTML:\n${html}`);
	}
}

export function setupHtmlEqual() {
	const window = env();

	assert.htmlEqual = (actual, expected, message) => {
		assert.deepEqual(
			normalizeHtml(window, actual),
			normalizeHtml(window, expected),
			message
		);
	};
}

export function loadConfig(file) {
	try {
		const resolved = require.resolve(file);
		delete require.cache[resolved];

		const config = require(resolved);
		return config.default || config;
	} catch (err) {
		if (err.code === 'MODULE_NOT_FOUND') {
			return {};
		}

		throw err;
	}
}

export function addLineNumbers(code) {
	return code
		.split('\n')
		.map((line, i) => {
			i = String(i + 1);
			while (i.length < 3) i = ` ${i}`;

			return (
				chalk.grey(`  ${i}: `) +
				line.replace(/^\t+/, match => match.split('\t').join('    '))
			);
		})
		.join('\n');
}

function capitalise(str) {
	return str[0].toUpperCase() + str.slice(1);
}

export function showOutput(cwd, options = {}, s = svelte) {
	glob.sync('**/*.html', { cwd }).forEach(file => {
		if (file[0] === '_') return;
		const { code } = s.compile(
			fs.readFileSync(`${cwd}/${file}`, 'utf-8'),
			Object.assign(options, {
				filename: file,
				name: capitalise(path.basename(file).replace(/\.html$/, ''))
			})
		);

		console.log( // eslint-disable-line no-console
			`\n>> ${chalk.cyan.bold(file)}\n${addLineNumbers(code)}\n<< ${chalk.cyan.bold(file)}`
		);
	});
}

const start = /\n(\t+)/;
export function deindent(strings, ...values) {
	const indentation = start.exec(strings[0])[1];
	const pattern = new RegExp(`^${indentation}`, 'gm');

	let result = strings[0].replace(start, '').replace(pattern, '');

[?2004l
2025-11-11 00:45:41,817 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_6scdlkaz1vwnpzZj0HvH76Pk', 'function': {'arguments': '{"command":"sed -n \'200,400p\' test/helpers.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 6159, 'total_tokens': 6188, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c0a0c300-5891-4bce-89d6-b73f39086041-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '200,400p' test/helpers.js"}, 'id': 'call_6scdlkaz1vwnpzZj0HvH76Pk', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6159, 'output_tokens': 29, 'total_tokens': 6188, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:45:41,820 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '200,400p' test/helpers.js
2025-11-11 00:45:41,921 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:41,921 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l

	let trailingIndentation = getTrailingIndentation(result);

	for (let i = 1; i < strings.length; i += 1) {
		let expression = values[i - 1];
		const string = strings[i].replace(pattern, '');

		if (Array.isArray(expression)) {
			expression = expression.length ? expression.join('\n') : null;
		}

		if (expression || expression === '') {
			const value = String(expression).replace(
				/\n/g,
				`\n${trailingIndentation}`
			);
			result += value + string;
		} else {
			let c = result.length;
			while (/\s/.test(result[c - 1])) c -= 1;
			result = result.slice(0, c) + string;
		}

		trailingIndentation = getTrailingIndentation(result);
	}

	return result.trim().replace(/\t+$/gm, '');
}

function getTrailingIndentation(str) {
	let i = str.length;
	while (str[i - 1] === ' ' || str[i - 1] === '\t') i -= 1;
	return str.slice(i, str.length);
}

export function spaces(i) {
	let result = '';
	while (i--) result += ' ';
	return result;
}
[?2004l
2025-11-11 00:45:52,685 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_LlMGMKD9RhFtaimqhhAM6f3Q', 'function': {'arguments': '{"command":"npx mocha --version"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 732, 'prompt_tokens': 6478, 'total_tokens': 7210, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--90b05f78-b303-4dfe-a143-cd7b43219101-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'npx mocha --version'}, 'id': 'call_LlMGMKD9RhFtaimqhhAM6f3Q', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6478, 'output_tokens': 732, 'total_tokens': 7210, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-11 00:45:52,687 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npx mocha --version
2025-11-11 00:45:53,298 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:45:53,299 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
3.5.0
[?2004l
2025-11-11 00:46:03,326 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_29HBtssUlxpmvDBcNxQxzqJK', 'function': {'arguments': '{"command":"npm test --silent -- test/css/index.js --grep \'^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 764, 'prompt_tokens': 6529, 'total_tokens': 7293, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 704, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--a957f6bd-8520-4cf2-9798-5106d6413072-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- test/css/index.js --grep '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'"}, 'id': 'call_29HBtssUlxpmvDBcNxQxzqJK', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6529, 'output_tokens': 764, 'total_tokens': 7293, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 704}}
2025-11-11 00:46:03,330 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- test/css/index.js --grep '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'
2025-11-11 00:46:09,727 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:09,727 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- test/css/index.js --grep '^(attr
ribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equa
als|prefix|suffix))$'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m28ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m60ms[22m[39m


[92m [0m[32m 0 passing[0m[90m (2ms)[0m

[?2004l
2025-11-11 00:46:16,833 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_axjOIr6M8KAilNDMcxAOqXCw', 'function': {'arguments': '{"command":"ls -la test | sed -n \'1,200p\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 485, 'prompt_tokens': 6922, 'total_tokens': 7407, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 448, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 4608}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3f178903-629a-40ea-8de7-4df2c047ba55-0' tool_calls=[{'name': 'run_command', 'args': {'command': "ls -la test | sed -n '1,200p'"}, 'id': 'call_axjOIr6M8KAilNDMcxAOqXCw', 'type': 'tool_call'}] usage_metadata={'input_tokens': 6922, 'output_tokens': 485, 'total_tokens': 7407, 'input_token_details': {'audio': 0, 'cache_read': 4608}, 'output_token_details': {'audio': 0, 'reasoning': 448}}
2025-11-11 00:46:16,837 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: ls -la test | sed -n '1,200p'
2025-11-11 00:46:16,939 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:16,939 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
total 112
drwxrwxr-x 1 root root 4096 Nov 11 00:35 .
drwxr-xr-x 1 root root 4096 Nov 11 00:45 ..
drwxrwxr-x 1 root root 4096 Nov 10 23:59 create
drwxrwxr-x 1 root root 4096 Nov 10 23:59 css
drwxrwxr-x 1 root root 4096 Nov 10 23:59 custom-elements
drwxrwxr-x 1 root root 4096 Nov 10 23:59 formats
-rw-r--r-- 1 root root 5474 Nov 10 23:59 helpers.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 hydration
drwxrwxr-x 1 root root 4096 Nov 10 23:59 js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 parser
drwxrwxr-x 1 root root 4096 Nov 10 23:59 runtime
drwxrwxr-x 1 root root 4096 Nov 10 23:59 server-side-rendering
-rw-r--r-- 1 root root 1077 Nov 10 23:59 setup.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 sourcemaps
-rw-r--r-- 1 root root  247 Nov 10 23:59 test.js
drwxrwxr-x 1 root root 4096 Nov 10 23:59 validator
[?2004l
2025-11-11 00:46:18,151 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_eRNvohZfm7BWuqQR4te3ASVx', 'function': {'arguments': '{"command":"sed -n \'1,120p\' test/setup.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 7339, 'total_tokens': 7368, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6144}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--33f30be0-7391-4a81-a1e1-a2d0744862c6-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,120p' test/setup.js"}, 'id': 'call_eRNvohZfm7BWuqQR4te3ASVx', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7339, 'output_tokens': 29, 'total_tokens': 7368, 'input_token_details': {'audio': 0, 'cache_read': 6144}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:46:18,154 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,120p' test/setup.js
2025-11-11 00:46:18,255 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:18,256 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const fs = require('fs');
const path = require('path');

require('console-group').install();
require('source-map-support').install();

require.extensions['.js'] = function(module, filename) {
	const exports = [];

	var code = fs.readFileSync(filename, 'utf-8')
		.replace(/^import (?:\* as )?(\w+) from ['"]([^'"]+)['"];?/gm, 'var $1 = require("$2");')
		.replace(/^import {([^}]+)} from ['"](.+)['"];?/gm, 'var {$1} = require("$2");')
		.replace(/^export default /gm, 'module.exports = ')
		.replace(/^export (const|let|var|class|function) (\w+)/gm, (match, type, name) => {
			exports.push(name);
			return `${type} ${name}`;
		})
		.replace(/^export \{([^}]+)\}/gm, (match, names) => {
			names.split(',').filter(Boolean).forEach(name => {
				exports.push(name);
			});

			return '';
		})
		.replace(/^export function (\w+)/gm, 'exports.$1 = function $1');

	exports.forEach(name => {
		code += `\nexports.${name} = ${name};`;
	});

	try {
		return module._compile(code, filename);
	} catch (err) {
		console.log(code); // eslint-disable-line no-console
		throw err;
	}
[?2004l
2025-11-11 00:46:19,381 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_SIzoUVloijryB7Ezm0djNAjJ', 'function': {'arguments': '{"command":"sed -n \'1,200p\' test/test.js"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 29, 'prompt_tokens': 7709, 'total_tokens': 7738, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 0, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 6912}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--cdaef20a-388d-419d-b631-e84a4f5a56f6-0' tool_calls=[{'name': 'run_command', 'args': {'command': "sed -n '1,200p' test/test.js"}, 'id': 'call_SIzoUVloijryB7Ezm0djNAjJ', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7709, 'output_tokens': 29, 'total_tokens': 7738, 'input_token_details': {'audio': 0, 'cache_read': 6912}, 'output_token_details': {'audio': 0, 'reasoning': 0}}
2025-11-11 00:46:19,385 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: sed -n '1,200p' test/test.js
2025-11-11 00:46:19,487 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:19,487 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
const glob = require("glob");

require("./setup");

glob.sync("**/__test__.js", { cwd: "src" }).forEach(function(file) {
	require("../src/" + file);
});

glob.sync("*/index.js", { cwd: "test" }).forEach(function(file) {
	require("./" + file);
});
[?2004l
2025-11-11 00:46:33,147 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_23fiafRPU8RFN7rA05rC330b', 'function': {'arguments': '{"command":"npm test --silent -- --grep \'^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1208, 'prompt_tokens': 7829, 'total_tokens': 9037, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1152, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--d795d825-95cf-49c5-a51f-7df709e8869e-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- --grep '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'"}, 'id': 'call_23fiafRPU8RFN7rA05rC330b', 'type': 'tool_call'}] usage_metadata={'input_tokens': 7829, 'output_tokens': 1208, 'total_tokens': 9037, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1152}}
2025-11-11 00:46:33,150 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- --grep '^(attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'
2025-11-11 00:46:39,537 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:39,538 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- --grep '^(attribute-selector-unq
quoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))
)$'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.2s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m29ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m64ms[22m[39m


[92m [0m[32m 0 passing[0m[90m (1ms)[0m

[?2004l
2025-11-11 00:46:44,180 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_KaeSld6tzDxiLQLI3Y0tFSCE', 'function': {'arguments': '{"command":"cat mocha.coverage.opts"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 412, 'prompt_tokens': 8210, 'total_tokens': 8622, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 384, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 3328}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--3a5a013d-2aae-4ea9-993d-771a9f4fd323-0' tool_calls=[{'name': 'run_command', 'args': {'command': 'cat mocha.coverage.opts'}, 'id': 'call_KaeSld6tzDxiLQLI3Y0tFSCE', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8210, 'output_tokens': 412, 'total_tokens': 8622, 'input_token_details': {'audio': 0, 'cache_read': 3328}, 'output_token_details': {'audio': 0, 'reasoning': 384}}
2025-11-11 00:46:44,183 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: cat mocha.coverage.opts
2025-11-11 00:46:44,285 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:46:44,285 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
[?2004l
--require babel-register
--recursive
./**/__test__.js
test/*/index.js
[?2004l
2025-11-11 00:46:57,461 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_rUWlUhxoDgpq4ncmQwX67N3o', 'function': {'arguments': '{"command":"npm test --silent -- --grep \'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix)\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1077, 'prompt_tokens': 8276, 'total_tokens': 9353, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1024, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--c60dbdac-8c84-47fb-899a-37ecb76daca4-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- --grep 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix)'"}, 'id': 'call_rUWlUhxoDgpq4ncmQwX67N3o', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8276, 'output_tokens': 1077, 'total_tokens': 9353, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 1024}}
2025-11-11 00:46:57,464 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- --grep 'attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix)'
2025-11-11 00:47:04,006 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:47:04,006 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- --grep 'attribute-selector-unquo
oted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix)'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m26ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m39ms[22m[39m

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (48ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-case-insensitive[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals-dynamic[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 7 passing[0m[90m (180ms)[0m

[?2004l
2025-11-11 00:47:12,497 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content='' additional_kwargs={'tool_calls': [{'id': 'call_WtfMF8ri6Vw32LrpDFnIb6G0', 'function': {'arguments': '{"command":"npm test --silent -- --grep \'^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$\'"}', 'name': 'run_command'}, 'type': 'function'}], 'refusal': None} response_metadata={'token_usage': {'completion_tokens': 825, 'prompt_tokens': 8898, 'total_tokens': 9723, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 7296}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'tool_calls', 'logprobs': None} id='run--f38d1a40-6e53-4fdd-8c85-08ecb79eb880-0' tool_calls=[{'name': 'run_command', 'args': {'command': "npm test --silent -- --grep '^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'"}, 'id': 'call_WtfMF8ri6Vw32LrpDFnIb6G0', 'type': 'tool_call'}] usage_metadata={'input_tokens': 8898, 'output_tokens': 825, 'total_tokens': 9723, 'input_token_details': {'audio': 0, 'cache_read': 7296}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:47:12,500 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Executing command: npm test --silent -- --grep '^css (attribute-selector-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suffix))$'
2025-11-11 00:47:19,159 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command exit code: 0
2025-11-11 00:47:19,159 - thread-133013312636608.prometheus.docker.base_container - DEBUG - Command output:
 npm test --silent -- --grep '^css (attribute-selector
r-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suff
fix))$'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m37ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m49ms[22m[39m

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (49ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (147ms)[0m

[?2004l
2025-11-11 00:47:35,896 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_node - DEBUG - content="Result:\n npm test --silent -- --grep '^css (attribute-selector\nr-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suff\nfix))$'\n\x1b[?2004l\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/index.ts\x1b[22m → \x1b[1mcompiler/svelte.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mcompiler/svelte.js\x1b[22m in \x1b[1m4.3s\x1b[22m\x1b[39m\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/server-side-rendering/register.js\x1b[22m → \x1b[1mssr/register.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mssr/register.js\x1b[22m in \x1b[1m37ms\x1b[22m\x1b[39m\n\x1b[36m\x1b[39m\n\x1b[36m\x1b[1msrc/shared/index.js\x1b[22m → \x1b[1mshared.js\x1b[22m...\x1b[39m\n\x1b[32mcreated \x1b[1mshared.js\x1b[22m in \x1b[1m49ms\x1b[22m\x1b[39m\n\n\x1b[0m\x1b[0m\n\x1b[0m  css\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m attribute-selector-unquoted\x1b[0m\x1b[33m (49ms)\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-contains\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-equals\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-prefix\x1b[0m\n  \x1b[32m  ✓\x1b[0m\x1b[90m omit-scoping-attribute-attribute-selector-suffix\x1b[0m\n\n\n\x1b[92m \x1b[0m\x1b[32m 5 passing\x1b[0m\x1b[90m (147ms)\x1b[0m\n\n\x1b[?2004l" additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 1733, 'prompt_tokens': 9464, 'total_tokens': 11197, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 1216, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 8832}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--59a6aa86-9cff-421b-bc15-aa23a226f520-0' usage_metadata={'input_tokens': 9464, 'output_tokens': 1733, 'total_tokens': 11197, 'input_token_details': {'audio': 0, 'cache_read': 8832}, 'output_token_details': {'audio': 0, 'reasoning': 1216}}
2025-11-11 00:47:35,898 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - Human Message: 
We have run the selected regression tests on the codebase.
The following regression tests were selected to run:
--- BEGIN SELECTED REGRESSION TESTS ---
test/css/index.js::attribute-selector-unquoted
test/css/index.js::omit-scoping-attribute-attribute-selector-contains
test/css/index.js::omit-scoping-attribute-attribute-selector-equals
test/css/index.js::omit-scoping-attribute-attribute-selector-prefix
test/css/index.js::omit-scoping-attribute-attribute-selector-suffix
--- END SELECTED REGRESSION TESTS ---

Run Regression Tests Logs:
--- BEGIN LOG ---
Result:
 npm test --silent -- --grep '^css (attribute-selector
r-unquoted|omit-scoping-attribute-attribute-selector-(contains|equals|prefix|suff
fix))$'
[?2004l
[36m[39m
[36m[1msrc/index.ts[22m → [1mcompiler/svelte.js[22m...[39m
[32mcreated [1mcompiler/svelte.js[22m in [1m4.3s[22m[39m
[36m[39m
[36m[1msrc/server-side-rendering/register.js[22m → [1mssr/register.js[22m...[39m
[32mcreated [1mssr/register.js[22m in [1m37ms[22m[39m
[36m[39m
[36m[1msrc/shared/index.js[22m → [1mshared.js[22m...[39m
[32mcreated [1mshared.js[22m in [1m49ms[22m[39m

[0m[0m
[0m  css[0m
  [32m  ✓[0m[90m attribute-selector-unquoted[0m[33m (49ms)[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-contains[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-equals[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-prefix[0m
  [32m  ✓[0m[90m omit-scoping-attribute-attribute-selector-suffix[0m


[92m [0m[32m 5 passing[0m[90m (147ms)[0m

[?2004l
--- END LOG ---

Please analyze the logs and determine which regression tests passed!. You should return the exact test identifier 
that we give to you.
Don't forget to return the total number of tests run!

2025-11-11 00:47:48,352 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_structure_node - DEBUG - passed_regression_tests=['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix'] regression_test_fail_log='' total_tests_run=5
2025-11-11 00:47:48,354 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - INFO - passed_regression_tests: ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:47:48,354 - thread-133013312636608.prometheus.lang_graph.nodes.run_regression_tests_subgraph_node - DEBUG - regression_test_fail_log: 
2025-11-11 00:47:48,355 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - All regression tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:47:48,355 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - Current passed tests ['test/css/index.js::attribute-selector-unquoted', 'test/css/index.js::omit-scoping-attribute-attribute-selector-contains', 'test/css/index.js::omit-scoping-attribute-attribute-selector-equals', 'test/css/index.js::omit-scoping-attribute-attribute-selector-prefix', 'test/css/index.js::omit-scoping-attribute-attribute-selector-suffix']
2025-11-11 00:47:48,355 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_check_result_node - DEBUG - True
2025-11-11 00:47:48,357 - thread-133013312636608.prometheus.lang_graph.nodes.get_pass_regression_test_patch_subgraph_node - DEBUG - tested_patch_result: [TestedPatchResult(patch="diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..05b784831 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,20 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n+\n+\t// boolean attribute: only matches presence selectors\n \tif (attr.value === true) return operator === null;\n+\n+\t// presence-only selector [attr]: matches if attribute exists regardless of value\n+\tif (operator == null) return true;\n+\n+\t// multiple chunks / dynamic values — conservatively return true\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst op = operators[operator];\n+\tif (!op) return false;\n+\n+\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", passed=True, regression_test_failure_log=''), TestedPatchResult(patch="diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..0b8632018 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,16 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\t// presence-only selector ([attr]) — matches if attribute exists regardless of value\n+\tif (operator == null) return true;\n+\t// boolean attributes can only be matched by presence selectors\n+\tif (attr.value === true) return false;\n+\t// if the value is dynamic or contains multiple chunks, assume it could match\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst make = operators[operator];\n+\tif (!make) return false;\n+\tconst pattern = make(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", passed=True, regression_test_failure_log=''), TestedPatchResult(patch="diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..34dae7f99 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -219,9 +219,11 @@ const operators = {\n \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n };\n \n-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n+\t// Presence-only selector [attr] should match any present attribute regardless of its value\n+\tif (operator == null) return true;\n \tif (attr.value === true) return operator === null;\n \tif (attr.value.length > 1) return true;\n \n", passed=True, regression_test_failure_log=''), TestedPatchResult(patch="diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..3c75603d1 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,17 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\n+\t// Existence selector [attr] matches if attribute is present, regardless of value\n+\tif (operator == null) return true;\n+\n+\t// Boolean attribute cannot satisfy operators like '=', '~=', etc.\n+\tif (attr.value === true) return false;\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst op = operators[operator];\n+\tif (!op) return false;\n+\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", passed=True, regression_test_failure_log=''), TestedPatchResult(patch="diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..220c68d90 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -219,10 +219,12 @@ const operators = {\n \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n };\n \n-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\t// Presence-only selector [attr] matches if the attribute exists, regardless of value\n+\tif (operator === null) return true;\n+\tif (attr.value === true) return false; // boolean attributes only match presence selectors\n \tif (attr.value.length > 1) return true;\n \n \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n", passed=True, regression_test_failure_log='')]
2025-11-11 00:47:48,389 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - DEBUG - Total candidate patches: 5
2025-11-11 00:47:48,389 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - DEBUG - Candidate patches: ["diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..05b784831 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,20 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n+\n+\t// boolean attribute: only matches presence selectors\n \tif (attr.value === true) return operator === null;\n+\n+\t// presence-only selector [attr]: matches if attribute exists regardless of value\n+\tif (operator == null) return true;\n+\n+\t// multiple chunks / dynamic values — conservatively return true\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst op = operators[operator];\n+\tif (!op) return false;\n+\n+\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", "diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..0b8632018 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,16 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\t// presence-only selector ([attr]) — matches if attribute exists regardless of value\n+\tif (operator == null) return true;\n+\t// boolean attributes can only be matched by presence selectors\n+\tif (attr.value === true) return false;\n+\t// if the value is dynamic or contains multiple chunks, assume it could match\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst make = operators[operator];\n+\tif (!make) return false;\n+\tconst pattern = make(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", "diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..34dae7f99 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -219,9 +219,11 @@ const operators = {\n \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n };\n \n-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n+\t// Presence-only selector [attr] should match any present attribute regardless of its value\n+\tif (operator == null) return true;\n \tif (attr.value === true) return operator === null;\n \tif (attr.value.length > 1) return true;\n \n", "diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..3c75603d1 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -222,10 +222,17 @@ const operators = {\n function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\n+\t// Existence selector [attr] matches if attribute is present, regardless of value\n+\tif (operator == null) return true;\n+\n+\t// Boolean attribute cannot satisfy operators like '=', '~=', etc.\n+\tif (attr.value === true) return false;\n \tif (attr.value.length > 1) return true;\n \n-\tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n+\tconst op = operators[operator];\n+\tif (!op) return false;\n+\tconst pattern = op(expectedValue, caseInsensitive ? 'i' : '');\n \tconst value = attr.value[0];\n \n \tif (value.type === 'Text') return pattern.test(value.data);\n", "diff --git a/src/css/Selector.ts b/src/css/Selector.ts\nindex 85922c017..220c68d90 100644\n--- a/src/css/Selector.ts\n+++ b/src/css/Selector.ts\n@@ -219,10 +219,12 @@ const operators = {\n \t'*=': (value: string, flags: string) => new RegExp(value, flags)\n };\n \n-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {\n+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {\n \tconst attr = node.attributes.find((attr: Node) => attr.name === name);\n \tif (!attr) return false;\n-\tif (attr.value === true) return operator === null;\n+\t// Presence-only selector [attr] matches if the attribute exists, regardless of value\n+\tif (operator === null) return true;\n+\tif (attr.value === true) return false; // boolean attributes only match presence selectors\n \tif (attr.value.length > 1) return true;\n \n \tconst pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');\n"]
2025-11-11 00:48:17,145 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 1/10 try:Selected patch index: 2, 
2025-11-11 00:48:59,327 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 2/10 try:Selected patch index: 1, 
2025-11-11 00:49:54,344 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 3/10 try:Selected patch index: 4, 
2025-11-11 00:50:35,386 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 4/10 try:Selected patch index: 4, 
2025-11-11 00:51:09,869 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 5/10 try:Selected patch index: 4, 
2025-11-11 00:52:06,833 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 6/10 try:Selected patch index: 2, 
2025-11-11 00:52:42,758 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 7/10 try:Selected patch index: 4, 
2025-11-11 00:53:09,610 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 8/10 try:Selected patch index: 2, 
2025-11-11 00:53:40,185 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 9/10 try:Selected patch index: 2, 
2025-11-11 00:54:45,556 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode response at 10/10 try:Selected patch index: 4, 
2025-11-11 00:54:45,556 - thread-133013312636608.prometheus.lang_graph.nodes.final_patch_selection_node - INFO - FinalPatchSelectionNode early stopping at turn 10 with result: [0, 1, 4, 0, 5], first place: 5, second place: 4, lead: 1, remaining votes: 0, selected patch index: 4
2025-11-11 00:54:45,589 - thread-133013312636608.prometheus.lang_graph.nodes.issue_not_verified_bug_subgraph_node - INFO - final_patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..220c68d90 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,10 +219,12 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// Presence-only selector [attr] matches if the attribute exists, regardless of value
+	if (operator === null) return true;
+	if (attr.value === true) return false; // boolean attributes only match presence selectors
 	if (attr.value.length > 1) return true;
 
 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');

2025-11-11 00:54:58,726 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_responder_node - DEBUG - content='Thanks for the clear report and repro.\n\nRoot cause:\nPresence-only attribute selectors like [foo] were not handled correctly when the attribute had a value (e.g. foo="bar"). The selector code attempted to evaluate an operator even when none was provided, leading to operators[operator] being called with null and throwing a TypeError.\n\nWhat changed:\n- Updated attributeMatches to accept operator as string | null.\n- For presence-only selectors ([attr]), we now return true as soon as the attribute exists, regardless of its value.\n- Boolean attributes only match presence selectors; we avoid evaluating operators for them.\n- Guarded the operator lookup so it’s only used when an operator is present, preventing the TypeError.\n\nPatch reference:\nIn src/css/Selector.ts:\n- function signature changed to operator: string | null\n- Early return added for operator === null\n- Adjusted boolean attribute handling\n\nVerification:\n✓ All selected regression tests passed successfully.\n\nThis ensures selectors like button[foo] work for both <button foo></button> and <button foo="bar"></button> without errors.' additional_kwargs={'refusal': None} response_metadata={'token_usage': {'completion_tokens': 997, 'prompt_tokens': 785, 'total_tokens': 1782, 'completion_tokens_details': {'accepted_prediction_tokens': 0, 'audio_tokens': 0, 'reasoning_tokens': 768, 'rejected_prediction_tokens': 0}, 'prompt_tokens_details': {'audio_tokens': 0, 'cached_tokens': 0}}, 'model_name': 'gpt-5-2025-08-07', 'system_fingerprint': None, 'finish_reason': 'stop', 'logprobs': None} id='run--e46c5fd3-8071-49d0-8a22-a6986c6df829-0' usage_metadata={'input_tokens': 785, 'output_tokens': 997, 'total_tokens': 1782, 'input_token_details': {'audio': 0, 'cache_read': 0}, 'output_token_details': {'audio': 0, 'reasoning': 768}}
2025-11-11 00:54:58,727 - thread-133013312636608.prometheus.docker.base_container - INFO - Cleaning up container and temporary files
2025-11-11 00:54:58,727 - thread-133013312636608.prometheus.docker.base_container - INFO - Closing persistent shell...
2025-11-11 00:54:58,828 - thread-133013312636608.prometheus.docker.base_container - INFO - Cleaning up container and temporary files
2025-11-11 00:55:09,241 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - Generated patch:
diff --git a/src/css/Selector.ts b/src/css/Selector.ts
index 85922c017..220c68d90 100644
--- a/src/css/Selector.ts
+++ b/src/css/Selector.ts
@@ -219,10 +219,12 @@ const operators = {
 	'*=': (value: string, flags: string) => new RegExp(value, flags)
 };
 
-function attributeMatches(node: Node, name: string, expectedValue: string, operator: string, caseInsensitive: boolean) {
+function attributeMatches(node: Node, name: string, expectedValue: string, operator: string | null, caseInsensitive: boolean) {
 	const attr = node.attributes.find((attr: Node) => attr.name === name);
 	if (!attr) return false;
-	if (attr.value === true) return operator === null;
+	// Presence-only selector [attr] matches if the attribute exists, regardless of value
+	if (operator === null) return true;
+	if (attr.value === true) return false; // boolean attributes only match presence selectors
 	if (attr.value.length > 1) return true;
 
 	const pattern = operators[operator](expectedValue, caseInsensitive ? 'i' : '');

2025-11-11 00:55:09,241 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - passed_reproducing_test: False
2025-11-11 00:55:09,241 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - passed_regression_test: True
2025-11-11 00:55:09,241 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - passed_existing_test: False
2025-11-11 00:55:09,241 - thread-133013312636608.prometheus.lang_graph.nodes.issue_bug_subgraph_node - INFO - issue_response:
Thanks for the clear report and repro.

Root cause:
Presence-only attribute selectors like [foo] were not handled correctly when the attribute had a value (e.g. foo="bar"). The selector code attempted to evaluate an operator even when none was provided, leading to operators[operator] being called with null and throwing a TypeError.

What changed:
- Updated attributeMatches to accept operator as string | null.
- For presence-only selectors ([attr]), we now return true as soon as the attribute exists, regardless of its value.
- Boolean attributes only match presence selectors; we avoid evaluating operators for them.
- Guarded the operator lookup so it’s only used when an operator is present, preventing the TypeError.

Patch reference:
In src/css/Selector.ts:
- function signature changed to operator: string | null
- Early return added for operator === null
- Adjusted boolean attribute handling

Verification:
✓ All selected regression tests passed successfully.

This ensures selectors like button[foo] work for both <button foo></button> and <button foo="bar"></button> without errors.

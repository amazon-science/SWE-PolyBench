########################################################################################################################
PHASE 1
########################################################################################################################
========================================================================================================================
AGENT:
I will start by viewing the workspace to understand its structure and contents. This will help me identify key files and locations that may be relevant to the task.
========================================================================================================================
USER PROMPT:
Resolve the following problem statement:

<problem_statement>
[Autocomplete] Prevent form submit with freeSolo and multiple


![image](https://user-images.githubusercontent.com/33362998/71338793-cbfbb380-2516-11ea-93d4-a32ae1699b9e.png)


https://codesandbox.io/s/vibrant-water-pepu1

</problem_statement>

Do not stop until you have made code changes that resolve the problem statement. Do not ask for clarifications.

NEVER attempt to find the solution to the problem statement by searching future commits or branches in the repository.
========================================================================================================================
AGENT:
Starting to analyze the problem statement about Autocomplete component with freeSolo and multiple options causing form submit. I need to explore the workspace to understand the issue and find the relevant code.
========================================================================================================================
AGENT:
EXPLORE WORKSPACE: Understanding the Autocomplete component structure

<thinking>
The problem statement mentions:
1. Autocomplete component with `freeSolo` and `multiple` options
2. Issue with preventing form submit

This is a Material-UI repository. The Autocomplete component is likely in the lab package since it's an experimental component. Let me explore the packages/material-ui-lab/src folder to find the Autocomplete component.

The issue seems to be that when using Autocomplete with both `freeSolo` and `multiple` props, pressing Enter submits the form instead of adding the value to the list. This is a common UX issue where the Enter key should add the free-form value to the multiple selection, not submit the form.
</thinking>
========================================================================================================================
TOOL CALL (expand_folder)
folder_path: packages/material-ui-lab/src

========================================================================================================================
TOOL RETURN (expand_folder)
```
packages/:

packages/material-ui-lab/:

packages/material-ui-lab/src/:
index.d.ts
index.js
index.test.js

packages/material-ui-lab/src/Alert/:
Alert.d.ts
Alert.js
Alert.test.js
index.d.ts
index.js

packages/material-ui-lab/src/AlertTitle/:
AlertTitle.d.ts
AlertTitle.js
AlertTitle.test.js
index.d.ts
index.js

packages/material-ui-lab/src/Autocomplete/:
Autocomplete.d.ts
Autocomplete.js
Autocomplete.test.js
index.d.ts
index.js

packages/material-ui-lab/src/AvatarGroup/:
AvatarGroup.d.ts
AvatarGrou...
```
========================================================================================================================
AGENT:
<thinking>
I found the Autocomplete component. There are two relevant files:
1. `packages/material-ui-lab/src/Autocomplete/Autocomplete.js` - The main component
2. `packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js` - The hook that contains the logic

The issue is about form submission when pressing Enter with `freeSolo` and `multiple` options. Let me open both files to understand the current implementation.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
- packages/material-ui-lab/src/Autocomplete/Autocomplete.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js:\n\n````javascript\n   0 /* eslint-disable no-constant-condition */\n...\n   7 function stripDiacritics(string) {\n...\n  13 function defaultStringify(value) {\n...\n  31 export function createFilterOptions(config = {}) {\n...\n  64 function findIndex(array, comp) {\n...\n  74 const defaultFilterOptions = createFilterOptions();\n...\n  77 const pageSize = 5;\n  78 \n  79 export default function useAutocomplete(...
```
========================================================================================================================
AGENT:
<thinking>
I need to expand the useAutocomplete hook to see the key handling logic, particularly around the Enter key. Let me expand the relevant parts of the code.
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
patterns:
- useAutocomplete

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js:

````javascript
   0 /* eslint-disable no-constant-condition */
   1 import React from 'react';
   2 import PropTypes from 'prop-types';
   3 import { setRef, useEventCallback } from '@material-ui/core/utils';
   4 
   5 // https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript
   6 // Give up on IE 11 support for this feature
   7 function stripDiacritics...
```
========================================================================================================================
AGENT:
ANALYZE CODE: Understanding the issue

<thinking>
Now I can see the issue clearly. Looking at the `handleKeyDown` function (lines 549-642), specifically the 'Enter' key handling (lines 600-616):

```javascript
case 'Enter':
  if (highlightedIndexRef.current !== -1 && popupOpen) {
    // We don't want to validate the form.
    event.preventDefault();
    selectNewValue(event, filteredOptions[highlightedIndexRef.current]);

    // Move the selection to the end.
    if (autoComplete) {
      inputRef.current.setSelectionRange(
        inputRef.current.value.length,
        inputRef.current.value.length,
      );
    }
  } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {
    selectNewValue(event, inputValue);
  }
  break;
```

The issue is:
1. When `highlightedIndexRef.current !== -1 && popupOpen` is true, `event.preventDefault()` is called to prevent form submission.
2. However, in the `else if` branch (when `freeSolo` is true and there's input value), `event.preventDefault()` is NOT called.

This means when using `freeSolo` with `multiple`, if the user types a value and presses Enter:
- If the popup is open with a highlighted option, form submission is prevented
- If the popup is closed or no option is highlighted (which happens with `freeSolo` when typing a new value that doesn't match any option), the form will be submitted because `event.preventDefault()` is not called in the `else if` branch.

The fix is simple: add `event.preventDefault()` in the `else if` branch to prevent form submission when adding a free-form value.

Let me make this fix:
</thinking>
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
find: "      case 'Enter':\n        if (highlightedIndexRef.current !== -1 && popupOpen)\
  \ {\n          // We don't want to validate the form.\n          event.preventDefault();\n\
  \          selectNewValue(event, filteredOptions[highlightedIndexRef.current]);\n\
  \n          // Move the selection to the end.\n          if (autoComplete) {\n \
  \           inputRef.current.setSelectionRange(\n              inputRef.current.value.length,\n\
  \              inputRef.current.value.length,\n            );\n          }\n   \
  \     } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue ===\
  \ false) {\n          selectNewValue(event, inputValue);\n        }\n        break;"
replace: "      case 'Enter':\n        if (highlightedIndexRef.current !== -1 && popupOpen)\
  \ {\n          // We don't want to validate the form.\n          event.preventDefault();\n\
  \          selectNewValue(event, filteredOptions[highlightedIndexRef.current]);\n\
  \n          // Move the selection to the end.\n          if (autoComplete) {\n \
  \           inputRef.current.setSelectionRange(\n              inputRef.current.value.length,\n\
  \              inputRef.current.value.length,\n            );\n          }\n   \
  \     } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue ===\
  \ false) {\n          // We don't want to validate the form.\n          event.preventDefault();\n\
  \          selectNewValue(event, inputValue);\n        }\n        break;"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js:

--- packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
+++ packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
@@ -612,6 +612,8 @@
             );
           }
         } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {
+          // We don't want to validate the form.
+          event.preventDefault();
           selectNewValue(event, inputValu...
```
========================================================================================================================
AGENT:
VERIFY CHANGES: Let me verify the fix by looking at the updated code and checking if there are any tests related to this behavior
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
line_ranges:
- - 598
  - 620

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js:

````javascript
   0 /* eslint-disable no-constant-condition */
   1 import React from 'react';
   2 import PropTypes from 'prop-types';
   3 import { setRef, useEventCallback } from '@material-ui/core/utils';
   4 
   5 // https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript
   6 // Give up on IE 11 support for this feature
   7 function stripDiacritics...
```
========================================================================================================================
AGENT:
<thinking>
The fix looks correct. Now let me check if there are any existing tests for this behavior and potentially add a test to verify the fix. Let me look at the Autocomplete test file.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js:\n\n````javascript\n   0 import React from 'react';\n...\n  11   let mount;\n...\n  31       const { container } = render(\n...\n  34       const input = container.querySelector('input');\n...\n  45       const { container } = render(\n...\n  48       const input = container.querySelector('input');\n...\n  55       const handleChange = spy();\n  56       const options = ['one', 'two'];\n  57       const { contai...
```
========================================================================================================================
AGENT:
<thinking>
Let me search for existing tests related to "freeSolo" and "Enter" key to see if there are any tests that cover this scenario.
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: freeSolo.*Enter|Enter.*freeSolo
path_glob: '**/Autocomplete.test.js'

========================================================================================================================
TOOL RETURN (grep)
```
No matches found for pattern 'freeSolo.*Enter|Enter.*freeSolo'....
```
========================================================================================================================
TOOL CALL (grep)
content_pattern: freeSolo
path_glob: '**/Autocomplete.test.js'

========================================================================================================================
TOOL RETURN (grep)
```
packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js:530:          freeSolo
packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js:761:  describe('prop: freeSolo', () => {
packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js:767:          freeSolo...
```
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js
line_ranges:
- - 755
  - 810

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js:

````javascript
   0 import React from 'react';
...
  11   let mount;
...
  31       const { container } = render(
...
  34       const input = container.querySelector('input');
...
  45       const { container } = render(
...
  48       const input = container.querySelector('input');
...
  57       const { container } = render(
...
  72       const handleChange = spy();
  73       const options ...
```
========================================================================================================================
AGENT:
<thinking>
I see there's already a test for `freeSolo` with Enter key, but it doesn't test the form submission prevention scenario. Let me now write a test to verify the fix works correctly. First, let me check how tests are run in this project.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd packages/material-ui-lab && head -50 package.json

========================================================================================================================
TOOL RETURN (bash)
```
{
  "name": "@material-ui/lab",
  "version": "4.0.0-alpha.38",
  "private": false,
  "author": "Material-UI Team",
  "description": "Material-UI Lab - Incubator for Material-UI React components.",
  "main": "./src/index.js",
  "keywords": [
    "react",
    "react-component",
    "material design",
    "material-ui",
    "lab"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/mui-org/material-ui.git",
    "directory": "packages/material-ui-lab"
  },
  "license": "MIT",
  "...
```
========================================================================================================================
AGENT:
<thinking>
Let me install the dependencies and run the tests to make sure the existing tests still pass with my changes.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn install 2>&1 | tail -20
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
âž¤ YN0087: Migrated your project to the latest Yarn version ðŸš€

âž¤ YN0000: Â· Yarn 4.9.3
âž¤ YN0000: â”Œ Project validation
âž¤ YN0057: â”‚ root-workspace-0b6124: The override for '**/@babel/core' includes a glob pattern. Glob patterns have been removed since their behaviours don't match what you'd expect. Set the override to '@babel/core' instead.
âž¤ YN0057: â”‚ root-workspace-0b6124: The override for '**/@babel/plugin-proposal-class-properties' includes a glob pattern. Glob patterns have been removed since t...
```
========================================================================================================================
AGENT:
<thinking>
There's an issue with yarn install due to outdated dependencies. Let me try a different approach - using npm instead.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm warn deprecated sinon@7.5.0: 16.1.1
npm warn deprecated eslint@5.16.0: This version is no longer supported. Please see https://eslint.org/version-support for other options.
npm warn deprecated core-js@1.2.7: core-js@<3.23.3 is no longer maintained and not recommended for usage due to the number of issues. Because of the V8 engine whims, feature detection in old core-js versions could cause a slowdown up to 100x even if nothing is polyfilled. Some versions have web compatibility issues. Pleas...
```
========================================================================================================================
AGENT:
<thinking>
Good, npm install succeeded. Now let me run the tests for the Autocomplete component to make sure my changes don't break anything.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm run test -- --grep "Autocomplete" 2>&1 | tail -50
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```

> test
> yarn lint && yarn typescript && yarn test:coverage --grep Autocomplete

Syntax Error: Expected ":" or blank space but "\n" found.
    at hf (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:51:1188)
    at cWe (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:51:10628)
    at fWe (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:64:17)
    at pWe (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:64:59)
    at as (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:64:435)
    at t.setupRe...
```
========================================================================================================================
AGENT:
<thinking>
There's an issue with yarn. Let me try running the tests directly with mocha.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && NODE_ENV=test npx mocha 'packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js'
  --require test/utils/setup.js 2>&1 | tail -80
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
mocha debug [spec..]

Run tests with Mocha

Rules & Behavior
  --allow-uncaught           Allow uncaught errors to propagate        [boolean]
  --async-only, -A           Require all tests to use a callback (async) or
                             return a Promise                          [boolean]
  --bail, -b                 Abort ("bail") after first test failure   [boolean]
  --check-leaks              Check for global variable leaks           [boolean]
  --delay                    Delay init...
```
========================================================================================================================
AGENT:
<thinking>
There's an issue with the test setup. Let me check the test configuration and try a different approach.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && cat test/mocha.opts

========================================================================================================================
TOOL RETURN (bash)
```
--require @babel/register
--reporter dot
--recursive
--require test/utils/setup.js...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && NODE_ENV=test npx mocha 'packages/material-ui-lab/src/Autocomplete/Autocomplete.test.js'
  --require @babel/register --require test/utils/setup.js 2>&1 | tail -80
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Browserslist: caniuse-lite is outdated. Please run next command `yarn upgrade`
mocha debug [spec..]

Run tests with Mocha

Rules & Behavior
  --allow-uncaught           Allow uncaught errors to propagate        [boolean]
  --async-only, -A           Require all tests to use a callback (async) or
                             return a Promise                          [boolean]
  --bail, -b                 Abort ("bail") after first test failure   [boolean]
  --check-leaks              Check for gl...
```
========================================================================================================================
AGENT:
<thinking>
The test environment has some compatibility issues with the current Node.js version. Let me try a simpler approach - create a minimal test script to verify the fix works.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: "cat > /tmp/test_fix.js << 'EOF'\n// Simple test to verify the fix logic\n\
  \n// Simulating the original code behavior\nfunction testOriginalBehavior() {\n\
  \  const event = { \n    key: 'Enter',\n    preventDefault: function() { this.defaultPrevented\
  \ = true; },\n    defaultPrevented: false\n  };\n  \n  const highlightedIndexRef\
  \ = { current: -1 };\n  const popupOpen = false;\n  const freeSolo = true;\n  const\
  \ inputValue = 'test value';\n  const inputValueIsSelectedValue = false;\n  \n \
  \ // Original code (without fix)\n  if (highlightedIndexRef.current !== -1 && popupOpen)\
  \ {\n    event.preventDefault();\n    console.log('Option selected from popup');\n\
  \  } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false)\
  \ {\n    // Original: no event.preventDefault() here\n    console.log('Free solo\
  \ value added');\n  }\n  \n  console.log('Original behavior - defaultPrevented:',\
  \ event.defaultPrevented);\n  return event.defaultPrevented;\n}\n\n// Simulating\
  \ the fixed code behavior\nfunction testFixedBehavior() {\n  const event = { \n\
  \    key: 'Enter',\n    preventDefault: function() { this.defaultPrevented = true;\
  \ },\n    defaultPrevented: false\n  };\n  \n  const highlightedIndexRef = { current:\
  \ -1 };\n  const popupOpen = false;\n  const freeSolo = true;\n  const inputValue\
  \ = 'test value';\n  const inputValueIsSelectedValue = false;\n  \n  // Fixed code\
  \ (with fix)\n  if (highlightedIndexRef.current !== -1 && popupOpen) {\n    event.preventDefault();\n\
  \    console.log('Option selected from popup');\n  } else if (freeSolo && inputValue\
  \ !== '' && inputValueIsSelectedValue === false) {\n    // Fixed: event.preventDefault()\
  \ is now called\n    event.preventDefault();\n    console.log('Free solo value added');\n\
  \  }\n  \n  console.log('Fixed behavior - defaultPrevented:', event.defaultPrevented);\n\
  \  return event.defaultPrevented;\n}\n\nconsole.log('Testing original behavior (without\
  \ fix):');\nconst originalResult = testOriginalBehavior();\n\nconsole.log('\\nTesting\
  \ fixed behavior (with fix):');\nconst fixedResult = testFixedBehavior();\n\nconsole.log('\\\
  n--- Results ---');\nconsole.log('Original (bug): Form submission prevented?', originalResult);\n\
  console.log('Fixed: Form submission prevented?', fixedResult);\n\nif (!originalResult\
  \ && fixedResult) {\n  console.log('\\n\u2713 Fix is correct! The original code\
  \ did NOT prevent form submission, but the fixed code DOES.');\n} else {\n  console.log('\\\
  n\u2717 Something is wrong with the test.');\n}\nEOF\nnode /tmp/test_fix.js"

========================================================================================================================
TOOL RETURN (bash)
```
Testing original behavior (without fix):
Free solo value added
Original behavior - defaultPrevented: false

Testing fixed behavior (with fix):
Free solo value added
Fixed behavior - defaultPrevented: true

--- Results ---
Original (bug): Form submission prevented? false
Fixed: Form submission prevented? true

âœ“ Fix is correct! The original code did NOT prevent form submission, but the fixed code DOES....
```
========================================================================================================================
AGENT:
<thinking>
The test confirms the fix is correct. The original code did not call `event.preventDefault()` when adding a free-form value in `freeSolo` mode, which allowed the form to be submitted. The fixed code now calls `event.preventDefault()` to prevent form submission.

Let me also verify the fix by looking at the actual code change again to make sure it's correct.
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
line_ranges:
- - 598
  - 622

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js:

````javascript
   0 /* eslint-disable no-constant-condition */
   1 import React from 'react';
   2 import PropTypes from 'prop-types';
   3 import { setRef, useEventCallback } from '@material-ui/core/utils';
   4 
   5 // https://stackoverflow.com/questions/990904/remove-accents-diacritics-in-a-string-in-javascript
   6 // Give up on IE 11 support for this feature
   7 function stripDiacritics...
```
========================================================================================================================
AGENT:
REVIEW CHANGES: The fix is correctly applied

<thinking>
The fix is correctly applied. Looking at lines 613-617, I can see:

```javascript
} else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {
  // We don't want to validate the form.
  event.preventDefault();
  selectNewValue(event, inputValue);
}
```

The `event.preventDefault()` is now called in the `else if` branch when:
1. `freeSolo` is true
2. `inputValue` is not empty
3. `inputValueIsSelectedValue` is false (meaning the current input value is not already the selected value)

This prevents the form from being submitted when the user presses Enter to add a free-form value in `freeSolo` mode, which is the expected behavior especially when combined with `multiple` mode.

Let me also check if there are any TypeScript definition files that need to be updated (though this is just a behavior fix, not an API change).
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui-lab/src/useAutocomplete/useAutocomplete.d.ts

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui-lab/src/useAutocomplete/useAutocomplete.d.ts:\n\n````typescript\n   0 import * as React from 'react';\n   1 \n   2 export interface CreateFilterOptionsConfig {\n...\n  10 export interface FilterOptionsState {\n...\n  14 export type CreateFilterOptions = (\n...\n  18 export const createFilterOptions: CreateFilterOptions;\n  19 \n  20 export interface UseAutocompleteProps {\n...\n 199 \n````"]...
```
========================================================================================================================
AGENT:
<thinking>
The TypeScript definition file doesn't need any changes since this is a behavior fix, not an API change. The fix is complete.

Let me verify the change one more time by looking at the git diff.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js

========================================================================================================================
TOOL RETURN (bash)
```
diff --git a/packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js b/packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
index bfa880b3d5..19f0d09c43 100644
--- a/packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
+++ b/packages/material-ui-lab/src/useAutocomplete/useAutocomplete.js
@@ -612,6 +612,8 @@ export default function useAutocomplete(props) {
             );
           }
         } else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === ...
```
========================================================================================================================
AGENT:
Successfully fixed the issue where the Autocomplete component with `freeSolo` and `multiple` props was causing form submission when pressing Enter to add a new value.

**Problem:**
When using the Autocomplete component with both `freeSolo` and `multiple` props, pressing Enter to add a free-form value would submit the form instead of just adding the value to the selection.

**Root Cause:**
In the `handleKeyDown` function within `useAutocomplete.js`, the Enter key handling had two branches:
1. When a highlighted option exists in the popup - `event.preventDefault()` was called
2. When in `freeSolo` mode with input value - `event.preventDefault()` was NOT called

The missing `event.preventDefault()` in the second branch allowed the default form submission behavior to occur.

**Fix:**
Added `event.preventDefault()` in the `else if` branch that handles the `freeSolo` case (line 614-615 in the updated file):

```javascript
} else if (freeSolo && inputValue !== '' && inputValueIsSelectedValue === false) {
  // We don't want to validate the form.
  event.preventDefault();
  selectNewValue(event, inputValue);
}
```

This ensures that when a user presses Enter to add a free-form value in `freeSolo` mode, the form submission is prevented and the value is properly added to the selection.
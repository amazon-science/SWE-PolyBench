########################################################################################################################
PHASE 1
########################################################################################################################
========================================================================================================================
AGENT:
I will start by viewing the workspace to understand its structure and contents. This will help me identify key files and locations that may be relevant to the task.
========================================================================================================================
USER PROMPT:
Resolve the following problem statement:

<problem_statement>
CircularProgress, length of the line does not animate under load
<!-- Checked checkbox should look like this: [x] -->
- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.

## Expected Behavior
CircularProgress animation should be smooth and predictable under load

## Current Behavior
The animation is okay but the dynamic length of the line only updates once a while under load.  Maybe my understanding of Promise is wrong? I thought it would move the load away from the main UI thread?

![sept -08-2018 12-00-39](https://user-images.githubusercontent.com/3165635/45252949-df553080-b35e-11e8-9d3c-934f2e959019.gif)

## Steps to Reproduce (for bugs)
1. generate some load inside a promise
2. observe CircularProgress animation, it still runs but the length of the circle stays constant

demo: https://codesandbox.io/s/j4xvnvv8nv (warning, Chrome pls, firefox crashes under this artificial load)


## Context
My app uses canvas to resize a bunch of user selected files.  I tried CircularProgress but to my surprise the animation is semi broken.  My workaround: animated Gif.

## Your Environment

| Tech         | Version |
|--------------|---------|
| Material-UI  |    v1.0.0-beta.33     |
| React        |     16.3    |
| browser      |     Chrome    |


</problem_statement>

Do not stop until you have made code changes that resolve the problem statement. Do not ask for clarifications.
========================================================================================================================
AGENT:
Starting to analyze the CircularProgress animation issue. I need to explore the workspace to understand the current implementation and identify the root cause of the animation problem under load.
========================================================================================================================
AGENT:
<thinking>
Let me analyze the problem statement:

1. The issue is about `CircularProgress` component where the animation (specifically the length of the line/circle) doesn't animate smoothly under load.
2. The animation runs but the dynamic length of the circle stays constant when there's heavy computation happening.
3. This is likely related to how CSS animations work vs JavaScript-based animations. CSS animations that use `@keyframes` with properties like `stroke-dasharray` or `stroke-dashoffset` should work smoothly even under load because they're handled by the browser's compositor thread.

Let me first look at the CircularProgress component implementation to understand how the animation is currently done.
</thinking>

Let me explore the CircularProgress component to understand its current implementation.
========================================================================================================================
TOOL CALL (grep)
content_pattern: CircularProgress
path_glob: '*/material-ui/src/**/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
packages/material-ui/src/CircularProgress/index.js:1:export { default } from './CircularProgress';
packages/material-ui/src/CircularProgress/CircularProgress.js:94:function CircularProgress(props) {
packages/material-ui/src/CircularProgress/CircularProgress.js:151:CircularProgress.propTypes = {
packages/material-ui/src/CircularProgress/CircularProgress.js:189:CircularProgress.defaultProps = {
packages/material-ui/src/CircularProgress/CircularProgress.js:197:export default withStyles(styles, { na...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.js:\n\n````javascript\n   0 import React from \'react\';\n   1 import PropTypes from \'prop-types\';\n   2 import classNames from \'classnames\';\n   3 import withStyles from \'../styles/withStyles\';\n   4 import { capitalize } from \'../utils/helpers\';\n   5 \n   6 const SIZE = 44;\n   7 \n   8 function getRelativeValue(value, min, max) {\n   9   const clampedValue = Math.min(Math.max(min, value), max);\n  10   r...
```
========================================================================================================================
AGENT:
<thinking>
Now I understand the issue. Looking at the code:

1. The `indeterminate` variant uses CSS animations defined in `@keyframes`:
   - `mui-progress-circular-rotate` for rotating the entire circle (line 36)
   - `mui-progress-circular-dash` for animating the stroke dash (line 60)

2. The issue is that the `@keyframes mui-progress-circular-dash` animation animates `strokeDasharray` and `strokeDashoffset` properties.

3. The problem is that `strokeDasharray` and `strokeDashoffset` are NOT properties that can be hardware-accelerated by the GPU. They are computed on the main thread. When the main thread is busy with heavy JavaScript computation, these animations will stutter.

4. In contrast, `transform` and `opacity` are GPU-accelerated properties that can run smoothly even when the main thread is busy.

Looking at the issue more carefully:
- The rotation animation (`transform: rotate(360deg)`) should work fine because `transform` is GPU-accelerated.
- The dash animation (stroke-dasharray/stroke-dashoffset) is the problem because these properties are not GPU-accelerated.

The solution mentioned in Material Design guidelines and commonly used is to use `transform: rotate()` on the circle element itself to create the illusion of the dash growing and shrinking, rather than animating `stroke-dasharray` and `stroke-dashoffset`.

Let me look at how this can be fixed. The key insight is:
1. Keep the stroke-dasharray fixed at a value that creates a partial circle
2. Use `transform: rotate()` on the circle to animate the starting position
3. This way, both animations (the outer rotation and the inner rotation) use GPU-accelerated transforms

Let me check how other implementations handle this. The solution is to:
1. Use a fixed `stroke-dasharray` that creates a partial arc
2. Animate the circle using `transform: rotate()` which is GPU-accelerated
3. The combination of the outer container rotation and inner circle rotation creates the illusion of the dash growing and shrinking

Actually, looking at this more carefully, I think the better approach is:
1. Keep the outer rotation animation as is
2. For the circle, instead of animating `stroke-dasharray` and `stroke-dashoffset`, we should animate using `transform: rotate()` on the circle element

But wait, the issue is that we need the dash to grow and shrink, not just rotate. Let me think about this differently.

The solution used by many implementations is to:
1. Use `stroke-dasharray` with a fixed value
2. Use `stroke-dashoffset` animation combined with `transform: rotate()` on the SVG or circle

Actually, looking at the Material Design spec and other implementations, the key is that `stroke-dashoffset` animation alone (without changing `stroke-dasharray`) combined with rotation can create the effect. But `stroke-dashoffset` is still not GPU-accelerated.

Let me look at what the actual fix should be. The issue is that CSS animations for `stroke-dasharray` and `stroke-dashoffset` are not GPU-accelerated. 

One common solution is to:
1. Disable the `stroke-dasharray` animation entirely
2. Use a fixed `stroke-dasharray` value
3. Animate `stroke-dashoffset` using CSS animation (this is still not GPU-accelerated but is simpler)
4. Add `will-change: transform` to hint the browser to optimize

Actually, looking at this issue more carefully, I found that the real solution is to use `disableShrink` prop which disables the shrinking animation. But that's a workaround, not a fix.

Let me look at how this was actually fixed in Material-UI. The solution is to add a `disableShrink` prop that allows users to disable the shrinking animation when they know they'll have heavy computation.

But wait, the problem statement asks us to fix the issue, not add a workaround. Let me think about this more.

The fundamental issue is:
1. `stroke-dasharray` and `stroke-dashoffset` animations run on the main thread
2. When the main thread is busy, these animations stutter
3. `transform` animations are GPU-accelerated and run on the compositor thread

The solution is to add a `disableShrink` prop that:
1. When enabled, disables the `stroke-dasharray` and `stroke-dashoffset` animation
2. Keeps only the rotation animation which is GPU-accelerated

This is the approach taken by Material-UI in later versions. Let me implement this.

Looking at the current code:
- `circleIndeterminate` class has the animation for the dash
- We need to add a new class `circleDisableShrink` that overrides this animation
- We need to add a `disableShrink` prop

Let me implement this fix:

1. Add a new prop `disableShrink` to the component
2. Add a new style class that disables the shrink animation
3. Apply this class when `disableShrink` is true
</thinking>

ANALYZE AND IMPLEMENT FIX: Understanding the CircularProgress animation issue
========================================================================================================================
AGENT:
I've analyzed the CircularProgress component. The issue is that the `stroke-dasharray` and `stroke-dashoffset` CSS animations are not GPU-accelerated and run on the main thread. When the main thread is busy with heavy JavaScript computation, these animations stutter. The solution is to add a `disableShrink` prop that allows users to disable the shrinking animation, keeping only the GPU-accelerated rotation animation.
========================================================================================================================
AGENT:
Now I'll implement the fix by adding a `disableShrink` prop to the CircularProgress component:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
find: "  /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"\
  `. */\n  circleIndeterminate: {\n    animation: 'mui-progress-circular-dash 1.4s\
  \ ease-in-out infinite',\n    // Some default value that looks fine waiting for\
  \ the animation to kicks in.\n    strokeDasharray: '80px, 200px',\n    strokeDashoffset:\
  \ '0px', // Add the unit to fix a Edge 16 and below bug.\n  },"
replace: "  /* Styles applied to the `circle` svg path if `variant=\"indeterminate\"\
  `. */\n  circleIndeterminate: {\n    animation: 'mui-progress-circular-dash 1.4s\
  \ ease-in-out infinite',\n    // Some default value that looks fine waiting for\
  \ the animation to kicks in.\n    strokeDasharray: '80px, 200px',\n    strokeDashoffset:\
  \ '0px', // Add the unit to fix a Edge 16 and below bug.\n  },\n  /* Styles applied\
  \ to the `circle` svg path if `disableShrink={true}`. */\n  circleDisableShrink:\
  \ {\n    animation: 'none',\n  },"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -62,6 +62,10 @@
     // Some default value that looks fine waiting for the animation to kicks in.
     strokeDasharray: '80px, 200px',
     strokeDashoffset: '0px', // Add the unit to fix a Edge 16 and below bug.
+  },
+  /* Styles applied to the `circle` svg path if `di...
```
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
find: "function CircularProgress(props) {\n  const { classes, className, color, size,\
  \ style, thickness, value, variant, ...other } = props;"
replace: "function CircularProgress(props) {\n  const {\n    classes,\n    className,\n\
  \    color,\n    disableShrink,\n    size,\n    style,\n    thickness,\n    value,\n\
  \    variant,\n    ...other\n  } = props;"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -96,7 +96,18 @@
  * attribute to `true` on that region until it has finished loading.
  */
 function CircularProgress(props) {
-  const { classes, className, color, size, style, thickness, value, variant, ...other } = props;
+  const {
+    classes,
+    className,
+    ...
```
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
find: "        <circle\n          className={classNames(classes.circle, {\n      \
  \      [classes.circleIndeterminate]: variant === 'indeterminate',\n           \
  \ [classes.circleStatic]: variant === 'static',\n          })}\n          style={circleStyle}"
replace: "        <circle\n          className={classNames(classes.circle, {\n   \
  \         [classes.circleIndeterminate]: variant === 'indeterminate',\n        \
  \    [classes.circleStatic]: variant === 'static',\n            [classes.circleDisableShrink]:\
  \ disableShrink,\n          })}\n          style={circleStyle}"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -150,6 +150,7 @@
           className={classNames(classes.circle, {
             [classes.circleIndeterminate]: variant === 'indeterminate',
             [classes.circleStatic]: variant === 'static',
+            [classes.circleDisableShrink]: disableShrink,
           }...
```
========================================================================================================================
AGENT:
Now I need to add the prop type definition and default value:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
find: "  /**\n   * The color of the component. It supports those theme colors that\
  \ make sense for this component.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary',\
  \ 'inherit']),\n  /**\n   * The size of the circle.\n   */\n  size: PropTypes.oneOfType([PropTypes.number,\
  \ PropTypes.string]),"
replace: "  /**\n   * The color of the component. It supports those theme colors that\
  \ make sense for this component.\n   */\n  color: PropTypes.oneOf(['primary', 'secondary',\
  \ 'inherit']),\n  /**\n   * If `true`, the shrink animation is disabled.\n   * This\
  \ only works if variant is `indeterminate`.\n   */\n  disableShrink: PropTypes.bool,\n\
  \  /**\n   * The size of the circle.\n   */\n  size: PropTypes.oneOfType([PropTypes.number,\
  \ PropTypes.string]),"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -179,6 +179,11 @@
    */
   color: PropTypes.oneOf(['primary', 'secondary', 'inherit']),
   /**
+   * If `true`, the shrink animation is disabled.
+   * This only works if variant is `indeterminate`.
+   */
+  disableShrink: PropTypes.bool,
+  /**
    * The size of the c...
```
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
find: "CircularProgress.defaultProps = {\n  color: 'primary',\n  size: 40,\n  thickness:\
  \ 3.6,\n  value: 0,\n  variant: 'indeterminate',\n};"
replace: "CircularProgress.defaultProps = {\n  color: 'primary',\n  disableShrink:\
  \ false,\n  size: 40,\n  thickness: 3.6,\n  value: 0,\n  variant: 'indeterminate',\n\
  };"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -209,6 +209,7 @@
 
 CircularProgress.defaultProps = {
   color: 'primary',
+  disableShrink: false,
   size: 40,
   thickness: 3.6,
   value: 0,
...
```
========================================================================================================================
AGENT:
Now let me verify the changes by opening the file:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.js:\n\n````javascript\n   0 import React from \'react\';\n...\n   6 const SIZE = 44;\n   7 \n   8 function getRelativeValue(value, min, max) {\n...\n  13 function easeOut(t) {\n...\n  20 function easeIn(t) {\n...\n  24 export const styles = theme => ({\n...\n  58   /* Styles applied to the `circle` svg path if `variant="indeterminate"`. */\n  59   circleIndeterminate: {\n  60     animation: \'mui-progress-circular-d...
```
========================================================================================================================
AGENT:
Now let me run the tests to make sure the changes don't break anything:
========================================================================================================================
TOOL CALL (bash)
command: cd packages/material-ui && npm test -- --grep "CircularProgress" 2>&1 | head
  -100
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
npm error Lifecycle script `test` failed with error:
npm error workspace @material-ui/core@3.3.2
npm error location /workspace/packages/material-ui
npm error Missing script: "test"
npm error
npm error To see a list of scripts, run:
npm error   npm run --workspace=@material-ui/core@3.3.2...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && cat package.json | head -50

========================================================================================================================
TOOL RETURN (bash)
```
{
  "name": "@material-ui/workspace",
  "private": true,
  "author": "Material-UI Team",
  "version": "3.3.2",
  "description": "Material-UI's workspace package",
  "keywords": [
    "react",
    "react-component",
    "material design",
    "material-ui"
  ],
  "repository": {
    "type": "git",
    "url": "https://github.com/mui-org/material-ui.git"
  },
  "license": "MIT",
  "bugs": {
    "url": "https://github.com/mui-org/material-ui/issues"
  },
  "homepage": "https://material-ui.com/",
  "...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn install 2>&1 | tail -20
timeout: 180

========================================================================================================================
TOOL RETURN (bash)
```
‚û§ YN0087: Migrated your project to the latest Yarn version üöÄ

‚û§ YN0000: ¬∑ Yarn 4.9.3
‚û§ YN0000: ‚îå Resolution step
‚û§ YN0058: ‚îÇ definitelytyped-header-parser@https://github.com/Microsoft/definitelytyped-header-parser.git#commit=d957ad0bb2f4ecb60ac04f734e0b38fbc8e70b8a: Packing the package failed (exit code 1, logs can be found here: /tmp/xfs-d33a5fa5/pack.log)
‚û§ YN0000: ‚îî Completed in 7s 522ms
‚û§ YN0000: ¬∑ Failed with errors in 7s 527ms...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install 2>&1 | tail -30
timeout: 180

========================================================================================================================
TOOL RETURN (bash)
```
npm error code ERESOLVE
npm error ERESOLVE unable to resolve dependency tree
npm error
npm error While resolving: @material-ui/workspace@3.3.2
npm error Found: webpack@4.20.2
npm error node_modules/webpack
npm error   dev webpack@"4.20.2" from the root project
npm error
npm error Could not resolve dependency:
npm error peer webpack@"^2.0.0 || ^3.0.0" from karma-webpack@3.0.5
npm error node_modules/karma-webpack
npm error   dev karma-webpack@"^3.0.0" from the root project
npm error
npm error Fix ...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install --legacy-peer-deps 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm error npm warn old lockfile     '3.1.7',  '3.2.0',  '3.2.1',  '3.2.2',  '3.3.0',  '3.3.1',
npm error npm warn old lockfile     '3.3.2',  '3.3.3',  '3.3.4',  '3.3.5',  '4.0.0',  '4.0.1'
npm error npm warn old lockfile   ],
npm error npm warn old lockfile   distTags: { latest: '4.0.1' },
npm error npm warn old lockfile   defaultTag: 'latest'
npm error npm warn old lockfile }
npm error npm warn old lockfile Could not fetch metadata for flatmap-stream@0.1.0 flatmap-stream: No matching version fo...
```
========================================================================================================================
AGENT:
The package has some old dependencies that are no longer available. Let me try to run the tests directly using mocha:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && ls node_modules 2>/dev/null | head -5 || echo "node_modules
  not found"

========================================================================================================================
TOOL RETURN (bash)
```
...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && rm -rf node_modules package-lock.json yarn.lock .yarn 2>/dev/null;
  npm install --legacy-peer-deps --ignore-scripts 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm error npm warn old lockfile     '3.1.7',  '3.2.0',  '3.2.1',  '3.2.2',  '3.3.0',  '3.3.1',
npm error npm warn old lockfile     '3.3.2',  '3.3.3',  '3.3.4',  '3.3.5',  '4.0.0',  '4.0.1'
npm error npm warn old lockfile   ],
npm error npm warn old lockfile   distTags: { latest: '4.0.1' },
npm error npm warn old lockfile   defaultTag: 'latest'
npm error npm warn old lockfile }
npm error npm warn old lockfile Could not fetch metadata for flatmap-stream@0.1.0 flatmap-stream: No matching version fo...
```
========================================================================================================================
AGENT:
The package.json has a dependency on `flatmap-stream` which was a malicious package that has been removed from npm. Let me check if there's a way to work around this:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && grep -r "flatmap-stream" . 2>/dev/null | head -5

========================================================================================================================
TOOL RETURN (bash)
```
./tmp_code_4be1361118f17575d1e92d047006e56dc80a4daa26468da9fc78282fba9c94dc.bash:{ source ~/.bashrc > /dev/null 2>&1 || true; } && cd /workspace && grep -r "flatmap-stream" . 2>/dev/null | head -5...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && cat package.json | grep -A5 -B5 "event-stream" 2>/dev/null
  || echo "not found"

========================================================================================================================
TOOL RETURN (bash)
```
not found...
```
========================================================================================================================
AGENT:
The issue is likely in a transitive dependency. Let me try a different approach - let me check if there's a way to verify the code changes are correct by looking at the test file:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.test.js:\n\n````javascript\n   0 import React from \'react\';\n   1 import { assert } from \'chai\';\n   2 import { createShallow, getClasses } from \'../test-utils\';\n   3 import CircularProgress from \'./CircularProgress\';\n   4 \n   5 describe(\'<CircularProgress />\', () => {\n   6   let shallow;\n   7   let classes;\n   8 \n   9   before(() => {\n  10     shallow = createShallow({ dive: true });\n  11     cla...
```
========================================================================================================================
AGENT:
Now let me add a test for the `disableShrink` prop:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.test.js
find: "  it('should render intermediate variant by default', () => {\n    const wrapper\
  \ = shallow(<CircularProgress />);\n    assert.strictEqual(wrapper.hasClass(classes.root),\
  \ true);\n    const svg = wrapper.childAt(0);\n    assert.strictEqual(\n      svg.childAt(0).hasClass(classes.circleIndeterminate),\n\
  \      true,\n      'should have the circleIndeterminate class',\n    );\n  });"
replace: "  it('should render intermediate variant by default', () => {\n    const\
  \ wrapper = shallow(<CircularProgress />);\n    assert.strictEqual(wrapper.hasClass(classes.root),\
  \ true);\n    const svg = wrapper.childAt(0);\n    assert.strictEqual(\n      svg.childAt(0).hasClass(classes.circleIndeterminate),\n\
  \      true,\n      'should have the circleIndeterminate class',\n    );\n  });\n\
  \n  it('should render with disableShrink class when disableShrink is true', () =>\
  \ {\n    const wrapper = shallow(<CircularProgress disableShrink />);\n    assert.strictEqual(wrapper.hasClass(classes.root),\
  \ true);\n    const svg = wrapper.childAt(0);\n    const circle = svg.childAt(0);\n\
  \    assert.strictEqual(\n      circle.hasClass(classes.circleDisableShrink),\n\
  \      true,\n      'should have the circleDisableShrink class',\n    );\n    assert.strictEqual(\n\
  \      circle.hasClass(classes.circleIndeterminate),\n      true,\n      'should\
  \ have the circleIndeterminate class',\n    );\n  });"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.test.js:

--- packages/material-ui/src/CircularProgress/CircularProgress.test.js
+++ packages/material-ui/src/CircularProgress/CircularProgress.test.js
@@ -63,6 +63,23 @@
     );
   });
 
+  it('should render with disableShrink class when disableShrink is true', () => {
+    const wrapper = shallow(<CircularProgress disableShrink />);
+    assert.strictEqual(wrapper.hasClass(classes.root), true);
+    const ...
```
========================================================================================================================
AGENT:
Now let me verify the complete implementation by viewing the full file:
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
line_ranges:
- - 0
  - -1

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/CircularProgress/CircularProgress.js:

````javascript
   0 import React from 'react';
   1 import PropTypes from 'prop-types';
   2 import classNames from 'classnames';
   3 import withStyles from '../styles/withStyles';
   4 import { capitalize } from '../utils/helpers';
   5 
   6 const SIZE = 44;
   7 
   8 function getRelativeValue(value, min, max) {
   9   const clampedValue = Math.min(Math.max(min, value), max);
  10   return (c...
```
========================================================================================================================
AGENT:
The implementation looks correct. Let me also check if there's a TypeScript definition file that needs to be updated:
========================================================================================================================
TOOL CALL (grep)
content_pattern: CircularProgress
path_glob: '**/*.d.ts'

========================================================================================================================
TOOL RETURN (grep)
```
packages/material-ui/src/CircularProgress/CircularProgress.d.ts:4:export interface CircularProgressProps
packages/material-ui/src/CircularProgress/CircularProgress.d.ts:5:  extends StandardProps<React.HTMLAttributes<HTMLDivElement>, CircularProgressClassKey> {
packages/material-ui/src/CircularProgress/CircularProgress.d.ts:13:export type CircularProgressClassKey =
packages/material-ui/src/CircularProgress/CircularProgress.d.ts:24:declare const CircularProgress: React.ComponentType<CircularProgre...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.d.ts

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.d.ts:\n\n````typescript\n   0 import * as React from 'react';\n   1 import { StandardProps } from '..';\n   2 \n   3 export interface CircularProgressProps\n   4   extends StandardProps<React.HTMLAttributes<HTMLDivElement>, CircularProgressClassKey> {\n   5   color?: 'primary' | 'secondary' | 'inherit';\n   6   size?: number | string;\n   7   thickness?: number;\n   8   value?: number;\n   9   variant?: 'determinate...
```
========================================================================================================================
AGENT:
I need to update the TypeScript definition file to include the new `disableShrink` prop and `circleDisableShrink` class key:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.d.ts
find: "export interface CircularProgressProps\n  extends StandardProps<React.HTMLAttributes<HTMLDivElement>,\
  \ CircularProgressClassKey> {\n  color?: 'primary' | 'secondary' | 'inherit';\n\
  \  size?: number | string;\n  thickness?: number;\n  value?: number;\n  variant?:\
  \ 'determinate' | 'indeterminate' | 'static';\n}"
replace: "export interface CircularProgressProps\n  extends StandardProps<React.HTMLAttributes<HTMLDivElement>,\
  \ CircularProgressClassKey> {\n  color?: 'primary' | 'secondary' | 'inherit';\n\
  \  disableShrink?: boolean;\n  size?: number | string;\n  thickness?: number;\n\
  \  value?: number;\n  variant?: 'determinate' | 'indeterminate' | 'static';\n}"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.d.ts:

--- packages/material-ui/src/CircularProgress/CircularProgress.d.ts
+++ packages/material-ui/src/CircularProgress/CircularProgress.d.ts
@@ -4,6 +4,7 @@
 export interface CircularProgressProps
   extends StandardProps<React.HTMLAttributes<HTMLDivElement>, CircularProgressClassKey> {
   color?: 'primary' | 'secondary' | 'inherit';
+  disableShrink?: boolean;
   size?: number | string;
   thickness?: num...
```
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.d.ts
find: "export type CircularProgressClassKey =\n  | 'root'\n  | 'static'\n  | 'indeterminate'\n\
  \  | 'colorPrimary'\n  | 'colorSecondary'\n  | 'svg'\n  | 'circle'\n  | 'circleStatic'\n\
  \  | 'circleIndeterminate';"
replace: "export type CircularProgressClassKey =\n  | 'root'\n  | 'static'\n  | 'indeterminate'\n\
  \  | 'colorPrimary'\n  | 'colorSecondary'\n  | 'svg'\n  | 'circle'\n  | 'circleStatic'\n\
  \  | 'circleIndeterminate'\n  | 'circleDisableShrink';"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/CircularProgress/CircularProgress.d.ts:

--- packages/material-ui/src/CircularProgress/CircularProgress.d.ts
+++ packages/material-ui/src/CircularProgress/CircularProgress.d.ts
@@ -20,7 +20,8 @@
   | 'svg'
   | 'circle'
   | 'circleStatic'
-  | 'circleIndeterminate';
+  | 'circleIndeterminate'
+  | 'circleDisableShrink';
 
 declare const CircularProgress: React.ComponentType<CircularProgressProps>;
 
...
```
========================================================================================================================
AGENT:
Now let me verify the TypeScript definition file:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.d.ts

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.d.ts:\n\n````typescript\n   0 import * as React from 'react';\n   1 import { StandardProps } from '..';\n   2 \n   3 export interface CircularProgressProps\n   4   extends StandardProps<React.HTMLAttributes<HTMLDivElement>, CircularProgressClassKey> {\n   5   color?: 'primary' | 'secondary' | 'inherit';\n   6   disableShrink?: boolean;\n   7   size?: number | string;\n   8   thickness?: number;\n   9   value?: numbe...
```
========================================================================================================================
AGENT:
Now let me check if there are any documentation files that need to be updated:
========================================================================================================================
TOOL CALL (grep)
content_pattern: CircularProgress
path_glob: '**/pages/api/*.md'

========================================================================================================================
TOOL RETURN (grep)
```
pages/api/circular-progress.md:2:filename: /packages/material-ui/src/CircularProgress/CircularProgress.js
pages/api/circular-progress.md:3:title: CircularProgress API
pages/api/circular-progress.md:8:# CircularProgress
pages/api/circular-progress.md:10:<p class="description">The API documentation of the CircularProgress React component. Learn more about the properties and the CSS customization points.</p>
pages/api/circular-progress.md:13:import CircularProgress from '@material-ui/core/CircularP...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- pages/api/circular-progress.md

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened pages/api/circular-progress.md:\n\n````markdown\n   0 ---\n   1 filename: /packages/material-ui/src/CircularProgress/CircularProgress.js\n   2 title: CircularProgress API\n   3 ---\n   4 \n   5 <!--- This documentation is automatically generated, do not try to edit it. -->\n   6 \n   7 # CircularProgress\n   8 \n   9 <p class="description">The API documentation of the CircularProgress React component. Learn more about the properties and the CSS customization points.</p>\n  ...
```
========================================================================================================================
AGENT:
The documentation file is auto-generated (as noted in line 5), so I don't need to manually update it. The documentation will be regenerated when the build script runs.

Let me also check if there are any demo files that might need updating to showcase the new feature:
========================================================================================================================
TOOL CALL (grep)
content_pattern: CircularProgress
path_glob: '**/demos/progress/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
docs/src/pages/demos/progress/CircularDeterminate.js:4:import CircularProgress from '@material-ui/core/CircularProgress';
docs/src/pages/demos/progress/CircularDeterminate.js:34:        <CircularProgress
docs/src/pages/demos/progress/CircularDeterminate.js:39:        <CircularProgress
docs/src/pages/demos/progress/CircularDeterminate.js:45:        <CircularProgress
docs/src/pages/demos/progress/CircularDeterminate.js:51:        <CircularProgress
docs/src/pages/demos/progress/DelayingAppearance.j...
```
========================================================================================================================
AGENT:
Let me check the progress demo folder to see what files exist:
========================================================================================================================
TOOL CALL (expand_folder)
folder_path: docs/src/pages/demos/progress

========================================================================================================================
TOOL RETURN (expand_folder)
```
docs/:

docs/src/:

docs/src/pages/:

docs/src/pages/demos/:

docs/src/pages/demos/progress/:
CircularDeterminate.js
CircularIndeterminate.js
CircularIntegration.js
CircularStatic.js
DelayingAppearance.js
LinearBuffer.js
LinearDeterminate.js
LinearIndeterminate.js
LinearQuery.js
progress-zh.md
progress.md...
```
========================================================================================================================
AGENT:
Let me check the progress.md file to see the documentation structure:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- docs/src/pages/demos/progress/progress.md

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened docs/src/pages/demos/progress/progress.md:\n\n````markdown\n   0 ---\n   1 title: Circular Progress, Linear Progress React component\n   2 components: CircularProgress, LinearProgress\n   3 ---\n   4 \n   5 # Progress\n   6 \n   7 <p class="description">Progress indicators express an unspecified wait time or display the length of a process.</p>\n   8 \n   9 [Progress indicators](https://material.io/design/components/progress-indicators.html) inform users about the status of...
```
========================================================================================================================
AGENT:
<thinking>
I see that the documentation already mentions the limitation at lines 93-100. Now I should update this section to mention the new `disableShrink` prop as a workaround. Let me update the documentation to include information about the `disableShrink` prop.
</thinking>

I should update the documentation to mention the `disableShrink` prop as a solution to the animation issue under heavy load:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: docs/src/pages/demos/progress/progress.md
find: '## Limitations


  Under heavy load, you might lose the stroke dash animation or see random CircularProgress
  ring widths.

  You should run processor intensive operations in a web worker or by batch in order
  not to block the main rendering thread.


  ![heavy load](/static/images/progress/heavy-load.gif)


  See https://github.com/mui-org/material-ui/issues/10327'
replace: '## Limitations


  Under heavy load, you might lose the stroke dash animation or see random CircularProgress
  ring widths.

  You should run processor intensive operations in a web worker or by batch in order
  not to block the main rendering thread.


  ![heavy load](/static/images/progress/heavy-load.gif)


  When it''s not possible, you can leverage the `disableShrink` property to mitigate
  the issue.

  The animation only relies on the CSS transform property in that configuration.


  {{\"demo\": \"pages/demos/progress/CircularUnderLoad.js\"}}


  See https://github.com/mui-org/material-ui/issues/10327'

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in docs/src/pages/demos/progress/progress.md:

--- docs/src/pages/demos/progress/progress.md
+++ docs/src/pages/demos/progress/progress.md
@@ -98,4 +98,9 @@
 
 ![heavy load](/static/images/progress/heavy-load.gif)
 
+When it's not possible, you can leverage the `disableShrink` property to mitigate the issue.
+The animation only relies on the CSS transform property in that configuration.
+
+{{\"demo\": \"pages/demos/progress/CircularUnderLoad.js\"}}
+
 See https://githu...
```
========================================================================================================================
AGENT:
Now let me create the demo file for the `disableShrink` feature:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- docs/src/pages/demos/progress/CircularIndeterminate.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened docs/src/pages/demos/progress/CircularIndeterminate.js:\n\n````javascript\n   0 import React from \'react\';\n   1 import PropTypes from \'prop-types\';\n   2 import { withStyles } from \'@material-ui/core/styles\';\n   3 import CircularProgress from \'@material-ui/core/CircularProgress\';\n   4 import purple from \'@material-ui/core/colors/purple\';\n   5 \n   6 const styles = theme => ({\n   7   progress: {\n   8     margin: theme.spacing.unit * 2,\n   9   },\n  10 });\n ...
```
========================================================================================================================
TOOL CALL (create_file)
file_path: docs/src/pages/demos/progress/CircularUnderLoad.js
initial_content: "import React from 'react';\nimport PropTypes from 'prop-types';\n\
  import { withStyles } from '@material-ui/core/styles';\nimport CircularProgress\
  \ from '@material-ui/core/CircularProgress';\n\nconst styles = theme => ({\n  progress:\
  \ {\n    margin: theme.spacing.unit * 2,\n  },\n});\n\nfunction CircularUnderLoad(props)\
  \ {\n  const { classes } = props;\n  return (\n    <div>\n      <CircularProgress\
  \ className={classes.progress} disableShrink />\n    </div>\n  );\n}\n\nCircularUnderLoad.propTypes\
  \ = {\n  classes: PropTypes.object.isRequired,\n};\n\nexport default withStyles(styles)(CircularUnderLoad);\n"

========================================================================================================================
TOOL RETURN (create_file)
```
Successfully created docs/src/pages/demos/progress/CircularUnderLoad.js....
```
========================================================================================================================
AGENT:
Now let me also update the Chinese translation of the documentation:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- docs/src/pages/demos/progress/progress-zh.md

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened docs/src/pages/demos/progress/progress-zh.md:\n\n````markdown\n   0 ---\n   1 title: ÁéØÂΩ¢„ÄÅÁ∫øË£ÖËøõÂ∫¶ React ÁªÑ‰ª∂\n   2 components: CircularProgress, LinearProgress\n   3 ---\n   4 # ËøõÂ∫¶\n   5 \n   6 <p class="description">ËøõÂ∫¶ÊåáÁ§∫Âô®Áî®‰ª•Ë°®Á§∫‰∏Ä‰∏™‰∏çÁ°ÆÂÆöÁöÑÁ≠âÂæÖÊó∂Èó¥ÊàñÊòæÁ§∫‰∏Ä‰∏™Â§ÑÁêÜËøáÁ®ãÁöÑÊó∂Èó¥ÈïøÁü≠„ÄÇ</p>\n   7 \n   8 [ËøõÂ∫¶ÊåáÁ§∫Âô®](https://material.io/design/components/progress-indicators.html) ÈÄöÁü•Áî®Êà∑ÂΩìÂâçÂ§ÑÁêÜËøáÁ®ãÁöÑÁä∂ÊÄÅÔºå‰æãÂ¶ÇÂä†ËΩΩ‰∏Ä‰∏™Â∫îÁî®ÔºåÊèê‰∫§‰∏Ä‰∏™Ë°®ÂçïÊàñ‰øùÂ≠ò‰∏Ä‰∫õÊõ¥Êñ∞„ÄÇ ÂÆÉ‰ª¨‰∏éÂ∫îÁî®Á®ãÂ∫èÁä∂ÊÄÅËøõË°åÈÄö‰ø°Âπ∂ÊåáÁ§∫ÂèØÁî®ÁöÑÊìç‰ΩúÔºå‰æãÂ¶ÇÁî®Êà∑ÊòØÂê¶ÂèØ‰ªéÂΩìÂâçÈ°µÈù¢Á¶ªÂºÄ„ÄÇ\n   9 \n  10 **Á°ÆÂÆöÁöÑ** ÊåáÁ§∫Âô®ÊòæÁ§∫‰∏Ä‰∏™Êìç‰ΩúÊ∂àËÄóÂ§öÈïøÊó∂Èó¥„ÄÇ\n  11 \n  12 **Êú™Á°ÆÂÆö**ÊåáÁ§∫Âô®ÂèØËßÜÂåñ‰∏Ä‰∏™‰∏çÁ°Æ...
```
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: docs/src/pages/demos/progress/progress-zh.md
find: "## \u5C40\u9650\u6027\n\n\u5728\u7279\u522B\u6162\u7684\u52A0\u8F7D\u65F6\uFF0C\
  \u53EF\u80FD\u4E22\u5931stroke dash\u52A8\u753B\u6216\u770B\u5230\u73AF\u5F62\u8FDB\
  \u5EA6\u7684\u534A\u5F84\u968F\u673A\u7684\u60C5\u51B5\u3002 \u4E3A\u4E86\u4E0D\u963B\
  \u585E\u4E3B\u6E32\u67D3\u8FDB\u7A0B\uFF0C\u5E94\u8BE5\u5728web worker\u4E2D\u6216\
  \u6279\u5904\u7406\u4E2D\u6267\u884C\u5BC6\u96C6\u64CD\u4F5C\u7684\u5904\u7406\u5668\
  \u3002\n\n![\u6162\u52A0\u8F7D](/static/images/progress/heavy-load.gif)\n\n\u89C1\
  \ https://github.com/mui-org/material-ui/issues/10327"
replace: "## \u5C40\u9650\u6027\n\n\u5728\u7279\u522B\u6162\u7684\u52A0\u8F7D\u65F6\
  \uFF0C\u53EF\u80FD\u4E22\u5931stroke dash\u52A8\u753B\u6216\u770B\u5230\u73AF\u5F62\
  \u8FDB\u5EA6\u7684\u534A\u5F84\u968F\u673A\u7684\u60C5\u51B5\u3002 \u4E3A\u4E86\u4E0D\
  \u963B\u585E\u4E3B\u6E32\u67D3\u8FDB\u7A0B\uFF0C\u5E94\u8BE5\u5728web worker\u4E2D\
  \u6216\u6279\u5904\u7406\u4E2D\u6267\u884C\u5BC6\u96C6\u64CD\u4F5C\u7684\u5904\u7406\
  \u5668\u3002\n\n![\u6162\u52A0\u8F7D](/static/images/progress/heavy-load.gif)\n\n\
  \u5F53\u8FD9\u4E0D\u53EF\u80FD\u65F6\uFF0C\u60A8\u53EF\u4EE5\u5229\u7528 `disableShrink`\
  \ \u5C5E\u6027\u6765\u7F13\u89E3\u8FD9\u4E2A\u95EE\u9898\u3002\n\u5728\u8BE5\u914D\
  \u7F6E\u4E2D\uFF0C\u52A8\u753B\u4EC5\u4F9D\u8D56\u4E8ECSS transform\u5C5E\u6027\u3002\
  \n\n{{\\\"demo\\\": \\\"pages/demos/progress/CircularUnderLoad.js\\\"}}\n\n\u89C1\
  \ https://github.com/mui-org/material-ui/issues/10327"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in docs/src/pages/demos/progress/progress-zh.md:

--- docs/src/pages/demos/progress/progress-zh.md
+++ docs/src/pages/demos/progress/progress-zh.md
@@ -93,4 +93,9 @@
 
 ![ÊÖ¢Âä†ËΩΩ](/static/images/progress/heavy-load.gif)
 
+ÂΩìËøô‰∏çÂèØËÉΩÊó∂ÔºåÊÇ®ÂèØ‰ª•Âà©Áî® `disableShrink` Â±ûÊÄßÊù•ÁºìËß£Ëøô‰∏™ÈóÆÈ¢ò„ÄÇ
+Âú®ËØ•ÈÖçÁΩÆ‰∏≠ÔºåÂä®Áîª‰ªÖ‰æùËµñ‰∫éCSS transformÂ±ûÊÄß„ÄÇ
+
+{{\"demo\": \"pages/demos/progress/CircularUnderLoad.js\"}}
+
 ËßÅ https://github.com/mui-org/material-ui/issues/10327...
```
========================================================================================================================
AGENT:
Now let me verify all the changes I've made by reviewing the key files:
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/CircularProgress/CircularProgress.js
line_ranges:
- - 0
  - -1

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/CircularProgress/CircularProgress.js:

````javascript
   0 import React from 'react';
   1 import PropTypes from 'prop-types';
   2 import classNames from 'classnames';
   3 import withStyles from '../styles/withStyles';
   4 import { capitalize } from '../utils/helpers';
   5 
   6 const SIZE = 44;
   7 
   8 function getRelativeValue(value, min, max) {
   9   const clampedValue = Math.min(Math.max(min, value), max);
  10   return (c...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/CircularProgress/CircularProgress.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/CircularProgress/CircularProgress.test.js:\n\n````javascript\n   0 import React from \'react\';\n   1 import { assert } from \'chai\';\n   2 import { createShallow, getClasses } from \'../test-utils\';\n   3 import CircularProgress from \'./CircularProgress\';\n   4 \n   5 describe(\'<CircularProgress />\', () => {\n   6   let shallow;\n   7   let classes;\n   8 \n   9   before(() => {\n  10     shallow = createShallow({ dive: true });\n  11     cla...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- docs/src/pages/demos/progress/CircularUnderLoad.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened docs/src/pages/demos/progress/CircularUnderLoad.js:\n\n````javascript\n   0 import React from 'react';\n   1 import PropTypes from 'prop-types';\n   2 import { withStyles } from '@material-ui/core/styles';\n   3 import CircularProgress from '@material-ui/core/CircularProgress';\n   4 \n   5 const styles = theme => ({\n   6   progress: {\n   7     margin: theme.spacing.unit * 2,\n   8   },\n   9 });\n  10 \n  11 function CircularUnderLoad(props) {\n  12   const { classes } =...
```
========================================================================================================================
AGENT:
All the changes look good. Let me summarize what I've done:

## Summary of Changes

1. **packages/material-ui/src/CircularProgress/CircularProgress.js**:
   - Added a new CSS class `circleDisableShrink` that sets `animation: 'none'` to disable the shrink animation
   - Added `disableShrink` prop to the component's destructured props
   - Applied the `circleDisableShrink` class to the circle element when `disableShrink` is true
   - Added PropTypes definition for `disableShrink` with documentation
   - Added default value `disableShrink: false` to defaultProps

2. **packages/material-ui/src/CircularProgress/CircularProgress.d.ts**:
   - Added `disableShrink?: boolean` to the `CircularProgressProps` interface
   - Added `'circleDisableShrink'` to the `CircularProgressClassKey` type

3. **packages/material-ui/src/CircularProgress/CircularProgress.test.js**:
   - Added a test case to verify that the `circleDisableShrink` class is applied when `disableShrink` is true

4. **docs/src/pages/demos/progress/progress.md**:
   - Updated the Limitations section to mention the `disableShrink` prop as a workaround
   - Added a demo reference for the new `CircularUnderLoad.js` component

5. **docs/src/pages/demos/progress/progress-zh.md**:
   - Updated the Chinese translation with the same information

6. **docs/src/pages/demos/progress/CircularUnderLoad.js** (new file):
   - Created a demo component showing the usage of `disableShrink` prop
========================================================================================================================
AGENT:
I have implemented the fix for the CircularProgress animation issue under load. The solution adds a `disableShrink` prop that disables the stroke-dasharray/stroke-dashoffset animation (which runs on the main thread and stutters under load), keeping only the GPU-accelerated rotation animation. Now verifying the changes are complete and correct.
========================================================================================================================
AGENT:
Let me verify all the files one more time to ensure the changes are complete:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff --stat

========================================================================================================================
TOOL RETURN (bash)
```
 docs/src/pages/demos/progress/progress-zh.md       |     5 +
 docs/src/pages/demos/progress/progress.md          |     5 +
 .../src/CircularProgress/CircularProgress.d.ts     |     4 +-
 .../src/CircularProgress/CircularProgress.js       |    24 +-
 .../src/CircularProgress/CircularProgress.test.js  |    17 +
 yarn.lock                                          | 12381 -------------------
 6 files changed, 53 insertions(+), 12383 deletions(-)...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff -- packages/material-ui/src/CircularProgress/CircularProgress.js

========================================================================================================================
TOOL RETURN (bash)
```
diff --git a/packages/material-ui/src/CircularProgress/CircularProgress.js b/packages/material-ui/src/CircularProgress/CircularProgress.js
index bf32f77980..898a5ebaa4 100644
--- a/packages/material-ui/src/CircularProgress/CircularProgress.js
+++ b/packages/material-ui/src/CircularProgress/CircularProgress.js
@@ -63,6 +63,10 @@ export const styles = theme => ({
     strokeDasharray: '80px, 200px',
     strokeDashoffset: '0px', // Add the unit to fix a Edge 16 and below bug.
   },
+  /* Styles ap...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff -- packages/material-ui/src/CircularProgress/CircularProgress.d.ts

========================================================================================================================
TOOL RETURN (bash)
```
diff --git a/packages/material-ui/src/CircularProgress/CircularProgress.d.ts b/packages/material-ui/src/CircularProgress/CircularProgress.d.ts
index 423791d43d..898764051f 100644
--- a/packages/material-ui/src/CircularProgress/CircularProgress.d.ts
+++ b/packages/material-ui/src/CircularProgress/CircularProgress.d.ts
@@ -4,6 +4,7 @@ import { StandardProps } from '..';
 export interface CircularProgressProps
   extends StandardProps<React.HTMLAttributes<HTMLDivElement>, CircularProgressClassKey> ...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff -- packages/material-ui/src/CircularProgress/CircularProgress.test.js

========================================================================================================================
TOOL RETURN (bash)
```
diff --git a/packages/material-ui/src/CircularProgress/CircularProgress.test.js b/packages/material-ui/src/CircularProgress/CircularProgress.test.js
index 3a2ee749c4..e9f1066244 100644
--- a/packages/material-ui/src/CircularProgress/CircularProgress.test.js
+++ b/packages/material-ui/src/CircularProgress/CircularProgress.test.js
@@ -63,6 +63,23 @@ describe('<CircularProgress />', () => {
     );
   });
 
+  it('should render with disableShrink class when disableShrink is true', () => {
+    cons...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff -- docs/src/pages/demos/progress/progress.md

========================================================================================================================
TOOL RETURN (bash)
```
diff --git a/docs/src/pages/demos/progress/progress.md b/docs/src/pages/demos/progress/progress.md
index 3d59c98af4..00d63b3313 100644
--- a/docs/src/pages/demos/progress/progress.md
+++ b/docs/src/pages/demos/progress/progress.md
@@ -98,4 +98,9 @@ You should run processor intensive operations in a web worker or by batch in ord
 
 ![heavy load](/static/images/progress/heavy-load.gif)
 
+When it's not possible, you can leverage the `disableShrink` property to mitigate the issue.
+The animation on...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && cat docs/src/pages/demos/progress/CircularUnderLoad.js

========================================================================================================================
TOOL RETURN (bash)
```
import React from 'react';
import PropTypes from 'prop-types';
import { withStyles } from '@material-ui/core/styles';
import CircularProgress from '@material-ui/core/CircularProgress';

const styles = theme => ({
  progress: {
    margin: theme.spacing.unit * 2,
  },
});

function CircularUnderLoad(props) {
  const { classes } = props;
  return (
    <div>
      <CircularProgress className={classes.progress} disableShrink />
    </div>
  );
}

CircularUnderLoad.propTypes = {
  classes: PropTypes...
```
========================================================================================================================
AGENT:
All the changes are in place. Let me verify the yarn.lock file deletion was unintentional and restore it if needed:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git checkout yarn.lock 2>&1 || echo "yarn.lock was not tracked
  or already restored"

========================================================================================================================
TOOL RETURN (bash)
```
Updated 1 path from the index...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git diff --stat

========================================================================================================================
TOOL RETURN (bash)
```
 docs/src/pages/demos/progress/progress-zh.md       |  5 +++++
 docs/src/pages/demos/progress/progress.md          |  5 +++++
 .../src/CircularProgress/CircularProgress.d.ts     |  4 +++-
 .../src/CircularProgress/CircularProgress.js       | 24 +++++++++++++++++++++-
 .../src/CircularProgress/CircularProgress.test.js  | 17 +++++++++++++++
 5 files changed, 53 insertions(+), 2 deletions(-)...
```
========================================================================================================================
AGENT:
Now let me also check if the new demo file was created:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && git status --short

========================================================================================================================
TOOL RETURN (bash)
```
 M docs/src/pages/demos/progress/progress-zh.md
 M docs/src/pages/demos/progress/progress.md
 M packages/material-ui/src/CircularProgress/CircularProgress.d.ts
 M packages/material-ui/src/CircularProgress/CircularProgress.js
 M packages/material-ui/src/CircularProgress/CircularProgress.test.js
?? .yarnrc.yml
?? docs/src/pages/demos/progress/CircularUnderLoad.js
?? tmp_code_cd4db0cd452b0d07c758be7fb1ba9c47991d60fc2277b3841c6b7a568f6c409a.bash...
```
========================================================================================================================
AGENT:
All the changes are in place. Let me clean up the temporary files:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && rm -f tmp_code_*.bash .yarnrc.yml 2>/dev/null; git status
  --short

========================================================================================================================
TOOL RETURN (bash)
```
 M docs/src/pages/demos/progress/progress-zh.md
 M docs/src/pages/demos/progress/progress.md
 M packages/material-ui/src/CircularProgress/CircularProgress.d.ts
 M packages/material-ui/src/CircularProgress/CircularProgress.js
 M packages/material-ui/src/CircularProgress/CircularProgress.test.js
?? docs/src/pages/demos/progress/CircularUnderLoad.js...
```
========================================================================================================================
AGENT:
All the changes are complete. Let me provide a final summary:
========================================================================================================================
AGENT:
Successfully resolved the CircularProgress animation issue under load by implementing a `disableShrink` prop.

## Problem
The CircularProgress component's shrink animation (which animates `stroke-dasharray` and `stroke-dashoffset`) runs on the main thread and stutters when the main thread is busy with heavy JavaScript computation. Only the rotation animation (which uses `transform`) is GPU-accelerated and runs smoothly.

## Solution
Added a `disableShrink` prop that, when set to `true`, disables the shrink animation by setting `animation: 'none'` on the circle element. This leaves only the GPU-accelerated rotation animation, which runs smoothly even under heavy load.

## Changes Made
1. **CircularProgress.js**: Added `circleDisableShrink` CSS class, `disableShrink` prop, PropTypes, and default value
2. **CircularProgress.d.ts**: Added TypeScript definitions for the new prop and class key
3. **CircularProgress.test.js**: Added test case for the `disableShrink` prop
4. **progress.md & progress-zh.md**: Updated documentation to mention the `disableShrink` workaround
5. **CircularUnderLoad.js**: Created new demo component showing usage of `disableShrink`

## Usage
```jsx
<CircularProgress disableShrink />
```

This allows users to opt-in to a smoother animation experience when they know their application will have heavy computation on the main thread.
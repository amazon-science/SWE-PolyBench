########################################################################################################################
PHASE 1
########################################################################################################################
========================================================================================================================
AGENT:
I will start by viewing the workspace to understand its structure and contents. This will help me identify key files and locations that may be relevant to the task.
========================================================================================================================
USER PROMPT:
Resolve the following problem statement:

<problem_statement>
[Button] Disabled classes not added to the button
<!-- Provide a general summary of the issue in the Title above -->

<!--
  Thank you very much for contributing to Material-UI by creating an issue! â¤ï¸
  To avoid duplicate issues we ask you to check off the following list.
-->

<!-- Checked checkbox should look like this: [x] -->

- [x] The issue is present in the latest release.
- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.

## Current Behavior ðŸ˜¯

"my-disabled" class not added to the Button.

## Steps to Reproduce ðŸ•¹

https://codesandbox.io/s/material-ui-issue-forked-12phu?file=/src/Demo.js

```js
<Button disabled classes={{ disabled: "my-disabled" }}>A button</Button>
```


</problem_statement>

Do not stop until you have made code changes that resolve the problem statement. Do not ask for clarifications.

NEVER attempt to find the solution to the problem statement by searching future commits or branches in the repository.
========================================================================================================================
AGENT:
Starting to explore the workspace to understand the issue with disabled classes not being added to the Button component.
========================================================================================================================
AGENT:
STEP 1: EXPLORE THE WORKSPACE

<thinking>
The problem statement indicates that when a Button component is disabled and a custom class is passed via `classes={{ disabled: "my-disabled" }}`, the "my-disabled" class is not being added to the Button.

Let me first explore the Button component to understand its implementation and find where the disabled class should be applied.

I'll start by looking at the Button component in the packages/material-ui/src directory.
</thinking>
========================================================================================================================
TOOL CALL (expand_folder)
folder_path: packages/material-ui/src

========================================================================================================================
TOOL RETURN (expand_folder)
```
packages/:

packages/material-ui/:

packages/material-ui/src/:
index.d.ts
index.js
index.test.js
OverridableComponent.d.ts

packages/material-ui/src/Accordion/:
Accordion.d.ts
Accordion.js
Accordion.spec.tsx
Accordion.test.js
accordionClasses.d.ts
accordionClasses.js
AccordionContext.js
index.d.ts
index.js

packages/material-ui/src/AccordionActions/:
AccordionActions.d.ts
AccordionActions.js
AccordionActions.test.js
accordionActionsClasses.d.ts
accordionActionsClasses.js
index.d.ts
index.js

pac...
```
========================================================================================================================
AGENT:
<thinking>
Now I can see the Button component is in `packages/material-ui/src/Button/`. Let me open the Button.js file to understand how it handles the disabled class.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/Button/Button.js
- packages/material-ui/src/Button/buttonClasses.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui/src/Button/Button.js:\n\n````javascript\n   0 import * as React from 'react';\n...\n  12 const overridesResolver = (props, styles) => {\n...\n  35 const useUtilityClasses = (styleProps) => {\n...\n  57 const commonIconStyles = (styleProps) => ({\n...\n  75 const ButtonRoot = experimentalStyled(\n...\n 252 const ButtonLabel = experimentalStyled(\n...\n 266 const ButtonStartIcon = experimentalStyled(\n...\n 283 const ButtonEndIcon = experimentalStyled(\n....
```
========================================================================================================================
AGENT:
<thinking>
I can see that `buttonClasses.js` includes 'disabled' in the list of classes (line 23). Now let me expand the Button.js file to see how the disabled class is being handled, particularly in the `useUtilityClasses` function and the component itself.
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Button/Button.js
patterns:
- useUtilityClasses
- overridesResolver
- Button

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Button/Button.js:

````javascript
   0 import * as React from 'react';
   1 import PropTypes from 'prop-types';
   2 import clsx from 'clsx';
   3 import { deepmerge } from '@material-ui/utils';
   4 import { unstable_composeClasses as composeClasses } from '@material-ui/unstyled';
   5 import experimentalStyled from '../styles/experimentalStyled';
   6 import useThemeProps from '../styles/useThemeProps';
   7 import { alpha } from '....
```
========================================================================================================================
AGENT:
<thinking>
Now I can see the issue. Looking at the `useUtilityClasses` function (lines 35-55), I can see that the `disabled` class is NOT being included in the `slots.root` array. The function only includes:
- 'root'
- variant
- `${variant}${capitalize(color)}`
- `size${capitalize(size)}`
- `${variant}Size${capitalize(size)}`
- color === 'inherit' && 'colorInherit'
- disableElevation && 'disableElevation'
- fullWidth && 'fullWidth'

But it's missing `disabled && 'disabled'` in the slots.root array. This is why the custom disabled class passed via `classes={{ disabled: "my-disabled" }}` is not being applied.

Let me also check how other components handle this. Let me look at the ButtonBase component to see if it handles the disabled class:
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/ButtonBase/ButtonBase.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui/src/ButtonBase/ButtonBase.js:\n\n````javascript\n   0 import * as React from 'react';\n...\n  13 const overridesResolver = (props, styles) => styles.root || {};\n  14 \n  15 const useUtilityClasses = (styleProps) => {\n...\n  31 export const ButtonBaseRoot = experimentalStyled(\n...\n  74 const ButtonBase = React.forwardRef(function ButtonBase(inProps, ref) {\n...\n 141   function useRippleHandler(rippleAction, eventCallback, skipRippleAction = disableT...
```
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/ButtonBase/ButtonBase.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/ButtonBase/ButtonBase.js:

````javascript
   0 import * as React from 'react';
...
  13 const overridesResolver = (props, styles) => styles.root || {};
  14 
  15 const useUtilityClasses = (styleProps) => {
  16   const { disabled, focusVisible, focusVisibleClassName, classes } = styleProps;
  17 
  18   const slots = {
  19     root: ['root', disabled && 'disabled', focusVisible && 'focusVisible'],
  20   };
  21 
  22   const compos...
```
========================================================================================================================
AGENT:
<thinking>
Now I understand the issue better. Looking at `ButtonBase.js`, I can see that it correctly includes `disabled && 'disabled'` in the slots.root array (line 19):

```javascript
const slots = {
  root: ['root', disabled && 'disabled', focusVisible && 'focusVisible'],
};
```

However, in `Button.js`, the `useUtilityClasses` function (lines 35-55) does NOT include `disabled && 'disabled'` in the slots.root array:

```javascript
const slots = {
  root: [
    'root',
    variant,
    `${variant}${capitalize(color)}`,
    `size${capitalize(size)}`,
    `${variant}Size${capitalize(size)}`,
    color === 'inherit' && 'colorInherit',
    disableElevation && 'disableElevation',
    fullWidth && 'fullWidth',
  ],
  label: ['label'],
  startIcon: ['startIcon', `iconSize${capitalize(size)}`],
  endIcon: ['endIcon', `iconSize${capitalize(size)}`],
};
```

The issue is that when the Button component passes `classes` to `useUtilityClasses`, the `disabled` class from the user's `classes` prop is not being composed because `disabled` is not in the slots.root array.

The fix is to add `disabled && 'disabled'` to the slots.root array in the Button component's `useUtilityClasses` function.

Let me also check if `disabled` is being extracted from `styleProps` in the Button's `useUtilityClasses` function. Looking at line 36:

```javascript
const { color, disableElevation, fullWidth, size, variant, classes } = styleProps;
```

I see that `disabled` is NOT being extracted from `styleProps`. I need to add it.

Let me make the fix:
</thinking>

STEP 2: MODIFY CODE
========================================================================================================================
AGENT:
Found the issue: In Button.js, the useUtilityClasses function doesn't include 'disabled' in the slots.root array, so custom disabled classes passed via the classes prop are not applied. I will now fix this by adding 'disabled && "disabled"' to the slots.root array.
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/Button/Button.js
find: "const useUtilityClasses = (styleProps) => {\n  const { color, disableElevation,\
  \ fullWidth, size, variant, classes } = styleProps;\n\n  const slots = {\n    root:\
  \ [\n      'root',\n      variant,\n      `${variant}${capitalize(color)}`,\n  \
  \    `size${capitalize(size)}`,\n      `${variant}Size${capitalize(size)}`,\n  \
  \    color === 'inherit' && 'colorInherit',\n      disableElevation && 'disableElevation',\n\
  \      fullWidth && 'fullWidth',\n    ],\n    label: ['label'],\n    startIcon:\
  \ ['startIcon', `iconSize${capitalize(size)}`],\n    endIcon: ['endIcon', `iconSize${capitalize(size)}`],\n\
  \  };\n\n  return composeClasses(slots, getButtonUtilityClass, classes);\n};"
replace: "const useUtilityClasses = (styleProps) => {\n  const { color, disableElevation,\
  \ fullWidth, size, variant, disabled, classes } = styleProps;\n\n  const slots =\
  \ {\n    root: [\n      'root',\n      variant,\n      `${variant}${capitalize(color)}`,\n\
  \      `size${capitalize(size)}`,\n      `${variant}Size${capitalize(size)}`,\n\
  \      color === 'inherit' && 'colorInherit',\n      disableElevation && 'disableElevation',\n\
  \      fullWidth && 'fullWidth',\n      disabled && 'disabled',\n    ],\n    label:\
  \ ['label'],\n    startIcon: ['startIcon', `iconSize${capitalize(size)}`],\n   \
  \ endIcon: ['endIcon', `iconSize${capitalize(size)}`],\n  };\n\n  return composeClasses(slots,\
  \ getButtonUtilityClass, classes);\n};"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/Button/Button.js:

--- packages/material-ui/src/Button/Button.js
+++ packages/material-ui/src/Button/Button.js
@@ -34,7 +34,7 @@
 };
 
 const useUtilityClasses = (styleProps) => {
-  const { color, disableElevation, fullWidth, size, variant, classes } = styleProps;
+  const { color, disableElevation, fullWidth, size, variant, disabled, classes } = styleProps;
 
   const slots = {
     root: [
@@ -46,6 +46,7 @@
       color === 'inherit' && '...
```
========================================================================================================================
AGENT:
STEP 3: VERIFY THE FIX

<thinking>
The fix has been applied. Now I need to verify that:
1. The change is correct by reviewing the modified code
2. The tests pass
3. The fix works as expected

Let me first review the modified code to ensure it's correct.
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Button/Button.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Button/Button.js:

````javascript
   0 import * as React from 'react';
   1 import PropTypes from 'prop-types';
   2 import clsx from 'clsx';
   3 import { deepmerge } from '@material-ui/utils';
   4 import { unstable_composeClasses as composeClasses } from '@material-ui/unstyled';
   5 import experimentalStyled from '../styles/experimentalStyled';
   6 import useThemeProps from '../styles/useThemeProps';
   7 import { alpha } from '....
```
========================================================================================================================
AGENT:
<thinking>
The fix looks correct. Now let me run the Button tests to make sure the change doesn't break anything.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn install 2>&1 | tail -20
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
âž¤ YN0057: â”‚ root-workspace-0b6124: The override for '**/@babel/plugin-proposal-nullish-coalescing-operator' includes a glob pattern. Glob patterns have been removed since their behaviours don't match what you'd expect. Set the override to '@babel/plugin-proposal-nullish-coalescing-operator' instead.
âž¤ YN0057: â”‚ root-workspace-0b6124: The override for '**/@babel/plugin-proposal-numeric-separator' includes a glob pattern. Glob patterns have been removed since their behaviours don't match what you'...
```
========================================================================================================================
AGENT:
<thinking>
The yarn install failed due to some dependency issues. Let me try using the old yarn version that's in the repository.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && .yarn/releases/yarn-1.22.10.js install 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```

 Timeout...
```
========================================================================================================================
TOOL CALL (bash)
command: 1

========================================================================================================================
TOOL RETURN (bash)
```
Error executing tool bash: 'No background process found with PID 1'...
```
========================================================================================================================
TOOL CALL (bash)
command: ps aux | grep yarn

========================================================================================================================
TOOL RETURN (bash)
```
root       822  0.0  0.0   3552  1776 ?        S    03:15   0:00 grep yarn...
```
========================================================================================================================
AGENT:
<thinking>
The yarn process seems to have finished. Let me check if node_modules exists and try to run the tests.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && ls -la node_modules 2>&1 | head -20

========================================================================================================================
TOOL RETURN (bash)
```
total 0
drwxr-xr-x 1500 root root 48000 Dec 12 03:14 .
drwxr-xr-x   48 root root  1536 Dec 12 03:15 ..
drwxr-xr-x  115 root root  3680 Dec 12 03:13 @babel
drwxr-xr-x    7 root root   224 Dec 12 03:13 @chakra-ui
drwxr-xr-x    7 root root   224 Dec 12 03:13 @date-io
drwxr-xr-x    5 root root   160 Dec 12 03:13 @definitelytyped
drwxr-xr-x    3 root root    96 Dec 12 03:13 @discoveryjs
drwxr-xr-x   19 root root   608 Dec 12 03:13 @emotion
drwxr-xr-x    3 root root    96 Dec 12 03:13 @eslint
drwxr-xr...
```
========================================================================================================================
AGENT:
<thinking>
Good, node_modules exists. Let me try to run the Button tests to verify the fix.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn test:unit packages/material-ui/src/Button/Button.test.js
  2>&1 | tail -100
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Internal Error: root-workspace-0b6124@workspace:.: This package doesn't seem to be present in your lockfile; run "yarn install" to update the lockfile
    at MT.getCandidates (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:204:4607)
    at rm.getCandidates (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:141:1311)
    at /root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:209:8420
    at GE (/root/.cache/node/corepack/v1/yarn/4.9.3/yarn.js:140:45033)
    at mt (/root/.cache/node/corepack/v1/yarn...
```
========================================================================================================================
AGENT:
<thinking>
The modern yarn version is causing issues. Let me use the old yarn version that's bundled with the project.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && node .yarn/releases/yarn-1.22.10.js test:unit packages/material-ui/src/Button/Button.test.js
  2>&1 | tail -100
timeout: 180

========================================================================================================================
TOOL RETURN (bash)
```
yarn run v1.22.10
$ cross-env NODE_ENV=test mocha 'packages/**/*.test.{js,ts,tsx}' 'docs/**/*.test.{js,ts,tsx}' 'scripts/**/*.test.{js,ts,tsx}' 'test/utils/**/*.test.{js,ts,tsx}' packages/material-ui/src/Button/Button.test.js
/bin/sh: 1: cross-env: not found
error Command failed with exit code 127.
info Visit https://yarnpkg.com/en/docs/cli/run for documentation about this command....
```
========================================================================================================================
AGENT:
<thinking>
The dependencies are not installed properly. Let me try installing them with npm instead.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm error   docs
npm error     docs@5.0.0-alpha.25
npm error     node_modules/docs
npm error       workspace docs from the root project
npm error       1 more (framer)
npm error
npm error Conflicting peer dependency: @material-ui/core@4.12.4
npm error node_modules/@material-ui/core
npm error   peer @material-ui/core@"^4.0.0" from notistack@1.0.3
npm error   node_modules/notistack
npm error     notistack@"^1.0.0" from docs@5.0.0-alpha.25
npm error     docs
npm error       docs@5.0.0-alpha.25
npm ...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install --legacy-peer-deps 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm warn deprecated (For a CapTP with native promises, see @endo/eventual-send and @endo/captp)
npm warn deprecated q@1.5.1: You or someone you depend on is using Q, the JavaScript Promise library that gave JavaScript developers strong feelings about promises. They can almost certainly migrate to the native JavaScript promise now. Thank you literally everyone for joining me in this bet against the odds. Be excellent to each other.
npm warn deprecated
npm warn deprecated (For a CapTP with native ...
```
========================================================================================================================
AGENT:
<thinking>
Good, npm install succeeded. Now let me run the Button tests.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm run test:unit -- packages/material-ui/src/Button/Button.test.js
  2>&1 | tail -100
timeout: 180

========================================================================================================================
TOOL RETURN (bash)
```

> test:unit
> cross-env NODE_ENV=test mocha 'packages/**/*.test.{js,ts,tsx}' 'docs/**/*.test.{js,ts,tsx}' 'scripts/**/*.test.{js,ts,tsx}' 'test/utils/**/*.test.{js,ts,tsx}' packages/material-ui/src/Button/Button.test.js

node:internal/modules/cjs/loader:1368
  throw err;
  ^

Error: Cannot find module './lib/parse'
Require stack:
- /workspace/node_modules/cross-spawn/index.js
- /workspace/node_modules/cross-env/src/index.js
- /workspace/node_modules/cross-env/src/bin/cross-env.js
    at Functio...
```
========================================================================================================================
AGENT:
<thinking>
There seems to be an issue with the cross-spawn module. Let me try reinstalling it or running the test directly with mocha.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install cross-spawn cross-env --legacy-peer-deps 2>&1
  | tail -10
timeout: 60

========================================================================================================================
TOOL RETURN (bash)
```
npm error Invalid Version: 
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-12-12T03_18_08_011Z-debug-0.log...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && NODE_ENV=test npx mocha packages/material-ui/src/Button/Button.test.js
  2>&1 | tail -100
timeout: 180

========================================================================================================================
TOOL RETURN (bash)
```
node:internal/modules/cjs/loader:653
      throw e;
      ^

Error: Cannot find module '/workspace/node_modules/mocha/node_modules/yargs-parser/build/index.cjs'
    at createEsmNotFoundErr (node:internal/modules/cjs/loader:1401:15)
    at finalizeEsmResolution (node:internal/modules/cjs/loader:1390:15)
    at resolveExports (node:internal/modules/cjs/loader:646:14)
    at Function._findPath (node:internal/modules/cjs/loader:713:31)
    at Function._resolveFilename (node:internal/modules/cjs/load...
```
========================================================================================================================
AGENT:
<thinking>
There are some issues with the node_modules. Let me try to clean and reinstall.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && rm -rf node_modules && npm install --legacy-peer-deps 2>&1
  | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm error Invalid Version: 
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-12-12T03_18_59_425Z-debug-0.log...
```
========================================================================================================================
TOOL CALL (bash)
command: cat /root/.npm/_logs/2025-12-12T03_18_59_425Z-debug-0.log | tail -50

========================================================================================================================
TOOL RETURN (bash)
```
234 silly packumentCache full:https://registry.npmjs.org/randexp cache-miss
235 http cache https://registry.npmjs.org/randexp 1ms (cache hit)
236 silly packumentCache full:https://registry.npmjs.org/randexp set size:39459 disposed:false
237 silly placeDep node_modules/nearley railroad-diagrams@1.0.0 OK for: nearley@2.16.0 want: ^1.0.0
238 silly placeDep node_modules/nearley randexp@0.4.6 OK for: nearley@2.16.0 want: 0.4.6
239 silly fetch manifest discontinuous-range@1.0.0
240 silly packumentCach...
```
========================================================================================================================
AGENT:
<thinking>
There's an issue with the npm version and some package versions. Let me try using an older Node version.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: nvm use 18 && node --version && npm --version

========================================================================================================================
TOOL RETURN (bash)
```
Now using node v18.20.8 (npm v10.8.2)
v18.20.8
10.8.2...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install --legacy-peer-deps 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm error Invalid Version: 
npm error A complete log of this run can be found in: /root/.npm/_logs/2025-12-12T03_19_11_744Z-debug-0.log...
```
========================================================================================================================
AGENT:
<thinking>
The npm version is still having issues. Let me try using an older npm version.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: npm install -g npm@6 2>&1 | tail -10
timeout: 60

========================================================================================================================
TOOL RETURN (bash)
```

removed 99 packages, and changed 97 packages in 10s

4 packages are looking for funding
  run `npm fund` for details...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install --legacy-peer-deps 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```

 Timeout...
```
========================================================================================================================
TOOL CALL (bash)
command: ps aux | grep npm

========================================================================================================================
TOOL RETURN (bash)
```
root      4805 62.4  0.0      0     0 ?        Z    03:20   1:16 [npm] <defunct>
root      5079  0.0  0.0   3552  1844 ?        S    03:22   0:00 grep npm...
```
========================================================================================================================
TOOL CALL (bash)
command: kill -9 4805 2>/dev/null; ls -la /workspace/node_modules 2>&1 | head -5

========================================================================================================================
TOOL RETURN (bash)
```
total 0
drwxr-xr-x    3 root root    96 Dec 12 03:20 .
drwxr-xr-x   50 root root  1600 Dec 12 03:22 ..
drwxr-xr-x 2329 root root 74528 Dec 12 03:21 .staging...
```
========================================================================================================================
AGENT:
<thinking>
The npm install is still in progress. Let me wait for it to complete or try a different approach. Let me write a simple test script to verify the fix works.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: rm -rf /workspace/node_modules/.staging 2>/dev/null; rm -rf /workspace/node_modules
  2>/dev/null; echo "cleaned"

========================================================================================================================
TOOL RETURN (bash)
```
cleaned...
```
========================================================================================================================
AGENT:
<thinking>
Let me look at the Button test file to understand how the tests are structured and verify that my fix is correct by examining the existing tests.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/Button/Button.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/Button/Button.test.js:\n\n````javascript\n   0 import * as React from \'react\';\n...\n  15   const render = createClientRender();\n...\n  32     const { getByRole } = render(<Button>Hello World</Button>);\n...\n  54     const { getByRole } = render(<Button color="primary">Hello World</Button>);\n...\n  64     const { getByRole } = render(<Button color="secondary">Hello World</Button>);\n...\n  74     const { getByRole } = render(<Button variant="ou...
```
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Button/Button.test.js
line_ranges:
- - 0
  - -1

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Button/Button.test.js:

````javascript
   0 import * as React from 'react';
   1 import { expect } from 'chai';
   2 import {
   3   createMount,
   4   describeConformanceV5,
   5   act,
   6   createClientRender,
   7   fireEvent,
   8   createServerRender,
   9 } from 'test/utils';
  10 import Button from './Button';
  11 import ButtonBase from '../ButtonBase';
  12 import classes from './buttonClasses';
  13 
  14 describe('<Butto...
```
========================================================================================================================
AGENT:
<thinking>
I see the test file. Looking at the tests, I notice that there's no specific test for the disabled class being applied when the button is disabled. The tests use `describeConformanceV5` which likely tests some common behaviors.

Let me look at the `describeConformanceV5` function to understand what it tests:
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- test/utils/describeConformanceV5.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened test/utils/describeConformanceV5.js:\n\n````javascript\n   0 /* eslint-env mocha */\n...\n  20 function testComponentsProp(element, getOptions) {\n...\n  38 function testThemeDefaultProps(element, getOptions) {\n...\n  66 function testThemeStyleOverrides(element, getOptions) {\n...\n 186 function testThemeVariants(element, getOptions) {\n...\n 225 const fullSuite = {\n...\n 244 export default function describeConformanceV5(minimalElement, getOptions) {\n...\n 258 \n````']...
```
========================================================================================================================
AGENT:
<thinking>
Let me look at the describeConformance file to understand what tests are run for state overrides:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: test/utils/describeConformanceV5.js
line_ranges:
- - 0
  - -1

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in test/utils/describeConformanceV5.js:

````javascript
   0 /* eslint-env mocha */
   1 import { expect } from 'chai';
   2 import * as React from 'react';
   3 import { ThemeProvider, createMuiTheme } from '@material-ui/core/styles';
   4 import {
   5   testComponentProp,
   6   testClassName,
   7   testPropsSpread,
   8   describeRef,
   9   findRootComponent,
  10   testReactTestRenderer,
  11   testRootClass,
  12 } from './describeConformance';
  13 
  1...
```
========================================================================================================================
AGENT:
<thinking>
Now I understand the test structure. The fix I made should work correctly. Let me create a simple test script to verify the fix works as expected.

Let me also check if there are any other components that might have the same issue - where the disabled class is not being included in the slots. Let me search for similar patterns.
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: const useUtilityClasses = \(styleProps\) =>
path_glob: '**/material-ui/src/**/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
packages/material-ui/src/CircularProgress/CircularProgress.js:58:const useUtilityClasses = (styleProps) => {
packages/material-ui/src/Card/Card.js:13:const useUtilityClasses = (styleProps) => {
packages/material-ui/src/ListItemIcon/ListItemIcon.js:19:const useUtilityClasses = (styleProps) => {
packages/material-ui/src/Checkbox/Checkbox.js:24:const useUtilityClasses = (styleProps) => {
packages/material-ui/src/Grid/Grid.js:190:const useUtilityClasses = (styleProps) => {
packages/material-ui/src/i...
```
========================================================================================================================
AGENT:
<thinking>
There are many components using `useUtilityClasses`. The issue is specifically about the Button component not including the `disabled` class in its slots. Let me verify my fix is correct by reviewing the modified code again and checking if there are any similar issues in related components like IconButton.

Let me also check the IconButton component to see if it has the same issue:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/IconButton/IconButton.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/IconButton/IconButton.js:

````javascript
   0 import * as React from 'react';
...
  12 const overridesResolver = (props, styles) => {
...
  23 const useUtilityClasses = (styleProps) => {
  24   const { classes, disabled, color, edge, size } = styleProps;
  25 
  26   const slots = {
  27     root: [
  28       'root',
  29       disabled && 'disabled',
  30       color !== 'default' && `color${capitalize(color)}`,
  31       edge && ...
```
========================================================================================================================
AGENT:
<thinking>
I can see that the IconButton component correctly includes `disabled && 'disabled'` in its slots.root array (line 29). This confirms that my fix for the Button component is correct.

Now let me also check the Fab component to see if it has the same issue:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Fab/Fab.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Fab/Fab.js:

````javascript
   0 import * as React from 'react';
...
  11 const overridesResolver = (props, styles) => {
...
  24 const useUtilityClasses = (styleProps) => {
  25   const { color, variant, classes, size } = styleProps;
  26 
  27   const slots = {
  28     root: [
  29       'root',
  30       variant,
  31       `size${capitalize(size)}`,
  32       color === 'inherit' && 'colorInherit',
  33       color === 'primary'...
```
========================================================================================================================
AGENT:
<thinking>
Interesting! The Fab component also has the same issue - it doesn't include `disabled && 'disabled'` in its slots.root array. However, the problem statement specifically mentions the Button component, so I'll focus on fixing that first.

Let me verify my fix is correct by reviewing the modified Button.js file one more time:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Button/Button.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Button/Button.js:

````javascript
   0 import * as React from 'react';
   1 import PropTypes from 'prop-types';
   2 import clsx from 'clsx';
   3 import { deepmerge } from '@material-ui/utils';
   4 import { unstable_composeClasses as composeClasses } from '@material-ui/unstyled';
   5 import experimentalStyled from '../styles/experimentalStyled';
   6 import useThemeProps from '../styles/useThemeProps';
   7 import { alpha } from '....
```
========================================================================================================================
AGENT:
<thinking>
The fix looks correct. I've added:
1. `disabled` to the destructuring on line 36: `const { color, disableElevation, fullWidth, size, variant, disabled, classes } = styleProps;`
2. `disabled && 'disabled'` to the slots.root array on line 48

This will ensure that when a Button is disabled and a custom disabled class is passed via `classes={{ disabled: "my-disabled" }}`, the "my-disabled" class will be added to the Button.

Let me try to run a simple test to verify the fix works. First, let me try to install dependencies using a different approach:
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install -g npm@8 2>&1 | tail -5
timeout: 60

========================================================================================================================
TOOL RETURN (bash)
```
(Use `node --trace-deprecation ...` to show where the warning was created)
/root/.nvm/versions/node/v22.18.0/bin/npm -> /root/.nvm/versions/node/v22.18.0/lib/node_modules/npm/bin/npm-cli.js
/root/.nvm/versions/node/v22.18.0/bin/npx -> /root/.nvm/versions/node/v22.18.0/lib/node_modules/npm/bin/npx-cli.js
+ npm@8.19.4
added 72 packages from 20 contributors, removed 319 packages and updated 139 packages in 3.994s...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npm install --legacy-peer-deps 2>&1 | tail -30
timeout: 300

========================================================================================================================
TOOL RETURN (bash)
```
npm ERR! Invalid Version: 

npm ERR! A complete log of this run can be found in:
npm ERR!     /root/.npm/_logs/2025-12-12T03_25_03_613Z-debug-0.log...
```
========================================================================================================================
AGENT:
<thinking>
The npm install is still failing due to some version issues. Let me try a different approach - I'll write a simple test script that doesn't require the full test suite to run.

Let me look at how the `composeClasses` function works to understand the fix better:
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: export.*composeClasses
path_glob: '**/material-ui-unstyled/**/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
packages/material-ui-unstyled/src/index.js:21:export { default as unstable_composeClasses } from './composeClasses';...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui-unstyled/src/composeClasses/composeClasses.js

========================================================================================================================
TOOL RETURN (open_files)
```
Error executing tool open_files: Error opening packages/material-ui-unstyled/src/composeClasses/composeClasses.js: File packages/material-ui-unstyled/src/composeClasses/composeClasses.js not found in workspace....
```
========================================================================================================================
TOOL CALL (expand_folder)
folder_path: packages/material-ui-unstyled/src

========================================================================================================================
TOOL RETURN (expand_folder)
```
packages/:

packages/material-ui-unstyled/:

packages/material-ui-unstyled/src/:
index.d.ts
index.js
index.test.js
OverridableComponent.d.ts

packages/material-ui-unstyled/src/BackdropUnstyled/:
BackdropUnstyled.d.ts
BackdropUnstyled.js
BackdropUnstyled.test.js
backdropUnstyledClasses.d.ts
backdropUnstyledClasses.js
index.d.ts
index.js

packages/material-ui-unstyled/src/BadgeUnstyled/:
BadgeUnstyled.d.ts
BadgeUnstyled.js
BadgeUnstyled.test.js
badgeUnstyledClasses.d.ts
badgeUnstyledClasses.js
ind...
```
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui-unstyled/src/composeClasses/composeClasses.ts

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui-unstyled/src/composeClasses/composeClasses.ts:\n\n````typescript\n   0 export default function composeClasses<ClassKey extends string>(\n   1   slots: Record<ClassKey, Array<string | false>>,\n   2   getUtilityClass: (slot: string) => string,\n   3   classes: Record<string, string> | undefined,\n   4 ): Record<ClassKey, string> {\n   5   const output: Record<ClassKey, string> = {} as any;\n   6 \n   7   Object.keys(slots).forEach(\n   8     // `Objet.ke...
```
========================================================================================================================
AGENT:
<thinking>
Now I understand how `composeClasses` works:

1. It takes `slots` (an object where keys are slot names like 'root', 'label', etc., and values are arrays of class keys)
2. It takes `getUtilityClass` (a function that generates the utility class name for a given slot)
3. It takes `classes` (an optional object of custom classes provided by the user)

For each slot, it iterates through the array of class keys. For each key:
- If the key is truthy (not false/null/undefined)
- If `classes` is provided and has a value for that key, it adds that custom class
- It also adds the utility class generated by `getUtilityClass(key)`

So my fix is correct. By adding `disabled && 'disabled'` to the slots.root array:
- When `disabled` is `true`, the string `'disabled'` is added to the array
- When `disabled` is `false`, `false` is added to the array (which is filtered out by the `if (key)` check)

When `disabled` is true and the user provides `classes={{ disabled: "my-disabled" }}`:
- The `composeClasses` function will see `'disabled'` in the slots.root array
- It will check if `classes['disabled']` exists (which is `"my-disabled"`)
- It will add `"my-disabled"` to the output
- It will also add the utility class `getButtonUtilityClass('disabled')` which is `"MuiButton-disabled"`

This is exactly what the user expects - their custom disabled class should be added to the button when it's disabled.

Let me verify the fix is complete by checking if there are any tests that specifically test for the disabled class:
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: disabled.*class
path_glob: '**/Button/Button.test.js'

========================================================================================================================
TOOL RETURN (grep)
```
No matches found for pattern 'disabled.*class'....
```
========================================================================================================================
AGENT:
<thinking>
There's no specific test for the disabled class in the Button test file. Let me check if there's a test in the conformance tests that checks for the disabled class:
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: disabled
path_glob: '**/describeConformance*.js'

========================================================================================================================
TOOL RETURN (grep)
```
No matches found for pattern 'disabled'....
```
========================================================================================================================
AGENT:
<thinking>
There's no specific test for the disabled class in the conformance tests. Let me create a simple test script to verify the fix works:
</thinking>
========================================================================================================================
TOOL CALL (create_file)
file_path: test_disabled_class.js
initial_content: "// Simple test to verify the fix for disabled class\n// This tests\
  \ the logic of useUtilityClasses function\n\nconst capitalize = (s) => s.charAt(0).toUpperCase()\
  \ + s.slice(1);\n\n// Mock composeClasses function (simplified version)\nfunction\
  \ composeClasses(slots, getUtilityClass, classes) {\n  const output = {};\n  Object.keys(slots).forEach((slot)\
  \ => {\n    output[slot] = slots[slot]\n      .reduce((acc, key) => {\n        if\
  \ (key) {\n          if (classes && classes[key]) {\n            acc.push(classes[key]);\n\
  \          }\n          acc.push(getUtilityClass(key));\n        }\n        return\
  \ acc;\n      }, [])\n      .join(' ');\n  });\n  return output;\n}\n\n// Mock getButtonUtilityClass\n\
  function getButtonUtilityClass(slot) {\n  return `MuiButton-${slot}`;\n}\n\n// Original\
  \ useUtilityClasses (before fix)\nconst useUtilityClassesOriginal = (styleProps)\
  \ => {\n  const { color, disableElevation, fullWidth, size, variant, classes } =\
  \ styleProps;\n\n  const slots = {\n    root: [\n      'root',\n      variant,\n\
  \      `${variant}${capitalize(color)}`,\n      `size${capitalize(size)}`,\n   \
  \   `${variant}Size${capitalize(size)}`,\n      color === 'inherit' && 'colorInherit',\n\
  \      disableElevation && 'disableElevation',\n      fullWidth && 'fullWidth',\n\
  \      // disabled && 'disabled', // MISSING!\n    ],\n    label: ['label'],\n \
  \   startIcon: ['startIcon', `iconSize${capitalize(size)}`],\n    endIcon: ['endIcon',\
  \ `iconSize${capitalize(size)}`],\n  };\n\n  return composeClasses(slots, getButtonUtilityClass,\
  \ classes);\n};\n\n// Fixed useUtilityClasses (after fix)\nconst useUtilityClassesFixed\
  \ = (styleProps) => {\n  const { color, disableElevation, fullWidth, size, variant,\
  \ disabled, classes } = styleProps;\n\n  const slots = {\n    root: [\n      'root',\n\
  \      variant,\n      `${variant}${capitalize(color)}`,\n      `size${capitalize(size)}`,\n\
  \      `${variant}Size${capitalize(size)}`,\n      color === 'inherit' && 'colorInherit',\n\
  \      disableElevation && 'disableElevation',\n      fullWidth && 'fullWidth',\n\
  \      disabled && 'disabled', // FIXED!\n    ],\n    label: ['label'],\n    startIcon:\
  \ ['startIcon', `iconSize${capitalize(size)}`],\n    endIcon: ['endIcon', `iconSize${capitalize(size)}`],\n\
  \  };\n\n  return composeClasses(slots, getButtonUtilityClass, classes);\n};\n\n\
  // Test case from the issue\nconst styleProps = {\n  color: 'primary',\n  disableElevation:\
  \ false,\n  fullWidth: false,\n  size: 'medium',\n  variant: 'text',\n  disabled:\
  \ true,\n  classes: { disabled: 'my-disabled' },\n};\n\nconsole.log('=== Testing\
  \ disabled class fix ===\\n');\n\nconsole.log('Original (before fix):');\nconst\
  \ originalResult = useUtilityClassesOriginal(styleProps);\nconsole.log('  root classes:',\
  \ originalResult.root);\nconsole.log('  Contains \"my-disabled\":', originalResult.root.includes('my-disabled'));\n\
  \nconsole.log('\\nFixed (after fix):');\nconst fixedResult = useUtilityClassesFixed(styleProps);\n\
  console.log('  root classes:', fixedResult.root);\nconsole.log('  Contains \"my-disabled\"\
  :', fixedResult.root.includes('my-disabled'));\nconsole.log('  Contains \"MuiButton-disabled\"\
  :', fixedResult.root.includes('MuiButton-disabled'));\n\nconsole.log('\\n=== Test\
  \ Results ===');\nif (!originalResult.root.includes('my-disabled') && fixedResult.root.includes('my-disabled'))\
  \ {\n  console.log('\u2713 PASS: Fix correctly adds custom disabled class');\n}\
  \ else {\n  console.log('\u2717 FAIL: Fix does not work as expected');\n}\n\nif\
  \ (fixedResult.root.includes('MuiButton-disabled')) {\n  console.log('\u2713 PASS:\
  \ Fix correctly adds MuiButton-disabled class');\n} else {\n  console.log('\u2717\
  \ FAIL: MuiButton-disabled class is missing');\n}\n\n// Test when disabled is false\n\
  const stylePropsNotDisabled = {\n  ...styleProps,\n  disabled: false,\n};\n\nconsole.log('\\\
  n=== Testing when disabled=false ===');\nconst notDisabledResult = useUtilityClassesFixed(stylePropsNotDisabled);\n\
  console.log('  root classes:', notDisabledResult.root);\nconsole.log('  Contains\
  \ \"my-disabled\":', notDisabledResult.root.includes('my-disabled'));\nconsole.log('\
  \  Contains \"MuiButton-disabled\":', notDisabledResult.root.includes('MuiButton-disabled'));\n\
  \nif (!notDisabledResult.root.includes('my-disabled') && !notDisabledResult.root.includes('MuiButton-disabled'))\
  \ {\n  console.log('\u2713 PASS: Disabled class is not added when disabled=false');\n\
  } else {\n  console.log('\u2717 FAIL: Disabled class should not be added when disabled=false');\n\
  }\n"

========================================================================================================================
TOOL RETURN (create_file)
```
Successfully created test_disabled_class.js....
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && node test_disabled_class.js

========================================================================================================================
TOOL RETURN (bash)
```
=== Testing disabled class fix ===

Original (before fix):
  root classes: MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium
  Contains "my-disabled": false

Fixed (after fix):
  root classes: MuiButton-root MuiButton-text MuiButton-textPrimary MuiButton-sizeMedium MuiButton-textSizeMedium my-disabled MuiButton-disabled
  Contains "my-disabled": true
  Contains "MuiButton-disabled": true

=== Test Results ===
âœ“ PASS: Fix correctly adds custom disab...
```
========================================================================================================================
AGENT:
<thinking>
The test confirms that my fix is correct:

1. **Before the fix**: The custom disabled class "my-disabled" was NOT being added to the button when it was disabled.

2. **After the fix**: The custom disabled class "my-disabled" IS being added to the button when it's disabled, along with the standard "MuiButton-disabled" class.

3. **When disabled=false**: Neither the custom disabled class nor the MuiButton-disabled class is added, which is the expected behavior.

Let me clean up the test file and then mark the task as complete.
</thinking>
========================================================================================================================
TOOL CALL (delete_file)
file_path: test_disabled_class.js

========================================================================================================================
TOOL RETURN (delete_file)
```
Successfully deleted test_disabled_class.js....
```
========================================================================================================================
AGENT:
STEP 4: REVIEW CHANGES

<thinking>
Let me review the changes I made to ensure they are correct and complete:

1. I identified the issue: In `packages/material-ui/src/Button/Button.js`, the `useUtilityClasses` function was not including `disabled && 'disabled'` in the `slots.root` array.

2. I fixed the issue by:
   - Adding `disabled` to the destructuring: `const { color, disableElevation, fullWidth, size, variant, disabled, classes } = styleProps;`
   - Adding `disabled && 'disabled'` to the `slots.root` array

3. I verified the fix works correctly by creating a test script that simulates the behavior of the `useUtilityClasses` function before and after the fix.

Let me also verify that the fix is consistent with how other similar components handle the disabled class:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/ButtonBase/ButtonBase.js
patterns:
- useUtilityClasses

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/ButtonBase/ButtonBase.js:

````javascript
   0 import * as React from 'react';
...
  13 const overridesResolver = (props, styles) => styles.root || {};
  14 
  15 const useUtilityClasses = (styleProps) => {
  16   const { disabled, focusVisible, focusVisibleClassName, classes } = styleProps;
  17 
  18   const slots = {
  19     root: ['root', disabled && 'disabled', focusVisible && 'focusVisible'],
  20   };
  21 
  22   const compos...
```
========================================================================================================================
AGENT:
<thinking>
I can confirm that my fix is consistent with how `ButtonBase` handles the disabled class. In `ButtonBase.js`, line 19 shows:

```javascript
const slots = {
  root: ['root', disabled && 'disabled', focusVisible && 'focusVisible'],
};
```

My fix in `Button.js` follows the same pattern by adding `disabled && 'disabled'` to the slots.root array.

Let me also verify that the `buttonClasses.js` file already includes 'disabled' in the list of classes (which I confirmed earlier):
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/Button/buttonClasses.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened packages/material-ui/src/Button/buttonClasses.js:\n\n````javascript\n   0 import { generateUtilityClass, generateUtilityClasses } from '@material-ui/unstyled';\n   1 \n   2 export function getButtonUtilityClass(slot) {\n   3   return generateUtilityClass('MuiButton', slot);\n   4 }\n   5 \n   6 const buttonClasses = generateUtilityClasses('MuiButton', [\n   7   'root',\n   8   'label',\n   9   'text',\n  10   'textInherit',\n  11   'textPrimary',\n  12   'textSecondary',\n ...
```
========================================================================================================================
AGENT:
<thinking>
The `buttonClasses.js` file already includes 'disabled' in the list of classes (line 23). This confirms that the fix is complete and correct.

Let me also verify the final state of the Button.js file to make sure the fix is in place:
</thinking>
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/Button/Button.js
line_ranges:
- - 35
  - 56

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/Button/Button.js:

````javascript
   0 import * as React from 'react';
   1 import PropTypes from 'prop-types';
   2 import clsx from 'clsx';
   3 import { deepmerge } from '@material-ui/utils';
   4 import { unstable_composeClasses as composeClasses } from '@material-ui/unstyled';
   5 import experimentalStyled from '../styles/experimentalStyled';
   6 import useThemeProps from '../styles/useThemeProps';
   7 import { alpha } from '....
```
========================================================================================================================
AGENT:
<thinking>
The fix is in place. Let me summarize the changes:

**Problem:**
When a Button component is disabled and a custom class is passed via `classes={{ disabled: "my-disabled" }}`, the "my-disabled" class was not being added to the Button.

**Root Cause:**
In `packages/material-ui/src/Button/Button.js`, the `useUtilityClasses` function was not including `disabled && 'disabled'` in the `slots.root` array. This meant that even though the user provided a custom disabled class, it was never being composed into the final class list.

**Fix:**
1. Added `disabled` to the destructuring in line 36: `const { color, disableElevation, fullWidth, size, variant, disabled, classes } = styleProps;`
2. Added `disabled && 'disabled'` to the `slots.root` array in line 48

**Verification:**
I created a test script that simulates the behavior of the `useUtilityClasses` function before and after the fix. The test confirmed that:
- Before the fix: The custom disabled class "my-disabled" was NOT being added
- After the fix: The custom disabled class "my-disabled" IS being added, along with the standard "MuiButton-disabled" class
- When disabled=false: Neither class is added (expected behavior)

The fix is consistent with how other similar components (like `ButtonBase` and `IconButton`) handle the disabled class.
</thinking>
========================================================================================================================
AGENT:
Successfully fixed the issue where disabled classes were not being added to the Button component.

**Problem:**
When a Button component is disabled and a custom class is passed via `classes={{ disabled: "my-disabled" }}`, the "my-disabled" class was not being added to the Button.

**Root Cause:**
In `packages/material-ui/src/Button/Button.js`, the `useUtilityClasses` function was not including `disabled && 'disabled'` in the `slots.root` array. This meant that even though the user provided a custom disabled class, it was never being composed into the final class list.

**Fix Applied:**
Modified `packages/material-ui/src/Button/Button.js`:
1. Added `disabled` to the destructuring: `const { color, disableElevation, fullWidth, size, variant, disabled, classes } = styleProps;`
2. Added `disabled && 'disabled'` to the `slots.root` array

This fix is consistent with how other similar components (like `ButtonBase` and `IconButton`) handle the disabled class. The fix ensures that when a Button is disabled:
- The custom disabled class (e.g., "my-disabled") is added if provided via the `classes` prop
- The standard "MuiButton-disabled" class is also added
- When disabled=false, neither class is added (expected behavior)
########################################################################################################################
PHASE 1
########################################################################################################################
========================================================================================================================
AGENT:
I will start by viewing the workspace to understand its structure and contents. This will help me identify key files and locations that may be relevant to the task.
========================================================================================================================
USER PROMPT:
Resolve the following problem statement:

<problem_statement>
How to position Switch label to the left of the switch?
- [x] This is a v1.x issue (v0.x is no longer maintained).
- [x] I have searched the [issues](https://github.com/mui-org/material-ui/issues) of this repository and believe that this is not a duplicate.

[The examples here](https://material-ui.com/demos/selection-controls/) demonstrate how to add a label to various forms of input, including the `Switch` component.

Unfortunately, every single example on that page that includes a label has it positioned to the right of the component. I've looked through the props of `FormControlLabel`, and there doesn't seem to be any option that allows me to change this. In fact, looking at the code of `FormControlLabel`, it seems to be hard-coded his way.

I was able to work around this by setting the Label's direction to rtl (and setting the Switch's direction back to ltr):
```
import React from "react";
import styled from "react-emotion";
import FormControlLabel from "@material-ui/core/FormControlLabel";
import Switch from "@material-ui/core/Switch";

const StyledLabel = styled(FormControlLabel)`
  direction: ${({ rtl }) => rtl && "rtl"};
  margin: 0;
`;

const StyledSwitch = styled(Switch)`
  direction: ltr;
`;

export default ({ label, rtl, ...props }) => (
  <StyledLabel rtl={rtl} control={<StyledSwitch {...props} />} label={label} />
);
```
But this feels very hacky and potentially unstable to me.

Is there any way I can have a `Switch` with its label on the left without resorting to `rtl` hacks? If so, can it please be documented? If not, please consider this a feature request.

</problem_statement>

Do not stop until you have made code changes that resolve the problem statement. Do not ask for clarifications.

NEVER attempt to find the solution to the problem statement by searching future commits or branches in the repository.
========================================================================================================================
AGENT:
Starting to analyze the problem statement. The user wants to position a Switch label to the left of the switch component. Currently, FormControlLabel seems to only support labels on the right. I need to explore the FormControlLabel component to understand its current implementation and add a prop to control label placement.
========================================================================================================================
AGENT:
EXPLORE WORKSPACE: Understanding the structure and finding FormControlLabel component

<thinking>
The problem statement is about the `FormControlLabel` component in Material-UI. The user wants to be able to position the label to the left of the control (like a Switch), but currently it seems to only support labels on the right.

I need to:
1. Find the FormControlLabel component source code
2. Understand how it currently works
3. Add a `labelPlacement` prop to allow positioning the label on the left, right, top, or bottom
4. Update the styles accordingly
5. Update any tests
6. Update documentation if needed

Let me start by exploring the packages/material-ui/src directory to find the FormControlLabel component.
</thinking>
========================================================================================================================
TOOL CALL (expand_folder)
folder_path: packages/material-ui/src

========================================================================================================================
TOOL RETURN (expand_folder)
```
packages/:

packages/material-ui/:

packages/material-ui/src/:
index.d.ts
index.js
index.test.js

packages/material-ui/src/AppBar/:
AppBar.d.ts
AppBar.js
AppBar.test.js
index.d.ts
index.js

packages/material-ui/src/Avatar/:
Avatar.d.ts
Avatar.js
Avatar.test.js
index.d.ts
index.js

packages/material-ui/src/Backdrop/:
Backdrop.d.ts
Backdrop.js
Backdrop.test.js
index.d.ts
index.js

packages/material-ui/src/Badge/:
Badge.d.ts
Badge.js
Badge.test.js
index.d.ts
index.js

packages/material-ui/src/Botto...
```
========================================================================================================================
AGENT:
<thinking>
I found the FormControlLabel component at `packages/material-ui/src/FormControlLabel/`. Let me open and examine the files in this directory to understand the current implementation.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/FormControlLabel/FormControlLabel.js
- packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
- packages/material-ui/src/FormControlLabel/FormControlLabel.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/FormControlLabel/FormControlLabel.js:\n\n````javascript\n   0 /* eslint-disable jsx-a11y/label-has-for */\n   1 \n   2 import React from \'react\';\n   3 import PropTypes from \'prop-types\';\n   4 import classNames from \'classnames\';\n   5 import withStyles from \'../styles/withStyles\';\n   6 import Typography from \'../Typography\';\n   7 \n   8 export const styles = theme => ({\n   9   /* Styles applied to the root element. */\n  10   root: {\...
```
========================================================================================================================
AGENT:
<thinking>
Now I understand the current implementation. The `FormControlLabel` component renders the control first and then the label (Typography) second, which means the label is always on the right of the control.

To fix this issue, I need to:

1. Add a `labelPlacement` prop that can be 'end' (default, current behavior), 'start' (label on left), 'top', or 'bottom'
2. Update the styles to handle different label placements
3. Update the render logic to conditionally render the label before or after the control
4. Update the TypeScript definitions
5. Update the tests

Let me also check if there are any documentation files I need to update. Let me first look at the API documentation for FormControlLabel.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- pages/api/form-control-label.md

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened pages/api/form-control-label.md:\n\n````markdown\n   0 ---\n   1 filename: /packages/material-ui/src/FormControlLabel/FormControlLabel.js\n   2 title: FormControlLabel API\n   3 ---\n   4 \n   5 <!--- This documentation is automatically generated, do not try to edit it. -->\n   6 \n   7 # FormControlLabel\n   8 \n   9 <p class="description">The API documentation of the FormControlLabel React component.</p>\n  10 \n  11 Drop in replacement of the `Radio`, `Switch` and `Check...
```
========================================================================================================================
AGENT:
<thinking>
The documentation is auto-generated from the source code, so I don't need to manually update it. Let me now implement the `labelPlacement` prop in the FormControlLabel component.

Here's my plan:
1. Add new styles for different label placements (start, top, bottom)
2. Add the `labelPlacement` prop with values 'end' (default), 'start', 'top', 'bottom'
3. Update the render logic to handle different placements
4. Update the TypeScript definitions
5. Add tests for the new functionality

Let me start by modifying the FormControlLabel.js file.
</thinking>

MODIFY CODE: Adding labelPlacement prop to FormControlLabel.js
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.js
find: "export const styles = theme => ({\n  /* Styles applied to the root element.\
  \ */\n  root: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    cursor:\
  \ 'pointer',\n    // For correct alignment with the text.\n    verticalAlign: 'middle',\n\
  \    // Remove grey highlight\n    WebkitTapHighlightColor: 'transparent',\n   \
  \ marginLeft: -14,\n    marginRight: 16, // used for row presentation of radio/checkbox\n\
  \    '&$disabled': {\n      cursor: 'default',\n    },\n  },\n  /* Styles applied\
  \ to the root element if `disabled={true}`. */\n  disabled: {},\n  /* Styles applied\
  \ to the label's Typography component. */\n  label: {\n    '&$disabled': {\n   \
  \   color: theme.palette.text.disabled,\n    },\n  },\n});"
replace: "export const styles = theme => ({\n  /* Styles applied to the root element.\
  \ */\n  root: {\n    display: 'inline-flex',\n    alignItems: 'center',\n    cursor:\
  \ 'pointer',\n    // For correct alignment with the text.\n    verticalAlign: 'middle',\n\
  \    // Remove grey highlight\n    WebkitTapHighlightColor: 'transparent',\n   \
  \ marginLeft: -14,\n    marginRight: 16, // used for row presentation of radio/checkbox\n\
  \    '&$disabled': {\n      cursor: 'default',\n    },\n  },\n  /* Styles applied\
  \ to the root element if `labelPlacement=\"start\"`. */\n  labelPlacementStart:\
  \ {\n    flexDirection: 'row-reverse',\n    marginLeft: 16, // used for row presentation\
  \ of radio/checkbox\n    marginRight: -14,\n  },\n  /* Styles applied to the root\
  \ element if `labelPlacement=\"top\"`. */\n  labelPlacementTop: {\n    flexDirection:\
  \ 'column-reverse',\n    marginLeft: 16,\n  },\n  /* Styles applied to the root\
  \ element if `labelPlacement=\"bottom\"`. */\n  labelPlacementBottom: {\n    flexDirection:\
  \ 'column',\n    marginLeft: 16,\n  },\n  /* Styles applied to the root element\
  \ if `disabled={true}`. */\n  disabled: {},\n  /* Styles applied to the label's\
  \ Typography component. */\n  label: {\n    '&$disabled': {\n      color: theme.palette.text.disabled,\n\
  \    },\n  },\n});"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.js:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.js
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.js
@@ -21,6 +21,22 @@
     '&$disabled': {
       cursor: 'default',
     },
+  },
+  /* Styles applied to the root element if `labelPlacement="start"`. */
+  labelPlacementStart: {
+    flexDirection: 'row-reverse',
+    marginLeft: 16, // used for row presentation of radio/c...
```
========================================================================================================================
AGENT:
Now let me update the component function to accept and use the `labelPlacement` prop:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.js
find: "function FormControlLabel(props, context) {\n  const {\n    checked,\n    classes,\n\
  \    className: classNameProp,\n    control,\n    disabled: disabledProp,\n    inputRef,\n\
  \    label,\n    name,\n    onChange,\n    value,\n    ...other\n  } = props;\n\
  \  const { muiFormControl } = context;\n\n  let disabled = disabledProp;\n  if (typeof\
  \ disabled === 'undefined' && typeof control.props.disabled !== 'undefined') {\n\
  \    disabled = control.props.disabled;\n  }\n  if (typeof disabled === 'undefined'\
  \ && muiFormControl) {\n    disabled = muiFormControl.disabled;\n  }\n\n  const\
  \ controlProps = {\n    disabled,\n  };\n  ['checked', 'name', 'onChange', 'value',\
  \ 'inputRef'].forEach(key => {\n    if (typeof control.props[key] === 'undefined'\
  \ && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n\
  \    }\n  });\n\n  return (\n    <label\n      className={classNames(\n        classes.root,\n\
  \        {\n          [classes.disabled]: disabled,\n        },\n        classNameProp,\n\
  \      )}\n      {...other}\n    >\n      {React.cloneElement(control, controlProps)}\n\
  \      <Typography\n        component=\"span\"\n        className={classNames(classes.label,\
  \ { [classes.disabled]: disabled })}\n      >\n        {label}\n      </Typography>\n\
  \    </label>\n  );\n}"
replace: "function FormControlLabel(props, context) {\n  const {\n    checked,\n \
  \   classes,\n    className: classNameProp,\n    control,\n    disabled: disabledProp,\n\
  \    inputRef,\n    label,\n    labelPlacement,\n    name,\n    onChange,\n    value,\n\
  \    ...other\n  } = props;\n  const { muiFormControl } = context;\n\n  let disabled\
  \ = disabledProp;\n  if (typeof disabled === 'undefined' && typeof control.props.disabled\
  \ !== 'undefined') {\n    disabled = control.props.disabled;\n  }\n  if (typeof\
  \ disabled === 'undefined' && muiFormControl) {\n    disabled = muiFormControl.disabled;\n\
  \  }\n\n  const controlProps = {\n    disabled,\n  };\n  ['checked', 'name', 'onChange',\
  \ 'value', 'inputRef'].forEach(key => {\n    if (typeof control.props[key] === 'undefined'\
  \ && typeof props[key] !== 'undefined') {\n      controlProps[key] = props[key];\n\
  \    }\n  });\n\n  return (\n    <label\n      className={classNames(\n        classes.root,\n\
  \        {\n          [classes.labelPlacementStart]: labelPlacement === 'start',\n\
  \          [classes.labelPlacementTop]: labelPlacement === 'top',\n          [classes.labelPlacementBottom]:\
  \ labelPlacement === 'bottom',\n          [classes.disabled]: disabled,\n      \
  \  },\n        classNameProp,\n      )}\n      {...other}\n    >\n      {React.cloneElement(control,\
  \ controlProps)}\n      <Typography\n        component=\"span\"\n        className={classNames(classes.label,\
  \ { [classes.disabled]: disabled })}\n      >\n        {label}\n      </Typography>\n\
  \    </label>\n  );\n}"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.js:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.js
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.js
@@ -61,6 +61,7 @@
     disabled: disabledProp,
     inputRef,
     label,
+    labelPlacement,
     name,
     onChange,
     value,
@@ -90,6 +91,9 @@
       className={classNames(
         classes.root,
         {
+          [classes.labelPlacementStart]: labelPlacement ==...
```
========================================================================================================================
AGENT:
Now let me add the PropTypes for the new `labelPlacement` prop and add a default value:
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.js
patterns:
- FormControlLabel.propTypes

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/FormControlLabel/FormControlLabel.js:

````javascript
   0 /* eslint-disable jsx-a11y/label-has-for */
   1 
   2 import React from 'react';
   3 import PropTypes from 'prop-types';
   4 import classNames from 'classnames';
   5 import withStyles from '../styles/withStyles';
   6 import Typography from '../Typography';
   7 
   8 export const styles = theme => ({
   9   /* Styles applied to the root element. */
  10   root: {
  11    ...
```
========================================================================================================================
AGENT:
Now let me add the `labelPlacement` prop to the PropTypes and add a default value:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.js
find: "  /**\n   * The text to be used in an enclosing label element.\n   */\n  label:\
  \ PropTypes.node,\n  /*\n   * @ignore\n   */\n  name: PropTypes.string,"
replace: "  /**\n   * The text to be used in an enclosing label element.\n   */\n\
  \  label: PropTypes.node,\n  /**\n   * The position of the label.\n   */\n  labelPlacement:\
  \ PropTypes.oneOf(['end', 'start', 'top', 'bottom']),\n  /*\n   * @ignore\n   */\n\
  \  name: PropTypes.string,"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.js:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.js
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.js
@@ -141,6 +141,10 @@
    * The text to be used in an enclosing label element.
    */
   label: PropTypes.node,
+  /**
+   * The position of the label.
+   */
+  labelPlacement: PropTypes.oneOf(['end', 'start', 'top', 'bottom']),
   /*
    * @ignore
    */
...
```
========================================================================================================================
AGENT:
Now let me add the default value for `labelPlacement`:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.js
find: "FormControlLabel.contextTypes = {\n  muiFormControl: PropTypes.object,\n};\n\
  \nexport default withStyles(styles, { name: 'MuiFormControlLabel' })(FormControlLabel);"
replace: "FormControlLabel.defaultProps = {\n  labelPlacement: 'end',\n};\n\nFormControlLabel.contextTypes\
  \ = {\n  muiFormControl: PropTypes.object,\n};\n\nexport default withStyles(styles,\
  \ { name: 'MuiFormControlLabel' })(FormControlLabel);"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.js:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.js
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.js
@@ -163,6 +163,10 @@
   value: PropTypes.string,
 };
 
+FormControlLabel.defaultProps = {
+  labelPlacement: 'end',
+};
+
 FormControlLabel.contextTypes = {
   muiFormControl: PropTypes.object,
 };
...
```
========================================================================================================================
AGENT:
Now let me update the TypeScript definitions file:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
find: "export interface FormControlLabelProps\n  extends StandardProps<\n      React.LabelHTMLAttributes<HTMLLabelElement>,\n\
  \      FormControlLabelClassKey,\n      'onChange'\n    > {\n  checked?: boolean\
  \ | string;\n  control: React.ReactElement<any>;\n  disabled?: boolean;\n  inputRef?:\
  \ React.Ref<any>;\n  label: React.ReactNode;\n  name?: string;\n  onChange?: (event:\
  \ React.ChangeEvent<{}>, checked: boolean) => void;\n  value?: string;\n}\n\nexport\
  \ type FormControlLabelClassKey = 'root' | 'disabled' | 'label';"
replace: "export interface FormControlLabelProps\n  extends StandardProps<\n     \
  \ React.LabelHTMLAttributes<HTMLLabelElement>,\n      FormControlLabelClassKey,\n\
  \      'onChange'\n    > {\n  checked?: boolean | string;\n  control: React.ReactElement<any>;\n\
  \  disabled?: boolean;\n  inputRef?: React.Ref<any>;\n  label: React.ReactNode;\n\
  \  labelPlacement?: 'end' | 'start' | 'top' | 'bottom';\n  name?: string;\n  onChange?:\
  \ (event: React.ChangeEvent<{}>, checked: boolean) => void;\n  value?: string;\n\
  }\n\nexport type FormControlLabelClassKey =\n  | 'root'\n  | 'labelPlacementStart'\n\
  \  | 'labelPlacementTop'\n  | 'labelPlacementBottom'\n  | 'disabled'\n  | 'label';"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
@@ -12,12 +12,19 @@
   disabled?: boolean;
   inputRef?: React.Ref<any>;
   label: React.ReactNode;
+  labelPlacement?: 'end' | 'start' | 'top' | 'bottom';
   name?: string;
   onChange?: (event: React.ChangeEvent<{}>, checked: boolean) => void;
   value?: string;
 }
...
```
========================================================================================================================
AGENT:
Now let me add tests for the new `labelPlacement` prop. Let me first view the current test file to understand its structure better:
========================================================================================================================
TOOL CALL (inspect_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
line_ranges:
- - 0
  - -1

========================================================================================================================
TOOL RETURN (inspect_code)
```
Successfully expanded code chunks in packages/material-ui/src/FormControlLabel/FormControlLabel.test.js:

````javascript
   0 import React from 'react';
   1 import { assert } from 'chai';
   2 import { createShallow, createMount, getClasses } from '../test-utils';
   3 import Checkbox from '../Checkbox';
   4 import FormControlLabel from './FormControlLabel';
   5 
   6 describe('<FormControlLabel />', () => {
   7   let shallow;
   8   let mount;
   9   let classes;
  10 
  11   before(() => {...
```
========================================================================================================================
AGENT:
Now let me add tests for the `labelPlacement` prop:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
find: "  it('should forward some properties', () => {\n    const wrapper = mount(<FormControlLabel\
  \ value=\"value\" label=\"Pizza\" control={<div />} />);\n    assert.strictEqual(wrapper.find('div').props().value,\
  \ 'value');\n  });\n});"
replace: "  it('should forward some properties', () => {\n    const wrapper = mount(<FormControlLabel\
  \ value=\"value\" label=\"Pizza\" control={<div />} />);\n    assert.strictEqual(wrapper.find('div').props().value,\
  \ 'value');\n  });\n\n  describe('prop: labelPlacement', () => {\n    it('should\
  \ have the `start` class', () => {\n      const wrapper = shallow(\n        <FormControlLabel\
  \ label=\"Pizza\" labelPlacement=\"start\" control={<div />} />,\n      );\n   \
  \   assert.strictEqual(wrapper.hasClass(classes.labelPlacementStart), true);\n \
  \   });\n\n    it('should have the `top` class', () => {\n      const wrapper =\
  \ shallow(\n        <FormControlLabel label=\"Pizza\" labelPlacement=\"top\" control={<div\
  \ />} />,\n      );\n      assert.strictEqual(wrapper.hasClass(classes.labelPlacementTop),\
  \ true);\n    });\n\n    it('should have the `bottom` class', () => {\n      const\
  \ wrapper = shallow(\n        <FormControlLabel label=\"Pizza\" labelPlacement=\"\
  bottom\" control={<div />} />,\n      );\n      assert.strictEqual(wrapper.hasClass(classes.labelPlacementBottom),\
  \ true);\n    });\n  });\n});"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in packages/material-ui/src/FormControlLabel/FormControlLabel.test.js:

--- packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
+++ packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
@@ -117,4 +117,27 @@
     const wrapper = mount(<FormControlLabel value="value" label="Pizza" control={<div />} />);
     assert.strictEqual(wrapper.find('div').props().value, 'value');
   });
+
+  describe('prop: labelPlacement', () => {
+    it('should have...
```
========================================================================================================================
AGENT:
Now let me verify the changes by viewing the updated files:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/FormControlLabel/FormControlLabel.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/FormControlLabel/FormControlLabel.js:\n\n````javascript\n   0 /* eslint-disable jsx-a11y/label-has-for */\n   1 \n   2 import React from \'react\';\n   3 import PropTypes from \'prop-types\';\n   4 import classNames from \'classnames\';\n   5 import withStyles from \'../styles/withStyles\';\n   6 import Typography from \'../Typography\';\n   7 \n   8 export const styles = theme => ({\n   9   /* Styles applied to the root element. */\n  10   root: {\...
```
========================================================================================================================
AGENT:
The code looks good. Now let me run the tests to verify everything works correctly:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn install 2>&1 | tail -20
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
➤ YN0000: ┌ Post-resolution validation
➤ YN0060: │ eslint is listed by your project with version 5.2.0 (p052757), which doesn't satisfy what eslint-config-airbnb and other dependencies request (^4.19.1).
➤ YN0060: │ webpack is listed by your project with version 3.10.0 (p63c7f2), which doesn't satisfy what css-loader and other dependencies request (^4.0.0 || ^4.0.0).
➤ YN0002: │ @material-ui/core@workspace:packages/material-ui doesn't provide react (p558dc5), requested by react-event-listener an...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && yarn test:unit packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
/workspace/test/utils/createDOM.js:35
  global.navigator = {
                   ^

TypeError: Cannot set property navigator of #<Object> which has only a getter
    at createDOM (/workspace/test/utils/createDOM.js:30:3)
    at Object.<anonymous> (/workspace/test/utils/setup.js:3:1)
    at Module._compile (node:internal/modules/cjs/loader:1688:14)
    at Module._compile (/workspace/node_modules/pirates/lib/index.js:91:24)
    at node:internal/modules/cjs/loader:1820:10
    at Object.newLoader [as...
```
========================================================================================================================
AGENT:
<thinking>
The test is failing due to a Node.js version compatibility issue. The test setup is trying to set `global.navigator` which is read-only in newer Node.js versions. Let me try using an older Node.js version.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && nvm use 18 && yarn test:unit packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Now using node v18.20.8 (npm v10.8.2)
tmp_code_99a4cf8f6a055114f99f81c4aa68d5f2ddea0cdac87f189e6bd89efa4b05a419.bash: line 1: yarn: command not found...
```
========================================================================================================================
TOOL CALL (bash)
command: export NVM_DIR="$HOME/.nvm" && [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  && nvm use 18 && cd /workspace && npm test -- --grep "FormControlLabel" 2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Now using node v18.20.8 (npm v10.8.2)

> material-ui-workspace@1.4.1 test
> yarn lint && yarn flow && yarn typescript && yarn test:unit --grep FormControlLabel

sh: 1: yarn: not found...
```
========================================================================================================================
TOOL CALL (bash)
command: export NVM_DIR="$HOME/.nvm" && [ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
  && nvm use 18 && export PATH="$(npm bin -g):$PATH" && which yarn && cd /workspace
  && yarn test:unit packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Now using node v18.20.8 (npm v10.8.2)...
```
========================================================================================================================
TOOL CALL (bash)
command: nvm use 22 && cd /workspace && npx mocha --require test/utils/setup.js packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```
Now using node v22.18.0 (npm v10.9.3)
/workspace/test/utils/createDOM.js:35
  global.navigator = {
                   ^

TypeError: Cannot set property navigator of #<Object> which has only a getter
    at createDOM (/workspace/test/utils/createDOM.js:30:3)
    at Object.<anonymous> (/workspace/test/utils/setup.js:3:1)
    at Module._compile (node:internal/modules/cjs/loader:1688:14)
    at Module._compile (/workspace/node_modules/pirates/lib/index.js:91:24)
    at node:internal/modules/cjs/load...
```
========================================================================================================================
AGENT:
<thinking>
The test setup is incompatible with newer Node.js versions. Let me try using an older Python version or fix the test setup. Let me check the test setup file first.
</thinking>
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- test/utils/createDOM.js

========================================================================================================================
TOOL RETURN (open_files)
```
["Successfully opened test/utils/createDOM.js:\n\n````javascript\n   0 // @flow\n   1 \n   2 const { JSDOM } = require('jsdom');\n   3 const Node = require('jsdom/lib/jsdom/living/node-document-position');\n   4 \n   5 // We can use jsdom-global at some point if maintaining that list turns out to be a burden.\n   6 const KEYS = ['HTMLElement', 'Performance'];\n   7 \n   8 function createDOM() {\n   9   const dom = new JSDOM('', { pretendToBeVisual: true });\n  10   global.window = dom.window;\n ...
```
========================================================================================================================
AGENT:
<thinking>
The issue is that in newer Node.js versions, `global.navigator` is read-only. Let me fix this by using `Object.defineProperty` instead of direct assignment. However, this is a test infrastructure issue, not related to my changes. Let me try a different approach - I'll create a simple test script to verify the component works correctly.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: "cd /workspace && cat > test_labelplacement.js << 'EOF'\n// Simple test to\
  \ verify the FormControlLabel labelPlacement implementation\nconst fs = require('fs');\n\
  \n// Read the FormControlLabel.js file\nconst content = fs.readFileSync('packages/material-ui/src/FormControlLabel/FormControlLabel.js',\
  \ 'utf8');\n\n// Check for the new styles\nconst hasLabelPlacementStart = content.includes('labelPlacementStart');\n\
  const hasLabelPlacementTop = content.includes('labelPlacementTop');\nconst hasLabelPlacementBottom\
  \ = content.includes('labelPlacementBottom');\nconst hasFlexDirectionRowReverse\
  \ = content.includes(\"flexDirection: 'row-reverse'\");\nconst hasFlexDirectionColumnReverse\
  \ = content.includes(\"flexDirection: 'column-reverse'\");\nconst hasFlexDirectionColumn\
  \ = content.includes(\"flexDirection: 'column'\");\nconst hasLabelPlacementProp\
  \ = content.includes(\"labelPlacement: PropTypes.oneOf(['end', 'start', 'top', 'bottom'])\"\
  );\nconst hasDefaultProp = content.includes(\"labelPlacement: 'end'\");\n\nconsole.log('Checking\
  \ FormControlLabel.js implementation:');\nconsole.log('- Has labelPlacementStart\
  \ style:', hasLabelPlacementStart);\nconsole.log('- Has labelPlacementTop style:',\
  \ hasLabelPlacementTop);\nconsole.log('- Has labelPlacementBottom style:', hasLabelPlacementBottom);\n\
  console.log('- Has flexDirection row-reverse:', hasFlexDirectionRowReverse);\nconsole.log('-\
  \ Has flexDirection column-reverse:', hasFlexDirectionColumnReverse);\nconsole.log('-\
  \ Has flexDirection column:', hasFlexDirectionColumn);\nconsole.log('- Has labelPlacement\
  \ PropType:', hasLabelPlacementProp);\nconsole.log('- Has default labelPlacement\
  \ prop:', hasDefaultProp);\n\n// Read the TypeScript definitions\nconst dtsContent\
  \ = fs.readFileSync('packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts',\
  \ 'utf8');\nconst hasLabelPlacementType = dtsContent.includes(\"labelPlacement?:\
  \ 'end' | 'start' | 'top' | 'bottom'\");\nconst hasClassKeys = dtsContent.includes('labelPlacementStart')\
  \ && dtsContent.includes('labelPlacementTop') && dtsContent.includes('labelPlacementBottom');\n\
  \nconsole.log('\\nChecking FormControlLabel.d.ts:');\nconsole.log('- Has labelPlacement\
  \ type:', hasLabelPlacementType);\nconsole.log('- Has class keys:', hasClassKeys);\n\
  \n// Read the test file\nconst testContent = fs.readFileSync('packages/material-ui/src/FormControlLabel/FormControlLabel.test.js',\
  \ 'utf8');\nconst hasLabelPlacementTests = testContent.includes(\"describe('prop:\
  \ labelPlacement'\");\n\nconsole.log('\\nChecking FormControlLabel.test.js:');\n\
  console.log('- Has labelPlacement tests:', hasLabelPlacementTests);\n\n// Summary\n\
  const allPassed = hasLabelPlacementStart && hasLabelPlacementTop && hasLabelPlacementBottom\
  \ &&\n  hasFlexDirectionRowReverse && hasFlexDirectionColumnReverse && hasFlexDirectionColumn\
  \ &&\n  hasLabelPlacementProp && hasDefaultProp && hasLabelPlacementType && hasClassKeys\
  \ && hasLabelPlacementTests;\n\nconsole.log('\\n===================');\nconsole.log('All\
  \ checks passed:', allPassed);\nif (!allPassed) {\n  process.exit(1);\n}\nEOF\n\
  node test_labelplacement.js"

========================================================================================================================
TOOL RETURN (bash)
```
Checking FormControlLabel.js implementation:
- Has labelPlacementStart style: true
- Has labelPlacementTop style: true
- Has labelPlacementBottom style: true
- Has flexDirection row-reverse: true
- Has flexDirection column-reverse: true
- Has flexDirection column: true
- Has labelPlacement PropType: true
- Has default labelPlacement prop: true

Checking FormControlLabel.d.ts:
- Has labelPlacement type: true
- Has class keys: true

Checking FormControlLabel.test.js:
- Has labelPlacement tests: tr...
```
========================================================================================================================
AGENT:
All the basic checks pass. Now let me try to fix the test setup to run the actual tests. Let me modify the createDOM.js file to work with newer Node.js versions:
========================================================================================================================
TOOL CALL (find_and_replace_code)
file_path: test/utils/createDOM.js
find: "  global.navigator = {\n    userAgent: 'node.js',\n    appVersion: global.navigator.appVersion,\n\
  \  };"
replace: "  Object.defineProperty(global, 'navigator', {\n    value: {\n      userAgent:\
  \ 'node.js',\n      appVersion: '',\n    },\n    writable: true,\n    configurable:\
  \ true,\n  });"

========================================================================================================================
TOOL RETURN (find_and_replace_code)
```
Successfully replaced code in test/utils/createDOM.js:

--- test/utils/createDOM.js
+++ test/utils/createDOM.js
@@ -27,10 +27,14 @@
     },
   });
 
-  global.navigator = {
-    userAgent: 'node.js',
-    appVersion: global.navigator.appVersion,
-  };
+  Object.defineProperty(global, 'navigator', {
+    value: {
+      userAgent: 'node.js',
+      appVersion: '',
+    },
+    writable: true,
+    configurable: true,
+  });
 
   KEYS.forEach(key => {
     global[key] = window[key];
...
```
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npx mocha --require test/utils/setup.js packages/material-ui/src/FormControlLabel/FormControlLabel.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```


  ․․․․․․․․․․․․․

  13 passing (111ms)...
```
========================================================================================================================
AGENT:
All 13 tests pass, including the new tests for `labelPlacement`. Let me also verify that the TypeScript definitions compile correctly:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npx tsc --noEmit packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
  2>&1
timeout: 60

========================================================================================================================
TOOL RETURN (bash)
```
packages/material-ui/src/styles/MuiThemeProvider.d.ts(13,19): error TS2304: Cannot find name 'Map'.
packages/material-ui/src/styles/MuiThemeProvider.d.ts(13,38): error TS2304: Cannot find name 'Map'....
```
========================================================================================================================
AGENT:
<thinking>
The TypeScript error is unrelated to my changes - it's a pre-existing issue with the MuiThemeProvider.d.ts file. Let me check if the FormControlLabel.d.ts file is syntactically correct by checking it in isolation.
</thinking>
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && cat packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts

========================================================================================================================
TOOL RETURN (bash)
```
import * as React from 'react';
import { StandardProps } from '..';

export interface FormControlLabelProps
  extends StandardProps<
      React.LabelHTMLAttributes<HTMLLabelElement>,
      FormControlLabelClassKey,
      'onChange'
    > {
  checked?: boolean | string;
  control: React.ReactElement<any>;
  disabled?: boolean;
  inputRef?: React.Ref<any>;
  label: React.ReactNode;
  labelPlacement?: 'end' | 'start' | 'top' | 'bottom';
  name?: string;
  onChange?: (event: React.ChangeEvent<{}>, ...
```
========================================================================================================================
AGENT:
The TypeScript definitions look correct. Let me also verify the final implementation by viewing all the modified files:
========================================================================================================================
TOOL CALL (open_files)
file_paths:
- packages/material-ui/src/FormControlLabel/FormControlLabel.js
- packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts
- packages/material-ui/src/FormControlLabel/FormControlLabel.test.js

========================================================================================================================
TOOL RETURN (open_files)
```
['Successfully opened packages/material-ui/src/FormControlLabel/FormControlLabel.js:\n\n````javascript\n   0 /* eslint-disable jsx-a11y/label-has-for */\n   1 \n   2 import React from \'react\';\n   3 import PropTypes from \'prop-types\';\n   4 import classNames from \'classnames\';\n   5 import withStyles from \'../styles/withStyles\';\n   6 import Typography from \'../Typography\';\n   7 \n   8 export const styles = theme => ({\n   9   /* Styles applied to the root element. */\n  10   root: {\...
```
========================================================================================================================
AGENT:
All the files look correct. Let me clean up the temporary test file I created:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && rm test_labelplacement.js

========================================================================================================================
TOOL RETURN (bash)
```
...
```
========================================================================================================================
AGENT:
Now let me run a broader set of tests to make sure I haven't broken anything else:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npx mocha --require test/utils/setup.js packages/material-ui/src/FormControlLabel/*.test.js
  packages/material-ui/src/Switch/*.test.js packages/material-ui/src/Checkbox/*.test.js
  packages/material-ui/src/Radio/*.test.js 2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```


  ․․․․․․․․․․․․․․․․․․․․․․․․․

  25 passing (149ms)...
```
========================================================================================================================
AGENT:
All 25 tests pass. Let me also verify that the implementation works correctly by checking if there are any regression tests or demos that might need updating:
========================================================================================================================
TOOL CALL (grep)
content_pattern: FormControlLabel
path_glob: '**/demos/**/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
docs/src/pages/demos/lists/InteractiveList.js:13:import FormControlLabel from '@material-ui/core/FormControlLabel';
docs/src/pages/demos/lists/InteractiveList.js:54:          <FormControlLabel
docs/src/pages/demos/lists/InteractiveList.js:64:          <FormControlLabel
docs/src/pages/demos/selection-controls/CheckboxLabels.js:6:import FormControlLabel from '@material-ui/core/FormControlLabel';
docs/src/pages/demos/selection-controls/CheckboxLabels.js:47:        <FormControlLabel
docs/src/pages/d...
```
========================================================================================================================
AGENT:
<thinking>
The demos are using `FormControlLabel` but they don't need to be updated since the default value for `labelPlacement` is `'end'`, which maintains backward compatibility.

Let me also check if there are any regression tests that might need updating:
</thinking>
========================================================================================================================
TOOL CALL (grep)
content_pattern: FormControlLabel
path_glob: '**/regressions/**/*.js'

========================================================================================================================
TOOL RETURN (grep)
```
test/regressions/tests/RadioGroup/RadioGroupWithLabelError.js:6:import FormControlLabel from '@material-ui/core/FormControlLabel';
test/regressions/tests/RadioGroup/RadioGroupWithLabelError.js:15:        <FormControlLabel value="home" control={<Radio />} label="Home" />
test/regressions/tests/RadioGroup/RadioGroupWithLabelError.js:16:        <FormControlLabel value="work" control={<Radio />} label="Work" />
test/regressions/tests/RadioGroup/RadioGroupWithLabel.js:6:import FormControlLabel from '...
```
========================================================================================================================
AGENT:
The regression tests also don't need to be updated since they use the default label placement.

Let me also verify that the test setup fix I made doesn't break other tests:
========================================================================================================================
TOOL CALL (bash)
command: cd /workspace && npx mocha --require test/utils/setup.js packages/material-ui/src/Switch/Switch.test.js
  packages/material-ui/src/Radio/Radio.test.js packages/material-ui/src/Checkbox/Checkbox.test.js
  2>&1
timeout: 120

========================================================================================================================
TOOL RETURN (bash)
```


  ․․․․․․․․․․․․

  12 passing (67ms)...
```
========================================================================================================================
AGENT:
All tests pass. Let me now summarize the changes I made:

## Summary of Changes

I've implemented the `labelPlacement` prop for the `FormControlLabel` component to allow users to position the label relative to the control (Switch, Checkbox, Radio, etc.).

### Files Modified:

1. **`packages/material-ui/src/FormControlLabel/FormControlLabel.js`**:
   - Added new CSS styles for `labelPlacementStart`, `labelPlacementTop`, and `labelPlacementBottom`
   - Added `labelPlacement` prop to the component
   - Added conditional class application based on `labelPlacement` value
   - Added PropTypes definition for `labelPlacement` with values `'end'`, `'start'`, `'top'`, `'bottom'`
   - Added default prop value of `'end'` to maintain backward compatibility

2. **`packages/material-ui/src/FormControlLabel/FormControlLabel.d.ts`**:
   - Added `labelPlacement` prop type definition
   - Added new class keys to `FormControlLabelClassKey` type

3. **`packages/material-ui/src/FormControlLabel/FormControlLabel.test.js`**:
   - Added tests for the `labelPlacement` prop with `'start'`, `'top'`, and `'bottom'` values

4. **`test/utils/createDOM.js`**:
   - Fixed a compatibility issue with newer Node.js versions where `global.navigator` is read-only

### Usage:

Now users can position the label to the left of the switch (or any other control) like this:

```jsx
<FormControlLabel
  control={<Switch />}
  label="My Label"
  labelPlacement="start"
/>
```

Available values for `labelPlacement`:
- `'end'` (default) - Label on the right
- `'start'` - Label on the left
- `'top'` - Label above the control
- `'bottom'` - Label below the control
========================================================================================================================
AGENT:
Successfully implemented the `labelPlacement` prop for the `FormControlLabel` component. Users can now position the label to the left of the Switch (or any other control) by using `labelPlacement="start"`. The implementation includes:

1. **FormControlLabel.js**: Added new CSS styles (`labelPlacementStart`, `labelPlacementTop`, `labelPlacementBottom`) using flexbox `flex-direction` to control label positioning. Added the `labelPlacement` prop with values `'end'` (default), `'start'`, `'top'`, and `'bottom'`.

2. **FormControlLabel.d.ts**: Updated TypeScript definitions with the new prop and class keys.

3. **FormControlLabel.test.js**: Added unit tests for all label placement options.

4. **test/utils/createDOM.js**: Fixed a Node.js compatibility issue to allow tests to run.

All 13 FormControlLabel tests pass, and the implementation is backward compatible (default is `'end'` which maintains the current behavior).